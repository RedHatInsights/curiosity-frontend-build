(this["webpackJsonpcuriosity-frontend"]=this["webpackJsonpcuriosity-frontend"]||[]).push([[1],{1247:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a(45),n=a(3),i={getGranularityOptions:function(e){return"default"===e?{selected:n.b.DAILY,options:[{title:Object(r.b)("curiosity-graph.dropdownDaily"),value:n.b.DAILY,selected:!0},{title:Object(r.b)("curiosity-graph.dropdownWeekly"),value:n.b.WEEKLY},{title:Object(r.b)("curiosity-graph.dropdownMonthly"),value:n.b.MONTHLY},{title:Object(r.b)("curiosity-graph.dropdownQuarterly"),value:n.b.QUARTERLY}]}:{options:[]}}}},1592:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a(12),n=a(13),i=a(315),o=a(14),l=a(15),s=a(0),c=a.n(s),u=a(17),d=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).containerRef=c.a.createRef(),e.innerContainerRef=c.a.createRef(),e.updatedMinHeight=0,e.updatedContainerWidth=0,e.resizeObserver=u.b.noop,e.onResizeContainer=function(){var t,a,r=Object(i.a)(e).updatedContainerWidth,n=(null===(t=e.containerRef)||void 0===t||null===(a=t.current)||void 0===a?void 0:a.clientWidth)||0;n!==r&&(e.updatedContainerWidth=n,e.setMinHeight(!0))},e}return Object(n.a)(a,[{key:"componentDidMount",value:function(){this.setMinHeight(),this.setResizeObserver()}},{key:"componentDidUpdate",value:function(){this.props.autoUpdate&&this.setMinHeight()}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setMinHeight",value:function(e){var t=this.updatedMinHeight,a=this.props.minHeight,r=this.containerRef.current,n=void 0===r?{}:r,i=this.innerContainerRef.current,o=void 0===i?{}:i;e&&n.style&&(n.style.minHeight=(null===o||void 0===o?void 0:o.clientHeight)||0);var l=(null===n||void 0===n?void 0:n.clientHeight)||0;l!==t&&(this.updatedMinHeight=l),a>this.updatedMinHeight&&(this.updatedMinHeight=a)}},{key:"setResizeObserver",value:function(){var e=this,t=this.containerRef.current,a=window.ResizeObserver;if(t&&a){var r=new a(this.onResizeContainer);r.observe(t),this.resizeObserver=function(){return r.unobserve(t)}}else window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",e.onResizeContainer)}}},{key:"render",value:function(){var e=this.updatedMinHeight,t=this.props.children;return c.a.createElement("div",{ref:this.containerRef,style:{minHeight:e}},c.a.createElement("div",{ref:this.innerContainerRef},t))}}]),a}(c.a.Component);d.defaultProps={autoUpdate:!1,minHeight:0}},1598:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var r=a(10),n=a(2),i=a(11),o=a(12),l=a(13),s=a(14),c=a(15),u=a(0),d=a.n(u),p=a(2958),h=a(2942),f=a(809),v=a(810),m=a(62),g=a(45),b=a(17),y=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={},e}return Object(l.a)(a,[{key:"renderAlerts",value:function(){var e=this,t=this.state,a=this.props,o=a.appMessages,l=a.messages,s=[];return l.length&&Object.entries(o).forEach((function(e){var a=Object(i.a)(e,2),r=a[0],o=a[1];if(!0!==t[r]&&!0===o){var c=l.find((function(e){return e.id===r}));c&&s.push(Object(n.a)({key:r},c))}})),s.map((function(t){var a=t.key,n=t.message,i=t.title,o=t.variant,l=void 0===o?p.b.info:o,s=d.a.createElement(h.a,{onClose:function(){return e.setState(Object(r.a)({},a,!0))}});return d.a.createElement(p.a,{actionClose:s,key:a,title:i,variant:l},n)}))}},{key:"render",value:function(){var e=this.renderAlerts();return e.length?d.a.createElement("div",{className:"curiosity-banner-messages"},e):null}}]),a}(d.a.Component);y.defaultProps={messages:[{id:"cloudigradeMismatch",title:Object(g.b)("curiosity-banner.dataMismatchTitle"),message:Object(g.b)("curiosity-banner.dataMismatchMessage",{context:""!==b.b.UI_LINK_REPORT_ACCURACY_RECOMMENDATIONS&&"cloudigradeMismatch",appName:b.b.UI_DISPLAY_NAME},[d.a.createElement(f.a,{isInline:!0,component:"a",variant:"link",icon:d.a.createElement(v.a,null),iconPosition:"right",target:"_blank",href:b.b.UI_LINK_REPORT_ACCURACY_RECOMMENDATIONS})])}]};var O=m.e.appMessages.makeAppMessages(),E=Object(m.b)(O)(y)},1602:function(e,t,a){"use strict";a.d(t,"a",(function(){return X}));var r=a(10),n=a(2),i=a(12),o=a(13),l=a(14),s=a(15),c=a(0),u=a.n(c),d=a(2890),p=a(2891),h=a(2892),f=a(814),v=a(2938),m=a(2893),g=a(2937),b=a(84),y=a.n(b),O=a(966),E=a(62),T=a(17),D=a(3),k=a(153),S=a.n(k),j=function(e){var t=e.date,a=e.granularity,r=S.a.utc(t);switch(a){case D.b.QUARTERLY:return"".concat(r.format(T.a.timestampQuarterFormats.yearShort)," - ").concat(r.add(1,"quarter").format(T.a.timestampQuarterFormats.yearShort));case D.b.MONTHLY:return r.format(T.a.timestampMonthFormats.yearLong);case D.b.WEEKLY:return"".concat(r.format(T.a.timestampDayFormats.short)," - ").concat(r.add(1,"week").format(T.a.timestampDayFormats.yearShort));case D.b.DAILY:default:return r.format(T.a.timestampDayFormats.long)}},I=function(e){var t=e.tick,a=Math.abs(t),r=t,n="";return a>=Math.pow(10,12)?(n="T",r=t/Math.pow(10,12)):a<Math.pow(10,12)&&a>=Math.pow(10,9)?(n="B",r=t/Math.pow(10,9)):a<Math.pow(10,9)&&a>=Math.pow(10,6)?(n="M",r=t/Math.pow(10,6)):a<Math.pow(10,6)&&a>=Math.pow(10,3)&&(n="K",r=t/Math.pow(10,3)),"".concat(r).concat(n)},C={getChartXAxisLabelIncrement:function(e){switch(e){case D.b.DAILY:return 5;case D.b.WEEKLY:case D.b.MONTHLY:return 2;case D.b.QUARTERLY:default:return 1}},getTooltipDate:j,xAxisTickFormat:function(e){var t=e.date,a=e.granularity,r=e.tick,n=e.previousDate;if(t&&a){var i,o=S.a.utc(t),l=0!==r&&Number.parseInt(o.year(),10)!==Number.parseInt(S.a.utc(n).year(),10);switch(a){case D.b.QUARTERLY:i=(i=l?o.format(T.a.timestampQuarterFormats.yearShort):o.format(T.a.timestampQuarterFormats.short)).replace(/\s/,"\n");break;case D.b.MONTHLY:i=(i=l?o.format(T.a.timestampMonthFormats.yearShort):o.format(T.a.timestampMonthFormats.short)).replace(/\s/,"\n");break;case D.b.WEEKLY:case D.b.DAILY:default:i=(i=l?o.format(T.a.timestampDayFormats.yearShort):o.format(T.a.timestampDayFormats.short)).replace(/\s(\d{4})$/,"\n$1")}return i}},yAxisTickFormat:function(e){var t=e.tick,a=e.locale,r=void 0===a?T.b.UI_LOCALE_DEFAULT:a,n="".concat(new Intl.NumberFormat(r,{maximumFractionDigits:1,notation:"compact",compactDisplay:"short"}).format(t));return n.length>3&&n.length>="".concat(t).length&&(n=I({tick:t})),n},yAxisTickFormatFallback:I},L=a(1247),A=a(45),R=function(e){var t=e.datum,a=e.granularity,r=e.productLabel,n=e.t,i=null,o=[],l=(t||{}).itemsByKey,s=void 0===l?{}:l;return Object.keys(s).forEach((function(e,t){var l,c;0===t&&(i=j({date:null===(c=s[e])||void 0===c?void 0:c.data.date,granularity:a}));var u={color:null===(l=s[e])||void 0===l?void 0:l.color};if(/^threshold/.test(e)){var d,p,h,f=(null===(d=s[e])||void 0===d?void 0:d.data.hasInfinite)&&n("curiosity-graph.infiniteThresholdLabel")||(null!==(p=null===(h=s[e])||void 0===h?void 0:h.data.y)&&void 0!==p?p:n("curiosity-graph.noDataLabel"));u.label=n("curiosity-graph.thresholdLabel"),u.value=f}else{var v,m,g=!1===(null===(v=s[e])||void 0===v?void 0:v.data.hasData)&&n("curiosity-graph.noDataLabel")||(null===(m=s[e])||void 0===m?void 0:m.data.y)||0;u.label=n("curiosity-graph.".concat(e,"Label"),{product:r}),u.value=g}o.push(u)})),u.a.createElement("div",{className:"victory-tooltip"},u.a.createElement("table",{summary:n("curiosity-graph.tooltipSummary")},o.length&&i&&u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{colSpan:2},i)))||null,o.length&&u.a.createElement("tbody",null,o.map((function(e){return u.a.createElement("tr",{key:"tooltip-".concat(e.label)},u.a.createElement("th",null,u.a.createElement("div",{"aria-hidden":!0,className:"legend-icon victory-legend-icon",style:{backgroundColor:e.color||"transparent"}}),e.label),u.a.createElement("td",null,e.value))})))||null),!o.length&&n("curiosity-graph.noDataErrorLabel")||null)};R.defaultProps={datum:{},productLabel:"",t:A.b};var x=a(809),w=a(794),F=a(2930),M=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).onClick=function(t){var a=e.props,n=a.chart,i=a.viewId,o=n.toggle(t);E.g.dispatch({type:E.f.graph.SET_GRAPH_LEGEND,legend:Object(r.a)({},"".concat(i,"-").concat(t),o)})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.chart,a=e.datum,r=e.legend,n=e.viewId;a.dataSets.forEach((function(e){var a=e.id;(r["".concat(n,"-").concat(a)]||t.isToggled(a))&&t.hide(a)}))}},{key:"renderLegendItem",value:function(e){var t=this,a=e.chartId,r=e.color,n=e.isDisabled,i=e.isThreshold,o=e.labelContent,l=e.tooltipContent,s=this.props,c=s.chart,d=s.legend,p=s.viewId,h=d["".concat(p,"-").concat(a)]||c.isToggled(a),f=u.a.createElement(x.a,{onClick:function(){return t.onClick(a)},onKeyPress:function(){return t.onClick(a)},className:"victory-legend-item",tabIndex:0,key:"curiosity-button-".concat(a),variant:"link",component:"a",isDisabled:n,icon:(n||h)&&u.a.createElement(F.a,null)||i&&u.a.createElement("hr",{"aria-hidden":!0,className:"threshold-legend-icon",style:{visibility:n||h?"hidden":"visible",borderTopColor:r}})||u.a.createElement("div",{"aria-hidden":!0,className:"legend-icon",style:{visibility:n||h?"hidden":"visible",backgroundColor:r}})},o);return l?u.a.createElement(w.a,{key:"curiosity-tooltip-".concat(a),content:u.a.createElement("p",null,l),position:w.b.top,enableFlip:!1,distance:5,entryDelay:100,exitDelay:0},f):f}},{key:"render",value:function(){var e=this,t=this.props,a=t.datum,r=t.productLabel,n=t.t;return u.a.createElement(u.a.Fragment,null,a.dataSets.map((function(t){var a=t.id,i=t.isThreshold,o=t.stroke,l=t.data,s=!(void 0===l?[]:l).find((function(e){var t=e.y,a=e.hasData;return t>=0&&!0===a||t>=0&&!0===i}))||!1,c=i&&n(["curiosity-graph.".concat(a,"Label"),"curiosity-graph.thresholdLabel"],{product:r,context:r})||n(["curiosity-graph.".concat(a,"Label"),"curiosity-graph.noLabel"],{product:r,context:r}),u=i&&n(["curiosity-graph.".concat(a,"LegendTooltip"),"curiosity-graph.thresholdLegendTooltip"],{product:r,context:r})||n("curiosity-graph.".concat(a,"LegendTooltip"),{product:r,context:r});return e.renderLegendItem({chartId:a,color:o,labelContent:c,isDisabled:s,isThreshold:i,tooltipContent:u})})))}}]),a}(u.a.Component);M.defaultProps={chart:{hide:T.b.noop,toggle:T.b.noop,isToggled:T.b.noop},datum:{dataSets:[]},legend:{},productLabel:"",t:A.b,viewId:"graphCardLegend"};var N=Object(E.b)((function(e){return{legend:e.graph.legend}}))(M),P=a(2957),_=a(2961),G=a(2963),U=a(2955),Y=a(2936),H=a(2966),q=a(1242),Q=a.n(q),W=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var o=arguments.length,l=new Array(o),s=0;s<o;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={chartWidth:0},e.dataSetsToggle={},e.resizeObserver=T.b.noop,e.containerRef=u.a.createRef(),e.tooltipRef=u.a.createRef(),e.onHide=function(t){e.dataSetsToggle=Object(n.a)({},e.dataSetsToggle,Object(r.a)({},t,!0)),e.forceUpdate()},e.onRevert=function(){e.dataSetsToggle={},e.forceUpdate()},e.onToggle=function(t){var a=!e.dataSetsToggle[t];return e.dataSetsToggle=Object(n.a)({},e.dataSetsToggle,Object(r.a)({},t,a)),e.forceUpdate(),a},e.onResizeContainer=function(){var t=e.state.chartWidth,a=(e.containerRef.current||{}).clientWidth,r=void 0===a?0:a;r!==t&&e.setState({chartWidth:r})},e.getIsToggled=function(t){return e.dataSetsToggle[t]||!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setResizeObserve()}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setResizeObserve",value:function(){var e=this,t=this.containerRef.current,a=window.ResizeObserver;if(t&&a){var r=new a(this.onResizeContainer);r.observe(t),this.resizeObserver=function(){return r.unobserve(t)}}else this.onResizeContainer(),window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",e.onResizeContainer)}}},{key:"setChartTicks",value:function(){var e=this.props,t=e.xAxisLabelIncrement,a=e.xAxisTickFormat,r=e.yAxisTickFormat,i=e.dataSets,o={},l={},s=i.length&&i[0].data||[];return i.forEach((function(e){e.xAxisLabelUseDataSet&&(s=e.data)})),o.xAxisTickValues=s.reduce((function(e,a,r){return r%t===0?e.concat(a.x):e}),[]),o.xAxisTickFormat=function(e){return s[e]&&s[e].xAxisLabel||e},"function"===typeof a&&(o.xAxisTickFormat=function(e){var t=o.xAxisTickValues,r=t.indexOf(e),i=Object(n.a)({},s[t[r-1]]||{}),l=Object(n.a)({},s[t[r+1]]||{}),c=Object(n.a)({},s[e]||{});return a({tick:e,previousItem:i,item:c,nextItem:l})}),"function"===typeof r&&(l.yAxisTickFormat=function(e){return r({tick:e})}),Object(n.a)({},o,{},l)}},{key:"getChartTicks",value:function(){var e=this.props.xAxisFixLabelOverlap,t=this.setChartTicks(),a=t.xAxisTickValues,r=t.xAxisTickFormat,n=t.yAxisTickFormat,i={fixLabelOverlap:e},o={dependentAxis:!0,showGrid:!0};return a&&(i.tickValues=a),r&&(i.tickFormat=r),n&&(o.tickFormat=n),{isXAxisTicks:!!a,xAxisProps:i,yAxisProps:o}}},{key:"getChartDomain",value:function(e){var t=e.isXAxisTicks,a=this.dataSetsToggle,r=this.props,i=r.domain,o=r.dataSets;if(Object.keys(i).length)return i;var l={},s={},c=0,u=0;o.filter((function(e){return!0===e.isStacked})).forEach((function(e){if(!a[e.id]&&e.data){var t=0;e.data.forEach((function(a,r){t=a&&a.y>t?a.y:t,r===e.data.length-1&&(u+=t)}))}})),o.forEach((function(e){!a[e.id]&&e.data&&(c=e.data.length>c?e.data.length:c,e.data.forEach((function(e){u=e&&e.y>u?e.y:u})))})),t||(l.x=[0,c||10]);var d=Math.pow(10,Math.floor(Math.log10(u>10&&u||10)));return l.y=[0,Math.ceil((u+1)/d)*d],Object.keys(l).length&&(s.domain=l),{maxY:u,chartDomain:Object(n.a)({},s)}}},{key:"getTooltipData",value:function(){var e=this.dataSetsToggle,t=this.props,a=t.dataSets,r=t.chartTooltip,i=[];return r&&a&&a[0]&&a[0].data&&(i=a[0].data.map((function(t,i){var o={};a.forEach((function(t){!e[t.id]&&t.data&&t.data[i]&&(o[t.id]={color:t.stroke||t.fill||t.color||"",data:Q()(t.data[i])})}));var l={datum:{x:t.x,y:t.y,index:i,itemsByKey:o,dataSets:Q()(a)}};return{x:t.x,y:null,itemsByKey:o,tooltip:u.a.isValidElement(r)&&u.a.cloneElement(r,Object(n.a)({},l))||r(Object(n.a)({},l))}}))),i}},{key:"renderTooltip",value:function(){var e=this,t=this.dataSetsToggle,a=this.props,r=a.chartTooltip,i=a.dataSets;if(!r||Object.values(t).filter((function(e){return!0===e})).length===i.length)return null;var o=Object(P.a)("voronoi","cursor"),l=this.getTooltipData(),s={},c={},d=function(t){var a=e.containerRef.current,r=e.tooltipRef.current,i=a&&a.getBoundingClientRect()||{},o=r&&r.getBoundingClientRect()||{};i.right&&(s=i),o.right&&(c=o);var d=t.x+10;(s.right<c.right||t.x+c.width>s.right/2)&&(d=t.x-10-c.width);var p=function(e){var t=e.datum,a=l.find((function(e){return e.x===t.x}))||{};return(null===a||void 0===a?void 0:a.tooltip)||""}(Object(n.a)({},t));return p?u.a.createElement("g",null,u.a.createElement("foreignObject",{x:d,y:t.y/2.2,width:"100%",height:"100%"},u.a.createElement("div",{ref:e.tooltipRef,style:{display:"inline-block"},xmlns:"http://www.w3.org/1999/xhtml"},p))):u.a.createElement("g",null)};return u.a.createElement(o,{cursorDimension:"x",labels:function(e){return e},labelComponent:u.a.createElement(d,null),voronoiPadding:60})}},{key:"renderLegend",value:function(){var e=this.props,t=e.chartLegend,a=e.dataSets;if(!t)return null;var r={datum:{dataSets:Q()(a)},chart:{hide:this.onHide,revert:this.onRevert,toggle:this.onToggle,isToggled:this.getIsToggled}};return u.a.isValidElement(t)&&u.a.cloneElement(t,Object(n.a)({},r))||t(Object(n.a)({},r))}},{key:"renderChart",value:function(e){var t=e.stacked,a=void 0!==t&&t,r=this.dataSetsToggle,i=this.props.dataSets,o=[],l=[];return i.forEach((function(e,t){if(!r[e.id]&&e.data&&e.data.length){var a=e.isThreshold&&function(e,t){var a={data:{}};return e.fill&&(a.data.fill=e.fill),e.stroke&&(a.data.stroke=e.stroke),e.strokeWidth&&(a.data.strokeWidth=e.strokeWidth),e.strokeDasharray&&(a.data.strokeDasharray=e.strokeDasharray),u.a.createElement(_.a,{animate:e.animate||!1,interpolation:e.interpolation||"step",key:T.b.generateId(),name:"chartArea-".concat(t,"-threshold"),data:e.data,style:Object(n.a)({},e.style||{},{},a),themeColor:e.themeColor,themeVariant:e.themeVariant})}(e,t)||function(e,t){var a={data:{}};return e.fill&&(a.data.fill=e.fill),e.stroke&&(a.data.stroke=e.stroke),e.strokeWidth&&(a.data.strokeWidth=e.strokeWidth),u.a.createElement(G.a,{animate:e.animate||!1,interpolation:e.interpolation||"monotoneX",key:T.b.generateId(),name:"chartArea-".concat(t,"-area"),data:e.data,style:Object(n.a)({},e.style||{},{},a),themeColor:e.themeColor,themeVariant:e.themeVariant})}(e,t);e.isStacked?l.push(a):o.push(a)}})),a&&l||o}},{key:"render",value:function(){var e=this.state.chartWidth,t=this.props,a=t.chartLegend,r=t.padding,i=t.themeColor,o=this.getChartTicks(),l=o.isXAxisTicks,s=o.xAxisProps,c=o.yAxisProps,d=this.getChartDomain({isXAxisTicks:l}),p=d.chartDomain,h={containerComponent:d.maxY>=0&&this.renderTooltip()||void 0},f=Object(n.a)({padding:r},p,{},h);return u.a.createElement("div",{id:"curiosity-chartarea",className:"uxui-curiosity__modal uxui-curiosity__modal--loading",ref:this.containerRef},u.a.createElement(U.a,Object.assign({animate:{duration:0},width:e,themeColor:i},f),u.a.createElement(Y.a,Object.assign({},s,{animate:!1})),u.a.createElement(Y.a,Object.assign({},c,{animate:!1})),this.renderChart({}),u.a.createElement(H.a,null,this.renderChart({stacked:!0}))),a&&u.a.createElement("div",{className:"curiosity-chartarea-description victory-legend"},this.renderLegend()))}}]),a}(u.a.Component);W.defaultProps={chartLegend:null,chartTooltip:null,domain:{},dataSets:[],height:275,padding:{bottom:75,left:50,right:50,top:50},themeColor:"blue",xAxisFixLabelOverlap:!1,xAxisLabelIncrement:1,xAxisTickFormat:null,yAxisTickFormat:null};var z=a(166),V=a(1592),B=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var o=arguments.length,l=new Array(o),s=0;s<o;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).onUpdateGraphData=function(){var t=e.props,a=t.getGraphReportsCapacity,i=t.isDisabled,o=t.productId,l=t.query,s=e.getQueryGranularity();if(!i&&s&&o){var c,u=T.a.getRangedDateTime(s),d=u.startDate,p=u.endDate;a(o,Object(n.a)((c={},Object(r.a)(c,D.f.START_DATE,d.toISOString()),Object(r.a)(c,D.f.END_DATE,p.toISOString()),c),l))}},e.onGranularitySelect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value,n=e.props.viewId;E.g.dispatch(Object(r.a)({type:E.f.query.SET_QUERY_RHSM_TYPES[D.f.GRANULARITY],viewId:n},D.f.GRANULARITY,a))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.onUpdateGraphData()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.productId,r=t.query;a===e.productId&&y()(r,e.query)||this.onUpdateGraphData()}},{key:"getQueryGranularity",value:function(){var e=this.props.query;return null===e||void 0===e?void 0:e[D.f.GRANULARITY]}},{key:"renderChart",value:function(){var e=this.props,t=e.filterGraphData,a=e.graphData,r=e.selectOptionsType,n=e.productLabel,i=e.query,o=e.viewId,l=this.getQueryGranularity(),s=L.a.getGranularityOptions(r).selected,c=l||s,d={xAxisFixLabelOverlap:!0,xAxisLabelIncrement:C.getChartXAxisLabelIncrement(c),xAxisTickFormat:function(e){var t=e.item,a=e.previousItem,r=e.tick;return C.xAxisTickFormat({tick:r,date:t.date,previousDate:a.date,granularity:c})},yAxisTickFormat:C.yAxisTickFormat};return u.a.createElement(W,Object.assign({key:"chart_".concat(JSON.stringify(i))},d,{dataSets:function(e){var a=function(t){var a={data:e[t],id:t,animate:{duration:250,onLoad:{duration:250}},strokeWidth:2,isStacked:!/^threshold/.test(t),isThreshold:/^threshold/.test(t)};return/^threshold/.test(t)&&(a.animate={duration:100,onLoad:{duration:100}},a.stroke=g.a.value,a.strokeDasharray="4,3",a.strokeWidth=3),a};return t.length?t.map((function(e){return Object.assign(a(e.id),e)})):Object.keys(e).map((function(e){return a(e)}))}(a),chartLegend:function(e){var t=e.chart,a=e.datum;return u.a.createElement(N,{chart:t,datum:a,productLabel:n,viewId:o})},chartTooltip:function(e){var t=e.datum;return u.a.createElement(R,{datum:t,granularity:c,productLabel:n})}}))}},{key:"render",value:function(){var e=this.props,t=e.cardTitle,a=e.children,r=e.error,n=e.isDisabled,i=e.pending,o=e.selectOptionsType,l=e.t;if(n)return null;var s=L.a.getGranularityOptions(o).options,c=this.getQueryGranularity();return u.a.createElement(d.a,{className:"curiosity-usage-graph"},u.a.createElement(V.a,{key:"headerMinHeight"},u.a.createElement(p.a,null,u.a.createElement(h.a,null,u.a.createElement(f.a,{headingLevel:"h2",size:"lg"},t)),u.a.createElement(v.a,{className:r?"blur":""},a,u.a.createElement(O.a,{"aria-label":l("curiosity-graph.dropdownPlaceholder"),onSelect:this.onGranularitySelect,options:s,selectedOptions:c,placeholder:l("curiosity-graph.dropdownPlaceholder")})))),u.a.createElement(V.a,{key:"bodyMinHeight"},u.a.createElement(m.a,null,u.a.createElement("div",{className:r?"blur":"fadein"},i&&u.a.createElement(z.a,{variant:"graph"}),!i&&this.renderChart()))))}}]),a}(u.a.Component);B.defaultProps={cardTitle:null,children:null,error:!1,filterGraphData:[],getGraphReportsCapacity:T.b.noop,graphData:{},isDisabled:T.b.UI_DISABLED_GRAPH,pending:!1,productLabel:"",selectOptionsType:"default",t:A.b,viewId:"graphCard"};var K=E.e.graphCard.makeGraphCard(),X=Object(E.b)(K,(function(e){return{getGraphReportsCapacity:function(t,a){return e(E.d.rhsm.getGraphReportsCapacity(t,a))}}}))(B)},1603:function(e,t,a){"use strict";a.d(t,"a",(function(){return q}));var r=a(8),n=a(10),i=a(2),o=a(12),l=a(13),s=a(14),c=a(15),u=a(0),d=a.n(u),p=a(2890),h=a(2891),f=a(2892),v=a(814),m=a(2938),g=a(2893),b=a(84),y=a.n(b),O=a(966),E=a(62),T=a(17),D=a(3),k=a(153),S=a.n(k),j=a(2937),I=a(45),C=function(e){var t=e.date,a=e.granularity,r=S.a.utc(t);switch(a){case D.b.QUARTERLY:return"".concat(r.format(T.a.timestampQuarterFormats.yearShort)," - ").concat(r.add(1,"quarter").format(T.a.timestampQuarterFormats.yearShort));case D.b.MONTHLY:return r.format(T.a.timestampMonthFormats.yearLong);case D.b.WEEKLY:return"".concat(r.format(T.a.timestampDayFormats.short)," - ").concat(r.add(1,"week").format(T.a.timestampDayFormats.yearShort));case D.b.DAILY:default:return r.format(T.a.timestampDayFormats.long)}},L=function(e){var t=e.date,a=e.granularity,r=e.tick,n=e.previousDate;if(t&&a){var i,o=S.a.utc(t),l=0!==r&&Number.parseInt(o.year(),10)!==Number.parseInt(S.a.utc(n).year(),10);switch(a){case D.b.QUARTERLY:i=(i=l?o.format(T.a.timestampQuarterFormats.yearShort):o.format(T.a.timestampQuarterFormats.short)).replace(/\s/,"\n");break;case D.b.MONTHLY:i=(i=l?o.format(T.a.timestampMonthFormats.yearShort):o.format(T.a.timestampMonthFormats.short)).replace(/\s/,"\n");break;case D.b.WEEKLY:case D.b.DAILY:default:i=(i=l?o.format(T.a.timestampDayFormats.yearShort):o.format(T.a.timestampDayFormats.short)).replace(/\s(\d{4})$/,"\n$1")}return i}},A=function(e){var t=e.tick,a=e.locale;return new Intl.NumberFormat(a,{maximumFractionDigits:1,notation:"compact",compactDisplay:"short"}).format(t)},R=function(e){var t=e.data,a=void 0===t?[]:t,r=e.granularity,n=e.productShortLabel,o=[],l={x:"x",colors:{},columns:[],groups:[[]],names:{},types:{}},s=function(e){return(T.b.TEST_MODE&&S.a.utc(e)||S.a.utc(e).local()).format("YYYY-MM-DD")};return a.forEach((function(e){/^threshold/.test(e.id)?(l.colors[e.id]=e.color||j.a.value,l.types[e.id]="step",l.names[e.id]=Object(I.b)("curiosity-graph.thresholdLabel")):(l.colors[e.id]=e.color,l.types[e.id]="area-spline",l.groups[0].push(e.id),l.names[e.id]=Object(I.b)("curiosity-graph.".concat(e.id,"Label"),{product:n})),l.columns[0]=["x"],l.columns.push([e.id]);var t=0;e.data.forEach((function(e){l.columns[0].push(s(e.date)),l.columns[l.columns.length-1].push(e.y),t+=e.y||0})),t<=0&&(l.columns.pop(),o.push(e.id))})),{hiddenDataFacets:o,configuration:{tooltip:{order:function(e,t){return l.columns.indexOf(e.id)-l.columns.indexOf(t.id)},format:{title:function(e){return C({date:e,granularity:r})},value:function(e,t,r,n){var i,o,l,s=null===(i=a.find((function(e){return r===e.id})))||void 0===i?void 0:i.data[n];/^threshold/.test(r)?o=(null===s||void 0===s?void 0:s.hasInfinite)&&Object(I.b)("curiosity-graph.infiniteThresholdLabel")||(null!==(l=null===s||void 0===s?void 0:s.y)&&void 0!==l?l:Object(I.b)("curiosity-graph.noDataLabel")):o=!1===(null===s||void 0===s?void 0:s.hasData)&&Object(I.b)("curiosity-graph.noDataLabel")||(null===s||void 0===s?void 0:s.y)||0;return o}}},unloadBeforeLoad:!0,padding:{left:40,right:40,top:10,bottom:10},legend:{show:!1},spline:{interpolation:{type:"monotone"}},data:Object(i.a)({},l),point:{show:!1},grid:{y:{show:!0}},axis:{x:{type:"timeseries",tick:{format:function(e){var t=l.columns[0].slice(1),a=s(e),n=t.indexOf(a),i=n>-1&&t[n-1];return L({tick:n,date:a,previousDate:i,granularity:r})}},padding:0},y:{default:[0,50],padding:{bottom:0},min:0,tick:{show:!1,outer:!1,format:function(e){return 0===e?"":A({tick:e})}}}}}}},x=a(809),w=a(794),F=a(2930),M=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={updatedIsToggled:null},e.onFocus=function(){var t=e.state.updatedIsToggled,a=e.props,r=a.chart,n=a.chartId,i=a.getToggle,o=a.isToggled;("function"!==typeof i||o)&&t||r.focus(n)},e.onRevert=function(){var t=e.state.updatedIsToggled,a=e.props,r=a.chart,n=a.getToggle,i=a.isToggled;("function"!==typeof n||i)&&t||r.revert()},e.onToggle=function(){var t=e.state.updatedIsToggled,a=e.props,r=a.chart,n=a.chartId,i=a.getToggle,o=a.isToggled;r.toggle(n),"function"===typeof i?i({isToggled:!o}):e.setState({updatedIsToggled:!t}),e.onRevert()},e.getColor=function(){var t=e.props,a=t.chart,r=t.chartId;return a.color(r)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.updatedIsToggled,t=this.props,a=t.children,r=t.chart,n=t.chartId,i=t.isDisabled,o=t.isThreshold,l=t.isToggled,s=t.tooltipContent,c=null===e&&"boolean"===typeof l&&l||e||!1;c&&r.hide(n);var u=d.a.createElement(x.a,{tabIndex:0,key:"curiosity-button-".concat(n),variant:"link",onClick:this.onToggle,onFocus:this.onFocus,onMouseOver:this.onFocus,onBlur:this.onRevert,onMouseOut:this.onRevert,onKeyPress:this.onToggle,component:"a",isDisabled:i,icon:(i||c)&&d.a.createElement(F.a,null)||o&&d.a.createElement("hr",{"aria-hidden":!0,className:"threshold-legend-icon",style:{visibility:i||c?"hidden":"visible",borderTopColor:this.getColor()}})||d.a.createElement("div",{"aria-hidden":!0,className:"legend-icon",style:{visibility:i||c?"hidden":"visible",backgroundColor:this.getColor()}})},a);return s?d.a.createElement(w.a,{key:"curiosity-tooltip-".concat(n),content:s,position:w.b.top,enableFlip:!1,distance:5,entryDelay:100,exitDelay:0},u):u}}]),a}(d.a.Component);M.defaultProps={chart:{color:T.b.noop,focus:T.b.noop,hide:T.b.noop,revert:T.b.noop,toggle:T.b.noop},children:null,isDisabled:!1,isThreshold:!1,isToggled:!1,tooltipContent:null,getToggle:null};var N=a(1247),P=a(2894),_=a.n(P),G=(a(2895),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={chart:null},e.node=d.a.createRef(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.generateChart()}},{key:"componentDidUpdate",value:function(e){var t=this.props.config;y()(e.config.data,t.data)||this.generateChart()}},{key:"componentWillUnmount",value:function(){var e=this.state.chart;e&&e.destroy(),this.setState({chart:null})}},{key:"generateChart",value:function(){var e=this,t=this.state.chart,a=this.props,r=a.config,n=a.onComplete,o=t;o||(o=_.a.generate(Object(i.a)({bindto:this.node.current},r))),o.load(Object(i.a)({},r.data,{unload:r.unloadBeforeLoad||!1,done:function(){e.setState({chart:o},(function(){r.done?r.done({chart:o,config:r}):n({chart:o,config:r})}))}}))}},{key:"render",value:function(){var e=this.state.chart,t=this.props,a=t.className,r=t.children,n=t.config,i=t.style;return d.a.createElement("div",{className:"curiosity-c3chart ".concat(a),style:i},d.a.createElement("div",{ref:this.node,className:"curiosity-c3chart-container"}),e&&d.a.createElement("div",{className:"curiosity-c3chart-description"},"function"===typeof r&&r({chart:e,config:n})||r))}}]),a}(d.a.Component));G.defaultProps={children:null,className:null,config:{},onComplete:T.b.noop,style:{}};var U=a(166),Y=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={},e.onUpdateGraphData=function(){var t=e.props,a=t.getGraphReportsCapacity,r=t.isDisabled,o=t.productId,l=t.query,s=e.getQueryGranularity();if(!r&&s&&o){var c,u=T.a.getRangedDateTime(s),d=u.startDate,p=u.endDate;a(o,Object(i.a)((c={},Object(n.a)(c,D.f.START_DATE,d.toISOString()),Object(n.a)(c,D.f.END_DATE,p.toISOString()),c),l))}},e.onGranularitySelect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value,r=e.props.viewId;E.g.dispatch(Object(n.a)({type:E.f.query.SET_QUERY_RHSM_TYPES[D.f.GRANULARITY],viewId:r},D.f.GRANULARITY,a))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.onUpdateGraphData()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.query;t.productId===e.productId&&y()(a,e.query)||this.onUpdateGraphData()}},{key:"getQueryGranularity",value:function(){var e=this.props.query;return null===e||void 0===e?void 0:e[D.f.GRANULARITY]}},{key:"renderLegend",value:function(e){var t=this,a=e.chart,r=e.filteredData,i=void 0===r?[]:r,o=e.granularity,l=e.hiddenDataFacets,s=void 0===l?[]:l,c=this.state,u=this.props,p=u.productId,h=u.productShortLabel,f=u.t;return i.map((function(e){var r=e.id,i=/^threshold/.test(r),l=s.includes(r),u=d.a.createElement("p",null,i&&f("curiosity-graph.thresholdLegendTooltip")||f("curiosity-graph.".concat(r,"LegendTooltip"))),v=c["".concat(p,"-").concat(o,"-").concat(r)]||!1;return d.a.createElement(M,{key:"legend-".concat(p,"-").concat(o,"-").concat(r),chart:a,chartId:r,tooltipContent:u,isDisabled:l,isThreshold:i,isToggled:v,getToggle:function(e){var a=e.isToggled;return t.setState(Object(n.a)({},"".concat(p,"-").concat(o,"-").concat(r),a))}},i&&f("curiosity-graph.thresholdLabel")||f("curiosity-graph.".concat(r,"Label"),{product:h}))}))}},{key:"renderChart",value:function(){var e=this,t=this.props,a=t.filterGraphData,n=t.graphData,o=t.productId,l=t.productShortLabel,s=t.selectOptionsType,c=this.getQueryGranularity(),u=N.a.getGranularityOptions(s).selected,p=c||u;if(!n||!Object.values(n).length)return null;var h=[];a.length?a.forEach((function(e){n[e.id]&&h.push(Object(i.a)({},e,{data:Object(r.a)(n[e.id])}))})):Object.keys(n).forEach((function(e){h.push({id:e,data:Object(r.a)(n[e])})}));var f=R({data:h,granularity:p,productShortLabel:l}),v=f.configuration,m=void 0===v?{}:v,g=f.hiddenDataFacets,b=void 0===g?[]:g;return d.a.createElement(G,{key:"chart-".concat(o,"-").concat(p),config:m},(function(t){var a=t.chart;return e.renderLegend({chart:a,filteredData:h,granularity:p,hiddenDataFacets:b})}))}},{key:"render",value:function(){var e=this.props,t=e.cardTitle,a=e.children,r=e.error,n=e.isDisabled,i=e.pending,o=e.selectOptionsType,l=e.t;if(n)return null;var s=N.a.getGranularityOptions(o).options,c=this.getQueryGranularity();return d.a.createElement(p.a,{className:"curiosity-usage-graph"},d.a.createElement(h.a,null,d.a.createElement(f.a,null,d.a.createElement(v.a,{headingLevel:"h2",size:"lg"},t)),d.a.createElement(m.a,{className:r?"blur":""},a,d.a.createElement(O.a,{"aria-label":l("curiosity-graph.dropdownPlaceholder"),onSelect:this.onGranularitySelect,options:s,selectedOptions:c,placeholder:l("curiosity-graph.dropdownPlaceholder")}))),d.a.createElement(g.a,null,d.a.createElement("div",{className:r?"blur":"fadein"},i&&d.a.createElement(U.a,{variant:"graph"}),!i&&this.renderChart())))}}]),a}(d.a.Component);Y.defaultProps={cardTitle:null,children:null,error:!1,filterGraphData:[],getGraphReportsCapacity:T.b.noop,graphData:{},isDisabled:T.b.UI_DISABLED_GRAPH,pending:!1,selectOptionsType:"default",t:I.b,productShortLabel:"",viewId:"graphCard"};var H=E.e.graphCard.makeGraphCard(),q=Object(E.b)(H,(function(e){return{getGraphReportsCapacity:function(t,a){return e(E.d.rhsm.getGraphReportsCapacity(t,a))}}}))(Y)},1604:function(e,t,a){"use strict";a.d(t,"a",(function(){return V}));var r=a(10),n=a(12),i=a(13),o=a(14),l=a(15),s=a(0),c=a.n(s),u=a(84),d=a.n(u),p=a(72),h=a(2890),f=a(2891),v=a(2892),m=a(814),g=a(2938),b=a(2893),y=a(2897),O=a(2898),E=a(177),T=a.n(E),D=a(17),k=a(62),S=a(265),j=a(166),I=a(1592),C=a(8),L=a(2),A=a(11),R=a(143),x=a(354),w=a(45),F=a(3),M=function(e){var t=e.filter,a=void 0===t?{}:t,r=e.onSort,n=e.query,i=void 0===n?{}:n,o=a.id,l=Object(L.a)({},a),s=l.onSort||r;if(!l.onSort&&r&&(l.onSort=r),s&&"boolean"!==typeof l.sortActive&&(null===i||void 0===i?void 0:i[F.f.SORT])&&T()(null===i||void 0===i?void 0:i[F.f.SORT])===o&&(l.sortActive=!0),s&&!l.sortDirection&&(null===i||void 0===i?void 0:i[F.f.DIRECTION]))switch(null===i||void 0===i?void 0:i[F.f.DIRECTION]){case F.d.DESCENDING:l.sortDirection=p.b.desc;break;default:l.sortDirection=p.b.asc}return l},N=function(e){var t=e.filter,a=void 0===t?{}:t,r=Object(L.a)({},a);return Array.isArray(r.transforms)?r.transforms.push(R.a):r.transforms=[R.a],r},P=function(e){var t=e.filters,a=void 0===t?[]:t,r=e.onSort,n=e.query,i=void 0===n?{}:n;return Object(C.a)(a).map((function(e){var t=Object(L.a)({},e);return t.isSortable&&Object.assign(t,M({filter:t,onSort:r,query:i})),t.isWrappable&&Object.assign(t,N({filter:t})),t}))},_=function(e){var t=e.filters,a=void 0===t?[]:t,r=e.cellData,n=void 0===r?{}:r,i=e.session,o=void 0===i?{}:i,l=[],s=[],u={};return Object.entries(n).forEach((function(e){var t=Object(A.a)(e,2),a=t[0],r=t[1];u[a]={title:Object(w.b)("curiosity-inventory.header",{context:a}),value:r},l.push(u[a].title),s.push(r)})),(null===a||void 0===a?void 0:a.length)&&(l.length=0,s.length=0,a.forEach((function(e){var t,a,r,n,i,d,p=e.id,h=e.cell,f=e.cellWidth,v=e.header,m=e.onSort,g=e.sortActive,b=e.sortDirection,y=e.transforms;u[p]&&(t=null!==(r=null===(n=u[p])||void 0===n?void 0:n.title)&&void 0!==r?r:p,a=null!==(i=null===(d=u[p])||void 0===d?void 0:d.value)&&void 0!==i?i:"");v&&(t="function"===typeof v&&v(Object(L.a)({},u))||v),("string"===typeof t||"number"===typeof t||c.a.isValidElement(t))&&(t={title:t}),t.transforms=[],Array.isArray(y)&&(t.transforms=t.transforms.concat(Object(C.a)(y))),"number"===typeof f&&t.transforms.push(Object(x.a)(f)),"function"===typeof m&&(t=Object(L.a)({},t,{onSort:function(e){return m(Object(L.a)({},u),Object(L.a)({},e,{id:p}))},sortActive:g,sortDirection:b})),h&&(a="function"===typeof h&&h(Object(L.a)({},u),Object(L.a)({},o))||h),("string"===typeof a||"number"===typeof a||c.a.isValidElement(a))&&(a={title:a}),l.push(t),s.push(a)}))),{columnHeaders:l,cells:s,data:Object(L.a)({},u)}},G=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={currentPage:0,limit:100,previousData:[]},e.onUpdateGuestsData=function(){var t=e.state,a=t.currentPage,n=t.limit,i=e.props,o=i.getHostsInventoryGuests,l=i.query,s=i.id;if(s){var c,u=Object(L.a)({},l,(c={},Object(r.a)(c,F.f.LIMIT,n),Object(r.a)(c,F.f.OFFSET,a*n||0),c));o(s,k.a.parseRhsmQuery(u).guestsQuery)}},e.onScroll=function(t){var a=t.target,r=e.state,n=r.currentPage,i=r.limit,o=r.previousData,l=e.props,s=l.numberOfGuests,c=l.pending,u=l.listData,d=a.scrollHeight-a.scrollTop===a.clientHeight;if(s>(n+1)*i&&d&&!c){var p=n+1,h=[].concat(Object(C.a)(o),Object(C.a)(u||[]));e.setState({previousData:h,currentPage:p})}},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.onUpdateGuestsData()}},{key:"componentDidUpdate",value:function(e,t){this.state.currentPage!==t.currentPage&&this.onUpdateGuestsData()}},{key:"renderLoader",value:function(){var e=this.state.currentPage,t=this.props,a=t.filterGuestsData,r=t.listData,n=t.pending;if(e>0&&n){var i=c.a.createElement(j.a,{variant:"table",tableProps:{borders:!1,colCount:(null===a||void 0===a?void 0:a.length)||(null===r||void 0===r?void 0:r[0])&&Object.keys(r[0]).length||1,rowCount:0,variant:p.e.compact}});return c.a.createElement("div",{className:"curiosity-table-scroll-loader__custom"},i)}return null}},{key:"renderTable",value:function(){var e=this.state.previousData,t=this.props,a=t.filterGuestsData,r=t.listData,n=t.numberOfGuests,i=t.session,o=[],l=[].concat(Object(C.a)(e),Object(C.a)(r||[])).map((function(e){var t=Object.assign({},e),r=_({filters:a,cellData:t,session:i}),n=r.columnHeaders,l=r.cells;return o=n,{cells:l}})),s=42*(n+1);return s=s<275&&s||275,c.a.createElement("div",{className:"curiosity-table-scroll",style:{height:"".concat(s,"px")}},c.a.createElement("div",{className:"curiosity-table-scroll-list".concat(s<275?"__no-scroll":""),onScroll:this.onScroll},this.renderLoader(),l.length&&c.a.createElement(S.a,{borders:!1,variant:p.e.compact,className:"curiosity-guests-list",columnHeaders:o,rows:l})||null))}},{key:"render",value:function(){var e=this.state.currentPage,t=this.props,a=t.error,r=t.filterGuestsData,n=t.listData,i=t.numberOfGuests,o=t.pending,l=t.perPageDefault;return c.a.createElement("div",{className:"fadein ".concat(a?"blur":"")},o&&0===e&&c.a.createElement(j.a,{variant:"table",tableProps:{borders:!1,colCount:(null===r||void 0===r?void 0:r.length)||(null===n||void 0===n?void 0:n[0])&&Object.keys(n[0]).length||1,colWidth:(null===r||void 0===r?void 0:r.length)&&r.map((function(e){return e.cellWidth}))||[],rowCount:i<l?i:l,variant:p.e.compact}}),(!o&&0===e||e>0)&&this.renderTable())}}]),a}(c.a.Component);G.defaultProps={error:!1,filterGuestsData:[],getHostsInventoryGuests:D.b.noop,listData:[],pending:!1,perPageDefault:5,query:{},session:{}};var U=k.e.guestsList.makeGuestsList(),Y=Object(k.b)(U,(function(e){return{getHostsInventoryGuests:function(t,a){return e(k.d.rhsm.getHostsInventoryGuests(t,a))}}}))(G),H=a(2956),q=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onPage=function(t){var a=t.page,r=e.props,n=r.offsetDefault,i=r.perPageDefault,o=r.query,l=(null===o||void 0===o?void 0:o[F.f.LIMIT])||i,s=l*(a-1)||n;e.setOffset(s),e.setLimit(l)},e.onPerPage=function(t){var a=t.perPage;e.setOffset(),e.setLimit(a)},e}return Object(i.a)(a,[{key:"setOffset",value:function(e){var t=this.props,a=t.offsetDefault,n=t.productId,i=[];i.push(Object(r.a)({type:k.f.query.SET_QUERY_RHSM_TYPES[F.f.OFFSET],viewId:n},F.f.OFFSET,null!==e&&void 0!==e?e:a)),k.g.dispatch(i)}},{key:"setLimit",value:function(e){var t=this.props,a=t.perPageDefault,n=t.productId,i=[];i.push(Object(r.a)({type:k.f.query.SET_QUERY_RHSM_TYPES[F.f.LIMIT],viewId:n},F.f.LIMIT,null!==e&&void 0!==e?e:a)),k.g.dispatch(i)}},{key:"render",value:function(){var e=this,t=this.props,a=t.dropDirection,r=t.isCompact,n=t.isDisabled,i=t.itemCount,o=t.perPageDefault,l=t.query,s=t.variant,u=l[F.f.OFFSET]/l[F.f.LIMIT]+1||1,d=l[F.f.LIMIT]||o;return c.a.createElement(H.a,{className:i?"":"hidden",dropDirection:a,isCompact:r,isDisabled:n||!i,itemCount:i,page:u,perPage:d,onSetPage:function(t,a){return e.onPage({event:t,page:a})},onPerPageSelect:function(t,a){return e.onPerPage({event:t,perPage:a})},variant:s})}}]),a}(c.a.Component);q.defaultProps={query:{},dropDirection:"down",isCompact:!1,isDisabled:!1,itemCount:0,offsetDefault:0,perPageDefault:10,variant:null};var Q=Object(k.b)((function(e,t){var a,r=e.view,n=t.productId;return{query:null===(a=r.query)||void 0===a?void 0:a[n]}}))(q),W=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).onColumnSort=function(t,a){var n,i=a.direction,o=a.id,l=e.props.productId,s=Object.values(F.e).find((function(e){return T()(e)===o}));if(s){switch(i){case p.b.desc:n=F.d.DESCENDING;break;default:n=F.d.ASCENDING}k.g.dispatch([Object(r.a)({type:k.f.query.SET_QUERY_RHSM_TYPES[F.f.DIRECTION],viewId:l},F.f.DIRECTION,n),Object(r.a)({type:k.f.query.SET_QUERY_RHSM_TYPES[F.f.SORT],viewId:l},F.f.SORT,s)])}},e.onUpdateInventoryData=function(){var t=e.props,a=t.getHostsInventory,r=t.isDisabled,n=t.productId,i=t.query;!r&&n&&a(n,i)},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.onUpdateInventoryData()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.productId,r=t.query;a===e.productId&&d()(r,e.query)||this.onUpdateInventoryData()}},{key:"renderTable",value:function(){var e=this,t=this.props,a=t.filterGuestsData,r=t.filterInventoryData,n=t.listData,i=t.query,o=t.session,l=[],s=n.map((function(t){var n=Object.assign({},t),s=_({filters:P({filters:r,onSort:e.onColumnSort,query:i}),cellData:n,session:o}),u=s.columnHeaders,d=s.cells,p=(null===n||void 0===n?void 0:n.numberOfGuests)>0,h=null===n||void 0===n?void 0:n.subscriptionManagerId;return l=u,{cells:d,expandedContent:p&&h&&c.a.createElement(Y,{key:h,filterGuestsData:a,numberOfGuests:null===n||void 0===n?void 0:n.numberOfGuests,id:h,query:i})}}));return c.a.createElement(S.b,{borders:!0,variant:p.e.compact,className:"curiosity-inventory-list",columnHeaders:l,rows:s})}},{key:"render",value:function(){var e=this.props,t=e.cardTitle,a=e.error,r=e.filterInventoryData,n=e.isDisabled,i=e.itemCount,o=e.listData,l=e.pending,s=e.perPageDefault,u=e.productId,d=e.query,E=e.viewId;if(n)return null;var T=(null===d||void 0===d?void 0:d[F.f.LIMIT])||s;return c.a.createElement(h.a,{className:"curiosity-inventory-card"},c.a.createElement(I.a,{key:"headerMinHeight",autoUpdate:!0},c.a.createElement(f.a,null,c.a.createElement(v.a,null,c.a.createElement(m.a,{headingLevel:"h2",size:"lg"},t)),c.a.createElement(g.a,{className:a?"blur":""},c.a.createElement(Q,{isCompact:!0,isDisabled:l||a,itemCount:i,productId:u,viewId:E,perPageDefault:T})))),c.a.createElement(I.a,{key:"bodyMinHeight-".concat(T)},c.a.createElement(b.a,null,c.a.createElement("div",{className:a?"blur":"fadein"},l&&c.a.createElement(j.a,{variant:"table",tableProps:{className:"curiosity-inventory-list",colCount:(null===r||void 0===r?void 0:r.length)||(null===o||void 0===o?void 0:o[0])&&Object.keys(o[0]).length||1,colWidth:(null===r||void 0===r?void 0:r.length)&&r.map((function(e){return e.cellWidth}))||[],rowCount:(null===o||void 0===o?void 0:o.length)||T,variant:p.e.compact}}),!l&&this.renderTable()))),c.a.createElement(I.a,{key:"footerMinHeight",autoUpdate:!0},c.a.createElement(y.a,{className:a?"blur":""},c.a.createElement(O.TableToolbar,{isFooter:!0},c.a.createElement(Q,{isDisabled:l||a,itemCount:i,productId:u,viewId:E,perPageDefault:T,dropDirection:"up"})))))}}]),a}(c.a.Component);W.defaultProps={error:!1,cardTitle:null,filterGuestsData:[],filterInventoryData:[],getHostsInventory:D.b.noop,isDisabled:D.b.UI_DISABLED_TABLE,itemCount:0,listData:[],pending:!1,perPageDefault:10,session:{},viewId:"inventoryList"};var z=k.e.inventoryList.makeInventoryList(),V=Object(k.b)(z,(function(e){return{getHostsInventory:function(t,a){return e(k.d.rhsm.getHostsInventory(t,a))}}}))(W)},1605:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var r=a(2),n=a(10),i=a(12),o=a(13),l=a(14),s=a(15),c=a(0),u=a.n(c),d=a(2939),p=a(2967),h=a(2968),f=a(2940),v=a(1596),m=a(1237),g=a(2941),b=a(966),y=a(62),O=a(3),E=a(45),T=function(e){switch(e){case O.f.SLA:return{selected:null,options:[{title:Object(E.b)("curiosity-toolbar.slaPremium"),value:O.c.PREMIUM},{title:Object(E.b)("curiosity-toolbar.slaStandard"),value:O.c.STANDARD},{title:Object(E.b)("curiosity-toolbar.slaSelfSupport"),value:O.c.SELF},{title:Object(E.b)("curiosity-toolbar.slaNone"),value:O.c.NONE}]};case O.f.USAGE:return{selected:null,options:[{title:Object(E.b)("curiosity-toolbar.usageDevelopment"),value:O.h.DEVELOPMENT},{title:Object(E.b)("curiosity-toolbar.usageDisaster"),value:O.h.DISASTER},{title:Object(E.b)("curiosity-toolbar.usageProduction"),value:O.h.PRODUCTION},{title:Object(E.b)("curiosity-toolbar.usageUnspecified"),value:O.h.UNSPECIFIED}]};default:return{selected:null,options:[{title:Object(E.b)("curiosity-toolbar.category",{context:O.f.SLA}),value:O.f.SLA},{title:Object(E.b)("curiosity-toolbar.category",{context:O.f.USAGE}),value:O.f.USAGE}]}}},D=a(17),k=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).onClear=function(){var t,a=e.props.hardFilterReset,r=[{type:y.f.toolbar.SET_ACTIVE_FILTERS,data:{activeFilters:new Set}},{type:y.f.query.SET_QUERY_CLEAR,data:{clearFilters:(t={},Object(n.a)(t,O.f.SLA,null),Object(n.a)(t,O.f.USAGE,null),t)}}];a&&r.push({type:y.f.toolbar.SET_FILTER_TYPE,data:{currentFilter:null}}),e.setDispatch(r,!0)},e.onClearFilter=function(t){var a=e.props,r=a.activeFilters,i=a.currentFilter,o=a.hardFilterReset,l=(T().options.find((function(e){return e.title===t}))||{}).value;if(l){var s=new Set(r);s.delete(l);var c=[{type:y.f.toolbar.SET_ACTIVE_FILTERS,data:{activeFilters:s}},{type:y.f.query.SET_QUERY_CLEAR,data:{clearFilters:Object(n.a)({},l,null)}}];if(o){var u=s.size>0&&i||null;c.push({type:y.f.toolbar.SET_FILTER_TYPE,data:{currentFilter:u}})}e.setDispatch(c,!0)}},e.onCategorySelect=function(t){var a=t.value;e.setDispatch({type:y.f.toolbar.SET_FILTER_TYPE,data:{currentFilter:a}})},e.onSelect=function(t){var a=t.event,r=t.field,i=e.props.activeFilters,o=a.value,l=new Set(i).add(r);e.setDispatch([{type:y.f.toolbar.SET_ACTIVE_FILTERS,data:{activeFilters:l}},{type:y.f.query.SET_QUERY_RHSM_TYPES[r],data:Object(n.a)({},r,o)}],!0)},e}return Object(o.a)(a,[{key:"setDispatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.props.viewId,n=(Array.isArray(e)&&e||[e]).map((function(e){var t=e.type,n=e.data;return Object(r.a)({type:t,viewId:a},n)}));t&&n.push({type:y.f.query.SET_QUERY_CLEAR_INVENTORY_LIST}),y.g.dispatch(n)}},{key:"setSelectFilter",value:function(e){var t,a,r=this.props.query,n=T(e),i=this.getCurrentFilter();return a=e?"string"===typeof(null===r||void 0===r?void 0:r[e])&&n.options.find((function(t){return t.value===(null===r||void 0===r?void 0:r[e])})):n.options.find((function(e){return e.value===i})),{options:n,optionsSelected:(null===(t=a)||void 0===t?void 0:t.title)&&[a.title]||(null===n||void 0===n?void 0:n.selected)&&[n.selected]||[]}}},{key:"getCurrentFilter",value:function(){var e,t,a=this.props,r=a.currentFilter,n=a.filterOptions;return r||(null===(e=n.find((function(e){return!0===e.selected})))||void 0===e?void 0:e.id)||1===n.length&&(null===(t=n[0])||void 0===t?void 0:t.id)}},{key:"renderSelectFilter",value:function(e){var t=this,a=e.id,r=this.props.t,n=this.setSelectFilter(a),i=n.options,o=n.optionsSelected,l=this.getCurrentFilter();return u.a.createElement(d.a,{key:a,chips:o,deleteChip:this.onClearFilter,categoryName:r("curiosity-toolbar.category",{context:a}),showToolbarItem:l===a},u.a.createElement(b.a,{"aria-label":r("curiosity-toolbar.category",{context:a}),onSelect:function(e){return t.onSelect({event:e,field:a})},selectedOptions:o,placeholder:r("curiosity-toolbar.placeholder",{context:a}),options:i.options}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.filterOptions,r=t.isDisabled,n=t.t;if(r)return null;var i=this.setSelectFilter(),o=i.options,l=i.optionsSelected;return u.a.createElement(p.a,{id:"curiosity-toolbar",className:"curiosity-toolbar pf-m-toggle-group-container ins-c-primary-toolbar",collapseListedFiltersBreakpoint:"sm",clearAllFilters:this.onClear},u.a.createElement(h.a,null,u.a.createElement(f.a,{toggleIcon:u.a.createElement(g.a,null),breakpoint:"md"},u.a.createElement(v.a,{variant:"filter-group"},1!==a.length&&u.a.createElement(m.a,null,u.a.createElement(b.a,{"aria-label":n("curiosity-toolbar.category"),onSelect:this.onCategorySelect,selectedOptions:l,placeholder:n("curiosity-toolbar.placeholder"),options:o.options,toggleIcon:u.a.createElement(g.a,null)})),a.map((function(t){var a=t.id,r=t.selected;return e.renderSelectFilter({id:a,selected:r})}))))))}}]),a}(u.a.Component);k.defaultProps={query:{},activeFilters:new Set,currentFilter:null,filterOptions:[{id:O.f.SLA,filterType:"select"},{id:O.f.USAGE,filterType:"select",selected:!0}],hardFilterReset:!1,isDisabled:D.b.UI_DISABLED_TOOLBAR,t:E.b,viewId:"toolbar"};var S=Object(y.b)((function(e,t){var a,n=e.toolbar,i=t.viewId;return Object(r.a)({},null===(a=n.filters)||void 0===a?void 0:a[i])}))(k)},966:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var r=a(2),n=a(12),i=a(13),o=a(14),l=a(15),s=a(0),c=a.n(s),u=a(912),d=a(2960),p=a(1606),h=a(1242),f=a.n(h),v=a(84),m=a.n(v),g=a(185),b=a.n(g),y=a(21),O=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={isExpanded:!1,options:null,selected:null},e.onSelect=function(t,a){var n=e.state.options,i=e.props,o=i.id,l=i.name,s=i.onSelect,c=i.variant,d=n,p=d.findIndex((function(e){return e.title===a}));d[p].selected=c===u.e.single||!d[p].selected,c===u.e.single&&d.forEach((function(e,t){p!==t&&(d[t].selected=!1)}));var h=c===u.e.single?a:d.filter((function(e){return!0===e.selected})).map((function(e){return e.title}));e.setState({options:d,selected:h},(function(){var t=f()(d),a={id:o,name:l||o,value:t[p].value,selected:c===u.e.single&&t[p]||f()(h),selectedIndex:p,type:"select-".concat(c===u.e.single?"one":"multiple"),options:t};c===u.e.checkbox&&(a.checked=t[p].selected);var n=Object(r.a)({},a,{target:Object(r.a)({},a),currentTarget:Object(r.a)({},a),persist:y.a.noop});s(Object(r.a)({},n),p,t),c===u.e.single&&e.setState({isExpanded:!1})}))},e.onToggle=function(t){e.setState({isExpanded:t})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){null===this.state.options&&this.formatOptions()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.options,r=t.selectedOptions;m()(e.options,a)&&m()(e.selectedOptions,r)||this.formatOptions()}},{key:"formatOptions",value:function(){var e,t=this.props,a=t.options,n=t.selectedOptions,i=t.variant,o=b()(a)?Object.keys(a).map((function(e){return Object(r.a)({},a[e],{title:e,value:a[e]})})):f()(a),l=n&&"string"===typeof n||"number"===typeof n?[n]:n;o.forEach((function(e,t){var a=e;"string"===typeof a&&(a={title:e,value:e},o[t]=a),a.text=a.text||a.title,a.textContent=a.textContent||a.title,a.label=a.label||a.title,l&&(o[t].selected=l.includes(a.value)||l.includes(a.title))})),e=i===u.e.single?(o.find((function(e){return!0===e.selected}))||{}).title:o.filter((function(e){return!0===e.selected})).map((function(e){return e.title})),this.setState({options:o,selected:e})}},{key:"render",value:function(){var e=this.state,t=e.options,a=e.selected,r=e.isExpanded,n=this.props,i=n.ariaLabel,o=n.className,l=n.isDisabled,s=n.isToggleText,u=n.placeholder,h=n.toggleIcon,f=n.variant,v={};return t&&t.length&&!l||(v.isDisabled=!0),c.a.createElement(d.a,Object.assign({className:"curiosity-select".concat(s?"":"__no-toggle-text"," ").concat(o),variant:f,"aria-label":i,onToggle:this.onToggle,onSelect:this.onSelect,selections:a,isOpen:r,toggleIcon:h,placeholderText:u},v),t&&t.map((function(e){return c.a.createElement(p.a,{key:window.btoa("".concat(e.title,"-").concat(e.value)),id:window.btoa("".concat(e.title,"-").concat(e.value)),value:e.title,"data-value":e.value,"data-title":e.title})}))||[])}}]),a}(c.a.Component);O.defaultProps={ariaLabel:"Select option",className:"",id:y.a.generateId(),isDisabled:!1,isToggleText:!0,name:null,onSelect:y.a.noop,options:[],placeholder:"Select option",selectedOptions:null,toggleIcon:null,variant:u.e.single}}}]);
//# sourceMappingURL=1.8f7d4ded.chunk.js.map