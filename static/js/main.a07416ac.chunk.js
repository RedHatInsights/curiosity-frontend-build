(window["webpackJsonpcuriosity-frontend"]=window["webpackJsonpcuriosity-frontend"]||[]).push([[0],{364:function(e,t,r){e.exports=r(617)},616:function(e,t,r){},617:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"GET_GRAPH_REPORT",function(){return Q}),r.d(n,"SET_GRAPH_RHEL_GRANULARITY",function(){return W});var a={};r.r(a),r.d(a,"USER_AUTH",function(){return K}),r.d(a,"USER_LOCALE",function(){return X}),r.d(a,"USER_LOGOUT",function(){return B});var o={};r.r(o),r.d(o,"default",function(){return Re}),r.d(o,"getGraphReports",function(){return Re});var i={};r.r(i),r.d(i,"authorizeUser",function(){return Ue}),r.d(i,"getLocale",function(){return xe});var c=r(2),s=r.n(c),l=r(40),u=r(104),p=r(156),d=r(114),f=r(18);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var O={generateId:function(e){return"".concat(e||"generatedid","-").concat(Math.ceil(1e5*Math.random())||"")},noop:Function.prototype,noopPromise:Promise.resolve({}),noopTranslate:function(e,t){return t||"t('".concat(e,"')")},DEV_MODE:!1,PROD_MODE:!0,REVIEW_MODE:!1,TEST_MODE:!1,UI_DEPLOY_PATH_PREFIX:"/beta",UI_DISABLED:!1,UI_DISPLAY_NAME:"Subscription Reporting",UI_LOGGER_ID:"curiosity",UI_NAME:"subscriptions",UI_PATH:"/beta/apps/subscriptions",UI_VERSION:"0.1.2.80f6ef5"};window.curiosity=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},O);var E=r(7),b=r(8),y=r(10),g=r(9),m=r(11),_=r(45),v=r(276),P=r(109),A=r(191),S=r(68),T=r(115),R=(r(279),r(248)),D=r(249),j=r(122),L=r.n(j),I=r(344),k=r.n(I),w=r(345),U=r.n(w);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(e,"_FULFILLED")},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(e,"_PENDING")},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(e,"_REJECTED")},H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=L()(e,"response.status",e.status),n=L()(e,"response.statusText",e.statusText),a=L()(e,"response.data",e.message),o=L()(e,"response.data",e.detail),i="";if(!a&&!o){if(r<400)return n;if(r>=500||void 0===r)return"".concat(r||""," Server is currently unable to handle this request.")}if((r>=500||void 0===r)&&(i=r?"".concat(r," "):""),"string"===typeof a)return"".concat(i).concat(a);if("string"===typeof o)return"".concat(i).concat(o);var c=function e(t,r){var n=r?t[r]:t;return U()(n,function(t){return Array.isArray(t)?e(t):t},null)};return"".concat(i).concat(k()(c(a||o,t),"\n"))},G=function(e){var t=L()(e,"response.status",e.status);return void 0===t&&(t=0),t},F=function(e,t,r){var n=r.state,a=void 0===n?{}:n,o=r.initialState,i=void 0===o?{}:o,c=r.reset,s=void 0===c||c,l=M({},a);return s&&e?l[e]=M({},a[e],{},i[e],{},t):s&&!e?l=M({},a,{},i,{},t):e?l[e]=M({},a[e],{},t):l=M({},a,{},t),l},V={dispatchDefaultFailure:!0,pendingSuffix:N(),fulfilledSuffix:C(),rejectedSuffix:Y(),autoDismiss:!0,dismissDelay:5e3,errorTitleKey:"title",errorDescriptionKey:"detail"},z=[D.a,R.a,Object(d.notificationsMiddleware)(V)];var Q="GET_GRAPH_REPORT",W="SET_GRAPH_RHEL_GRANULARITY",K="USER_AUTH",X="USER_LOCALE",B="USER_LOGOUT",q={rhel:n,user:a},J={RHSM_API_RESPONSE_PRODUCTS_DATA:"data",RHSM_API_RESPONSE_PRODUCTS_DATA_CORES:"cores",RHSM_API_RESPONSE_PRODUCTS_DATA_DATE:"date",RHSM_API_RESPONSE_PRODUCTS_DATA_INSTANCES:"instance_count",RHSM_API_RESPONSE_PRODUCTS_DATA_SOCKETS:"sockets",RHSM_API_RESPONSE_PRODUCTS_DATA_SOCKETS_THRESHOLD:"sockets_threshold",RHSM_API_RESPONSE_PRODUCTS_META:"meta",RHSM_API_RESPONSE_PRODUCTS_META_COUNT:"count",RHSM_API_QUERY_GRANULARITY:"granularity",RHSM_API_QUERY_GRANULARITY_TYPES:{DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly",QUARTERLY:"quarterly"},RHSM_API_QUERY_LIMIT:"limit",RHSM_API_QUERY_OFFSET:"offset",RHSM_API_QUERY_START_DATE:"beginning",RHSM_API_QUERY_END_DATE:"ending"},Z=r(123),$=r.n(Z);function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var re=function(){return(O.TEST_MODE?"20190720":O.DEV_MODE&&Object({NODE_ENV:"production",PUBLIC_URL:"/beta/apps/subscriptions",REACT_APP_ENV:"production",REACT_APP_UI_VERSION:"0.1.2.80f6ef5",REACT_APP_UI_NAME:"subscriptions",REACT_APP_UI_DISPLAY_NAME:"Subscription Reporting",REACT_APP_UI_DEPLOY_PATH_PREFIX:"/beta",REACT_APP_UI_DISABLED:"false",REACT_APP_UI_LOGGER_ID:"curiosity",REACT_APP_AJAX_TIMEOUT:"60000",REACT_APP_CONFIG_SERVICE_LOCALES_COOKIE:"rh_locale",REACT_APP_CONFIG_SERVICE_LOCALES_DEFAULT_LNG:"en-US",REACT_APP_CONFIG_SERVICE_LOCALES_DEFAULT_LNG_DESC:"English",REACT_APP_CONFIG_SERVICE_LOCALES:"/beta/apps/subscriptions/locales/locales.json",REACT_APP_CONFIG_SERVICE_LOCALES_PATH:"/beta/apps/subscriptions/locales/{{lng}}.json",REACT_APP_CONFIG_SERVICE_LOCALES_EXPIRE:"604800000",REACT_APP_INCLUDE_CONTENT_HEADER:'<esi:include src="/beta/apps/chrome/snippets/head.html" />',REACT_APP_INCLUDE_CONTENT_BODY:'<esi:include src="/beta/apps/chrome/snippets/body.html" />',REACT_APP_SERVICES_RHSM_REPORT_RHEL:"/api/rhsm-subscriptions/v1/tally/products/RHEL"}).REACT_APP_DEBUG_DEFAULT_DATETIME)||new Date},ne=function(e){var t=e.date,r=e.subtract,n=e.measurement;return{startDate:$.a.utc(t).startOf(n).subtract(r,n).toDate(),endDate:$.a.utc(t).startOf(n).toDate()}},ae=ne({date:re(),subtract:30,measurement:"days"}),oe=ne({date:re(),subtract:12,measurement:"weeks"}),ie=ne({date:re(),subtract:12,measurement:"months"}),ce=ne({date:re(),subtract:36,measurement:"months"}),se=J.RHSM_API_QUERY_GRANULARITY_TYPES,le={getCurrentDate:re,getRangedDateTime:function(e){switch(e){case se.WEEKLY:return te({},oe);case se.MONTHLY:return te({},ie);case se.QUARTERLY:return te({},ce);case se.DAILY:default:return te({},ae)}},setRangedDateTime:ne,defaultDateTime:ae,monthlyDateTime:ie,quarterlyDateTime:ce,weeklyDateTime:oe};function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var de={graphData:{usage:[]},error:!1,errorStatus:null,errorMessage:null,pending:!1,fulfilled:!1},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y(n.GET_GRAPH_REPORT):return F(null,{error:t.error,errorMessage:H(t.payload),errorStatus:G(t.payload)},{state:e,initialState:de});case N(n.GET_GRAPH_REPORT):return F(null,{pending:!0},{state:e,initialState:de});case C(n.GET_GRAPH_REPORT):return F(null,{graphData:{usage:t.payload.data[J.RHSM_API_RESPONSE_PRODUCTS_DATA]||[]},fulfilled:!0},{state:e,initialState:de});case q.rhel.SET_GRAPH_RHEL_GRANULARITY:return F(null,pe({graphGranularity:t.graphGranularity},le.getRangedDateTime(t.graphGranularity)),{state:e,initialState:de});default:return e}};fe.initialState=de;var he={view:{data:[],error:!1,errorStatus:null,errorMessage:null,pending:!1,fulfilled:!1}},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he;return e};Oe.initialState=he;var Ee={session:{error:!1,errorMessage:null,errorStatus:null,pending:!1,fulfilled:!1,authorized:!1,locale:null}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y(a.USER_AUTH):return F("session",{error:t.error,errorMessage:H(t.payload),errorStatus:G(t.payload),locale:e.session.locale},{state:e,initialState:Ee});case N(a.USER_AUTH):return F("session",{locale:e.session.locale,pending:!0},{state:e,initialState:Ee});case C(a.USER_AUTH):return F("session",{authorized:!0,fulfilled:!0,locale:e.session.locale,username:t.username},{state:e,initialState:Ee});case C(a.USER_LOCALE):return F("session",{locale:t.payload.data},{state:e,reset:!1});default:return e}};be.initialState=Ee;var ye={notifications:d.notifications,rhelGraph:fe,rhelView:Oe,user:be},ge=Object(T.c)(ye),me=Object(T.d)(ge,T.a.apply(void 0,Object(S.a)(z))),_e=r(346),ve=r.n(_e);function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ae({headers:{},timeout:"60000"},e)},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ve()(Se({url:"/api/rhsm-subscriptions/v1/tally/products/RHEL",params:e}))},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return t({type:n.GET_GRAPH_REPORT,payload:Te(e),meta:{notifications:{rejected:{variant:"info",title:"RHSM connection has failed",description:"Product ID Red Hat Enterprise Linux"}}}})}},De=r(347),je=r.n(De),Le=r(358),Ie=function(){var e=(je.a.get("rh_locale")||"").replace("_","-"),t=e&&Le.a.getLanguageName(e)||null;return t&&{value:e,key:t}||null},ke=function(){var e=O.noopPromise;try{O.DEV_MODE||(e=window.insights.chrome.auth.getUser)}catch(t){O.TEST_MODE||console.warn("{ getUser } = insights.chrome.auth: ".concat(t.message))}return e},we=function(){var e={value:"en-US",key:"English"};return new Promise(function(t){return t({data:Ie()||e})})},Ue=function(){return function(e){return e({type:a.USER_AUTH,payload:ke()})}},xe=function(){return{type:a.USER_LOCALE,payload:we()}};function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var Ce=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},{rhel:o,user:i}),Ne=function(e,t){return function(r){return Object(u.connect)(e,t)(!O.TEST_MODE&&Object(A.b)()(r)||r)}},Ye=function(e,t){return function(r){return Object(P.k)(Object(u.connect)(e,t)(r))}},He=r(348),Ge=r.n(He),Fe=r(268),Ve=r(271),ze=r(269),Qe=r(270),We=r(14),Ke=r(336),Xe=r(157),Be=r(142),qe=r.n(Be),Je=r(185),Ze=r.n(Je),$e=r(28),et=r.n($e);function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var nt=function(e){function t(){var e,r;Object(E.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(y.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).state={isExpanded:!1,options:null,selected:null},r.onSelect=function(e,t){var n=r.state.options,a=r.props,o=a.id,i=a.name,c=a.onSelect,s=a.variant,l=n,u=l.findIndex(function(e){return e.title===t});l[u].selected=s===We.f.single||!l[u].selected,We.f.single&&l.forEach(function(e,t){u!==t&&(l[t].selected=!1)});var p=s===We.f.single?t:l.filter(function(e){return!0===e.selected}).map(function(e){return e.title});r.setState({options:l,selected:p},function(){var e=qe()(l),t={id:o,name:i||o,value:e[u].value,selectedIndex:u,type:"select-".concat(s===We.f.single?"one":"multiple"),options:e},n=rt({},t,{target:rt({},t),currentTarget:rt({},t),persist:O.noop});c(rt({},n),u,e),s===We.f.single&&r.setState({isExpanded:!1})})},r.onToggle=function(e){r.setState({isExpanded:e})},r}return Object(m.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){null===this.state.options&&this.formatOptions()}},{key:"componentDidUpdate",value:function(e){var t=this.props.options;Ze()(e.options,t)||this.formatOptions()}},{key:"formatOptions",value:function(){var e,t=this.props,r=t.options,n=t.selectedOptions,a=t.variant,o=et()(r)?Object.keys(r).map(function(e){return rt({},r[e],{title:e,value:r[e]})}):qe()(r),i=n&&"string"===typeof n||"number"===typeof n?[n]:n;o.forEach(function(e,t){var r=e;"string"===typeof r&&(r={title:e,value:e},o[t]=r),r.text=r.text||r.title,r.textContent=r.textContent||r.title,r.label=r.label||r.title,i&&(o[t].selected=i.includes(r.value))}),e=a===We.f.single?(o.find(function(e){return!0===e.selected})||{}).title:o.filter(function(e){return!0===e.selected}).map(function(e){return e.title}),this.setState({options:o,selected:e})}},{key:"render",value:function(){var e=this.state,t=e.options,r=e.selected,n=e.isExpanded,a=this.props,o=a.ariaLabel,i=a.className,c=a.isDisabled,l=a.placeholder,u=a.variant,p={};return t&&t.length&&!c||(p.isDisabled=!0),s.a.createElement(Ke.a,Object.assign({className:"curiosity-select ".concat(i),variant:u,"aria-label":o,onToggle:this.onToggle,onSelect:this.onSelect,selections:r,isExpanded:n,placeholderText:l},p),t&&t.map(function(e){return s.a.createElement(Xe.a,{key:window.btoa(e.title),value:e.title,"data-value":e.value,"data-title":e.title})})||[])}}]),t}(s.a.Component);nt.defaultProps={ariaLabel:"Select option",className:"",id:O.generateId(),isDisabled:!1,name:null,onSelect:O.noop,options:[],selectedOptions:null,placeholder:"Select option",variant:We.f.single};var at=r(263),ot=r(349),it=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return!O.TEST_MODE&&at.a.t(e,t)||O.noopTranslate(e,t)},ct=function(e){function t(){return Object(E.a)(this,t),Object(y.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.i18nInit()}},{key:"componentDidUpdate",value:function(e){this.props.locale!==e.locale&&this.i18nInit()}},{key:"i18nInit",value:function(){var e=this.props,t=e.fallbackLng,r=e.loadPath,n=e.locale;at.a.use(ot.a).use(A.a).init({backend:{loadPath:r},fallbackLng:t,lng:n,debug:!O.PROD_MODE,ns:["default"],defaultNS:"default",react:{useSuspense:!1}})}},{key:"render",value:function(){var e=this.props.children;return s.a.createElement(s.a.Fragment,null,e)}}]),t}(s.a.Component);ct.defaultProps={fallbackLng:"en-US",loadPath:"/beta/apps/subscriptions/locales/{{lng}}.json",locale:null};var st=J.RHSM_API_QUERY_GRANULARITY_TYPES,lt=function(e){switch(e){case st.DAILY:return 5;case st.WEEKLY:case st.MONTHLY:return 2;case st.QUARTERLY:default:return 1}},ut=function(e){var t=e.granularity,r={label:e.tooltipLabel};switch(t){case st.WEEKLY:r.previousLabel=it("curiosity-graph.tooltipPreviousLabelWeekly");break;case st.MONTHLY:r.previousLabel=it("curiosity-graph.tooltipPreviousLabelMonthly");break;case st.QUARTERLY:r.previousLabel=it("curiosity-graph.tooltipPreviousLabelQuarterly");break;case st.DAILY:default:r.previousLabel=it("curiosity-graph.tooltipPreviousLabelDaily")}return r},pt=function(e){switch(e){case st.WEEKLY:return"weeks";case st.MONTHLY:return"months";case st.QUARTERLY:return"quarters";case st.DAILY:default:return"days"}},dt=function(e){var t=e.data,r=e.previousData,n=e.formattedDate,a=e.granularity,o=e.tooltipLabel,i=ut({granularity:a,tooltipLabel:o}),c=i.label,s=i.previousLabel,l=t-r,u="".concat(t," ").concat(c," ").concat(n);return null===r||0===l?u:"".concat(u,"\n ").concat(l>-1?"+":"").concat(l," ").concat(s)},ft=function(e){var t=e.yValue,r=e.tooltipThresholdLabel;return"".concat(r,": ").concat(t)},ht=function(e){for(var t=e.data,r=e.endDate,n=e.granularity,a=e.startDate,o=e.tooltipLabel,i=e.tooltipThresholdLabel,c=pt(n),s=lt(n),l=$()(r).diff(a,c),u=[],p=[],d=!1,f=null,h=null,O=0;O<=l;O++){var E=$.a.utc(a).add(O,c).startOf(c),b=E.toISOString(),y=parseInt(E.year(),10),g=O%s===0,m=0!==O&&g&&y!==h,_=void 0;_="quarters"===c?m?E.format("MMM YYYY"):E.format("MMM"):"months"===c?m?E.format("MMM YYYY"):E.format("MMM"):m?E.format("MMM D YYYY"):E.format("MMM D");var v=t[b]&&t[b].data||0,P=t[b]&&t[b].dataThreshold||0;d=d||P>0;var A={data:v,previousData:f,formattedDate:_,granularity:n,tooltipLabel:o};p.push({x:u.length,y:P,tooltip:ft({yValue:P,tooltipThresholdLabel:i})}),u.push({x:u.length,y:v,tooltip:dt(A),xAxisLabel:"months"===c||"quarters"===c?_.replace(/\s/,"\n"):_}),f=v,g&&y!==h&&(h=y)}return{chartData:u,chartDataThresholds:d&&p||[]}},Ot=function(e){var t=e.data,r=e.dataFacet,n=e.dataThresholdFacet,a=e.tooltipLabel,o=e.tooltipThresholdLabel,i=e.startDate,c=e.endDate,s=e.granularity,l={};(t||[]).forEach(function(e){if(e){var t=$.a.utc(e[J.RHSM_API_RESPONSE_PRODUCTS_DATA_DATE]).startOf("day").toISOString();l[t]={data:Number.parseInt(e[r],10),dataThreshold:Number.parseInt(e[n],10)}}});var u=ht({data:l,endDate:c,granularity:s,startDate:i,tooltipLabel:a,tooltipThresholdLabel:o});return{chartData:u.chartData,chartDataThresholds:u.chartDataThresholds,chartXAxisLabelIncrement:lt(s)}},Et=J.RHSM_API_QUERY_GRANULARITY_TYPES,bt=function(){return[{title:it("curiosity-graph.dropdownDaily","Daily"),value:Et.DAILY},{title:it("curiosity-graph.dropdownWeekly","Weekly"),value:Et.WEEKLY},{title:it("curiosity-graph.dropdownMonthly","Monthly"),value:Et.MONTHLY},{title:it("curiosity-graph.dropdownQuarterly","Quarterly"),value:Et.QUARTERLY}]},yt=r(639),gt=r(635),mt=r(633),_t=r(631),vt=r(636),Pt=r(641),At=r(638);function St(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?St(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):St(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Rt=function(e){function t(){var e,r;Object(E.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(y.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).state={chartWidth:0},r.containerRef=s.a.createRef(),r.onResizeContainer=function(){var e=r.containerRef.current;e&&e.clientWidth&&r.setState({chartWidth:e.clientWidth})},r}return Object(m.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.onResizeContainer(),window.addEventListener("resize",this.onResizeContainer)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResizeContainer)}},{key:"setChartTicks",value:function(){var e=this.props,t=e.xAxisLabelIncrement,r=e.yAxisLabelIncrement,n=e.xAxisTickFormat,a=e.yAxisTickFormat,o=e.dataSets,i={},c={},s=o.length&&o[0].data||[],l=o.length&&o[0].data||[];return o.forEach(function(e){e.xAxisLabelUseDataSet&&(s=e.data),e.yAxisLabelUseDataSet&&(l=e.data)}),s.find(function(e){return e.xAxisLabel&&e.xAxisLabel})&&(i.xAxisTickValues=s.reduce(function(e,r,n){return n%t===0?e.concat(r.x):e},[]),i.xAxisTickFormat=function(e){return s[e]&&s[e].xAxisLabel||e}),"function"===typeof n&&(i.xAxisTickFormat=function(e){return n({dataSet:qe()(s),tick:e})}),l.find(function(e){return e.yAxisLabel&&e.yAxisLabel})&&(c.yAxisTickValues=l.reduce(function(e,t,n){return n%r===0?e.concat(t.y):e},[]),c.yAxisTickFormat=function(e){return l[e]&&l[e].yAxisLabel||e}),"function"===typeof a&&(c.yAxisTickFormat=function(e){return a({dataSet:qe()(l),tick:e})}),Tt({},i,{},c)}},{key:"getChartTicks",value:function(){var e=this.props,t=e.xAxisFixLabelOverlap,r=e.yAxisFixLabelOverlap,n=this.setChartTicks(),a=n.xAxisTickValues,o=n.xAxisTickFormat,i=n.yAxisTickValues,c=n.yAxisTickFormat,s={fixLabelOverlap:t},l={dependentAxis:!0,showGrid:!0,fixLabelOverlap:r};return a&&(s.tickValues=a),o&&(s.tickFormat=o),i&&(l.tickValues=i),c&&(l.tickFormat=c),{isXAxisTicks:!!a,isYAxisTicks:!!i,xAxisProps:s,yAxisProps:l}}},{key:"getChartDomain",value:function(e){var t=e.isXAxisTicks,r=e.isYAxisTicks,n=this.props,a=n.domain,o=n.dataSets;if(Object.keys(a).length)return a;var i={},c={},s=0,l=0;if(o.forEach(function(e){s=e.data.length>s?e.data.length:s,e.data.forEach(function(e){l=e.y>l?e.y:l}),e.thresholds&&e.thresholds.forEach(function(e){l=e.y>l?e.y:l})}),t||(i.x=[0,s||10]),!r){var u=Math.pow(10,Math.floor(Math.log10(l>10&&l||10)));i.y=[0,Math.ceil((l+1)/u)*u]}return Object.keys(i).length&&(c.domain=i),{maxY:l,chartDomain:Tt({},c)}}},{key:"getChartLegend",value:function(){var e=this.props.dataSets,t=[];return e.forEach(function(e){e.legendThreshold&&t.push(Tt({symbol:{type:"threshold"}},e.legendThreshold)),e.legendData&&t.push(e.legendData)}),{legendData:t,legendOrientation:"horizontal",legendPosition:"bottom-left",legendComponent:s.a.createElement(yt.a,{borderPadding:{top:20}})}}},{key:"render",value:function(){var e=this.state.chartWidth,t=this.props,r=t.dataSets,n=t.padding,a=this.getChartTicks(),o=a.isXAxisTicks,i=a.isYAxisTicks,c=a.xAxisProps,l=a.yAxisProps,u=this.getChartDomain({isXAxisTicks:o,isYAxisTicks:i}).chartDomain,p=Tt({padding:n},this.getChartLegend(),{},u);return p.containerComponent=s.a.createElement(gt.a,{constrainToVisibleArea:!0,labels:function(e){return e.datum.tooltip}}),s.a.createElement("div",{ref:this.containerRef},s.a.createElement(mt.a,Object.assign({width:e},p),s.a.createElement(_t.a,c),s.a.createElement(_t.a,l),r&&r.length&&r.map(function(e){return e.thresholds&&e.thresholds.length&&s.a.createElement(vt.a,{interpolation:e.thresholdInterpolation||"step",key:O.generateId(),data:e.thresholds,style:e.thresholdStyle||{}})||null})||null,s.a.createElement(Pt.a,null,r&&r.length&&r.map(function(e){return e.data&&e.data.length&&s.a.createElement(At.a,{interpolation:e.dataInterpolation||"catmullRom",key:O.generateId(),data:e.data})||null})||null)))}}]),t}(s.a.Component);function Dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}Rt.defaultProps={domain:{},dataSets:[],height:275,padding:{bottom:75,left:50,right:50,top:50},xAxisFixLabelOverlap:!1,xAxisLabelIncrement:1,xAxisTickFormat:null,yAxisFixLabelOverlap:!1,yAxisLabelIncrement:1,yAxisTickFormat:null};var jt=J.RHSM_API_QUERY_GRANULARITY_TYPES,Lt=function(e){function t(){var e,r;Object(E.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(y.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).onUpdateGraphData=function(){var e,t=r.props,n=t.getGraphReports,a=t.graphGranularity,o=t.startDate,i=t.endDate;n((e={},Object(f.a)(e,J.RHSM_API_QUERY_GRANULARITY,a),Object(f.a)(e,J.RHSM_API_QUERY_START_DATE,o.toISOString()),Object(f.a)(e,J.RHSM_API_QUERY_END_DATE,i.toISOString()),e))},r.onSelect=function(e){var t=r.props.graphGranularity,n=e.value;t!==n&&me.dispatch({type:q.rhel.SET_GRAPH_RHEL_GRANULARITY,graphGranularity:n})},r}return Object(m.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.onUpdateGraphData()}},{key:"componentDidUpdate",value:function(e){this.props.graphGranularity!==e.graphGranularity&&this.onUpdateGraphData()}},{key:"renderChart",value:function(){var e=this.props,t=e.graphData,r=e.graphGranularity,n=e.startDate,a=e.endDate,o=e.t,i=Ot({data:t.usage,dataFacet:J.RHSM_API_RESPONSE_PRODUCTS_DATA_SOCKETS,dataThresholdFacet:J.RHSM_API_RESPONSE_PRODUCTS_DATA_SOCKETS_THRESHOLD,tooltipLabel:o("curiosity-graph.tooltipSockets"),tooltipThresholdLabel:o("curiosity-graph.tooltipSocketsThreshold"),startDate:n,endDate:a,granularity:r}),c=i.chartXAxisLabelIncrement,l=i.chartData,u=i.chartDataThresholds;return s.a.createElement(Rt,{xAxisFixLabelOverlap:!0,xAxisLabelIncrement:c,yAxisTickFormat:function(e){var t=e.tick;return Ge()(t).format("0a")},dataSets:[{data:l,thresholds:u,legendThreshold:{name:o("curiosity-graph.legendSocketsThresholdLabel")},legendData:{name:o("curiosity-graph.legendSocketsLabel")}}]})}},{key:"render",value:function(){var e=this.props,t=e.error,r=e.fulfilled,n=e.graphGranularity,a=e.pending,o=e.t,i=bt();return s.a.createElement(Fe.a,{className:"curiosity-usage-graph fadein"},s.a.createElement(Ve.a,null,s.a.createElement("h2",null,o("curiosity-graph.heading","CPU socket usage")),s.a.createElement(ze.a,null,s.a.createElement(nt,{"aria-label":o("curiosity-graph.dropdownPlaceholder","Select date range"),onSelect:this.onSelect,options:i,selectedOptions:n,placeholder:o("curiosity-graph.dropdownPlaceholder","Select date range")}))),s.a.createElement(Qe.a,null,s.a.createElement("div",{className:"curiosity-skeleton-container"},a&&s.a.createElement(s.a.Fragment,null,s.a.createElement(_.Skeleton,{size:_.SkeletonSize.xs}),s.a.createElement(_.Skeleton,{size:_.SkeletonSize.sm}),s.a.createElement(_.Skeleton,{size:_.SkeletonSize.md}),s.a.createElement(_.Skeleton,{size:_.SkeletonSize.lg})),!a&&(r||t)&&this.renderChart())))}}]),t}(s.a.Component);Lt.defaultProps={error:!1,fulfilled:!1,getGraphReports:O.noop,graphData:{usage:[]},graphGranularity:jt.DAILY,pending:!1,t:O.noopTranslate,startDate:le.defaultDateTime.startDate,endDate:le.defaultDateTime.endDate};var It=Ne(function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dt(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dt(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.rhelGraph)},function(e){return{getGraphReports:function(t){return e(Ce.rhel.getGraphReports(t))}}})(Lt),kt=function(e){function t(){return Object(E.a)(this,t),Object(y.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(_.PageHeader,null,s.a.createElement(_.PageHeaderTitle,{title:"Red Hat Enterprise Linux"})),s.a.createElement(v.a,null,s.a.createElement(It,null)))}}]),t}(s.a.Component);kt.defaultProps={};var wt=Ye(function(){return{}},function(){return{}})(kt),Ut=(O.TEST_MODE?"/":O.DEV_MODE&&"/")||function(e){var t=e.pathName,r=e.pathPrefix,n=t.split("/");n.shift();var a=r&&new RegExp(n[0]).test(r)?3:2;return"/".concat(n.slice(0,a).join("/"))}({pathName:window.location.pathname,pathPrefix:O.UI_DEPLOY_PATH_PREFIX}),xt=[{title:"Red Hat Enterprise Linux",id:"rhel",to:"/rhel",redirect:!0,component:wt,exact:!0,disabled:O.UI_DISABLED}],Mt=function(e){function t(){return Object(E.a)(this,t),Object(y.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(b.a)(t,[{key:"renderRoutes",value:function(){var e=this.props.routesType,t=null;return{renderRoutes:e.map(function(e){return e.disabled?null:(!0===e.redirect&&(t=s.a.createElement(P.c,{to:e.to})),s.a.createElement(P.d,{exact:e.hasParameters||e.exact,key:e.to,path:e.to,component:e.component}))}),redirectRoot:t}}},{key:"render",value:function(){var e=this.renderRoutes(),t=e.renderRoutes,r=e.redirectRoot;return s.a.createElement("div",{className:"curiosity-content"},s.a.createElement(P.g,null,t,r))}}]),t}(s.a.Component);Mt.defaultProps={routesType:xt};var Ct=r(272),Nt=r(274),Yt=r(273),Ht=r(218),Gt=r(217),Ft=r(130),Vt=function(e){var t=e.children;return s.a.createElement(Ft.a,{className:"layout-pf curiosity"},s.a.createElement(v.a,{noPadding:!0},t))};function zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}Vt.defaultProps={};var Qt=function(e){function t(){var e,r;Object(E.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(y.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).appNav=O.noop,r.buildNav=O.noop,r.buildNavigation=function(){var e=r.props.routes,t=window.location.pathname.split("/").slice(-1)[0];return e.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zt(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zt(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e,{active:e.id===t})})},r}return Object(m.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.appName,n=t.authorizeUser,a=t.history,o=t.insights,i=t.routes,c=t.session;try{(O.PROD_MODE||O.REVIEW_MODE)&&o.chrome.init(),O.PROD_MODE&&(o.chrome.identifyApp(r),o.chrome.navigation(i),this.appNav=o.chrome.on("APP_NAVIGATION",function(e){return a.push("/".concat(e.navId))}),this.buildNav=a.listen(function(){return o.chrome.navigation(e.buildNavigation())})),c.authorized||n()}catch(s){O.TEST_MODE||console.warn("{ init, identifyApp, navigation } = insights.chrome: ".concat(s.message))}}},{key:"componentWillUnmount",value:function(){this.appNav(),this.buildNav()}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.session;return r.authorized?s.a.createElement(s.a.Fragment,null,t):r.pending?s.a.createElement(Vt,null,s.a.createElement(_.PageHeader,null,s.a.createElement(_.PageHeaderTitle,{title:"\xa0"})),s.a.createElement(Ct.a,{variant:Ct.b.full,className:"fadein"},s.a.createElement(Nt.a,{icon:Ht.b}),s.a.createElement(Yt.a,null,"Authenticating..."))):s.a.createElement(Vt,null,s.a.createElement(_.PageHeader,null,s.a.createElement(_.PageHeaderTitle,{title:"Unauthorized"})),s.a.createElement(Ct.a,{variant:Ct.b.full,className:"fadein"},s.a.createElement(Nt.a,{icon:Gt.b}),s.a.createElement(Yt.a,null,"You do not have permission to access reporting. Contact your administrator.")))}}]),t}(c.Component);Qt.defaultProps={appName:O.UI_NAME,authorizeUser:O.noop,insights:window.insights,routes:xt,session:{authorized:!1,error:!1,errorMessage:"",pending:!1}};var Wt=Ye(function(e){return{session:e.user.session}},function(e){return{authorizeUser:function(){return e(Ce.user.authorizeUser())}}})(Qt),Kt=function(e){function t(){return Object(E.a)(this,t),Object(y.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getLocale)()}},{key:"render",value:function(){var e=this.props.locale;return s.a.createElement(ct,{locale:e&&e.value||null},s.a.createElement(Wt,null,s.a.createElement(Vt,null,s.a.createElement(Mt,null))))}}]),t}(s.a.Component);Kt.defaultProps={getLocale:O.noop,locale:{}};var Xt=Ye(function(e){return{locale:e.user.session.locale}},function(e){return{getLocale:function(){return e(Ce.user.getLocale())}}})(Kt);r(616);Object(l.render)(s.a.createElement(u.Provider,{store:me},s.a.createElement(d.NotificationsPortal,null),s.a.createElement(p.BrowserRouter,{basename:Ut},s.a.createElement(Xt,null))),document.getElementById("root"))}},[[364,1,2]]]);
//# sourceMappingURL=main.a07416ac.chunk.js.map