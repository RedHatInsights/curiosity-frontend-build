(this["webpackJsonpcuriosity-frontend"]=this["webpackJsonpcuriosity-frontend"]||[]).push([[7],{1372:function(t,e,a){"use strict";a.d(e,"a",(function(){return x}));var r=a(7),n=a(6),i=a(4),o=a(11),l=a(12),c=a(14),s=a(15),u=a(0),d=a.n(u),p=a(1362),h=a(3079),v=a(3080),y=a(770),m=a(3123),g=a(3081),b=a(60),f=a.n(b),O=a(52),E=a(16),I=a(3),S=a(129),T=a.n(S),D=a(920),F=a(42),k=function(t){var e=t.date,a=t.granularity,r=T.a.utc(e);switch(a){case I.b.QUARTERLY:return"".concat(r.format(E.a.timestampQuarterFormats.yearShort)," - ").concat(r.add(1,"quarter").format(E.a.timestampQuarterFormats.yearShort));case I.b.MONTHLY:return r.format(E.a.timestampMonthFormats.yearLong);case I.b.WEEKLY:return"".concat(r.format(E.a.timestampDayFormats.short)," - ").concat(r.add(1,"week").format(E.a.timestampDayFormats.yearShort));case I.b.DAILY:default:return r.format(E.a.timestampDayFormats.long)}},j=function(t){var e=t.date,a=t.granularity,r=t.tick,n=t.previousDate;if(e&&a){var i,o=T.a.utc(e),l=0!==r&&Number.parseInt(o.year(),10)!==Number.parseInt(T.a.utc(n).year(),10);switch(a){case I.b.QUARTERLY:i=(i=l?o.format(E.a.timestampQuarterFormats.yearShort):o.format(E.a.timestampQuarterFormats.short)).replace(/\s/,"\n");break;case I.b.MONTHLY:i=(i=l?o.format(E.a.timestampMonthFormats.yearShort):o.format(E.a.timestampMonthFormats.short)).replace(/\s/,"\n");break;case I.b.WEEKLY:case I.b.DAILY:default:i=(i=l?o.format(E.a.timestampDayFormats.yearShort):o.format(E.a.timestampDayFormats.short)).replace(/\s(\d{4})$/,"\n$1")}return i}},L=function(t){var e=t.tick,a=t.locale;return new Intl.NumberFormat(a,{maximumFractionDigits:1,notation:"compact",compactDisplay:"short"}).format(e)},C=function(t){var e=t.data,a=void 0===e?[]:e,r=t.granularity,n=t.productShortLabel,o=[],l={x:"x",colors:{},columns:[],groups:[[]],names:{},types:{}},c=function(t){return(E.b.TEST_MODE&&T.a.utc(t)||T.a.utc(t).local()).format("YYYY-MM-DD")};return a.forEach((function(t){/^threshold/.test(t.id)?(l.colors[t.id]=t.color||D.a.value,l.types[t.id]="step",l.names[t.id]=Object(F.b)("curiosity-graph.thresholdLabel")):(l.colors[t.id]=t.color,l.types[t.id]="area-spline",l.groups[0].push(t.id),l.names[t.id]=Object(F.b)("curiosity-graph.".concat(t.id,"Label"),{product:n})),l.columns[0]=["x"],l.columns.push([t.id]);var e=0;t.data.forEach((function(t){l.columns[0].push(c(t.date)),l.columns[l.columns.length-1].push(t.y),e+=t.y||0})),e<=0&&(l.columns.pop(),o.push(t.id))})),{hiddenDataFacets:o,configuration:{tooltip:{order:function(t,e){return l.columns.indexOf(t.id)-l.columns.indexOf(e.id)},format:{title:function(t){return k({date:t,granularity:r})},value:function(t,e,r,n){var i,o,l,c=null===(i=a.find((function(t){return r===t.id})))||void 0===i?void 0:i.data[n];/^threshold/.test(r)?o=(null===c||void 0===c?void 0:c.hasInfinite)&&Object(F.b)("curiosity-graph.infiniteThresholdLabel")||(null!==(l=null===c||void 0===c?void 0:c.y)&&void 0!==l?l:Object(F.b)("curiosity-graph.noDataLabel")):o=!1===(null===c||void 0===c?void 0:c.hasData)&&Object(F.b)("curiosity-graph.noDataLabel")||(null===c||void 0===c?void 0:c.y)||0;return o}}},unloadBeforeLoad:!0,padding:{left:40,right:40,top:10,bottom:10},legend:{show:!1},spline:{interpolation:{type:"monotone"}},data:Object(i.a)({},l),point:{show:!1},grid:{y:{show:!0}},axis:{x:{type:"timeseries",tick:{format:function(t){var e=l.columns[0].slice(1),a=c(t),n=e.indexOf(a),i=n>-1&&e[n-1];return j({tick:n,date:a,previousDate:i,granularity:r})}},padding:0},y:{default:[0,50],padding:{bottom:0},min:0,tick:{show:!1,outer:!1,format:function(t){return 0===t?"":L({tick:t})}}}}}}},N=a(237),R=a(77),w=a(3119),A=function(t){Object(s.a)(a,t);var e=Object(c.a)(a);function a(){var t;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))).state={updatedIsToggled:null},t.onFocus=function(){var e=t.state.updatedIsToggled,a=t.props,r=a.chart,n=a.chartId,i=a.getToggle,o=a.isToggled;("function"!==typeof i||o)&&e||r.focus(n)},t.onRevert=function(){var e=t.state.updatedIsToggled,a=t.props,r=a.chart,n=a.getToggle,i=a.isToggled;("function"!==typeof n||i)&&e||r.revert()},t.onToggle=function(){var e=t.state.updatedIsToggled,a=t.props,r=a.chart,n=a.chartId,i=a.getToggle,o=a.isToggled;r.toggle(n),"function"===typeof i?i({isToggled:!o}):t.setState({updatedIsToggled:!e}),t.onRevert()},t.getColor=function(){var e=t.props,a=e.chart,r=e.chartId;return a.color(r)},t}return Object(l.a)(a,[{key:"render",value:function(){var t=this.state.updatedIsToggled,e=this.props,a=e.children,r=e.chart,n=e.chartId,i=e.isDisabled,o=e.isThreshold,l=e.isToggled,c=e.tooltipContent,s=null===t&&"boolean"===typeof l&&l||t||!1;s&&r.hide(n);var u=d.a.createElement(N.a,{tabIndex:0,key:"curiosity-button-".concat(n),variant:"link",onClick:this.onToggle,onFocus:this.onFocus,onMouseOver:this.onFocus,onBlur:this.onRevert,onMouseOut:this.onRevert,onKeyPress:this.onToggle,component:"a",isDisabled:i,icon:(i||s)&&d.a.createElement(w.a,null)||o&&d.a.createElement("hr",{"aria-hidden":!0,className:"threshold-legend-icon",style:{visibility:i||s?"hidden":"visible",borderTopColor:this.getColor()}})||d.a.createElement("div",{"aria-hidden":!0,className:"legend-icon",style:{visibility:i||s?"hidden":"visible",backgroundColor:this.getColor()}})},a);return c?d.a.createElement(R.a,{key:"curiosity-tooltip-".concat(n),content:c,position:R.b.top,enableFlip:!1,distance:5,entryDelay:100,exitDelay:0},u):u}}]),a}(d.a.Component);A.defaultProps={chart:{color:E.b.noop,focus:E.b.noop,hide:E.b.noop,revert:E.b.noop,toggle:E.b.noop},children:null,isDisabled:!1,isThreshold:!1,isToggled:!1,tooltipContent:null,getToggle:null};var P=a(1754),G=a.n(P),_=(a(1757),function(t){Object(s.a)(a,t);var e=Object(c.a)(a);function a(){var t;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))).state={chart:null},t.node=d.a.createRef(),t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.generateChart()}},{key:"componentDidUpdate",value:function(t){var e=this.props.config;f()(t.config.data,e.data)||this.generateChart()}},{key:"componentWillUnmount",value:function(){var t=this.state.chart;t&&t.destroy(),this.setState({chart:null})}},{key:"generateChart",value:function(){var t=this,e=this.state.chart,a=this.props,r=a.config,n=a.onComplete,o=e;o||(o=G.a.generate(Object(i.a)({bindto:this.node.current},r))),o.load(Object(i.a)({},r.data,{unload:r.unloadBeforeLoad||!1,done:function(){t.setState({chart:o},(function(){r.done?r.done({chart:o,config:r}):n({chart:o,config:r})}))}}))}},{key:"render",value:function(){var t=this.state.chart,e=this.props,a=e.className,r=e.children,n=e.config,i=e.style;return d.a.createElement("div",{className:"curiosity-c3chart ".concat(a),style:i},d.a.createElement("div",{ref:this.node,className:"curiosity-c3chart-container"}),t&&d.a.createElement("div",{className:"curiosity-c3chart-description"},"function"===typeof r&&r({chart:t,config:n})||r))}}]),a}(d.a.Component));_.defaultProps={children:null,className:null,config:{},onComplete:E.b.noop,style:{}};var Q=a(152),Y=a(1359),M=function(t){Object(s.a)(a,t);var e=Object(c.a)(a);function a(){var t;Object(o.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(t=e.call.apply(e,[this].concat(l))).state={},t.onUpdateGraphData=function(){var e=t.props,a=e.getGraphReportsCapacity,r=e.isDisabled,o=e.productId,l=e.query,c=t.getQueryGranularity();if(!r&&c&&o){var s,u=E.a.getRangedDateTime(c),d=u.startDate,p=u.endDate;a(o,Object(i.a)((s={},Object(n.a)(s,I.g.START_DATE,d.toISOString()),Object(n.a)(s,I.g.END_DATE,p.toISOString()),s),l))}},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.onUpdateGraphData()}},{key:"componentDidUpdate",value:function(t){var e=this.props,a=e.query;e.productId===t.productId&&f()(a,t.query)||this.onUpdateGraphData()}},{key:"getQueryGranularity",value:function(){var t=this.props.query;return null===t||void 0===t?void 0:t[I.g.GRANULARITY]}},{key:"renderLegend",value:function(t){var e=this,a=t.chart,r=t.filteredData,i=void 0===r?[]:r,o=t.granularity,l=t.hiddenDataFacets,c=void 0===l?[]:l,s=this.state,u=this.props,p=u.productId,h=u.productShortLabel,v=u.t;return i.map((function(t){var r=t.id,i=/^threshold/.test(r),l=c.includes(r),u=d.a.createElement("p",null,i&&v("curiosity-graph.thresholdLegendTooltip")||v("curiosity-graph.".concat(r,"LegendTooltip"))),y=s["".concat(p,"-").concat(o,"-").concat(r)]||!1;return d.a.createElement(A,{key:"legend-".concat(p,"-").concat(o,"-").concat(r),chart:a,chartId:r,tooltipContent:u,isDisabled:l,isThreshold:i,isToggled:y,getToggle:function(t){var a=t.isToggled;return e.setState(Object(n.a)({},"".concat(p,"-").concat(o,"-").concat(r),a))}},i&&v("curiosity-graph.thresholdLabel")||v("curiosity-graph.".concat(r,"Label"),{product:h}))}))}},{key:"renderChart",value:function(){var t=this,e=this.props,a=e.filterGraphData,n=e.graphData,o=e.productId,l=e.productShortLabel,c=this.getQueryGranularity();if(!n||!Object.values(n).length)return null;var s=[];a.length?a.forEach((function(t){n[t.id]&&s.push(Object(i.a)({},t,{data:Object(r.a)(n[t.id])}))})):Object.keys(n).forEach((function(t){s.push({id:t,data:Object(r.a)(n[t])})}));var u=C({data:s,granularity:c,productShortLabel:l}),p=u.configuration,h=void 0===p?{}:p,v=u.hiddenDataFacets,y=void 0===v?[]:v;return d.a.createElement(_,{key:"chart-".concat(o,"-").concat(c),config:h},(function(e){var a=e.chart;return t.renderLegend({chart:a,filteredData:s,granularity:c,hiddenDataFacets:y})}))}},{key:"render",value:function(){var t=this.props,e=t.cardTitle,a=t.children,r=t.error,n=t.isDisabled,i=t.pending,o=t.viewId;if(n)return null;var l=this.getQueryGranularity();return d.a.createElement(p.a,{className:"curiosity-usage-graph"},d.a.createElement(h.a,null,d.a.createElement(v.a,null,d.a.createElement(y.a,{headingLevel:"h2",size:"lg"},e)),d.a.createElement(m.a,{className:r?"blur":""},a,d.a.createElement(Y.a,{viewId:o,value:l}))),d.a.createElement(g.a,null,d.a.createElement("div",{className:r?"blur":"fadein"},i&&d.a.createElement(Q.a,{variant:"graph"}),!i&&this.renderChart())))}}]),a}(d.a.Component);M.defaultProps={cardTitle:null,children:null,error:!1,filterGraphData:[],getGraphReportsCapacity:E.b.noop,graphData:{},isDisabled:E.b.UI_DISABLED_GRAPH,pending:!1,t:F.b,productShortLabel:"",viewId:"graphCard"};var U=O.e.graphCard.makeGraphCard(),x=Object(O.b)(U,(function(t){return{getGraphReportsCapacity:function(e,a){return t(O.d.rhsm.getGraphReportsCapacity(e,a))}}}))(M)},3131:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return A})),a.d(e,"ConnectedOpenshiftView",(function(){return A})),a.d(e,"OpenshiftView",(function(){return R}));var r,n,i=a(6),o=a(11),l=a(12),c=a(14),s=a(15),u=a(0),d=a.n(u),p=a(917),h=a(916),v=a(237),y=a(765),m=a(1369),g=a(129),b=a.n(g),f=a(92),O=a(3),E=a(52),I=a(1371),S=a(1372),T=a(1360),D=a(1375),F=a(1364),k=a(1367),j=a(1373),L=a(1368),C=a(16),N=a(42),R=function(t){Object(s.a)(a,t);var e=Object(c.a)(a);function a(){var t;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))).state={option:null,graphFilters:[],inventoryFilters:[],subscriptionsInventoryFilters:[]},t.onSelect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.state.option,r=t.props,n=r.initialGraphFilters,o=r.initialInventoryFilters,l=r.initialSubscriptionsInventoryFilters,c=r.viewId,s=e.value;if(s!==a){var u=function(t){var e=t.id;return!t.isOptional||new RegExp(s,"i").test(e)},d=n.filter(u),p=o.filter(u),h=l.filter(u);t.setState({option:a,graphFilters:d,inventoryFilters:p,subscriptionsInventoryFilters:h},(function(){E.g.dispatch([{type:E.f.query.SET_QUERY_CLEAR_INVENTORY_LIST},Object(i.a)({type:E.f.query.SET_QUERY_RHSM_TYPES[O.g.UOM],viewId:c},O.g.UOM,s)])}))}},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=this.props.initialOption;this.onSelect({value:t})}},{key:"renderSelect",value:function(){var t=this.state.option,e=this.props,a=e.initialOption,r=e.t,n=[{title:r("curiosity-toolbar.uom",{context:O.h.CORES}),value:O.h.CORES},{title:r("curiosity-toolbar.uom",{context:O.h.SOCKETS}),value:O.h.SOCKETS}];return d.a.createElement(T.a,{onSelect:this.onSelect,options:n,selectedOptions:t||a})}},{key:"render",value:function(){var t,e=this.state,a=e.graphFilters,r=e.inventoryFilters,n=e.subscriptionsInventoryFilters,i=this.props,o=i.initialGuestsFilters,l=i.initialToolbarFilters,c=i.initialInventorySettings,s=i.location,u=i.productLabel,p=i.query,h=i.graphTallyQuery,v=i.inventoryHostsQuery,y=i.inventorySubscriptionsQuery,m=i.routeDetail,g=i.t,b=i.viewId,O=""===(null===s||void 0===s||null===(t=s.parsedSearch)||void 0===t?void 0:t.c3),T=E.a.parseRhsmQuery(p,{graphTallyQuery:h,inventoryHostsQuery:v,inventorySubscriptionsQuery:y}),N=T.graphTallyQuery,R=T.inventoryHostsQuery,w=T.inventorySubscriptionsQuery,A=T.toolbarQuery;return d.a.createElement(f.b,null,d.a.createElement(f.a,{productLabel:u,includeTour:!0},g("curiosity-view.title",{appName:C.b.UI_DISPLAY_NAME,context:u})),d.a.createElement(f.c,null,d.a.createElement(L.a,{productId:m.pathParameter,viewId:b,query:p})),d.a.createElement(f.e,null,d.a.createElement(D.b,{filterOptions:l,productId:m.pathParameter,query:A,viewId:b})),d.a.createElement(f.d,null,O&&d.a.createElement(S.a,{key:m.pathParameter,filterGraphData:a,query:N,productId:m.pathParameter,viewId:b,cardTitle:g("curiosity-graph.cardHeading"),productShortLabel:u},this.renderSelect())||d.a.createElement(I.b,{key:m.pathParameter,filterGraphData:a,query:N,productId:m.pathParameter,viewId:b,cardTitle:g("curiosity-graph.cardHeading"),productLabel:u},this.renderSelect())),d.a.createElement(f.d,null,d.a.createElement(j.b,{productId:m.pathParameter},d.a.createElement(j.a,{key:"hostsTab",title:g("curiosity-inventory.tab",{context:"hosts"})},d.a.createElement(F.b,{key:m.pathParameter,filterGuestsData:o,filterInventoryData:r,productId:m.pathParameter,settings:c,query:R,viewId:b})),!C.b.UI_DISABLED_TABLE_SUBSCRIPTIONS&&d.a.createElement(j.a,{key:"subscriptionsTab",title:g("curiosity-inventory.tab",{context:"subscriptions"})},d.a.createElement(k.b,{key:m.pathParameter,filterInventoryData:n,productId:m.pathParameter,query:w,viewId:b})))))}}]),a}(d.a.Component);R.defaultProps={query:Object(i.a)({},O.g.UOM,O.h.CORES),graphTallyQuery:Object(i.a)({},O.g.GRANULARITY,O.b.DAILY),inventoryHostsQuery:(r={},Object(i.a)(r,O.g.SORT,O.e.LAST_SEEN),Object(i.a)(r,O.g.DIRECTION,O.d.ASCENDING),Object(i.a)(r,O.g.LIMIT,100),Object(i.a)(r,O.g.OFFSET,0),r),inventorySubscriptionsQuery:(n={},Object(i.a)(n,O.g.SORT,O.f.UPCOMING_EVENT_DATE),Object(i.a)(n,O.g.DIRECTION,O.d.ASCENDING),Object(i.a)(n,O.g.LIMIT,100),Object(i.a)(n,O.g.OFFSET,0),n),initialOption:O.h.CORES,initialGraphFilters:[{id:"cores",isOptional:!0,fill:p.a.value,stroke:h.a.value,color:h.a.value},{id:"sockets",isOptional:!0,fill:p.a.value,stroke:h.a.value,color:h.a.value},{id:"thresholdSockets",isOptional:!0},{id:"thresholdCores",isOptional:!0}],initialGuestsFilters:[{id:"displayName",header:Object(N.b)("curiosity-inventory.header",{context:"guestsDisplayName"}),cell:function(t,e){var a=t.displayName,r=t.inventoryId,n=((null===e||void 0===e?void 0:e.authorized)||{}).inventory;return(null===r||void 0===r?void 0:r.value)?n?d.a.createElement(v.a,{isInline:!0,component:"a",variant:"link",target:"_blank",href:"".concat(C.b.UI_DEPLOY_PATH_PREFIX,"/insights/inventory/").concat(r.value,"/")},a.value||r.value):(null===a||void 0===a?void 0:a.value)||(null===r||void 0===r?void 0:r.value):null===a||void 0===a?void 0:a.value}},{id:"inventoryId",cellWidth:40},{id:"lastSeen",cell:function(t){var e,a;return(null===t||void 0===t||null===(e=t.lastSeen)||void 0===e?void 0:e.value)&&d.a.createElement(m.DateFormat,{date:null===t||void 0===t||null===(a=t.lastSeen)||void 0===a?void 0:a.value})||""},cellWidth:15}],initialInventoryFilters:[{id:"displayName",cell:function(t,e){var a=t.displayName,r=void 0===a?{}:a,n=t.inventoryId,i=void 0===n?{}:n,o=t.numberOfGuests,l=void 0===o?{}:o,c=((null===e||void 0===e?void 0:e.authorized)||{}).inventory;if(!i.value)return r.value;var s=r.value||i.value;return c&&(s=d.a.createElement(v.a,{isInline:!0,component:"a",variant:"link",target:"_blank",href:"".concat(C.b.UI_DEPLOY_PATH_PREFIX,"/insights/inventory/").concat(i.value,"/")},r.value||i.value)),d.a.createElement(d.a.Fragment,null,s," ",l.value&&Object(N.b)("curiosity-inventory.label",{context:"numberOfGuests",count:l.value},[d.a.createElement(y.a,{color:"blue"})])||"")},isSortable:!0},{id:"measurementType",cell:function(t){var e=t.cloudProvider,a=void 0===e?{}:e,r=t.measurementType,n=void 0===r?{}:r;return d.a.createElement(d.a.Fragment,null,Object(N.b)("curiosity-inventory.measurementType",{context:n.value})," ",a.value&&d.a.createElement(y.a,{color:"purple"},Object(N.b)("curiosity-inventory.cloudProvider",{context:a.value}))||"")},isSortable:!0,cellWidth:20},{id:"sockets",isOptional:!0,isSortable:!0,isWrappable:!0,cellWidth:15},{id:"cores",isOptional:!0,isSortable:!0,isWrappable:!0,cellWidth:15},{id:"lastSeen",cell:function(t){var e,a;return(null===t||void 0===t||null===(e=t.lastSeen)||void 0===e?void 0:e.value)&&d.a.createElement(m.DateFormat,{date:null===t||void 0===t||null===(a=t.lastSeen)||void 0===a?void 0:a.value})||""},isSortable:!0,isWrappable:!0,cellWidth:15}],initialInventorySettings:{},initialSubscriptionsInventoryFilters:[{id:"productName",isSortable:!0},{id:"serviceLevel",isSortable:!0,isWrappable:!0,cellWidth:15},{id:"upcomingEventDate",cell:function(t){var e,a;return(null===t||void 0===t||null===(e=t.upcomingEventDate)||void 0===e?void 0:e.value)&&b.a.utc(null===t||void 0===t||null===(a=t.upcomingEventDate)||void 0===a?void 0:a.value).format("YYYY-DD-MM")||""},isSortable:!0,isWrappable:!0,cellWidth:15}],initialToolbarFilters:[{id:O.g.SLA}],productLabel:"OpenShift",t:N.b,viewId:"viewOpenShift"};var w=E.e.view.makeView(R.defaultProps),A=Object(E.b)(w)(R)}}]);
//# sourceMappingURL=7.ab340f0e.chunk.js.map