(this["webpackJsonpcuriosity-frontend"]=this["webpackJsonpcuriosity-frontend"]||[]).push([[7],{1433:function(e,t,a){"use strict";a.d(t,"a",(function(){return q}));var r=a(9),n=a(6),o=a(2),i=a(13),l=a(14),c=a(15),u=a(16),s=a(0),d=a.n(s),p=a(1423),h=a(3147),v=a(3148),y=a(836),m=a(3196),g=a(3149),f=a(68),b=a.n(f),E=a(997),I=a(61),T=a(17),O=a(1),D=a(153),S=a.n(D),k=a(3195),L=a(49),j=function(e){var t=e.date,a=e.granularity,r=S.a.utc(t);switch(a){case O.b.QUARTERLY:return"".concat(r.format(T.a.timestampQuarterFormats.yearShort)," - ").concat(r.add(1,"quarter").format(T.a.timestampQuarterFormats.yearShort));case O.b.MONTHLY:return r.format(T.a.timestampMonthFormats.yearLong);case O.b.WEEKLY:return"".concat(r.format(T.a.timestampDayFormats.short)," - ").concat(r.add(1,"week").format(T.a.timestampDayFormats.yearShort));case O.b.DAILY:default:return r.format(T.a.timestampDayFormats.long)}},F=function(e){var t=e.date,a=e.granularity,r=e.tick,n=e.previousDate;if(t&&a){var o,i=S.a.utc(t),l=0!==r&&Number.parseInt(i.year(),10)!==Number.parseInt(S.a.utc(n).year(),10);switch(a){case O.b.QUARTERLY:o=(o=l?i.format(T.a.timestampQuarterFormats.yearShort):i.format(T.a.timestampQuarterFormats.short)).replace(/\s/,"\n");break;case O.b.MONTHLY:o=(o=l?i.format(T.a.timestampMonthFormats.yearShort):i.format(T.a.timestampMonthFormats.short)).replace(/\s/,"\n");break;case O.b.WEEKLY:case O.b.DAILY:default:o=(o=l?i.format(T.a.timestampDayFormats.yearShort):i.format(T.a.timestampDayFormats.short)).replace(/\s(\d{4})$/,"\n$1")}return o}},N=function(e){var t=e.tick,a=e.locale;return new Intl.NumberFormat(a,{maximumFractionDigits:1,notation:"compact",compactDisplay:"short"}).format(t)},R=function(e){var t=e.data,a=void 0===t?[]:t,r=e.granularity,n=e.productShortLabel,i=[],l={x:"x",colors:{},columns:[],groups:[[]],names:{},types:{}},c=function(e){return(T.b.TEST_MODE&&S.a.utc(e)||S.a.utc(e).local()).format("YYYY-MM-DD")};return a.forEach((function(e){/^threshold/.test(e.id)?(l.colors[e.id]=e.color||k.a.value,l.types[e.id]="step",l.names[e.id]=Object(L.b)("curiosity-graph.thresholdLabel")):(l.colors[e.id]=e.color,l.types[e.id]="area-spline",l.groups[0].push(e.id),l.names[e.id]=Object(L.b)("curiosity-graph.".concat(e.id,"Label"),{product:n})),l.columns[0]=["x"],l.columns.push([e.id]);var t=0;e.data.forEach((function(e){l.columns[0].push(c(e.date)),l.columns[l.columns.length-1].push(e.y),t+=e.y||0})),t<=0&&(l.columns.pop(),i.push(e.id))})),{hiddenDataFacets:i,configuration:{tooltip:{order:function(e,t){return l.columns.indexOf(e.id)-l.columns.indexOf(t.id)},format:{title:function(e){return j({date:e,granularity:r})},value:function(e,t,r,n){var o,i,l,c=null===(o=a.find((function(e){return r===e.id})))||void 0===o?void 0:o.data[n];/^threshold/.test(r)?i=(null===c||void 0===c?void 0:c.hasInfinite)&&Object(L.b)("curiosity-graph.infiniteThresholdLabel")||(null!==(l=null===c||void 0===c?void 0:c.y)&&void 0!==l?l:Object(L.b)("curiosity-graph.noDataLabel")):i=!1===(null===c||void 0===c?void 0:c.hasData)&&Object(L.b)("curiosity-graph.noDataLabel")||(null===c||void 0===c?void 0:c.y)||0;return i}}},unloadBeforeLoad:!0,padding:{left:40,right:40,top:10,bottom:10},legend:{show:!1},spline:{interpolation:{type:"monotone"}},data:Object(o.a)({},l),point:{show:!1},grid:{y:{show:!0}},axis:{x:{type:"timeseries",tick:{format:function(e){var t=l.columns[0].slice(1),a=c(e),n=t.indexOf(a),o=n>-1&&t[n-1];return F({tick:n,date:a,previousDate:o,granularity:r})}},padding:0},y:{default:[0,50],padding:{bottom:0},min:0,tick:{show:!1,outer:!1,format:function(e){return 0===e?"":N({tick:e})}}}}}}},G=a(812),C=a(424),A=a(3192),w=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={updatedIsToggled:null},e.onFocus=function(){var t=e.state.updatedIsToggled,a=e.props,r=a.chart,n=a.chartId,o=a.getToggle,i=a.isToggled;("function"!==typeof o||i)&&t||r.focus(n)},e.onRevert=function(){var t=e.state.updatedIsToggled,a=e.props,r=a.chart,n=a.getToggle,o=a.isToggled;("function"!==typeof n||o)&&t||r.revert()},e.onToggle=function(){var t=e.state.updatedIsToggled,a=e.props,r=a.chart,n=a.chartId,o=a.getToggle,i=a.isToggled;r.toggle(n),"function"===typeof o?o({isToggled:!i}):e.setState({updatedIsToggled:!t}),e.onRevert()},e.getColor=function(){var t=e.props,a=t.chart,r=t.chartId;return a.color(r)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.updatedIsToggled,t=this.props,a=t.children,r=t.chart,n=t.chartId,o=t.isDisabled,i=t.isThreshold,l=t.isToggled,c=t.tooltipContent,u=null===e&&"boolean"===typeof l&&l||e||!1;u&&r.hide(n);var s=d.a.createElement(G.a,{tabIndex:0,key:"curiosity-button-".concat(n),variant:"link",onClick:this.onToggle,onFocus:this.onFocus,onMouseOver:this.onFocus,onBlur:this.onRevert,onMouseOut:this.onRevert,onKeyPress:this.onToggle,component:"a",isDisabled:o,icon:(o||u)&&d.a.createElement(A.a,null)||i&&d.a.createElement("hr",{"aria-hidden":!0,className:"threshold-legend-icon",style:{visibility:o||u?"hidden":"visible",borderTopColor:this.getColor()}})||d.a.createElement("div",{"aria-hidden":!0,className:"legend-icon",style:{visibility:o||u?"hidden":"visible",backgroundColor:this.getColor()}})},a);return c?d.a.createElement(C.a,{key:"curiosity-tooltip-".concat(n),content:c,position:C.b.top,enableFlip:!1,distance:5,entryDelay:100,exitDelay:0},s):s}}]),a}(d.a.Component);w.defaultProps={chart:{color:T.b.noop,focus:T.b.noop,hide:T.b.noop,revert:T.b.noop,toggle:T.b.noop},children:null,isDisabled:!1,isThreshold:!1,isToggled:!1,tooltipContent:null,getToggle:null};var P=a(1209),Y=a(1819),Q=a.n(Y),_=(a(1822),function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={chart:null},e.node=d.a.createRef(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.generateChart()}},{key:"componentDidUpdate",value:function(e){var t=this.props.config;b()(e.config.data,t.data)||this.generateChart()}},{key:"componentWillUnmount",value:function(){var e=this.state.chart;e&&e.destroy(),this.setState({chart:null})}},{key:"generateChart",value:function(){var e=this,t=this.state.chart,a=this.props,r=a.config,n=a.onComplete,i=t;i||(i=Q.a.generate(Object(o.a)({bindto:this.node.current},r))),i.load(Object(o.a)({},r.data,{unload:r.unloadBeforeLoad||!1,done:function(){e.setState({chart:i},(function(){r.done?r.done({chart:i,config:r}):n({chart:i,config:r})}))}}))}},{key:"render",value:function(){var e=this.state.chart,t=this.props,a=t.className,r=t.children,n=t.config,o=t.style;return d.a.createElement("div",{className:"curiosity-c3chart ".concat(a),style:o},d.a.createElement("div",{ref:this.node,className:"curiosity-c3chart-container"}),e&&d.a.createElement("div",{className:"curiosity-c3chart-description"},"function"===typeof r&&r({chart:e,config:n})||r))}}]),a}(d.a.Component));_.defaultProps={children:null,className:null,config:{},onComplete:T.b.noop,style:{}};var U=a(177),M=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={},e.onUpdateGraphData=function(){var t=e.props,a=t.getGraphReportsCapacity,r=t.isDisabled,i=t.productId,l=t.query,c=e.getQueryGranularity();if(!r&&c&&i){var u,s=T.a.getRangedDateTime(c),d=s.startDate,p=s.endDate;a(i,Object(o.a)((u={},Object(n.a)(u,O.g.START_DATE,d.toISOString()),Object(n.a)(u,O.g.END_DATE,p.toISOString()),u),l))}},e.onGranularitySelect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value,r=e.props.viewId;I.g.dispatch(Object(n.a)({type:I.f.query.SET_QUERY_RHSM_TYPES[O.g.GRANULARITY],viewId:r},O.g.GRANULARITY,a))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.onUpdateGraphData()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.query;t.productId===e.productId&&b()(a,e.query)||this.onUpdateGraphData()}},{key:"getQueryGranularity",value:function(){var e=this.props.query;return null===e||void 0===e?void 0:e[O.g.GRANULARITY]}},{key:"renderLegend",value:function(e){var t=this,a=e.chart,r=e.filteredData,o=void 0===r?[]:r,i=e.granularity,l=e.hiddenDataFacets,c=void 0===l?[]:l,u=this.state,s=this.props,p=s.productId,h=s.productShortLabel,v=s.t;return o.map((function(e){var r=e.id,o=/^threshold/.test(r),l=c.includes(r),s=d.a.createElement("p",null,o&&v("curiosity-graph.thresholdLegendTooltip")||v("curiosity-graph.".concat(r,"LegendTooltip"))),y=u["".concat(p,"-").concat(i,"-").concat(r)]||!1;return d.a.createElement(w,{key:"legend-".concat(p,"-").concat(i,"-").concat(r),chart:a,chartId:r,tooltipContent:s,isDisabled:l,isThreshold:o,isToggled:y,getToggle:function(e){var a=e.isToggled;return t.setState(Object(n.a)({},"".concat(p,"-").concat(i,"-").concat(r),a))}},o&&v("curiosity-graph.thresholdLabel")||v("curiosity-graph.".concat(r,"Label"),{product:h}))}))}},{key:"renderChart",value:function(){var e=this,t=this.props,a=t.filterGraphData,n=t.graphData,i=t.productId,l=t.productShortLabel,c=t.selectOptionsType,u=this.getQueryGranularity(),s=P.a.getGranularityOptions(c).selected,p=u||s;if(!n||!Object.values(n).length)return null;var h=[];a.length?a.forEach((function(e){n[e.id]&&h.push(Object(o.a)({},e,{data:Object(r.a)(n[e.id])}))})):Object.keys(n).forEach((function(e){h.push({id:e,data:Object(r.a)(n[e])})}));var v=R({data:h,granularity:p,productShortLabel:l}),y=v.configuration,m=void 0===y?{}:y,g=v.hiddenDataFacets,f=void 0===g?[]:g;return d.a.createElement(_,{key:"chart-".concat(i,"-").concat(p),config:m},(function(t){var a=t.chart;return e.renderLegend({chart:a,filteredData:h,granularity:p,hiddenDataFacets:f})}))}},{key:"render",value:function(){var e=this.props,t=e.cardTitle,a=e.children,r=e.error,n=e.isDisabled,o=e.pending,i=e.selectOptionsType,l=e.t;if(n)return null;var c=P.a.getGranularityOptions(i).options,u=this.getQueryGranularity();return d.a.createElement(p.a,{className:"curiosity-usage-graph"},d.a.createElement(h.a,null,d.a.createElement(v.a,null,d.a.createElement(y.a,{headingLevel:"h2",size:"lg"},t)),d.a.createElement(m.a,{className:r?"blur":""},a,d.a.createElement(E.a,{"aria-label":l("curiosity-graph.dropdownPlaceholder"),onSelect:this.onGranularitySelect,options:c,selectedOptions:u,placeholder:l("curiosity-graph.dropdownPlaceholder")}))),d.a.createElement(g.a,null,d.a.createElement("div",{className:r?"blur":"fadein"},o&&d.a.createElement(U.a,{variant:"graph"}),!o&&this.renderChart())))}}]),a}(d.a.Component);M.defaultProps={cardTitle:null,children:null,error:!1,filterGraphData:[],getGraphReportsCapacity:T.b.noop,graphData:{},isDisabled:T.b.UI_DISABLED_GRAPH,pending:!1,selectOptionsType:"default",t:L.b,productShortLabel:"",viewId:"graphCard"};var x=I.e.graphCard.makeGraphCard(),q=Object(I.b)(x,(function(e){return{getGraphReportsCapacity:function(t,a){return e(I.d.rhsm.getGraphReportsCapacity(t,a))}}}))(M)},3165:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r={name:"--pf-chart-color-cyan-100",value:"#a2d9d9",var:"var(--pf-chart-color-cyan-100)"}},3166:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r={name:"--pf-chart-color-cyan-300",value:"#009596",var:"var(--pf-chart-color-cyan-300)"}},3167:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r={name:"--pf-chart-color-purple-100",value:"#b2b0ea",var:"var(--pf-chart-color-purple-100)"}},3168:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r={name:"--pf-chart-color-purple-300",value:"#5752d1",var:"var(--pf-chart-color-purple-300)"}},3190:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Y})),a.d(t,"ConnectedRhelView",(function(){return Y})),a.d(t,"RhelView",(function(){return w}));var r,n,o=a(6),i=a(13),l=a(14),c=a(15),u=a(16),s=a(0),d=a.n(s),p=a(3204),h=a(3205),v=a(3165),y=a(3166),m=a(3167),g=a(3168),f=a(812),b=a(831),E=a(1430),I=a(153),T=a.n(I),O=a(107),D=a(1),S=a(61),k=a(1432),L=a(1433),j=a(1436),F=a(1425),N=a(1428),R=a(1434),G=a(1429),C=a(17),A=a(49),w=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e,t=this.props,a=t.initialGraphFilters,r=t.initialGuestsFilters,n=t.initialInventoryFilters,o=t.initialInventorySettings,i=t.initialSubscriptionsInventoryFilters,l=t.initialToolbarFilters,c=t.location,u=t.productLabel,s=t.query,p=t.graphTallyQuery,h=t.inventoryHostsQuery,v=t.inventorySubscriptionsQuery,y=t.routeDetail,m=t.t,g=t.viewId,f=""===(null===c||void 0===c||null===(e=c.parsedSearch)||void 0===e?void 0:e.c3),b=S.a.parseRhsmQuery(s,{graphTallyQuery:p,inventoryHostsQuery:h,inventorySubscriptionsQuery:v}),E=b.graphTallyQuery,I=b.inventoryHostsQuery,T=b.inventorySubscriptionsQuery,D=b.toolbarQuery;return d.a.createElement(O.b,null,d.a.createElement(O.a,{productLabel:u,includeTour:!0},m("curiosity-view.title",{appName:C.b.UI_DISPLAY_NAME,context:u})),d.a.createElement(O.c,null,d.a.createElement(G.a,{productId:y.pathParameter,viewId:g,query:s})),d.a.createElement(O.e,null,d.a.createElement(j.b,{filterOptions:l,productId:y.pathParameter,query:D,viewId:g})),d.a.createElement(O.d,null,f&&d.a.createElement(L.a,{key:y.pathParameter,filterGraphData:a,query:E,productId:y.pathParameter,viewId:g,cardTitle:m("curiosity-graph.socketsHeading"),productShortLabel:u})||d.a.createElement(k.b,{key:y.pathParameter,filterGraphData:a,query:E,productId:y.pathParameter,viewId:g,cardTitle:m("curiosity-graph.socketsHeading"),productLabel:u})),d.a.createElement(O.d,null,d.a.createElement(R.b,{productId:y.pathParameter},d.a.createElement(R.a,{key:"hostsTab",title:m("curiosity-inventory.tab",{context:"hosts"})},d.a.createElement(F.b,{key:y.pathParameter,filterGuestsData:r,filterInventoryData:n,productId:y.pathParameter,settings:o,query:I,viewId:g})),!C.b.UI_DISABLED_TABLE_SUBSCRIPTIONS&&d.a.createElement(R.a,{key:"subscriptionsTab",title:m("curiosity-inventory.tab",{context:"subscriptions"})},d.a.createElement(N.b,{key:y.pathParameter,filterInventoryData:i,productId:y.pathParameter,query:T,viewId:g})))))}}]),a}(d.a.Component);w.defaultProps={query:{},graphTallyQuery:Object(o.a)({},D.g.GRANULARITY,D.b.DAILY),inventoryHostsQuery:(r={},Object(o.a)(r,D.g.SORT,D.e.LAST_SEEN),Object(o.a)(r,D.g.DIRECTION,D.d.ASCENDING),Object(o.a)(r,D.g.LIMIT,100),Object(o.a)(r,D.g.OFFSET,0),r),inventorySubscriptionsQuery:(n={},Object(o.a)(n,D.g.SORT,D.f.UPCOMING_EVENT_DATE),Object(o.a)(n,D.g.DIRECTION,D.d.ASCENDING),Object(o.a)(n,D.g.LIMIT,100),Object(o.a)(n,D.g.OFFSET,0),n),initialGraphFilters:[{id:"physicalSockets",fill:p.a.value,stroke:h.a.value,color:h.a.value},{id:"hypervisorSockets",fill:v.a.value,stroke:y.a.value,color:y.a.value},{id:"cloudSockets",fill:m.a.value,stroke:g.a.value,color:g.a.value},{id:"thresholdSockets"}],initialGuestsFilters:[{id:"displayName",header:Object(A.b)("curiosity-inventory.header",{context:"guestsDisplayName"}),cell:function(e,t){var a=e.displayName,r=e.inventoryId,n=((null===t||void 0===t?void 0:t.authorized)||{}).inventory;return(null===r||void 0===r?void 0:r.value)?n?d.a.createElement(f.a,{isInline:!0,component:"a",variant:"link",target:"_blank",href:"".concat(C.b.UI_DEPLOY_PATH_PREFIX,"/insights/inventory/").concat(r.value,"/")},a.value||r.value):(null===a||void 0===a?void 0:a.value)||(null===r||void 0===r?void 0:r.value):null===a||void 0===a?void 0:a.value}},{id:"inventoryId",cellWidth:40},{id:"lastSeen",cell:function(e){var t,a;return(null===e||void 0===e||null===(t=e.lastSeen)||void 0===t?void 0:t.value)&&d.a.createElement(E.DateFormat,{date:null===e||void 0===e||null===(a=e.lastSeen)||void 0===a?void 0:a.value})||""},cellWidth:15}],initialInventoryFilters:[{id:"displayName",cell:function(e,t){var a=e.displayName,r=void 0===a?{}:a,n=e.inventoryId,o=void 0===n?{}:n,i=e.numberOfGuests,l=void 0===i?{}:i,c=((null===t||void 0===t?void 0:t.authorized)||{}).inventory;if(!o.value)return r.value;var u=r.value||o.value;return c&&(u=d.a.createElement(f.a,{isInline:!0,component:"a",variant:"link",target:"_blank",href:"".concat(C.b.UI_DEPLOY_PATH_PREFIX,"/insights/inventory/").concat(o.value,"/")},r.value||o.value)),d.a.createElement(d.a.Fragment,null,u," ",l.value&&Object(A.b)("curiosity-inventory.label",{context:"numberOfGuests",count:l.value},[d.a.createElement(b.a,{color:"blue"})])||"")},isSortable:!0},{id:"measurementType",cell:function(e){var t=e.cloudProvider,a=void 0===t?{}:t,r=e.measurementType,n=void 0===r?{}:r;return d.a.createElement(d.a.Fragment,null,Object(A.b)("curiosity-inventory.measurementType",{context:n.value})," ",a.value&&d.a.createElement(b.a,{color:"purple"},Object(A.b)("curiosity-inventory.cloudProvider",{context:a.value}))||"")},isSortable:!0,cellWidth:20},{id:"sockets",isSortable:!0,isWrappable:!0,cellWidth:15},{id:"lastSeen",cell:function(e){var t,a;return(null===e||void 0===e||null===(t=e.lastSeen)||void 0===t?void 0:t.value)&&d.a.createElement(E.DateFormat,{date:null===e||void 0===e||null===(a=e.lastSeen)||void 0===a?void 0:a.value})||""},isSortable:!0,isWrappable:!0,cellWidth:15}],initialInventorySettings:{},initialSubscriptionsInventoryFilters:[{id:"productName",isSortable:!0},{id:"serviceLevel",isSortable:!0,isWrappable:!0,cellWidth:15},{id:"upcomingEventDate",cell:function(e){var t,a;return(null===e||void 0===e||null===(t=e.upcomingEventDate)||void 0===t?void 0:t.value)&&T.a.utc(null===e||void 0===e||null===(a=e.upcomingEventDate)||void 0===a?void 0:a.value).format("YYYY-DD-MM")||""},isSortable:!0,isWrappable:!0,cellWidth:15}],initialToolbarFilters:[{id:D.g.SLA},{id:D.g.USAGE,selected:!0}],productLabel:"RHEL",t:A.b,viewId:"viewRHEL"};var P=S.e.view.makeView(w.defaultProps),Y=Object(S.b)(P)(w)}}]);
//# sourceMappingURL=7.4bae2a7e.chunk.js.map