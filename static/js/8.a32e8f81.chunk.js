(this["webpackJsonpcuriosity-frontend"]=this["webpackJsonpcuriosity-frontend"]||[]).push([[8],{1372:function(e,t,a){"use strict";a.d(t,"a",(function(){return U}));var r=a(7),n=a(6),o=a(4),i=a(11),l=a(12),c=a(14),u=a(15),s=a(0),d=a.n(s),p=a(1362),h=a(3079),v=a(3080),y=a(770),m=a(3123),g=a(3081),b=a(60),f=a.n(b),E=a(52),I=a(16),D=a(3),T=a(129),O=a.n(T),S=a(920),k=a(42),L=function(e){var t=e.date,a=e.granularity,r=O.a.utc(t);switch(a){case D.b.QUARTERLY:return"".concat(r.format(I.a.timestampQuarterFormats.yearShort)," - ").concat(r.add(1,"quarter").format(I.a.timestampQuarterFormats.yearShort));case D.b.MONTHLY:return r.format(I.a.timestampMonthFormats.yearLong);case D.b.WEEKLY:return"".concat(r.format(I.a.timestampDayFormats.short)," - ").concat(r.add(1,"week").format(I.a.timestampDayFormats.yearShort));case D.b.DAILY:default:return r.format(I.a.timestampDayFormats.long)}},j=function(e){var t=e.date,a=e.granularity,r=e.tick,n=e.previousDate;if(t&&a){var o,i=O.a.utc(t),l=0!==r&&Number.parseInt(i.year(),10)!==Number.parseInt(O.a.utc(n).year(),10);switch(a){case D.b.QUARTERLY:o=(o=l?i.format(I.a.timestampQuarterFormats.yearShort):i.format(I.a.timestampQuarterFormats.short)).replace(/\s/,"\n");break;case D.b.MONTHLY:o=(o=l?i.format(I.a.timestampMonthFormats.yearShort):i.format(I.a.timestampMonthFormats.short)).replace(/\s/,"\n");break;case D.b.WEEKLY:case D.b.DAILY:default:o=(o=l?i.format(I.a.timestampDayFormats.yearShort):i.format(I.a.timestampDayFormats.short)).replace(/\s(\d{4})$/,"\n$1")}return o}},F=function(e){var t=e.tick,a=e.locale;return new Intl.NumberFormat(a,{maximumFractionDigits:1,notation:"compact",compactDisplay:"short"}).format(t)},N=function(e){var t=e.data,a=void 0===t?[]:t,r=e.granularity,n=e.productShortLabel,i=[],l={x:"x",colors:{},columns:[],groups:[[]],names:{},types:{}},c=function(e){return(I.b.TEST_MODE&&O.a.utc(e)||O.a.utc(e).local()).format("YYYY-MM-DD")};return a.forEach((function(e){/^threshold/.test(e.id)?(l.colors[e.id]=e.color||S.a.value,l.types[e.id]="step",l.names[e.id]=Object(k.b)("curiosity-graph.thresholdLabel")):(l.colors[e.id]=e.color,l.types[e.id]="area-spline",l.groups[0].push(e.id),l.names[e.id]=Object(k.b)("curiosity-graph.".concat(e.id,"Label"),{product:n})),l.columns[0]=["x"],l.columns.push([e.id]);var t=0;e.data.forEach((function(e){l.columns[0].push(c(e.date)),l.columns[l.columns.length-1].push(e.y),t+=e.y||0})),t<=0&&(l.columns.pop(),i.push(e.id))})),{hiddenDataFacets:i,configuration:{tooltip:{order:function(e,t){return l.columns.indexOf(e.id)-l.columns.indexOf(t.id)},format:{title:function(e){return L({date:e,granularity:r})},value:function(e,t,r,n){var o,i,l,c=null===(o=a.find((function(e){return r===e.id})))||void 0===o?void 0:o.data[n];/^threshold/.test(r)?i=(null===c||void 0===c?void 0:c.hasInfinite)&&Object(k.b)("curiosity-graph.infiniteThresholdLabel")||(null!==(l=null===c||void 0===c?void 0:c.y)&&void 0!==l?l:Object(k.b)("curiosity-graph.noDataLabel")):i=!1===(null===c||void 0===c?void 0:c.hasData)&&Object(k.b)("curiosity-graph.noDataLabel")||(null===c||void 0===c?void 0:c.y)||0;return i}}},unloadBeforeLoad:!0,padding:{left:40,right:40,top:10,bottom:10},legend:{show:!1},spline:{interpolation:{type:"monotone"}},data:Object(o.a)({},l),point:{show:!1},grid:{y:{show:!0}},axis:{x:{type:"timeseries",tick:{format:function(e){var t=l.columns[0].slice(1),a=c(e),n=t.indexOf(a),o=n>-1&&t[n-1];return j({tick:n,date:a,previousDate:o,granularity:r})}},padding:0},y:{default:[0,50],padding:{bottom:0},min:0,tick:{show:!1,outer:!1,format:function(e){return 0===e?"":F({tick:e})}}}}}}},C=a(237),R=a(77),w=a(3119),G=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={updatedIsToggled:null},e.onFocus=function(){var t=e.state.updatedIsToggled,a=e.props,r=a.chart,n=a.chartId,o=a.getToggle,i=a.isToggled;("function"!==typeof o||i)&&t||r.focus(n)},e.onRevert=function(){var t=e.state.updatedIsToggled,a=e.props,r=a.chart,n=a.getToggle,o=a.isToggled;("function"!==typeof n||o)&&t||r.revert()},e.onToggle=function(){var t=e.state.updatedIsToggled,a=e.props,r=a.chart,n=a.chartId,o=a.getToggle,i=a.isToggled;r.toggle(n),"function"===typeof o?o({isToggled:!i}):e.setState({updatedIsToggled:!t}),e.onRevert()},e.getColor=function(){var t=e.props,a=t.chart,r=t.chartId;return a.color(r)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.updatedIsToggled,t=this.props,a=t.children,r=t.chart,n=t.chartId,o=t.isDisabled,i=t.isThreshold,l=t.isToggled,c=t.tooltipContent,u=null===e&&"boolean"===typeof l&&l||e||!1;u&&r.hide(n);var s=d.a.createElement(C.a,{tabIndex:0,key:"curiosity-button-".concat(n),variant:"link",onClick:this.onToggle,onFocus:this.onFocus,onMouseOver:this.onFocus,onBlur:this.onRevert,onMouseOut:this.onRevert,onKeyPress:this.onToggle,component:"a",isDisabled:o,icon:(o||u)&&d.a.createElement(w.a,null)||i&&d.a.createElement("hr",{"aria-hidden":!0,className:"threshold-legend-icon",style:{visibility:o||u?"hidden":"visible",borderTopColor:this.getColor()}})||d.a.createElement("div",{"aria-hidden":!0,className:"legend-icon",style:{visibility:o||u?"hidden":"visible",backgroundColor:this.getColor()}})},a);return c?d.a.createElement(R.a,{key:"curiosity-tooltip-".concat(n),content:c,position:R.b.top,enableFlip:!1,distance:5,entryDelay:100,exitDelay:0},s):s}}]),a}(d.a.Component);G.defaultProps={chart:{color:I.b.noop,focus:I.b.noop,hide:I.b.noop,revert:I.b.noop,toggle:I.b.noop},children:null,isDisabled:!1,isThreshold:!1,isToggled:!1,tooltipContent:null,getToggle:null};var A=a(1754),P=a.n(A),Q=(a(1757),function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={chart:null},e.node=d.a.createRef(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.generateChart()}},{key:"componentDidUpdate",value:function(e){var t=this.props.config;f()(e.config.data,t.data)||this.generateChart()}},{key:"componentWillUnmount",value:function(){var e=this.state.chart;e&&e.destroy(),this.setState({chart:null})}},{key:"generateChart",value:function(){var e=this,t=this.state.chart,a=this.props,r=a.config,n=a.onComplete,i=t;i||(i=P.a.generate(Object(o.a)({bindto:this.node.current},r))),i.load(Object(o.a)({},r.data,{unload:r.unloadBeforeLoad||!1,done:function(){e.setState({chart:i},(function(){r.done?r.done({chart:i,config:r}):n({chart:i,config:r})}))}}))}},{key:"render",value:function(){var e=this.state.chart,t=this.props,a=t.className,r=t.children,n=t.config,o=t.style;return d.a.createElement("div",{className:"curiosity-c3chart ".concat(a),style:o},d.a.createElement("div",{ref:this.node,className:"curiosity-c3chart-container"}),e&&d.a.createElement("div",{className:"curiosity-c3chart-description"},"function"===typeof r&&r({chart:e,config:n})||r))}}]),a}(d.a.Component));Q.defaultProps={children:null,className:null,config:{},onComplete:I.b.noop,style:{}};var Y=a(152),_=a(1359),M=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={},e.onUpdateGraphData=function(){var t=e.props,a=t.getGraphReportsCapacity,r=t.isDisabled,i=t.productId,l=t.query,c=e.getQueryGranularity();if(!r&&c&&i){var u,s=I.a.getRangedDateTime(c),d=s.startDate,p=s.endDate;a(i,Object(o.a)((u={},Object(n.a)(u,D.g.START_DATE,d.toISOString()),Object(n.a)(u,D.g.END_DATE,p.toISOString()),u),l))}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.onUpdateGraphData()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.query;t.productId===e.productId&&f()(a,e.query)||this.onUpdateGraphData()}},{key:"getQueryGranularity",value:function(){var e=this.props.query;return null===e||void 0===e?void 0:e[D.g.GRANULARITY]}},{key:"renderLegend",value:function(e){var t=this,a=e.chart,r=e.filteredData,o=void 0===r?[]:r,i=e.granularity,l=e.hiddenDataFacets,c=void 0===l?[]:l,u=this.state,s=this.props,p=s.productId,h=s.productShortLabel,v=s.t;return o.map((function(e){var r=e.id,o=/^threshold/.test(r),l=c.includes(r),s=d.a.createElement("p",null,o&&v("curiosity-graph.thresholdLegendTooltip")||v("curiosity-graph.".concat(r,"LegendTooltip"))),y=u["".concat(p,"-").concat(i,"-").concat(r)]||!1;return d.a.createElement(G,{key:"legend-".concat(p,"-").concat(i,"-").concat(r),chart:a,chartId:r,tooltipContent:s,isDisabled:l,isThreshold:o,isToggled:y,getToggle:function(e){var a=e.isToggled;return t.setState(Object(n.a)({},"".concat(p,"-").concat(i,"-").concat(r),a))}},o&&v("curiosity-graph.thresholdLabel")||v("curiosity-graph.".concat(r,"Label"),{product:h}))}))}},{key:"renderChart",value:function(){var e=this,t=this.props,a=t.filterGraphData,n=t.graphData,i=t.productId,l=t.productShortLabel,c=this.getQueryGranularity();if(!n||!Object.values(n).length)return null;var u=[];a.length?a.forEach((function(e){n[e.id]&&u.push(Object(o.a)({},e,{data:Object(r.a)(n[e.id])}))})):Object.keys(n).forEach((function(e){u.push({id:e,data:Object(r.a)(n[e])})}));var s=N({data:u,granularity:c,productShortLabel:l}),p=s.configuration,h=void 0===p?{}:p,v=s.hiddenDataFacets,y=void 0===v?[]:v;return d.a.createElement(Q,{key:"chart-".concat(i,"-").concat(c),config:h},(function(t){var a=t.chart;return e.renderLegend({chart:a,filteredData:u,granularity:c,hiddenDataFacets:y})}))}},{key:"render",value:function(){var e=this.props,t=e.cardTitle,a=e.children,r=e.error,n=e.isDisabled,o=e.pending,i=e.viewId;if(n)return null;var l=this.getQueryGranularity();return d.a.createElement(p.a,{className:"curiosity-usage-graph"},d.a.createElement(h.a,null,d.a.createElement(v.a,null,d.a.createElement(y.a,{headingLevel:"h2",size:"lg"},t)),d.a.createElement(m.a,{className:r?"blur":""},a,d.a.createElement(_.a,{viewId:i,value:l}))),d.a.createElement(g.a,null,d.a.createElement("div",{className:r?"blur":"fadein"},o&&d.a.createElement(Y.a,{variant:"graph"}),!o&&this.renderChart())))}}]),a}(d.a.Component);M.defaultProps={cardTitle:null,children:null,error:!1,filterGraphData:[],getGraphReportsCapacity:I.b.noop,graphData:{},isDisabled:I.b.UI_DISABLED_GRAPH,pending:!1,t:k.b,productShortLabel:"",viewId:"graphCard"};var x=E.e.graphCard.makeGraphCard(),U=Object(E.b)(x,(function(e){return{getGraphReportsCapacity:function(t,a){return e(E.d.rhsm.getGraphReportsCapacity(t,a))}}}))(M)},3118:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Q})),a.d(t,"ConnectedRhelView",(function(){return Q})),a.d(t,"RhelView",(function(){return A}));var r,n,o=a(6),i=a(11),l=a(12),c=a(14),u=a(15),s=a(0),d=a.n(s),p=a(917),h=a(916),v=a(919),y=a(918),m=a(1069),g=a(1068),b=a(237),f=a(765),E=a(1369),I=a(129),D=a.n(I),T=a(92),O=a(3),S=a(52),k=a(1371),L=a(1372),j=a(1375),F=a(1364),N=a(1367),C=a(1373),R=a(1368),w=a(16),G=a(42),A=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e,t=this.props,a=t.initialGraphFilters,r=t.initialGuestsFilters,n=t.initialInventoryFilters,o=t.initialInventorySettings,i=t.initialSubscriptionsInventoryFilters,l=t.initialToolbarFilters,c=t.location,u=t.productLabel,s=t.query,p=t.graphTallyQuery,h=t.inventoryHostsQuery,v=t.inventorySubscriptionsQuery,y=t.routeDetail,m=t.t,g=t.viewId,b=""===(null===c||void 0===c||null===(e=c.parsedSearch)||void 0===e?void 0:e.c3),f=S.a.parseRhsmQuery(s,{graphTallyQuery:p,inventoryHostsQuery:h,inventorySubscriptionsQuery:v}),E=f.graphTallyQuery,I=f.inventoryHostsQuery,D=f.inventorySubscriptionsQuery,O=f.toolbarQuery;return d.a.createElement(T.b,null,d.a.createElement(T.a,{productLabel:u,includeTour:!0},m("curiosity-view.title",{appName:w.b.UI_DISPLAY_NAME,context:u})),d.a.createElement(T.c,null,d.a.createElement(R.a,{productId:y.pathParameter,viewId:g,query:s})),d.a.createElement(T.e,null,d.a.createElement(j.b,{filterOptions:l,productId:y.pathParameter,query:O,viewId:g})),d.a.createElement(T.d,null,b&&d.a.createElement(L.a,{key:y.pathParameter,filterGraphData:a,query:E,productId:y.pathParameter,viewId:g,cardTitle:m("curiosity-graph.socketsHeading"),productShortLabel:u})||d.a.createElement(k.b,{key:y.pathParameter,filterGraphData:a,query:E,productId:y.pathParameter,viewId:g,cardTitle:m("curiosity-graph.socketsHeading"),productLabel:u})),d.a.createElement(T.d,null,d.a.createElement(C.b,{productId:y.pathParameter},d.a.createElement(C.a,{key:"hostsTab",title:m("curiosity-inventory.tab",{context:"hosts"})},d.a.createElement(F.b,{key:y.pathParameter,filterGuestsData:r,filterInventoryData:n,productId:y.pathParameter,settings:o,query:I,viewId:g})),!w.b.UI_DISABLED_TABLE_SUBSCRIPTIONS&&d.a.createElement(C.a,{key:"subscriptionsTab",title:m("curiosity-inventory.tab",{context:"subscriptions"})},d.a.createElement(N.b,{key:y.pathParameter,filterInventoryData:i,productId:y.pathParameter,query:D,viewId:g})))))}}]),a}(d.a.Component);A.defaultProps={query:{},graphTallyQuery:Object(o.a)({},O.g.GRANULARITY,O.b.DAILY),inventoryHostsQuery:(r={},Object(o.a)(r,O.g.SORT,O.e.LAST_SEEN),Object(o.a)(r,O.g.DIRECTION,O.d.ASCENDING),Object(o.a)(r,O.g.LIMIT,100),Object(o.a)(r,O.g.OFFSET,0),r),inventorySubscriptionsQuery:(n={},Object(o.a)(n,O.g.SORT,O.f.UPCOMING_EVENT_DATE),Object(o.a)(n,O.g.DIRECTION,O.d.ASCENDING),Object(o.a)(n,O.g.LIMIT,100),Object(o.a)(n,O.g.OFFSET,0),n),initialGraphFilters:[{id:"physicalSockets",fill:p.a.value,stroke:h.a.value,color:h.a.value},{id:"hypervisorSockets",fill:v.a.value,stroke:y.a.value,color:y.a.value},{id:"cloudSockets",fill:m.a.value,stroke:g.a.value,color:g.a.value},{id:"thresholdSockets"}],initialGuestsFilters:[{id:"displayName",header:Object(G.b)("curiosity-inventory.header",{context:"guestsDisplayName"}),cell:function(e,t){var a=e.displayName,r=e.inventoryId,n=((null===t||void 0===t?void 0:t.authorized)||{}).inventory;return(null===r||void 0===r?void 0:r.value)?n?d.a.createElement(b.a,{isInline:!0,component:"a",variant:"link",target:"_blank",href:"".concat(w.b.UI_DEPLOY_PATH_PREFIX,"/insights/inventory/").concat(r.value,"/")},a.value||r.value):(null===a||void 0===a?void 0:a.value)||(null===r||void 0===r?void 0:r.value):null===a||void 0===a?void 0:a.value}},{id:"inventoryId",cellWidth:40},{id:"lastSeen",cell:function(e){var t,a;return(null===e||void 0===e||null===(t=e.lastSeen)||void 0===t?void 0:t.value)&&d.a.createElement(E.DateFormat,{date:null===e||void 0===e||null===(a=e.lastSeen)||void 0===a?void 0:a.value})||""},cellWidth:15}],initialInventoryFilters:[{id:"displayName",cell:function(e,t){var a=e.displayName,r=void 0===a?{}:a,n=e.inventoryId,o=void 0===n?{}:n,i=e.numberOfGuests,l=void 0===i?{}:i,c=((null===t||void 0===t?void 0:t.authorized)||{}).inventory;if(!o.value)return r.value;var u=r.value||o.value;return c&&(u=d.a.createElement(b.a,{isInline:!0,component:"a",variant:"link",target:"_blank",href:"".concat(w.b.UI_DEPLOY_PATH_PREFIX,"/insights/inventory/").concat(o.value,"/")},r.value||o.value)),d.a.createElement(d.a.Fragment,null,u," ",l.value&&Object(G.b)("curiosity-inventory.label",{context:"numberOfGuests",count:l.value},[d.a.createElement(f.a,{color:"blue"})])||"")},isSortable:!0},{id:"measurementType",cell:function(e){var t=e.cloudProvider,a=void 0===t?{}:t,r=e.measurementType,n=void 0===r?{}:r;return d.a.createElement(d.a.Fragment,null,Object(G.b)("curiosity-inventory.measurementType",{context:n.value})," ",a.value&&d.a.createElement(f.a,{color:"purple"},Object(G.b)("curiosity-inventory.cloudProvider",{context:a.value}))||"")},isSortable:!0,cellWidth:20},{id:"sockets",isSortable:!0,isWrappable:!0,cellWidth:15},{id:"lastSeen",cell:function(e){var t,a;return(null===e||void 0===e||null===(t=e.lastSeen)||void 0===t?void 0:t.value)&&d.a.createElement(E.DateFormat,{date:null===e||void 0===e||null===(a=e.lastSeen)||void 0===a?void 0:a.value})||""},isSortable:!0,isWrappable:!0,cellWidth:15}],initialInventorySettings:{},initialSubscriptionsInventoryFilters:[{id:"productName",isSortable:!0},{id:"serviceLevel",isSortable:!0,isWrappable:!0,cellWidth:15},{id:"upcomingEventDate",cell:function(e){var t,a;return(null===e||void 0===e||null===(t=e.upcomingEventDate)||void 0===t?void 0:t.value)&&D.a.utc(null===e||void 0===e||null===(a=e.upcomingEventDate)||void 0===a?void 0:a.value).format("YYYY-DD-MM")||""},isSortable:!0,isWrappable:!0,cellWidth:15}],initialToolbarFilters:[{id:O.g.SLA},{id:O.g.USAGE,selected:!0}],productLabel:"RHEL",t:G.b,viewId:"viewRHEL"};var P=S.e.view.makeView(A.defaultProps),Q=Object(S.b)(P)(A)}}]);
//# sourceMappingURL=8.a32e8f81.chunk.js.map