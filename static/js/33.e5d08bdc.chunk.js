(this["webpackJsonpcuriosity-frontend"]=this["webpackJsonpcuriosity-frontend"]||[]).push([[33,42],{589:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return m})),r.d(e,"inventoryListHelpers",(function(){return m})),r.d(e,"applySortFilters",(function(){return y})),r.d(e,"applyWrappableFilters",(function(){return O})),r.d(e,"parseInventoryFilters",(function(){return j})),r.d(e,"parseRowCellsListData",(function(){return g}));var n=r(8),a=r(9),o=r(1),s=r(0),i=r.n(s),l=r(104),c=r(11),u=r.n(c),d=function(){return{className:u.a.modifiers.wrap}},v=r(143),f=r(151),p=r.n(f),b=r(32),h=r(3),y=function(t){var e=t.filter,r=void 0===e?{}:e,n=t.onSort,a=t.query,s=void 0===a?{}:a,i=r.id,c=Object(o.a)({},r),u=c.onSort||n;if(!c.onSort&&n&&(c.onSort=n),u&&"boolean"!==typeof c.sortActive&&(null===s||void 0===s?void 0:s[h.g.SORT])&&p()(null===s||void 0===s?void 0:s[h.g.SORT])===i&&(c.sortActive=!0),u&&!c.sortDirection&&(null===s||void 0===s?void 0:s[h.g.DIRECTION]))switch(null===s||void 0===s?void 0:s[h.g.DIRECTION]){case h.d.DESCENDING:c.sortDirection=l.a.desc;break;default:c.sortDirection=l.a.asc}return!u||c.sortActive||(null===s||void 0===s?void 0:s[h.g.SORT])||!0!==c.isSortDefault||(c.sortActive=!0,c.sortDefaultInitialDirection&&(c.sortDirection=c.sortDefaultInitialDirection)),c},O=function(t){var e=t.filter,r=void 0===e?{}:e,n=Object(o.a)({},r);return Array.isArray(n.transforms)?n.transforms.push(d):n.transforms=[d],n},j=function(t){var e=t.filters,r=void 0===e?[]:e,n=t.onSort,s=t.query,i=void 0===s?{}:s;return Object(a.a)(r).map((function(t){var e=Object(o.a)({},t);return e.isSortable&&Object.assign(e,y({filter:e,onSort:n,query:i})),e.isWrappable&&Object.assign(e,O({filter:e})),e}))},g=function(t){var e=t.filters,r=void 0===e?[]:e,s=t.cellData,l=void 0===s?{}:s,c=t.session,u=void 0===c?{}:c,d=[],f=[],p={};return Object.entries(l).forEach((function(t){var e=Object(n.a)(t,2),r=e[0],a=e[1];p[r]={title:Object(b.translate)("curiosity-inventory.header",{context:r}),value:a},d.push(p[r].title),f.push(a)})),(null===r||void 0===r?void 0:r.length)&&(d.length=0,f.length=0,r.forEach((function(t){var e,r,n,s,l,c,h=t.id,y=t.cell,O=t.cellWidth,j=t.header,g=t.onSort,m=t.sortActive,D=t.sortDirection,S=t.transforms;p[h]?(e=null!==(n=null===(s=p[h])||void 0===s?void 0:s.title)&&void 0!==n?n:h,r=null!==(l=null===(c=p[h])||void 0===c?void 0:c.value)&&void 0!==l?l:""):h&&(e=Object(b.translate)("curiosity-inventory.header",{context:h}),r="");j&&(e="function"===typeof j&&j(Object(o.a)({},p))||j),("string"===typeof e||"number"===typeof e||i.a.isValidElement(e))&&(e={title:e}),e&&(e.transforms=[],Array.isArray(S)&&(e.transforms=e.transforms.concat(Object(a.a)(S))),"number"===typeof O&&e.transforms.push(Object(v.a)(O))),"function"===typeof g&&(e=Object(o.a)(Object(o.a)({},e),{},{onSort:function(t){return g(Object(o.a)({},p),Object(o.a)(Object(o.a)({},t),{},{id:h}))},sortActive:m,sortDirection:D})),y&&(r="function"===typeof y&&y(Object(o.a)({},p),Object(o.a)({},u))||y),("string"===typeof r||"number"===typeof r||i.a.isValidElement(r))&&(r={title:r}),d.push(e),f.push(r)}))),{columnHeaders:d,cells:f,data:Object(o.a)({},p)}},m={applySortFilters:y,applyWrappableFilters:O,parseInventoryFilters:j,parseRowCellsListData:g}},598:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return D})),r.d(e,"ConnectedGuestsList",(function(){return D})),r.d(e,"GuestsList",(function(){return g}));var n=r(9),a=r(6),o=r(1),s=r(15),i=r(16),l=r(19),c=r(18),u=r(0),d=r.n(u),v=r(176),f=r(13),p=r(56),b=r(191),h=r(589),y=r(3),O=r(192),j=r(4),g=function(t){Object(l.a)(r,t);var e=Object(c.a)(r);function r(){var t;Object(s.a)(this,r);for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return(t=e.call.apply(e,[this].concat(l))).state={currentPage:0,limit:100,previousData:[]},t.onUpdateGuestsData=function(){var e=t.state,r=e.currentPage,n=e.limit,s=t.props,i=s.getHostsInventoryGuests,l=s.query,c=s.id;if(c){var u,d=Object(o.a)(Object(o.a)({},l),{},(u={},Object(a.a)(u,y.g.LIMIT,n),Object(a.a)(u,y.g.OFFSET,r*n||0),u));i(c,p.a.parseRhsmQuery(d).inventoryGuestsQuery)}},t.onScroll=function(e){var r=e.target,a=t.state,o=a.currentPage,s=a.limit,i=a.previousData,l=t.props,c=l.numberOfGuests,u=l.pending,d=l.listData,v=r.scrollHeight-r.scrollTop===r.clientHeight;if(c>(o+1)*s&&v&&!u){var f=o+1,p=[].concat(Object(n.a)(i),Object(n.a)(d||[]));t.setState({previousData:p,currentPage:f})}},t}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.onUpdateGuestsData()}},{key:"componentDidUpdate",value:function(t,e){this.state.currentPage!==e.currentPage&&this.onUpdateGuestsData()}},{key:"renderLoader",value:function(){var t=this.state.currentPage,e=this.props,r=e.filterGuestsData,n=e.listData,a=e.pending;if(t>0&&a){var o=Object(j.jsx)(b.Loader,{variant:"table",tableProps:{borders:!1,colCount:(null===r||void 0===r?void 0:r.length)||(null===n||void 0===n?void 0:n[0])&&Object.keys(n[0]).length||1,colWidth:(null===r||void 0===r?void 0:r.length)&&r.map((function(t){return t.cellWidth}))||[],rowCount:0,variant:v.b.compact}});return Object(j.jsx)("div",{className:"curiosity-table-scroll-loader__custom",children:o})}return null}},{key:"renderTable",value:function(){var t=this.state.previousData,e=this.props,r=e.filterGuestsData,a=e.listData,o=e.numberOfGuests,s=e.session,i=[],l=[].concat(Object(n.a)(t),Object(n.a)(a||[])).map((function(t){var e=Object.assign({},t),n=h.inventoryListHelpers.parseRowCellsListData({filters:r,cellData:e,session:s}),a=n.columnHeaders,o=n.cells;return i=a,{cells:o}})),c=42*(o+1);return c=c<275&&c||275,Object(j.jsx)("div",{className:"curiosity-table-scroll",style:{height:"".concat(c,"px")},children:Object(j.jsxs)("div",{className:"curiosity-table-scroll-list".concat(c<275?"__no-scroll":""),onScroll:this.onScroll,children:[this.renderLoader(),l.length&&Object(j.jsx)(O.Table,{borders:!1,variant:v.b.compact,className:"curiosity-guests-list",columnHeaders:i,rows:l})||null]})})}},{key:"render",value:function(){var t=this.state.currentPage,e=this.props,r=e.error,n=e.filterGuestsData,a=e.listData,o=e.numberOfGuests,s=e.pending,i=e.perPageDefault;return Object(j.jsxs)("div",{className:"fadein ".concat(r?"blur":""),children:[s&&0===t&&Object(j.jsx)(b.Loader,{variant:"table",tableProps:{borders:!1,colCount:(null===n||void 0===n?void 0:n.length)||(null===a||void 0===a?void 0:a[0])&&Object.keys(a[0]).length||1,colWidth:(null===n||void 0===n?void 0:n.length)&&n.map((function(t){return t.cellWidth}))||[],rowCount:o<i?o:i,variant:v.b.compact}}),(!s&&0===t||t>0)&&this.renderTable()]})}}]),r}(d.a.Component);g.defaultProps={error:!1,filterGuestsData:[],getHostsInventoryGuests:f.b.noop,listData:[],pending:!1,perPageDefault:5,query:{},session:{}};var m=p.e.guestsList.makeGuestsList(),D=Object(p.b)(m,(function(t){return{getHostsInventoryGuests:function(e,r){return t(p.d.rhsm.getHostsInventoryGuests(e,r))}}}))(g)}}]);
//# sourceMappingURL=33.e5d08bdc.chunk.js.map