(this["webpackJsonpcuriosity-frontend"]=this["webpackJsonpcuriosity-frontend"]||[]).push([[31],{590:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return y})),a.d(e,"ChartArea",(function(){return y}));var i=a(6),r=a(1),n=a(15),o=a(16),s=a(18),c=a(17),l=a(0),d=a.n(l),h=a(915),u=a(921),f=a(867),g=a(922),x=a(924),b=a(918),p=a(912),m=a(925),v=a(634),j=a.n(v),O=a(12),k=a(4),y=function(t){Object(s.a)(a,t);var e=Object(c.a)(a);function a(){var t;Object(n.a)(this,a);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).state={chartWidth:0},t.dataSetsToggle={},t.resizeObserver=O.b.noop,t.containerRef=d.a.createRef(),t.tooltipRef=d.a.createRef(),t.onHide=function(e){t.dataSetsToggle=Object(r.a)(Object(r.a)({},t.dataSetsToggle),{},Object(i.a)({},e,!0)),t.forceUpdate()},t.onRevert=function(){t.dataSetsToggle={},t.forceUpdate()},t.onToggle=function(e){var a=!t.dataSetsToggle[e];return t.dataSetsToggle=Object(r.a)(Object(r.a)({},t.dataSetsToggle),{},Object(i.a)({},e,a)),t.forceUpdate(),a},t.onResizeContainer=function(){var e=t.state.chartWidth,a=(t.containerRef.current||{}).clientWidth,i=void 0===a?0:a;i!==e&&t.setState({chartWidth:i})},t.getIsToggled=function(e){return t.dataSetsToggle[e]||!1},t}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setResizeObserve()}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setResizeObserve",value:function(){var t=this,e=this.containerRef.current,a=window.ResizeObserver;if(e&&a){var i=new a(this.onResizeContainer);i.observe(e),this.resizeObserver=function(){return i.unobserve(e)}}else this.onResizeContainer(),window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",t.onResizeContainer)}}},{key:"setChartTicks",value:function(){var t=this.props,e=t.xAxisLabelIncrement,a=t.xAxisTickFormat,i=t.yAxisTickFormat,n=t.dataSets,o={},s={},c=n.length&&n[0].data||[];return n.forEach((function(t){t.xAxisLabelUseDataSet&&(c=t.data)})),o.xAxisTickValues=c.reduce((function(t,a,i){return i%e===0?t.concat(a.x):t}),[]),o.xAxisTickFormat=function(t){return c[t]&&c[t].xAxisLabel||t},"function"===typeof a&&(o.xAxisTickFormat=function(t){var e=o.xAxisTickValues,i=e.indexOf(t),n=Object(r.a)({},c[e[i-1]]||{}),s=Object(r.a)({},c[e[i+1]]||{}),l=Object(r.a)({},c[t]||{});return a({tick:t,previousItem:n,item:l,nextItem:s})}),"function"===typeof i&&(s.yAxisTickFormat=function(t){return i({tick:t})}),Object(r.a)(Object(r.a)({},o),s)}},{key:"getChartTicks",value:function(){var t=this.props.xAxisFixLabelOverlap,e=this.setChartTicks(),a=e.xAxisTickValues,i=e.xAxisTickFormat,r=e.yAxisTickFormat,n={fixLabelOverlap:t},o={dependentAxis:!0,showGrid:!0};return a&&(n.tickValues=a),i&&(n.tickFormat=i),r&&(o.tickFormat=r),{isXAxisTicks:!!a,xAxisProps:n,yAxisProps:o}}},{key:"getChartDomain",value:function(t){var e=t.isXAxisTicks,a=this.dataSetsToggle,i=this.props,n=i.domain,o=i.dataSets;if(Object.keys(n).length)return n;var s={},c={},l=0,d=0;o.filter((function(t){return!0===t.isStacked})).forEach((function(t){if(!a[t.id]&&t.data){var e=0;t.data.forEach((function(a,i){e=a&&a.y>e?a.y:e,i===t.data.length-1&&(d+=e)}))}})),o.forEach((function(t){!a[t.id]&&t.data&&(l=t.data.length>l?t.data.length:l,t.data.forEach((function(t){d=t&&t.y>d?t.y:d})))})),e||(s.x=[0,l||10]);var h=Math.pow(10,Math.floor(Math.log10(d>10&&d||10)));return s.y=[0,Math.ceil((d+1)/h)*h],Object.keys(s).length&&(c.domain=s),{maxY:d,chartDomain:Object(r.a)({},c)}}},{key:"getTooltipData",value:function(){var t=this.dataSetsToggle,e=this.props,a=e.dataSets,i=e.chartTooltip,n=[];return i&&a&&a[0]&&a[0].data&&(n=a[0].data.map((function(e,n){var o={};a.forEach((function(e){!t[e.id]&&e.data&&e.data[n]&&(o[e.id]={color:e.stroke||e.fill||e.color||"",data:j()(e.data[n])})}));var s={datum:{x:e.x,y:e.y,index:n,itemsByKey:o,dataSets:j()(a)}};return{x:e.x,y:null,itemsByKey:o,tooltip:d.a.isValidElement(i)&&d.a.cloneElement(i,Object(r.a)({},s))||i(Object(r.a)({},s))}}))),n}},{key:"renderTooltip",value:function(){var t=this,e=this.dataSetsToggle,a=this.props,i=a.chartTooltip,n=a.dataSets;if(!i||Object.values(e).filter((function(t){return!0===t})).length===n.length)return null;var o=Object(h.a)("voronoi","cursor"),s=this.getTooltipData(),c=function(t,e,a){var i=t+10;return t>e/2&&(i=t-10-a/2),i},l=function(t,e,a){var i=t+10;return t>e/2&&(i=t-10-a),i},d=function(e){var a=t.containerRef.current,i=t.tooltipRef.current,n=a&&a.getBoundingClientRect()||{width:0,height:0},o=i&&i.getBoundingClientRect()||{width:0,height:0},d=function(t){var e=t.datum,a=s.find((function(t){return t.x===e.x}))||{};return(null===a||void 0===a?void 0:a.tooltip)||""}(Object(r.a)({},e));return d?Object(k.jsx)("g",{children:Object(k.jsx)("foreignObject",{x:c(e.x,n.width,o.width),y:l(e.y,n.height,o.height),width:"100%",height:"100%",children:Object(k.jsx)("div",{ref:t.tooltipRef,style:{display:"inline-block"},xmlns:"http://www.w3.org/1999/xhtml",children:d})})}):Object(k.jsx)("g",{})},g=Object(k.jsx)(u.a,{flyout:Object(k.jsx)(f.a,{}),flyoutStyle:{fill:"transparent"},labelComponent:Object(k.jsx)(d,{}),renderInPortal:!0});return Object(k.jsx)(o,{cursorDimension:"x",labels:function(t){return t},labelComponent:g,voronoiPadding:50,mouseFollowTooltips:!0})}},{key:"renderLegend",value:function(){var t=this.props,e=t.chartLegend,a=t.dataSets;if(!e)return null;var i={datum:{dataSets:j()(a)},chart:{hide:this.onHide,revert:this.onRevert,toggle:this.onToggle,isToggled:this.getIsToggled}};return d.a.isValidElement(e)&&d.a.cloneElement(e,Object(r.a)({},i))||e(Object(r.a)({},i))}},{key:"renderChart",value:function(t){var e=t.stacked,a=void 0!==e&&e,i=this.dataSetsToggle,n=this.props.dataSets,o=[],s=[];return n.forEach((function(t,e){if(!i[t.id]&&t.data&&t.data.length){var a=t.isThreshold&&function(t,e){var a={data:{}};return t.fill&&(a.data.fill=t.fill),t.stroke&&(a.data.stroke=t.stroke),t.strokeWidth&&(a.data.strokeWidth=t.strokeWidth),t.strokeDasharray&&(a.data.strokeDasharray=t.strokeDasharray),Object(k.jsx)(g.a,{animate:t.animate||!1,interpolation:t.interpolation||"step",name:"chartArea-".concat(e,"-threshold"),data:t.data,style:Object(r.a)(Object(r.a)({},t.style||{}),a),themeColor:t.themeColor,themeVariant:t.themeVariant},O.b.generateId())}(t,e)||function(t,e){var a={data:{}};return t.fill&&(a.data.fill=t.fill),t.stroke&&(a.data.stroke=t.stroke),t.strokeWidth&&(a.data.strokeWidth=t.strokeWidth),Object(k.jsx)(x.a,{animate:t.animate||!1,interpolation:t.interpolation||"monotoneX",name:"chartArea-".concat(e,"-area"),data:t.data,style:Object(r.a)(Object(r.a)({},t.style||{}),a),themeColor:t.themeColor,themeVariant:t.themeVariant},O.b.generateId())}(t,e);t.isStacked?s.push(a):o.push(a)}})),a&&s||o}},{key:"render",value:function(){var t=this.state.chartWidth,e=this.props,a=e.chartLegend,i=e.padding,n=e.themeColor,o=this.getChartTicks(),s=o.isXAxisTicks,c=o.xAxisProps,l=o.yAxisProps,d=this.getChartDomain({isXAxisTicks:s}),h=d.chartDomain,u={containerComponent:d.maxY>=0&&this.renderTooltip()||void 0},f=Object(r.a)(Object(r.a)({padding:i},h),u);return Object(k.jsxs)("div",{id:"curiosity-chartarea",className:"uxui-curiosity__modal uxui-curiosity__modal--loading",ref:this.containerRef,children:[Object(k.jsxs)(b.a,Object(r.a)(Object(r.a)({animate:{duration:0},width:t,themeColor:n},f),{},{children:[Object(k.jsx)(p.a,Object(r.a)(Object(r.a)({},c),{},{animate:!1})),Object(k.jsx)(p.a,Object(r.a)(Object(r.a)({},l),{},{animate:!1})),this.renderChart({}),Object(k.jsx)(m.a,{children:this.renderChart({stacked:!0})})]})),a&&Object(k.jsx)("div",{className:"curiosity-chartarea-description victory-legend",children:this.renderLegend()})]})}}]),a}(d.a.Component);y.defaultProps={chartLegend:null,chartTooltip:null,domain:{},dataSets:[],height:275,padding:{bottom:75,left:50,right:50,top:50},themeColor:"blue",xAxisFixLabelOverlap:!1,xAxisLabelIncrement:1,xAxisTickFormat:null,yAxisTickFormat:null}}}]);
//# sourceMappingURL=31.4ad49e26.chunk.js.map