(this["webpackJsonpcuriosity-frontend"]=this["webpackJsonpcuriosity-frontend"]||[]).push([[24,33],{582:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return _})),n.d(t,"Select",(function(){return _})),n.d(t,"SelectDirection",(function(){return m})),n.d(t,"SelectPosition",(function(){return x}));var i=n(1),o=n(15),a=n(16),l=n(18),c=n(17),r=n(0),s=n.n(r),u=n(21),d=n(706),p=n(921),f=n(804),v=n(634),g=n.n(v),b=n(54),O=n.n(b),h=n(647),y=n.n(h),S=n(125),T=n.n(S),j=n(23),E=n(4),m=u.c,x=u.d,_=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={isExpanded:!1,options:null,selected:null},e.onSelect=function(t,n){var o=e.state.options,a=e.props,l=a.id,c=a.name,r=a.onSelect,s=a.variant,u=o,p=u.findIndex((function(e){return e.title===n}));u[p].selected=s===d.e.single||!u[p].selected,s===d.e.single&&u.forEach((function(e,t){p!==t&&(u[t].selected=!1)}));var f=s===d.e.single?n:u.filter((function(e){return!0===e.selected})).map((function(e){return e.title}));e.setState({options:u,selected:f},(function(){var t=g()(u),n={id:l,name:c||l,value:t[p].value,selected:s===d.e.single&&t[p]||g()(f),selectedIndex:p,type:"select-".concat(s===d.e.single?"one":"multiple"),options:t};s===d.e.checkbox&&(n.checked=t[p].selected);var o=Object(i.a)(Object(i.a)({},n),{},{target:Object(i.a)({},n),currentTarget:Object(i.a)({},n),persist:j.b.noop});r(Object(i.a)({},o),p,t),s===d.e.single&&e.setState({isExpanded:!1})}))},e.onToggle=function(t){e.setState({isExpanded:t})},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){null===this.state.options&&this.formatOptions()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.options,i=t.selectedOptions;O()(e.options,n)&&O()(e.selectedOptions,i)||this.formatOptions()}},{key:"formatOptions",value:function(){var e,t=this.props,n=t.options,o=t.selectedOptions,a=t.variant,l=T()(n)?Object.keys(n).map((function(e){return Object(i.a)(Object(i.a)({},n[e]),{},{title:e,value:n[e]})})):g()(n),c=o&&"string"===typeof o||"number"===typeof o?[o]:o;l.forEach((function(e,t){var n=e;if("string"===typeof n&&(n={title:e,value:e},l[t]=n),n.text=n.text||n.title,n.textContent=n.textContent||n.title,n.label=n.label||n.title,c){var i;if(T()(n.value)){if(!(i=y()(c,n.value)>-1))i=!!c.find((function(e){return Object.values(n.value).includes(e)}))}else i=c.includes(n.value);i||(i=c.includes(n.title)),l[t].selected=i}})),e=a===d.e.single?(l.find((function(e){return!0===e.selected}))||{}).title:l.filter((function(e){return!0===e.selected})).map((function(e){return e.title})),this.setState({options:l,selected:e})}},{key:"render",value:function(){var e=this.state,t=e.options,n=e.selected,o=e.isExpanded,a=this.props,l=a.ariaLabel,c=a.className,r=a.direction,s=a.isDisabled,d=a.isToggleText,v=a.maxHeight,g=a.placeholder,b=a.position,O=a.toggleIcon,h=a.variant,y={direction:r,maxHeight:v};return t&&t.length&&!s||(y.isDisabled=!0),Object(E.jsx)(p.a,Object(i.a)(Object(i.a)({className:"curiosity-select".concat(d?"":"__no-toggle-text"," ").concat(b===u.d.right?"curiosity-select__position-right":""," ").concat(c),variant:h,"aria-label":l,onToggle:this.onToggle,onSelect:this.onSelect,selections:n,isOpen:o,toggleIcon:O,placeholderText:g},y),{},{children:t&&t.map((function(e){return Object(E.jsx)(f.a,{id:window.btoa("".concat(e.title,"-").concat(e.value)),value:e.title,"data-value":T()(e.value)&&JSON.stringify([e.value])||e.value,"data-title":e.title},window.btoa("".concat(e.title,"-").concat(e.value)))}))||[]}))}}]),n}(s.a.Component);_.defaultProps={ariaLabel:"Select option",className:"",direction:m.down,id:j.b.generateId(),isDisabled:!1,isToggleText:!0,maxHeight:null,name:null,onSelect:j.b.noop,options:[],placeholder:"Select option",position:x.left,selectedOptions:null,toggleIcon:null,variant:d.e.single}},600:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p})),n.d(t,"ToolbarFieldGranularity",(function(){return p})),n.d(t,"toolbarFieldOptions",(function(){return d}));var i=n(6),o=n(1),a=(n(0),n(57)),l=n(582),c=n(3),r=n(13),s=n(33),u=n(4),d=Object.values(c.b).map((function(e){return{title:Object(s.translate)("curiosity-toolbar.granularity",{context:e}),value:e,selected:!1}})),p=function(e){var t=e.options,n=e.t,s=e.value,d=e.viewId,p=Object(a.h)((function(e){var t,n;return null===(t=e.view.graphTallyQuery)||void 0===t||null===(n=t[d])||void 0===n?void 0:n[c.g.GRANULARITY]}),s),f=t.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{selected:e.value===p})}));return Object(u.jsx)(l.Select,{"aria-label":n("curiosity-toolbar.placeholder",{context:"granularity"}),onSelect:function(e){var t=r.a.getRangedDateTime(e.value),n=t.startDate,o=t.endDate;a.g.dispatch([{type:a.f.query.SET_QUERY_CLEAR_INVENTORY_LIST,viewId:d},Object(i.a)({type:a.f.query.SET_QUERY_RHSM_TYPES[c.g.GRANULARITY],viewId:d},c.g.GRANULARITY,e.value),Object(i.a)({type:a.f.query.SET_QUERY_RHSM_TYPES[c.g.START_DATE],viewId:d},c.g.START_DATE,n.toISOString()),Object(i.a)({type:a.f.query.SET_QUERY_RHSM_TYPES[c.g.END_DATE],viewId:d},c.g.END_DATE,o.toISOString())])},options:f,selectedOptions:p,placeholder:n("curiosity-toolbar.placeholder",{context:"granularity"})})};p.defaultProps={options:d,t:s.translate,value:c.b.DAILY,viewId:"toolbarFieldGranularity"}}}]);
//# sourceMappingURL=24.c2da0ba9.chunk.js.map