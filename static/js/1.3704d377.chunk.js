(this["webpackJsonpcuriosity-frontend"]=this["webpackJsonpcuriosity-frontend"]||[]).push([[1],{542:function(t,e,a){"use strict";a.d(e,"a",(function(){return O}));var r=a(1),n=a(13),o=a(14),i=a(29),c=a(30),l=a(0),s=a.n(l),u=a(543),d=a(1002),p=a(621),h=a(617),m=a.n(h),g=a(78),f=a.n(g),v=a(77),y=a.n(v),b=a(7),O=function(t){Object(c.a)(a,t);var e=Object(i.a)(a);function a(){var t;Object(n.a)(this,a);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))).state={isExpanded:!1,options:null,selected:null},t.onSelect=function(e,a){var n=t.state.options,o=t.props,i=o.id,c=o.name,l=o.onSelect,s=o.variant,d=n,p=d.findIndex((function(t){return t.title===a}));d[p].selected=s===u.e.single||!d[p].selected,s===u.e.single&&d.forEach((function(t,e){p!==e&&(d[e].selected=!1)}));var h=s===u.e.single?a:d.filter((function(t){return!0===t.selected})).map((function(t){return t.title}));t.setState({options:d,selected:h},(function(){var e=m()(d),a={id:i,name:c||i,value:e[p].value,selected:s===u.e.single&&e[p]||m()(h),selectedIndex:p,type:"select-".concat(s===u.e.single?"one":"multiple"),options:e};s===u.e.checkbox&&(a.checked=e[p].selected);var n=Object(r.a)({},a,{target:Object(r.a)({},a),currentTarget:Object(r.a)({},a),persist:b.a.noop});l(Object(r.a)({},n),p,e),s===u.e.single&&t.setState({isExpanded:!1})}))},t.onToggle=function(e){t.setState({isExpanded:e})},t}return Object(o.a)(a,[{key:"componentDidMount",value:function(){null===this.state.options&&this.formatOptions()}},{key:"componentDidUpdate",value:function(t){var e=this.props,a=e.options,r=e.selectedOptions;f()(t.options,a)&&f()(t.selectedOptions,r)||this.formatOptions()}},{key:"formatOptions",value:function(){var t,e=this.props,a=e.options,n=e.selectedOptions,o=e.variant,i=y()(a)?Object.keys(a).map((function(t){return Object(r.a)({},a[t],{title:t,value:a[t]})})):m()(a),c=n&&"string"===typeof n||"number"===typeof n?[n]:n;i.forEach((function(t,e){var a=t;"string"===typeof a&&(a={title:t,value:t},i[e]=a),a.text=a.text||a.title,a.textContent=a.textContent||a.title,a.label=a.label||a.title,c&&(i[e].selected=c.includes(a.value)||c.includes(a.title))})),t=o===u.e.single?(i.find((function(t){return!0===t.selected}))||{}).title:i.filter((function(t){return!0===t.selected})).map((function(t){return t.title})),this.setState({options:i,selected:t})}},{key:"render",value:function(){var t=this.state,e=t.options,a=t.selected,r=t.isExpanded,n=this.props,o=n.ariaLabel,i=n.className,c=n.isDisabled,l=n.placeholder,u=n.variant,h={};return e&&e.length&&!c||(h.isDisabled=!0),s.a.createElement(d.a,Object.assign({className:"curiosity-select ".concat(i),variant:u,"aria-label":o,onToggle:this.onToggle,onSelect:this.onSelect,selections:a,isOpen:r,placeholderText:l},h),e&&e.map((function(t){return s.a.createElement(p.a,{key:window.btoa(t.title),value:t.title,"data-value":t.value,"data-title":t.title})}))||[])}}]),a}(s.a.Component);O.defaultProps={ariaLabel:"Select option",className:"",id:b.a.generateId(),isDisabled:!1,name:null,onSelect:b.a.noop,options:[],selectedOptions:null,placeholder:"Select option",variant:u.e.single}},622:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var r=a(54),n=a(4),o={getGranularityOptions:function(t){return"default"===t?{selected:n.c.DAILY,options:[{title:Object(r.b)("curiosity-graph.dropdownDaily"),value:n.c.DAILY,selected:!0},{title:Object(r.b)("curiosity-graph.dropdownWeekly"),value:n.c.WEEKLY},{title:Object(r.b)("curiosity-graph.dropdownMonthly"),value:n.c.MONTHLY},{title:Object(r.b)("curiosity-graph.dropdownQuarterly"),value:n.c.QUARTERLY}]}:{options:[]}}}},675:function(t,e,a){"use strict";a.d(e,"a",(function(){return X}));var r=a(11),n=a(1),o=a(13),i=a(14),c=a(29),l=a(30),s=a(0),u=a.n(s),d=a(942),p=a(943),h=a(944),m=a(985),g=a(945),f=a(984),v=a(670),y=a(78),b=a.n(y),O=a(542),k=a(31),E=a(6),T=a(4),S=a(70),A=a.n(S),D=function(t){var e=t.date,a=t.granularity,r=A.a.utc(e);switch(a){case T.c.QUARTERLY:return"".concat(r.format(E.a.timestampQuarterFormats.yearShort)," - ").concat(r.add(1,"quarter").format(E.a.timestampQuarterFormats.yearShort));case T.c.MONTHLY:return r.format(E.a.timestampMonthFormats.yearLong);case T.c.WEEKLY:return"".concat(r.format(E.a.timestampDayFormats.short)," - ").concat(r.add(1,"week").format(E.a.timestampDayFormats.yearShort));case T.c.DAILY:default:return r.format(E.a.timestampDayFormats.long)}},x=function(t){var e=t.tick,a=Math.abs(e),r=e,n="";return a>=Math.pow(10,12)?(n="T",r=e/Math.pow(10,12)):a<Math.pow(10,12)&&a>=Math.pow(10,9)?(n="B",r=e/Math.pow(10,9)):a<Math.pow(10,9)&&a>=Math.pow(10,6)?(n="M",r=e/Math.pow(10,6)):a<Math.pow(10,6)&&a>=Math.pow(10,3)&&(n="K",r=e/Math.pow(10,3)),"".concat(r).concat(n)},R={getChartXAxisLabelIncrement:function(t){switch(t){case T.c.DAILY:return 5;case T.c.WEEKLY:case T.c.MONTHLY:return 2;case T.c.QUARTERLY:default:return 1}},getTooltipDate:D,xAxisTickFormat:function(t){var e=t.date,a=t.granularity,r=t.tick,n=t.previousDate;if(e&&a){var o,i=A.a.utc(e),c=0!==r&&Number.parseInt(i.year(),10)!==Number.parseInt(A.a.utc(n).year(),10);switch(a){case T.c.QUARTERLY:o=(o=c?i.format(E.a.timestampQuarterFormats.yearShort):i.format(E.a.timestampQuarterFormats.short)).replace(/\s/,"\n");break;case T.c.MONTHLY:o=(o=c?i.format(E.a.timestampMonthFormats.yearShort):i.format(E.a.timestampMonthFormats.short)).replace(/\s/,"\n");break;case T.c.WEEKLY:case T.c.DAILY:default:o=(o=c?i.format(E.a.timestampDayFormats.yearShort):i.format(E.a.timestampDayFormats.short)).replace(/\s(\d{4})$/,"\n$1")}return o}},yAxisTickFormat:function(t){var e=t.tick,a=t.locale,r=void 0===a?E.b.UI_LOCALE_DEFAULT:a,n="".concat(new Intl.NumberFormat(r,{maximumFractionDigits:1,notation:"compact",compactDisplay:"short"}).format(e));return n.length>3&&n.length>="".concat(e).length&&(n=x({tick:e})),n},yAxisTickFormatFallback:x},L=a(622),I=a(454),j=function(t){var e=t.datum,a=t.granularity,r=t.product,n=t.t,o=null,i=[],c=(e||{}).itemsByKey,l=void 0===c?{}:c;return Object.keys(l).forEach((function(t,e){var c,s;0===e&&(o=D({date:null===(s=l[t])||void 0===s?void 0:s.data.date,granularity:a}));var u={color:null===(c=l[t])||void 0===c?void 0:c.color};if(/^threshold/.test(t)){var d,p,h,m=(null===(d=l[t])||void 0===d?void 0:d.data.hasInfinite)&&n("curiosity-graph.infiniteThresholdLabel")||(null!==(p=null===(h=l[t])||void 0===h?void 0:h.data.y)&&void 0!==p?p:n("curiosity-graph.noDataLabel"));u.label=n("curiosity-graph.thresholdLabel"),u.value=m}else{var g,f,v=!1===(null===(g=l[t])||void 0===g?void 0:g.data.hasData)&&n("curiosity-graph.noDataLabel")||(null===(f=l[t])||void 0===f?void 0:f.data.y)||0;u.label=n("curiosity-graph.".concat(t,"Label"),{product:r}),u.value=v}i.push(u)})),u.a.createElement("div",{className:"victory-tooltip"},u.a.createElement("table",{summary:n("curiosity-graph.tooltipSummary")},i.length&&o&&u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{colSpan:2},o)))||null,i.length&&u.a.createElement("tbody",null,i.map((function(t){return u.a.createElement("tr",{key:"tooltip-".concat(t.label)},u.a.createElement("th",null,u.a.createElement("div",{"aria-hidden":!0,className:"legend-icon victory-legend-icon",style:{backgroundColor:t.color||"transparent"}}),t.label),u.a.createElement("td",null,t.value))})))||null),!i.length&&n("curiosity-graph.noDataErrorLabel")||null)};j.defaultProps={datum:{},product:"",t:E.b.noopTranslate};var C=Object(I.a)()(j),_=a(716),w=a(1007),F=a(977),M=function(t){Object(l.a)(a,t);var e=Object(c.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))).onClick=function(e){var a=t.props,n=a.chart,o=a.viewId,i=n.toggle(e);k.g.dispatch({type:k.f.graph.SET_GRAPH_LEGEND,legend:Object(r.a)({},"".concat(o,"-").concat(e),i)})},t}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this.props,e=t.chart,a=t.datum,r=t.legend,n=t.viewId;a.dataSets.forEach((function(t){var a=t.id;(r["".concat(n,"-").concat(a)]||e.isToggled(a))&&e.hide(a)}))}},{key:"renderLegendItem",value:function(t){var e=this,a=t.chartId,r=t.color,n=t.isDisabled,o=t.isThreshold,i=t.labelContent,c=t.tooltipContent,l=this.props,s=l.chart,d=l.legend,p=l.viewId,h=d["".concat(p,"-").concat(a)]||s.isToggled(a),m=u.a.createElement(_.a,{onClick:function(){return e.onClick(a)},onKeyPress:function(){return e.onClick(a)},className:"victory-legend-item",tabIndex:0,key:"curiosity-button-".concat(a),variant:"link",component:"a",isDisabled:n,icon:(n||h)&&u.a.createElement(F.a,null)||o&&u.a.createElement("hr",{"aria-hidden":!0,className:"threshold-legend-icon",style:{visibility:n||h?"hidden":"visible",borderTopColor:r}})||u.a.createElement("div",{"aria-hidden":!0,className:"legend-icon",style:{visibility:n||h?"hidden":"visible",backgroundColor:r}})},i);return c?u.a.createElement(w.a,{key:"curiosity-tooltip-".concat(a),content:u.a.createElement("p",null,c),position:w.b.top,distance:0,entryDelay:100,exitDelay:0},m):m}},{key:"render",value:function(){var t=this,e=this.props,a=e.datum,r=e.product,n=e.t;return u.a.createElement(u.a.Fragment,null,a.dataSets.map((function(e){var a=e.id,o=e.isThreshold,i=e.stroke,c=e.data,l=!(void 0===c?[]:c).find((function(t){var e=t.y,a=t.hasData;return e>=0&&!0===a||e>=0&&!0===o}))||!1,s=o&&n(["curiosity-graph.".concat(a,"Label"),"curiosity-graph.thresholdLabel"],{product:r,context:r})||n(["curiosity-graph.".concat(a,"Label"),"curiosity-graph.noLabel"],{product:r,context:r}),u=o&&n(["curiosity-graph.".concat(a,"LegendTooltip"),"curiosity-graph.thresholdLegendTooltip"],{product:r,context:r})||n("curiosity-graph.".concat(a,"LegendTooltip"),{product:r,context:r});return t.renderLegendItem({chartId:a,color:i,labelContent:s,isDisabled:l,isThreshold:o,tooltipContent:u})})))}}]),a}(u.a.Component);M.defaultProps={chart:{hide:E.b.noop,toggle:E.b.noop,isToggled:E.b.noop},datum:{dataSets:[]},legend:{},product:"",t:E.b.noopTranslate,viewId:"graphCardLegend"};var Y=Object(k.c)((function(t){return{legend:t.graph.legend}}))(M),U=a(1001),N=a(1004),G=a(1006),P=a(1e3),Q=a(983),H=a(1010),z=a(617),W=a.n(z),B=function(t){Object(l.a)(a,t);var e=Object(c.a)(a);function a(){var t;Object(o.a)(this,a);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return(t=e.call.apply(e,[this].concat(c))).state={chartWidth:0},t.dataSetsToggle={},t.resizeObserver=E.b.noop,t.containerRef=u.a.createRef(),t.tooltipRef=u.a.createRef(),t.onHide=function(e){t.dataSetsToggle=Object(n.a)({},t.dataSetsToggle,Object(r.a)({},e,!0)),t.forceUpdate()},t.onRevert=function(){t.dataSetsToggle={},t.forceUpdate()},t.onToggle=function(e){var a=!t.dataSetsToggle[e];return t.dataSetsToggle=Object(n.a)({},t.dataSetsToggle,Object(r.a)({},e,a)),t.forceUpdate(),a},t.onResizeContainer=function(){var e=t.state.chartWidth,a=(t.containerRef.current||{}).clientWidth,r=void 0===a?0:a;r!==e&&t.setState({chartWidth:r})},t.getIsToggled=function(e){return t.dataSetsToggle[e]||!1},t}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setResizeObserve()}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setResizeObserve",value:function(){var t=this,e=this.containerRef.current,a=window.ResizeObserver;if(e&&a){var r=new a(this.onResizeContainer);r.observe(e),this.resizeObserver=function(){return r.unobserve(e)}}else this.onResizeContainer(),window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",t.onResizeContainer)}}},{key:"setChartTicks",value:function(){var t=this.props,e=t.xAxisLabelIncrement,a=t.xAxisTickFormat,r=t.yAxisTickFormat,o=t.dataSets,i={},c={},l=o.length&&o[0].data||[];return o.forEach((function(t){t.xAxisLabelUseDataSet&&(l=t.data)})),i.xAxisTickValues=l.reduce((function(t,a,r){return r%e===0?t.concat(a.x):t}),[]),i.xAxisTickFormat=function(t){return l[t]&&l[t].xAxisLabel||t},"function"===typeof a&&(i.xAxisTickFormat=function(t){var e=i.xAxisTickValues,r=e.indexOf(t),o=Object(n.a)({},l[e[r-1]]||{}),c=Object(n.a)({},l[e[r+1]]||{}),s=Object(n.a)({},l[t]||{});return a({tick:t,previousItem:o,item:s,nextItem:c})}),"function"===typeof r&&(c.yAxisTickFormat=function(t){return r({tick:t})}),Object(n.a)({},i,{},c)}},{key:"getChartTicks",value:function(){var t=this.props.xAxisFixLabelOverlap,e=this.setChartTicks(),a=e.xAxisTickValues,r=e.xAxisTickFormat,n=e.yAxisTickFormat,o={fixLabelOverlap:t},i={dependentAxis:!0,showGrid:!0};return a&&(o.tickValues=a),r&&(o.tickFormat=r),n&&(i.tickFormat=n),{isXAxisTicks:!!a,xAxisProps:o,yAxisProps:i}}},{key:"getChartDomain",value:function(t){var e=t.isXAxisTicks,a=this.dataSetsToggle,r=this.props,o=r.domain,i=r.dataSets;if(Object.keys(o).length)return o;var c={},l={},s=0,u=0;i.filter((function(t){return!0===t.isStacked})).forEach((function(t){if(!a[t.id]&&t.data){var e=0;t.data.forEach((function(a,r){e=a&&a.y>e?a.y:e,r===t.data.length-1&&(u+=e)}))}})),i.forEach((function(t){!a[t.id]&&t.data&&(s=t.data.length>s?t.data.length:s,t.data.forEach((function(t){u=t&&t.y>u?t.y:u})))})),e||(c.x=[0,s||10]);var d=Math.pow(10,Math.floor(Math.log10(u>10&&u||10)));return c.y=[0,Math.ceil((u+1)/d)*d],Object.keys(c).length&&(l.domain=c),{maxY:u,chartDomain:Object(n.a)({},l)}}},{key:"getTooltipData",value:function(){var t=this.dataSetsToggle,e=this.props,a=e.dataSets,r=e.chartTooltip,o=[];return r&&a&&a[0]&&a[0].data&&(o=a[0].data.map((function(e,o){var i={};a.forEach((function(e){!t[e.id]&&e.data&&e.data[o]&&(i[e.id]={color:e.stroke||e.fill||e.color||"",data:W()(e.data[o])})}));var c={datum:{x:e.x,y:e.y,index:o,itemsByKey:i,dataSets:W()(a)}};return{x:e.x,y:null,itemsByKey:i,tooltip:u.a.isValidElement(r)&&u.a.cloneElement(r,Object(n.a)({},c))||r(Object(n.a)({},c))}}))),o}},{key:"renderTooltip",value:function(){var t=this,e=this.dataSetsToggle,a=this.props,r=a.chartTooltip,o=a.dataSets;if(!r||Object.values(e).filter((function(t){return!0===t})).length===o.length)return null;var i=Object(U.a)("voronoi","cursor"),c=this.getTooltipData(),l={},s={},d=function(e){var a=t.containerRef.current,r=t.tooltipRef.current,o=a&&a.getBoundingClientRect()||{},i=r&&r.getBoundingClientRect()||{};o.right&&(l=o),i.right&&(s=i);var d=e.x+10;(l.right<s.right||e.x+s.width>l.right/2)&&(d=e.x-10-s.width);var p=function(t){var e=t.datum,a=c.find((function(t){return t.x===e.x}))||{};return(null===a||void 0===a?void 0:a.tooltip)||""}(Object(n.a)({},e));return p?u.a.createElement("g",null,u.a.createElement("foreignObject",{x:d,y:e.y/2.2,width:"100%",height:"100%"},u.a.createElement("div",{ref:t.tooltipRef,style:{display:"inline-block"},xmlns:"http://www.w3.org/1999/xhtml"},p))):u.a.createElement("g",null)};return u.a.createElement(i,{cursorDimension:"x",labels:function(t){return t},labelComponent:u.a.createElement(d,null),voronoiPadding:60})}},{key:"renderLegend",value:function(){var t=this.props,e=t.chartLegend,a=t.dataSets;if(!e)return null;var r={datum:{dataSets:W()(a)},chart:{hide:this.onHide,revert:this.onRevert,toggle:this.onToggle,isToggled:this.getIsToggled}};return u.a.isValidElement(e)&&u.a.cloneElement(e,Object(n.a)({},r))||e(Object(n.a)({},r))}},{key:"renderChart",value:function(t){var e=t.stacked,a=void 0!==e&&e,r=this.dataSetsToggle,o=this.props.dataSets,i=[],c=[];return o.forEach((function(t,e){if(!r[t.id]&&t.data&&t.data.length){var a=t.isThreshold&&function(t,e){var a={data:{}};return t.fill&&(a.data.fill=t.fill),t.stroke&&(a.data.stroke=t.stroke),t.strokeWidth&&(a.data.strokeWidth=t.strokeWidth),t.strokeDasharray&&(a.data.strokeDasharray=t.strokeDasharray),u.a.createElement(N.a,{animate:t.animate||!1,interpolation:t.interpolation||"step",key:E.b.generateId(),name:"chartArea-".concat(e,"-threshold"),data:t.data,style:Object(n.a)({},t.style||{},{},a),themeColor:t.themeColor,themeVariant:t.themeVariant})}(t,e)||function(t,e){var a={data:{}};return t.fill&&(a.data.fill=t.fill),t.stroke&&(a.data.stroke=t.stroke),u.a.createElement(G.a,{animate:t.animate||!1,interpolation:t.interpolation||"monotoneX",key:E.b.generateId(),name:"chartArea-".concat(e,"-area"),data:t.data,style:Object(n.a)({},t.style||{},{},a),themeColor:t.themeColor,themeVariant:t.themeVariant})}(t,e);t.isStacked?c.push(a):i.push(a)}})),a&&c||i}},{key:"render",value:function(){var t=this.state.chartWidth,e=this.props,a=e.chartLegend,r=e.padding,o=e.themeColor,i=this.getChartTicks(),c=i.isXAxisTicks,l=i.xAxisProps,s=i.yAxisProps,d=this.getChartDomain({isXAxisTicks:c}),p=d.chartDomain,h={containerComponent:d.maxY>=0&&this.renderTooltip()||void 0},m=Object(n.a)({padding:r},p,{},h);return u.a.createElement("div",{id:"curiosity-chartarea",className:"uxui-curiosity__modal uxui-curiosity__modal--loading",ref:this.containerRef},u.a.createElement(P.a,Object.assign({animate:{duration:0},width:t,themeColor:o},m),u.a.createElement(Q.a,Object.assign({},l,{animate:!1})),u.a.createElement(Q.a,Object.assign({},s,{animate:!1})),this.renderChart({}),u.a.createElement(H.a,null,this.renderChart({stacked:!0}))),a&&u.a.createElement("div",{className:"curiosity-chartarea-description victory-legend"},this.renderLegend()))}}]),a}(u.a.Component);B.defaultProps={chartLegend:null,chartTooltip:null,domain:{},dataSets:[],height:275,padding:{bottom:75,left:50,right:50,top:50},themeColor:"blue",xAxisFixLabelOverlap:!1,xAxisLabelIncrement:1,xAxisTickFormat:null,yAxisTickFormat:null};var K=function(t){Object(l.a)(a,t);var e=Object(c.a)(a);function a(){var t;Object(o.a)(this,a);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return(t=e.call.apply(e,[this].concat(c))).onUpdateGraphData=function(){var e=t.props,a=e.getGraphReportsCapacity,o=e.graphQuery,i=e.isDisabled,c=e.productId,l=o&&o[T.f.RHSM_API_QUERY_GRANULARITY];if(!i&&l&&c){var s,u=E.a.getRangedDateTime(l),d=u.startDate,p=u.endDate;a(c,Object(n.a)((s={},Object(r.a)(s,T.f.RHSM_API_QUERY_START_DATE,d.toISOString()),Object(r.a)(s,T.f.RHSM_API_QUERY_END_DATE,p.toISOString()),s),o))}},t.onGranularitySelect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.value,n=t.props.viewId;k.g.dispatch(Object(r.a)({type:k.f.rhsm.SET_GRAPH_GRANULARITY_RHSM,viewId:n},T.f.RHSM_API_QUERY_GRANULARITY,a))},t}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.onUpdateGraphData()}},{key:"componentDidUpdate",value:function(t){var e=this.props,a=e.graphQuery;e.productId===t.productId&&b()(a,t.graphQuery)||this.onUpdateGraphData()}},{key:"renderChart",value:function(){var t=this.props,e=t.filterGraphData,a=t.graphData,r=t.graphQuery,n=t.selectOptionsType,o=t.productShortLabel,i=t.viewId,c=r&&r[T.f.RHSM_API_QUERY_GRANULARITY],l=L.a.getGranularityOptions(n).selected,s=c||l,d={xAxisFixLabelOverlap:!0,xAxisLabelIncrement:R.getChartXAxisLabelIncrement(s),xAxisTickFormat:function(t){var e=t.item,a=t.previousItem,r=t.tick;return R.xAxisTickFormat({tick:r,date:e.date,previousDate:a.date,granularity:s})},yAxisTickFormat:R.yAxisTickFormat};return u.a.createElement(B,Object.assign({key:E.b.generateId()},d,{dataSets:function(t){var a=function(e){var a={data:t[e],id:e,animate:{duration:250,onLoad:{duration:250}},isStacked:!/^threshold/.test(e),isThreshold:/^threshold/.test(e)};return/^threshold/.test(e)&&(a.animate={duration:100,onLoad:{duration:100}},a.stroke=f.a.value,a.strokeDasharray="4,3",a.strokeWidth=2.5),a};return e.length?e.map((function(t){return Object.assign(a(t.id),t)})):Object.keys(t).map((function(t){return a(t)}))}(a),chartLegend:function(t){var e=t.chart,a=t.datum;return(u.a.createElement(Y,{chart:e,datum:a,product:o,viewId:i}))},chartTooltip:function(t){var e=t.datum;return(u.a.createElement(C,{datum:e,granularity:s,product:o}))}}))}},{key:"render",value:function(){var t=this.props,e=t.cardTitle,a=t.children,r=t.error,n=t.graphQuery,o=t.isDisabled,i=t.selectOptionsType,c=t.pending,l=t.t;if(o)return null;var s=L.a.getGranularityOptions(i).options,f=n&&n[T.f.RHSM_API_QUERY_GRANULARITY];return u.a.createElement(d.a,{className:"curiosity-usage-graph fadein"},u.a.createElement(p.a,null,u.a.createElement(h.a,null,e),u.a.createElement(m.a,null,a,u.a.createElement(O.a,{"aria-label":l("curiosity-graph.dropdownPlaceholder"),onSelect:this.onGranularitySelect,options:s,selectedOptions:f,placeholder:l("curiosity-graph.dropdownPlaceholder")}))),u.a.createElement(g.a,null,u.a.createElement("div",{className:"curiosity-skeleton-container ".concat(r?"blur":"")},c&&u.a.createElement(u.a.Fragment,null,u.a.createElement(v.Skeleton,{size:v.SkeletonSize.xs}),u.a.createElement(v.Skeleton,{size:v.SkeletonSize.sm}),u.a.createElement(v.Skeleton,{size:v.SkeletonSize.md}),u.a.createElement(v.Skeleton,{size:v.SkeletonSize.lg})),!c&&this.renderChart())))}}]),a}(u.a.Component);K.defaultProps={cardTitle:null,children:null,error:!1,filterGraphData:[],getGraphReportsCapacity:E.b.noop,graphData:{},isDisabled:E.b.UI_DISABLED_GRAPH,pending:!1,selectOptionsType:"default",t:E.b.noopTranslate,productShortLabel:"",viewId:"graphCard"};var V=k.e.graphCard.makeGraphCard(),X=Object(k.c)(V,(function(t){return{getGraphReportsCapacity:function(e,a){return t(k.d.rhsm.getGraphReportsCapacity(e,a))}}}))(K)},676:function(t,e,a){"use strict";a.d(e,"a",(function(){return Q}));var r=a(53),n=a(11),o=a(1),i=a(13),c=a(14),l=a(29),s=a(30),u=a(0),d=a.n(u),p=a(942),h=a(943),m=a(944),g=a(985),f=a(945),v=a(670),y=a(78),b=a.n(y),O=a(542),k=a(31),E=a(6),T=a(4),S=a(70),A=a.n(S),D=a(984),x=a(54),R=function(t){var e=t.date,a=t.granularity,r=A.a.utc(e);switch(a){case T.c.QUARTERLY:return"".concat(r.format(E.a.timestampQuarterFormats.yearShort)," - ").concat(r.add(1,"quarter").format(E.a.timestampQuarterFormats.yearShort));case T.c.MONTHLY:return r.format(E.a.timestampMonthFormats.yearLong);case T.c.WEEKLY:return"".concat(r.format(E.a.timestampDayFormats.short)," - ").concat(r.add(1,"week").format(E.a.timestampDayFormats.yearShort));case T.c.DAILY:default:return r.format(E.a.timestampDayFormats.long)}},L=function(t){var e=t.date,a=t.granularity,r=t.tick,n=t.previousDate;if(e&&a){var o,i=A.a.utc(e),c=0!==r&&Number.parseInt(i.year(),10)!==Number.parseInt(A.a.utc(n).year(),10);switch(a){case T.c.QUARTERLY:o=(o=c?i.format(E.a.timestampQuarterFormats.yearShort):i.format(E.a.timestampQuarterFormats.short)).replace(/\s/,"\n");break;case T.c.MONTHLY:o=(o=c?i.format(E.a.timestampMonthFormats.yearShort):i.format(E.a.timestampMonthFormats.short)).replace(/\s/,"\n");break;case T.c.WEEKLY:case T.c.DAILY:default:o=(o=c?i.format(E.a.timestampDayFormats.yearShort):i.format(E.a.timestampDayFormats.short)).replace(/\s(\d{4})$/,"\n$1")}return o}},I=function(t){var e=t.tick,a=t.locale;return new Intl.NumberFormat(a,{maximumFractionDigits:1,notation:"compact",compactDisplay:"short"}).format(e)},j=function(t){var e=t.data,a=void 0===e?[]:e,r=t.granularity,n=t.productShortLabel,i=[],c={x:"x",colors:{},columns:[],groups:[[]],names:{},types:{}},l=function(t){return(E.b.TEST_MODE&&A.a.utc(t)||A.a.utc(t).local()).format("YYYY-MM-DD")};return a.forEach((function(t){/^threshold/.test(t.id)?(c.colors[t.id]=t.color||D.a.value,c.types[t.id]="step",c.names[t.id]=Object(x.b)("curiosity-graph.thresholdLabel")):(c.colors[t.id]=t.color,c.types[t.id]="area-spline",c.groups[0].push(t.id),c.names[t.id]=Object(x.b)("curiosity-graph.".concat(t.id,"Label"),{product:n})),c.columns[0]=["x"],c.columns.push([t.id]);var e=0;t.data.forEach((function(t){c.columns[0].push(l(t.date)),c.columns[c.columns.length-1].push(t.y),e+=t.y||0})),e<=0&&(c.columns.pop(),i.push(t.id))})),{hiddenDataFacets:i,configuration:{tooltip:{order:function(t,e){return c.columns.indexOf(t.id)-c.columns.indexOf(e.id)},format:{title:function(t){return R({date:t,granularity:r})},value:function(t,e,r,n){var o,i,c,l=null===(o=a.find((function(t){return r===t.id})))||void 0===o?void 0:o.data[n];/^threshold/.test(r)?i=(null===l||void 0===l?void 0:l.hasInfinite)&&Object(x.b)("curiosity-graph.infiniteThresholdLabel")||(null!==(c=null===l||void 0===l?void 0:l.y)&&void 0!==c?c:Object(x.b)("curiosity-graph.noDataLabel")):i=!1===(null===l||void 0===l?void 0:l.hasData)&&Object(x.b)("curiosity-graph.noDataLabel")||(null===l||void 0===l?void 0:l.y)||0;return i}}},unloadBeforeLoad:!0,padding:{left:40,right:40,top:10,bottom:10},legend:{show:!1},spline:{interpolation:{type:"monotone"}},data:Object(o.a)({},c),point:{show:!1},grid:{y:{show:!0}},axis:{x:{type:"timeseries",tick:{format:function(t){var e=c.columns[0].slice(1),a=l(t),n=e.indexOf(a),o=n>-1&&e[n-1];return L({tick:n,date:a,previousDate:o,granularity:r})}},padding:0},y:{default:[0,50],padding:{bottom:0},min:0,tick:{show:!1,outer:!1,format:function(t){return 0===t?"":I({tick:t})}}}}}}},C=a(716),_=a(1007),w=a(977),F=function(t){Object(s.a)(a,t);var e=Object(l.a)(a);function a(){var t;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))).state={updatedIsToggled:null},t.onFocus=function(){var e=t.state.updatedIsToggled,a=t.props,r=a.chart,n=a.chartId,o=a.getToggle,i=a.isToggled;("function"!==typeof o||i)&&e||r.focus(n)},t.onRevert=function(){var e=t.state.updatedIsToggled,a=t.props,r=a.chart,n=a.getToggle,o=a.isToggled;("function"!==typeof n||o)&&e||r.revert()},t.onToggle=function(){var e=t.state.updatedIsToggled,a=t.props,r=a.chart,n=a.chartId,o=a.getToggle,i=a.isToggled;r.toggle(n),"function"===typeof o?o({isToggled:!i}):t.setState({updatedIsToggled:!e}),t.onRevert()},t.getColor=function(){var e=t.props,a=e.chart,r=e.chartId;return a.color(r)},t}return Object(c.a)(a,[{key:"render",value:function(){var t=this.state.updatedIsToggled,e=this.props,a=e.children,r=e.chart,n=e.chartId,o=e.isDisabled,i=e.isThreshold,c=e.isToggled,l=e.tooltipContent,s=null===t&&"boolean"===typeof c&&c||t||!1;s&&r.hide(n);var u=d.a.createElement(C.a,{tabIndex:0,key:"curiosity-button-".concat(n),variant:"link",onClick:this.onToggle,onFocus:this.onFocus,onMouseOver:this.onFocus,onBlur:this.onRevert,onMouseOut:this.onRevert,onKeyPress:this.onToggle,component:"a",isDisabled:o,icon:(o||s)&&d.a.createElement(w.a,null)||i&&d.a.createElement("hr",{"aria-hidden":!0,className:"threshold-legend-icon",style:{visibility:o||s?"hidden":"visible",borderTopColor:this.getColor()}})||d.a.createElement("div",{"aria-hidden":!0,className:"legend-icon",style:{visibility:o||s?"hidden":"visible",backgroundColor:this.getColor()}})},a);return l?d.a.createElement(_.a,{key:"curiosity-tooltip-".concat(n),content:l,position:_.b.top,distance:0,entryDelay:100,exitDelay:0},u):u}}]),a}(d.a.Component);F.defaultProps={chart:{color:E.b.noop,focus:E.b.noop,hide:E.b.noop,revert:E.b.noop,toggle:E.b.noop},children:null,isDisabled:!1,isThreshold:!1,isToggled:!1,tooltipContent:null,getToggle:null};var M=a(622),Y=a(946),U=a.n(Y),N=(a(947),function(t){Object(s.a)(a,t);var e=Object(l.a)(a);function a(){var t;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))).state={chart:null},t.node=d.a.createRef(),t}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.generateChart()}},{key:"componentDidUpdate",value:function(t){var e=this.props.config;b()(t.config.data,e.data)||this.generateChart()}},{key:"componentWillUnmount",value:function(){var t=this.state.chart;t&&t.destroy(),this.setState({chart:null})}},{key:"generateChart",value:function(){var t=this,e=this.state.chart,a=this.props,r=a.config,n=a.onComplete,i=e;i||(i=U.a.generate(Object(o.a)({bindto:this.node.current},r))),i.load(Object(o.a)({},r.data,{unload:r.unloadBeforeLoad||!1,done:function(){t.setState({chart:i},(function(){r.done?r.done({chart:i,config:r}):n({chart:i,config:r})}))}}))}},{key:"render",value:function(){var t=this.state.chart,e=this.props,a=e.className,r=e.children,n=e.config,o=e.style;return d.a.createElement("div",{className:"curiosity-c3chart ".concat(a),style:o},d.a.createElement("div",{ref:this.node,className:"curiosity-c3chart-container"}),t&&d.a.createElement("div",{className:"curiosity-c3chart-description"},"function"===typeof r&&r({chart:t,config:n})||r))}}]),a}(d.a.Component));N.defaultProps={children:null,className:null,config:{},onComplete:E.b.noop,style:{}};var G=function(t){Object(s.a)(a,t);var e=Object(l.a)(a);function a(){var t;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(t=e.call.apply(e,[this].concat(c))).state={},t.onUpdateGraphData=function(){var e=t.props,a=e.getGraphReportsCapacity,r=e.graphQuery,i=e.isDisabled,c=e.productId,l=r&&r[T.f.RHSM_API_QUERY_GRANULARITY];if(!i&&l&&c){var s,u=E.a.getRangedDateTime(l),d=u.startDate,p=u.endDate;a(c,Object(o.a)((s={},Object(n.a)(s,T.f.RHSM_API_QUERY_START_DATE,d.toISOString()),Object(n.a)(s,T.f.RHSM_API_QUERY_END_DATE,p.toISOString()),s),r))}},t.onGranularitySelect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.value,r=t.props.viewId;k.g.dispatch(Object(n.a)({type:k.f.rhsm.SET_GRAPH_GRANULARITY_RHSM,viewId:r},T.f.RHSM_API_QUERY_GRANULARITY,a))},t}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.onUpdateGraphData()}},{key:"componentDidUpdate",value:function(t){var e=this.props,a=e.graphQuery;e.productId===t.productId&&b()(a,t.graphQuery)||this.onUpdateGraphData()}},{key:"renderLegend",value:function(t){var e=this,a=t.chart,r=t.filteredData,o=void 0===r?[]:r,i=t.granularity,c=t.hiddenDataFacets,l=void 0===c?[]:c,s=this.state,u=this.props,p=u.productId,h=u.productShortLabel,m=u.t;return o.map((function(t){var r=t.id,o=/^threshold/.test(r),c=l.includes(r),u=d.a.createElement("p",null,o&&m("curiosity-graph.thresholdLegendTooltip")||m("curiosity-graph.".concat(r,"LegendTooltip"))),g=s["".concat(p,"-").concat(i,"-").concat(r)]||!1;return d.a.createElement(F,{key:"legend-".concat(p,"-").concat(i,"-").concat(r),chart:a,chartId:r,tooltipContent:u,isDisabled:c,isThreshold:o,isToggled:g,getToggle:function(t){var a=t.isToggled;return e.setState(Object(n.a)({},"".concat(p,"-").concat(i,"-").concat(r),a))}},o&&m("curiosity-graph.thresholdLabel")||m("curiosity-graph.".concat(r,"Label"),{product:h}))}))}},{key:"renderChart",value:function(){var t=this,e=this.props,a=e.filterGraphData,n=e.graphData,i=e.graphQuery,c=e.selectOptionsType,l=e.productId,s=e.productShortLabel,u=i&&i[T.f.RHSM_API_QUERY_GRANULARITY],p=M.a.getGranularityOptions(c).selected,h=u||p;if(!n||!Object.values(n).length)return null;var m=[];a.length?a.forEach((function(t){n[t.id]&&m.push(Object(o.a)({},t,{data:Object(r.a)(n[t.id])}))})):Object.keys(n).forEach((function(t){m.push({id:t,data:Object(r.a)(n[t])})}));var g=j({data:m,granularity:h,productShortLabel:s}),f=g.configuration,v=void 0===f?{}:f,y=g.hiddenDataFacets,b=void 0===y?[]:y;return(d.a.createElement(N,{key:"chart-".concat(l,"-").concat(h),config:v},(function(e){var a=e.chart;return t.renderLegend({chart:a,filteredData:m,granularity:h,hiddenDataFacets:b})})))}},{key:"render",value:function(){var t=this.props,e=t.cardTitle,a=t.children,r=t.error,n=t.graphQuery,o=t.isDisabled,i=t.selectOptionsType,c=t.pending,l=t.t;if(o)return null;var s=M.a.getGranularityOptions(i).options,u=n&&n[T.f.RHSM_API_QUERY_GRANULARITY];return d.a.createElement(p.a,{className:"curiosity-usage-graph fadein"},d.a.createElement(h.a,null,d.a.createElement(m.a,null,e),d.a.createElement(g.a,null,a,d.a.createElement(O.a,{"aria-label":l("curiosity-graph.dropdownPlaceholder"),onSelect:this.onGranularitySelect,options:s,selectedOptions:u,placeholder:l("curiosity-graph.dropdownPlaceholder")}))),d.a.createElement(f.a,null,d.a.createElement("div",{className:"curiosity-skeleton-container ".concat(r?"blur":"")},c&&d.a.createElement(d.a.Fragment,null,d.a.createElement(v.Skeleton,{size:v.SkeletonSize.xs}),d.a.createElement(v.Skeleton,{size:v.SkeletonSize.sm}),d.a.createElement(v.Skeleton,{size:v.SkeletonSize.md}),d.a.createElement(v.Skeleton,{size:v.SkeletonSize.lg})),!c&&this.renderChart())))}}]),a}(d.a.Component);G.defaultProps={cardTitle:null,children:null,error:!1,filterGraphData:[],getGraphReportsCapacity:E.b.noop,graphData:{},isDisabled:E.b.UI_DISABLED_GRAPH,pending:!1,selectOptionsType:"default",t:E.b.noopTranslate,productShortLabel:"",viewId:"graphCard"};var P=k.e.graphCard.makeGraphCard(),Q=Object(k.c)(P,(function(t){return{getGraphReportsCapacity:function(e,a){return t(k.d.rhsm.getGraphReportsCapacity(e,a))}}}))(G)},677:function(t,e,a){"use strict";a.d(e,"a",(function(){return T}));var r=a(1),n=a(11),o=a(13),i=a(14),c=a(29),l=a(30),s=a(0),u=a.n(s),d=a(454),p=a(1011),h=a(1012),m=a(673),g=a(986),f=a(542),v=a(31),y=a(4),b=a(54),O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sla";return"sla"===t?{selected:null,options:[{title:Object(b.b)("curiosity-toolbar.slaPremium"),value:y.e.PREMIUM},{title:Object(b.b)("curiosity-toolbar.slaStandard"),value:y.e.STANDARD},{title:Object(b.b)("curiosity-toolbar.slaSelfSupport"),value:y.e.SELF},{title:Object(b.b)("curiosity-toolbar.slaNone"),value:y.e.NONE}]}:{options:[]}},k=a(6),E=function(t){Object(l.a)(a,t);var e=Object(c.a)(a);function a(){var t;Object(o.a)(this,a);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))).onClear=function(){t.dispatchFilter(v.f.rhsm.SET_GRAPH_SLA_RHSM,Object(n.a)({},y.f.RHSM_API_QUERY_SLA,null))},t.onSlaSelect=function(e){var a=e.value;t.dispatchFilter(v.f.rhsm.SET_GRAPH_SLA_RHSM,Object(n.a)({},y.f.RHSM_API_QUERY_SLA,a))},t}return Object(i.a)(a,[{key:"dispatchFilter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.props.viewId;t&&v.g.dispatch(Object(r.a)({type:t,viewId:a},e))}},{key:"filterSla",value:function(){var t=this.props.graphQuery,e=O(),a="string"===typeof t[y.f.RHSM_API_QUERY_SLA]&&e.options.find((function(e){return e.value===t[y.f.RHSM_API_QUERY_SLA]}));return{slaOptions:e,slaOptionsSelected:a&&a.title&&[a.title]||e.selected&&[e.selected]||[]}}},{key:"render",value:function(){var t=this.props,e=t.isDisabled,a=t.t;if(e)return null;var r=this.filterSla(),n=r.slaOptions,o=r.slaOptionsSelected;return(u.a.createElement(p.a,{id:"curiosity-toolbar",className:"pf-m-toggle-group-container ins-c-primary-toolbar",collapseListedFiltersBreakpoint:"xl",clearAllFilters:this.onClear},u.a.createElement(h.a,null,u.a.createElement(m.a,{variant:"filter-group"},u.a.createElement(g.a,{chips:o,deleteChip:this.onClear,categoryName:a("curiosity-toolbar.slaCategory")},u.a.createElement(f.a,{"aria-label":a("curiosity-toolbar.slaCategory"),onSelect:this.onSlaSelect,selectedOptions:o,placeholder:a("curiosity-toolbar.slaPlaceholder"),options:n.options}))))))}}]),a}(u.a.Component);E.defaultProps={graphQuery:{},isDisabled:k.b.UI_DISABLED_TOOLBAR,t:k.b.noopTranslate,viewId:"toolbar"};var T=Object(d.a)()(E)}}]);
//# sourceMappingURL=1.3704d377.chunk.js.map