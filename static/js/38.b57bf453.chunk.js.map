{"version":3,"sources":["components/chart/chartTooltip.js"],"names":["chartTooltip","chartSettings","chartContainerRef","helpers","noop","chartTooltipRef","minChartWidth","getXCoordinate","x","width","tooltipWidth","padding","minWidth","getYCoordinate","y","height","tooltipHeight","tailPosition","datum","tooltipDataSetLookUp","containerRef","tooltipRef","content","tooltip","containerPaddingBottom","bottom","containerBounds","current","querySelector","getBoundingClientRect","tooltipBounds","updatedClassName","className","ref","style","display","xmlns"],"mappings":"iIAAA,oHAiBMA,EAAe,WAKT,IAAD,yDAAP,GAAO,IAJTC,qBAIS,MAJO,GAIP,MAHTC,yBAGS,MAHWC,IAAQC,KAGnB,MAFTC,uBAES,MAFSF,IAAQC,KAEjB,MADTE,qBACS,MADO,IACP,EAaHC,EAAiB,WAA6E,IAAD,yDAAP,GAAlEC,EAAyE,EAAzEA,EAAGC,EAAsE,EAAtEA,MAAOC,EAA+D,EAA/DA,aAA+D,IAAjDC,eAAiD,MAAvC,EAAuC,MAApCC,gBAAoC,MAAzBN,EAAyB,EACjG,OAAIG,GAASG,GAAYJ,EAAIE,EAAe,EAAIC,GAAWH,EAAII,EAAWF,EAAeC,EAChFH,EAAIG,EAAUD,EAAe,EAG/BF,EAAIC,EAAQ,EAAID,EAAIE,EAAeC,EAAUH,EAAIG,GAepDE,EAAiB,WAAuF,IAAD,yDAAP,GAA5EC,EAAmF,EAAnFA,EAAGC,EAAgF,EAAhFA,OAAQC,EAAwE,EAAxEA,cAAeP,EAAyD,EAAzDA,MAAyD,IAAlDE,eAAkD,MAAxC,GAAwC,MAApCC,gBAAoC,MAAzBN,EAAyB,EAC3G,OAAIG,GAASG,EACJE,EAAIC,EAAS,EAAID,EAAIE,EAAgBL,EAAUG,EAAIH,EAG5C,IAATI,GAeHE,EAAe,WAA6E,IAAD,yDAAP,GAAlET,EAAyE,EAAzEA,EAAGC,EAAsE,EAAtEA,MAAOC,EAA+D,EAA/DA,aAA+D,IAAjDC,eAAiD,MAAvC,EAAuC,MAApCC,gBAAoC,MAAzBN,EAAyB,EAC/F,OAAIG,GAASG,GAAYJ,EAAIE,EAAe,EAAIC,GAAWH,EAAII,EAAWF,EAAeC,EAChF,SAGFH,EAAIC,EAAQ,EAAI,QAAU,QAGnC,OAAO,YAA2B,IAAD,UAAvBD,EAAuB,EAAvBA,EAAGM,EAAoB,EAApBA,EAAoB,IAAjBI,aAAiB,MAAT,GAAS,IACqBjB,EAA5CU,eADuB,MACb,GADa,IACqBV,EAA9BkB,4BADS,MACc,GADd,EAGzBC,EAAelB,IACfmB,EAAahB,IACbiB,GAA8B,OAApBH,QAAoB,IAApBA,GAAA,UAAAA,EAAuBD,EAAMV,UAA7B,eAAiCe,UAAW,GACtDC,EAAsB,UAAGb,EAAQc,cAAX,QAAqB,EAC3CC,GAA8B,OAAZN,QAAY,IAAZA,GAAA,UAAAA,EAAcO,eAAd,mBAAuBC,cAAc,cAArC,eAA6CC,0BAA2B,CAC9FpB,MAAO,EACPM,OAAQ,GAEJe,GAA0B,OAAVT,QAAU,IAAVA,GAAA,UAAAA,EAAYM,eAAZ,eAAqBE,0BAA2B,CAAEpB,MAAO,EAAGM,OAAQ,GAE1F,GAAIO,EAAS,CACX,IAAMS,EAAgB,UAAOD,EAAcf,QAAU,EAAK,SAAa,IAEvE,OACE,4BACE,+BACEP,EAAGD,EAAe,CAAEC,IAAGC,MAAOiB,EAAgBjB,MAAOC,aAAcoB,EAAcrB,QACjFK,EAAGD,EAAe,CAChBC,IACAC,OAAQW,EAAgBX,OACxBC,cAAec,EAAcf,OAC7BN,MAAOiB,EAAgBjB,QAEzBA,MAAM,OACNM,OAAO,OATT,SAWE,qBACEiB,UAAS,iDAA4CD,GACrDE,IAAKZ,EACLa,MAAO,CAAEC,QAAUrB,EAAIY,EAAgBX,OAASS,EAA0B,OAAW,gBACrFY,MAAM,+BAJR,SAME,qBACEJ,UAAS,oEAA+Df,EAAa,CACnFT,IACAM,IACAL,MAAOiB,EAAgBjB,MACvBC,aAAcoB,EAAcrB,SALhC,SAQGa,UAQb,OAAO","file":"static/js/38.b57bf453.chunk.js","sourcesContent":["import React from 'react';\nimport { helpers } from '../../common';\n\n/**\n * Note: Victory Charts components require a form of extended \"something\" applied by the consuming component.\n * This leads to odd implementations, like returning a function component.\n */\n/**\n * Return a compatible Victory tooltip component.\n *\n * @param {object} params\n * @param {object} params.chartSettings\n * @param {Function} params.chartContainerRef\n * @param {Function} params.chartTooltipRef\n * @param {number} params.minChartWidth\n * @returns {Function}\n */\nconst chartTooltip = ({\n  chartSettings = {},\n  chartContainerRef = helpers.noop,\n  chartTooltipRef = helpers.noop,\n  minChartWidth = 500\n} = {}) => {\n  // ToDo: evaluate using \"width\" in place of \"minWidth\" for scenarios where the graph size is smaller\n  /**\n   * Return a tooltip x coordinate.\n   *\n   * @param {object} params\n   * @param {number} params.x\n   * @param {number} params.width\n   * @param {number} params.tooltipWidth\n   * @param {number} params.padding\n   * @param {number} params.minWidth\n   * @returns {number}\n   */\n  const getXCoordinate = ({ x, width, tooltipWidth, padding = 0, minWidth = minChartWidth } = {}) => {\n    if (width <= minWidth && x > tooltipWidth / 2 + padding && x < minWidth - tooltipWidth + padding) {\n      return x + padding - tooltipWidth / 2;\n    }\n\n    return x > width / 2 ? x - tooltipWidth + padding : x + padding;\n  };\n\n  /**\n   * Return a tooltip y coordinate.\n   *\n   * @param {object} params\n   * @param {number} params.y\n   * @param {number} params.height\n   * @param {number} params.tooltipHeight\n   * @param {number} params.width\n   * @param {number} params.padding\n   * @param {number} params.minWidth\n   * @returns {number}\n   */\n  const getYCoordinate = ({ y, height, tooltipHeight, width, padding = 15, minWidth = minChartWidth } = {}) => {\n    if (width <= minWidth) {\n      return y > height / 2 ? y - tooltipHeight - padding : y + padding;\n    }\n\n    return height * 0.25;\n  };\n\n  // ToDo: evaluate using \"width\" in place of \"minWidth\" for scenarios where the graph size is smaller\n  /**\n   * Return a tooltip tail position CSS class.\n   *\n   * @param {object} params\n   * @param {number} params.x\n   * @param {number} params.width\n   * @param {number} params.tooltipWidth\n   * @param {number} params.padding\n   * @param {number} params.minWidth\n   * @returns {number}\n   */\n  const tailPosition = ({ x, width, tooltipWidth, padding = 0, minWidth = minChartWidth } = {}) => {\n    if (width <= minWidth && x > tooltipWidth / 2 + padding && x < minWidth - tooltipWidth + padding) {\n      return 'middle';\n    }\n\n    return x > width / 2 ? 'right' : 'left';\n  };\n\n  return ({ x, y, datum = {} }) => { // eslint-disable-line\n    const { padding = {}, tooltipDataSetLookUp = {} } = chartSettings;\n\n    const containerRef = chartContainerRef();\n    const tooltipRef = chartTooltipRef();\n    const content = tooltipDataSetLookUp?.[datum.x]?.tooltip || '';\n    const containerPaddingBottom = padding.bottom ?? 0;\n    const containerBounds = containerRef?.current?.querySelector('svg')?.getBoundingClientRect() || {\n      width: 0,\n      height: 0\n    };\n    const tooltipBounds = tooltipRef?.current?.getBoundingClientRect() || { width: 0, height: 0 };\n\n    if (content) {\n      const updatedClassName = `${(tooltipBounds.height <= 0 && 'fadein') || ''}`;\n\n      return (\n        <g>\n          <foreignObject\n            x={getXCoordinate({ x, width: containerBounds.width, tooltipWidth: tooltipBounds.width })}\n            y={getYCoordinate({\n              y,\n              height: containerBounds.height,\n              tooltipHeight: tooltipBounds.height,\n              width: containerBounds.width\n            })}\n            width=\"100%\"\n            height=\"100%\"\n          >\n            <div\n              className={`curiosity-chartarea__tooltip-container ${updatedClassName}`}\n              ref={tooltipRef}\n              style={{ display: (y > containerBounds.height - containerPaddingBottom && 'none') || 'inline-block' }}\n              xmlns=\"http://www.w3.org/1999/xhtml\"\n            >\n              <div\n                className={`curiosity-chartarea__tooltip curiosity-chartarea__tooltip-${tailPosition({\n                  x,\n                  y,\n                  width: containerBounds.width,\n                  tooltipWidth: tooltipBounds.width\n                })}`}\n              >\n                {content}\n              </div>\n            </div>\n          </foreignObject>\n        </g>\n      );\n    }\n\n    return <g />;\n  };\n};\n\nexport { chartTooltip as default, chartTooltip };\n"],"sourceRoot":""}