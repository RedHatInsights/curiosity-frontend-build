{"version":3,"file":"js/608.97a94a0dc1930b5733e7.js","mappings":"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","sources":["webpack:///./src/components/graphCard/graphCard.js","webpack:///./src/components/graphCard/graphCardMetricTotals.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { helpers } from '../../common';\nimport { GraphCardMetricTotals } from './graphCardMetricTotals';\nimport { GraphCardChart } from './graphCardChart';\nimport { GraphCardContext, useParseFiltersSettings } from './graphCardContext';\n\n/**\n * Configurable graph, chart, cards. Consumes Charts.\n *\n * @see Charts\n * @memberof Components\n * @module GraphCard\n * @property {module} GraphCardChart\n * @property {module} GraphCardChartLegend\n * @property {module} GraphCardChartTitleTooltip\n * @property {module} GraphCardChartTooltip\n * @property {module} GraphCardContext\n * @property {module} GraphCardHelpers\n * @property {module} GraphCardMetricTotals\n */\n\n/**\n * Set up graph cards. Expand filters with base graph settings.\n *\n * @param {object} props\n * @param {boolean} props.isDisabled\n * @param {Function} props.useParseFiltersSettings\n * @returns {React.ReactNode}\n */\nconst GraphCard = ({ isDisabled, useParseFiltersSettings: useAliasParseFiltersSettings }) => {\n  const { filtersSettings } = useAliasParseFiltersSettings();\n\n  if (isDisabled || !filtersSettings?.length) {\n    return null;\n  }\n\n  return filtersSettings?.map(filterSetting => (\n    <GraphCardContext.Provider key={`graphCard-${filterSetting?.settings?.metrics?.[0]?.id}`} value={filterSetting}>\n      <GraphCardMetricTotals>\n        <GraphCardChart />\n      </GraphCardMetricTotals>\n    </GraphCardContext.Provider>\n  ));\n};\n\n/**\n * Prop types.\n *\n * @type {{useParseFiltersSettings: Function, isDisabled: boolean}}\n */\nGraphCard.propTypes = {\n  isDisabled: PropTypes.bool,\n  useParseFiltersSettings: PropTypes.func\n};\n\n/**\n * Default props.\n *\n * @type {{useParseFiltersSettings: Function, isDisabled: boolean}}\n */\nGraphCard.defaultProps = {\n  isDisabled: helpers.UI_DISABLED_GRAPH,\n  useParseFiltersSettings\n};\n\nexport { GraphCard as default, GraphCard };\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Card, CardBody, CardFooter, CardHeader, CardTitle, Title } from '@patternfly/react-core';\nimport _camelCase from 'lodash/camelCase';\nimport { useProductGraphTallyQuery } from '../productView/productViewContext';\nimport { useGraphCardContext, useMetricsSelector } from './graphCardContext';\nimport { Loader, SkeletonSize } from '../loader/loader';\nimport { toolbarFieldOptions } from '../toolbar/toolbarFieldRangedMonthly';\nimport { RHSM_API_QUERY_SET_TYPES } from '../../services/rhsm/rhsmConstants';\nimport { graphCardHelpers } from './graphCardHelpers';\nimport { helpers } from '../../common';\n\n/**\n * @memberof GraphCard\n * @module GraphCardMetricTotals\n */\n\n/**\n * Display totals for a single metric.\n *\n * @param {object} props\n * @param {React.ReactNode} props.children\n * @param {Function} props.useGraphCardContext\n * @param {Function} props.useMetricsSelector\n * @param {Function} props.useProductGraphTallyQuery\n * @returns {React.ReactNode}\n */\nconst GraphCardMetricTotals = ({\n  children,\n  useGraphCardContext: useAliasGraphCardContext,\n  useMetricsSelector: useAliasMetricsSelector,\n  useProductGraphTallyQuery: useAliasProductGraphTallyQuery\n}) => {\n  const { settings = {} } = useAliasGraphCardContext();\n  const query = useAliasProductGraphTallyQuery();\n  const { pending, error, fulfilled, dataSets: dataByList = [] } = useAliasMetricsSelector();\n\n  const { [RHSM_API_QUERY_SET_TYPES.START_DATE]: startDate } = query;\n  const { isCurrent: isSelectedMonthCurrent } =\n    toolbarFieldOptions.find(\n      option => option.title === startDate || option.value.startDate.toISOString() === startDate\n    ) || {};\n\n  if (settings?.isMetricDisplay && settings?.cards?.length) {\n    const metricDisplayPassedData = helpers.setImmutableData(\n      {\n        dataSets: dataByList.map(dataSet => {\n          const { id: chartId, metric: metricId } = dataSet || {};\n          return {\n            ...dataSet,\n            display: {\n              ...graphCardHelpers.getDailyMonthlyTotals({ dataSet, isCurrent: isSelectedMonthCurrent }),\n              ...graphCardHelpers.getRemainingCapacity({\n                ...graphCardHelpers.getPrepaidTallyCapacity({ data: dataByList }),\n                isCurrent: isSelectedMonthCurrent\n              }),\n              ...graphCardHelpers.getRemainingOverage({\n                ...graphCardHelpers.getPrepaidTallyCapacity({ data: dataByList }),\n                isCurrent: isSelectedMonthCurrent\n              }),\n              chartId,\n              metricId\n            }\n          };\n        })\n      },\n      { isClone: true }\n    );\n\n    return (\n      <div\n        data-test={`graphMetricTotals-${settings?.groupMetric?.map(metricId => _camelCase(metricId))?.join('-')}`}\n        data-test-data={JSON.stringify(metricDisplayPassedData)}\n        className=\"curiosity-usage-graph__totals\"\n      >\n        <div>\n          <div className=\"curiosity-usage-graph__totals-column\">\n            {settings?.cards?.map(({ key, header, body, footer }, index) => (\n              <Card\n                key={key || helpers.generateHash({ metricDisplayPassedData, index })}\n                isPlain\n                data-test={`graphMetricTotalsCard-${index}`}\n                className={`curiosity-usage-graph__totals-column-card ${(error && 'blur') || ''}`}\n              >\n                <CardHeader>\n                  <CardTitle>\n                    <Title headingLevel=\"h2\" size=\"md\">\n                      {pending && <Loader variant=\"skeleton\" skeletonProps={{ size: SkeletonSize.lg }} />}\n                      {fulfilled && ((typeof header === 'function' && header(metricDisplayPassedData)) || header)}\n                    </Title>\n                  </CardTitle>\n                </CardHeader>\n                <CardBody>\n                  <div>\n                    {pending && <Loader variant=\"skeleton\" skeletonProps={{ size: SkeletonSize.lg, height: '60px' }} />}\n                    {fulfilled && ((typeof body === 'function' && body(metricDisplayPassedData)) || body)}\n                  </div>\n                </CardBody>\n                <CardFooter>\n                  <div>\n                    {pending && <Loader variant=\"skeleton\" skeletonProps={{ size: SkeletonSize.lg }} />}\n                    {fulfilled && ((typeof footer === 'function' && footer(metricDisplayPassedData)) || footer)}\n                  </div>\n                </CardFooter>\n              </Card>\n            ))}\n          </div>\n        </div>\n        <div>\n          <div className=\"curiosity-usage-graph__totals-graph-column\">{children}</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div data-test=\"graphStandalone\" className=\"curiosity-usage-graph__standalone\">\n      {children}\n    </div>\n  );\n};\n\n/**\n * Prop types.\n *\n * @type {{useProductGraphTallyQuery: Function, children: React.ReactNode, useMetricsSelector: Function}}\n */\nGraphCardMetricTotals.propTypes = {\n  children: PropTypes.node,\n  useGraphCardContext: PropTypes.func,\n  useMetricsSelector: PropTypes.func,\n  useProductGraphTallyQuery: PropTypes.func\n};\n\n/**\n * Default props.\n *\n * @type {{useProductGraphTallyQuery: Function, children: React.ReactNode, useMetricsSelector: Function}}\n */\nGraphCardMetricTotals.defaultProps = {\n  children: null,\n  useGraphCardContext,\n  useMetricsSelector,\n  useProductGraphTallyQuery\n};\n\nexport { GraphCardMetricTotals as default, GraphCardMetricTotals };\n"],"names":["GraphCard","_ref","isDisabled","useParseFiltersSettings","useAliasParseFiltersSettings","filtersSettings","length","map","filterSetting","_filterSetting$settin","React","GraphCardContext","key","concat","settings","metrics","id","value","GraphCardMetricTotals","GraphCardChart","propTypes","PropTypes","defaultProps","helpers","_settings$cards","children","useGraphCardContext","useAliasGraphCardContext","useMetricsSelector","useAliasMetricsSelector","useProductGraphTallyQuery","useAliasProductGraphTallyQuery","query","pending","error","fulfilled","dataSets","dataByList","RHSM_API_QUERY_SET_TYPES","startDate","isCurrent","isSelectedMonthCurrent","toolbarFieldOptions","option","title","toISOString","isMetricDisplay","cards","_settings$groupMetric","_settings$cards2","metricDisplayPassedData","dataSet","chartId","metric","metricId","display","graphCardHelpers","data","isClone","groupMetric","_camelCase","join","JSON","stringify","className","_ref2","index","header","body","footer","Card","isPlain","CardHeader","CardTitle","Title","headingLevel","size","Loader","variant","skeletonProps","SkeletonSize","CardBody","height","CardFooter"],"sourceRoot":""}