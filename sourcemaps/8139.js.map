{"version":3,"file":"js/8139.1670253271250.71165e4e9993be920769.js","mappings":"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","sources":["webpack:///./src/components/graphCard/graphCardHelpers.js"],"sourcesContent":["import moment from 'moment';\nimport { chart_color_green_300 as chartColorGreenDark } from '@patternfly/react-tokens';\nimport { ChartTypeVariant } from '../chart/chart';\nimport { RHSM_API_QUERY_GRANULARITY_TYPES as GRANULARITY_TYPES } from '../../types/rhsmApiTypes';\nimport { dateHelpers, helpers } from '../../common';\n\n/**\n * Update chart/graph filters with core settings and styling.\n *\n * @param {Array} filters\n * @param {object} graphCardSettings\n * @returns {{standaloneFilters: Array, groupedFilters: object}}\n */\nconst generateChartSettings = (filters = [], graphCardSettings = {}) => {\n  const standaloneFiltersSettings = [];\n  const groupedFiltersSettings = [];\n\n  filters.forEach(({ id, isStandalone = false, ...filterSettings }) => {\n    if (!id) {\n      return;\n    }\n\n    const isThreshold = filterSettings?.chartType === ChartTypeVariant.threshold;\n    const baseFilterSettings = {\n      id,\n      isStacked: !isThreshold,\n      isStandalone,\n      isThreshold,\n      isCapacity: isThreshold,\n      strokeWidth: 2\n    };\n\n    if (isThreshold) {\n      baseFilterSettings.stroke = chartColorGreenDark.value;\n      baseFilterSettings.strokeDasharray = '4,3';\n      baseFilterSettings.strokeWidth = 3;\n    }\n\n    if (isStandalone) {\n      standaloneFiltersSettings.push({\n        settings: {\n          padding: {\n            bottom: 75,\n            left: 75,\n            right: 45,\n            top: 45\n          },\n          ...graphCardSettings,\n          isStandalone: true,\n          metric: {\n            ...baseFilterSettings,\n            ...filterSettings\n          },\n          metrics: [\n            {\n              ...baseFilterSettings,\n              ...filterSettings\n            }\n          ]\n        }\n      });\n    } else {\n      groupedFiltersSettings.push({\n        ...baseFilterSettings,\n        ...filterSettings\n      });\n    }\n  });\n\n  const updatedGroupedFiltersSettings =\n    (groupedFiltersSettings.length && {\n      settings: {\n        ...graphCardSettings,\n        isStandalone: false,\n        metric: undefined,\n        metrics: groupedFiltersSettings\n      }\n    }) ||\n    undefined;\n\n  return {\n    standaloneFiltersSettings,\n    groupedFiltersSettings: updatedGroupedFiltersSettings\n  };\n};\n\n/**\n * Returns x axis ticks/intervals array for the xAxisTickInterval\n *\n * @param {string} granularity See enum of RHSM_API_QUERY_GRANULARITY_TYPES\n * @returns {number}\n */\nconst getChartXAxisLabelIncrement = granularity => {\n  switch (granularity) {\n    case GRANULARITY_TYPES.DAILY:\n      return 5;\n    case GRANULARITY_TYPES.WEEKLY:\n    case GRANULARITY_TYPES.MONTHLY:\n      return 2;\n    case GRANULARITY_TYPES.QUARTERLY:\n    default:\n      return 1;\n  }\n};\n\n/**\n * Return a formatted date string.\n *\n * @param {object} params\n * @param {Date} params.date\n * @param {string} params.granularity See enum of RHSM_API_QUERY_GRANULARITY_TYPES\n * @returns {string}\n */\nconst getTooltipDate = ({ date, granularity } = {}) => {\n  const momentDate = moment.utc(date);\n\n  switch (granularity) {\n    case GRANULARITY_TYPES.QUARTERLY:\n      return `${momentDate.format(dateHelpers.timestampQuarterFormats.yearShort)} - ${momentDate\n        .add(1, 'quarter')\n        .format(dateHelpers.timestampQuarterFormats.yearShort)}`;\n\n    case GRANULARITY_TYPES.MONTHLY:\n      return momentDate.format(dateHelpers.timestampMonthFormats.yearLong);\n\n    case GRANULARITY_TYPES.WEEKLY:\n      return `${momentDate.format(dateHelpers.timestampDayFormats.short)} - ${momentDate\n        .add(1, 'week')\n        .format(dateHelpers.timestampDayFormats.yearShort)}`;\n\n    case GRANULARITY_TYPES.DAILY:\n    default:\n      return momentDate.format(dateHelpers.timestampDayFormats.long);\n  }\n};\n\n/**\n * Format x axis ticks.\n *\n * @param {object} params\n * @param {Function} params.callback\n * @param {Date} params.date\n * @param {string} params.granularity See enum of RHSM_API_QUERY_GRANULARITY_TYPES\n * @param {number|string} params.tick\n * @param {Date} params.previousDate\n * @returns {string|undefined}\n */\nconst xAxisTickFormat = ({ callback, date, granularity, tick, previousDate } = {}) => {\n  if (!date || !granularity) {\n    return undefined;\n  }\n\n  if (callback) {\n    return callback({ callback, date, granularity, tick, previousDate });\n  }\n\n  const momentDate = moment.utc(date);\n  const isNewYear =\n    tick !== 0 && Number.parseInt(momentDate.year(), 10) !== Number.parseInt(moment.utc(previousDate).year(), 10);\n  let formattedDate;\n\n  switch (granularity) {\n    case GRANULARITY_TYPES.QUARTERLY:\n      formattedDate = isNewYear\n        ? momentDate.format(dateHelpers.timestampQuarterFormats.yearShort)\n        : momentDate.format(dateHelpers.timestampQuarterFormats.short);\n\n      formattedDate = formattedDate.replace(/\\s/, '\\n');\n      break;\n    case GRANULARITY_TYPES.MONTHLY:\n      formattedDate = isNewYear\n        ? momentDate.format(dateHelpers.timestampMonthFormats.yearShort)\n        : momentDate.format(dateHelpers.timestampMonthFormats.short);\n\n      formattedDate = formattedDate.replace(/\\s/, '\\n');\n      break;\n    case GRANULARITY_TYPES.WEEKLY:\n    case GRANULARITY_TYPES.DAILY:\n    default:\n      formattedDate = isNewYear\n        ? momentDate.format(dateHelpers.timestampDayFormats.yearShort)\n        : momentDate.format(dateHelpers.timestampDayFormats.short);\n\n      formattedDate = formattedDate.replace(/\\s(\\d{4})$/, '\\n$1');\n      break;\n  }\n\n  return formattedDate;\n};\n\n/**\n * Format y axis ticks.\n *\n * @param {object} params\n * @param {Function} params.callback\n * @param {number|string} params.tick\n * @returns {string}\n */\nconst yAxisTickFormat = ({ callback, tick } = {}) => {\n  if (callback) {\n    return callback({ tick });\n  }\n\n  return helpers\n    .numberDisplay(tick)\n    ?.format({\n      average: true,\n      mantissa: 1,\n      trimMantissa: true,\n      lowPrecision: false\n    })\n    ?.toUpperCase();\n};\n\n/**\n * Generate base chart component props.\n *\n * @param {object} params\n * @param {object} params.settings\n * @param {string} params.granularity\n * @returns {object}\n */\nconst generateExtendedChartSettings = ({ settings, granularity } = {}) => ({\n  ...settings,\n  xAxisLabelIncrement: getChartXAxisLabelIncrement(granularity),\n  xAxisTickFormat: ({ item, previousItem, tick }) =>\n    xAxisTickFormat({\n      callback: settings?.xAxisTickFormat,\n      tick,\n      date: item.date,\n      previousDate: previousItem.date,\n      granularity\n    }),\n  yAxisTickFormat: ({ tick }) =>\n    yAxisTickFormat({\n      callback: settings?.yAxisTickFormat,\n      tick\n    })\n});\n\nconst graphCardHelpers = {\n  generateChartSettings,\n  generateExtendedChartSettings,\n  getChartXAxisLabelIncrement,\n  getTooltipDate,\n  xAxisTickFormat,\n  yAxisTickFormat\n};\n\nexport {\n  graphCardHelpers as default,\n  graphCardHelpers,\n  generateChartSettings,\n  generateExtendedChartSettings,\n  getChartXAxisLabelIncrement,\n  getTooltipDate,\n  xAxisTickFormat,\n  yAxisTickFormat\n};\n"],"names":["generateChartSettings","filters","graphCardSettings","standaloneFiltersSettings","groupedFiltersSettings","forEach","id","isStandalone","filterSettings","isThreshold","chartType","ChartTypeVariant","baseFilterSettings","isStacked","isCapacity","strokeWidth","stroke","chartColorGreenDark","strokeDasharray","push","settings","padding","bottom","left","right","top","metric","metrics","updatedGroupedFiltersSettings","length","undefined","getChartXAxisLabelIncrement","granularity","GRANULARITY_TYPES","getTooltipDate","date","momentDate","moment","format","dateHelpers","add","xAxisTickFormat","callback","tick","previousDate","formattedDate","isNewYear","Number","parseInt","year","replace","yAxisTickFormat","helpers","average","mantissa","trimMantissa","lowPrecision","toUpperCase","generateExtendedChartSettings","xAxisLabelIncrement","item","previousItem","graphCardHelpers"],"sourceRoot":""}