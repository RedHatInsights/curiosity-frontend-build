{"version":3,"file":"js/8704.7843be28faecaf2aeedd.js","mappings":"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","sources":["webpack:///./src/components/bannerMessages/bannerMessages.js","webpack:///./src/components/inventoryTabs/inventoryTabs.js","webpack:///./src/components/productView/productView.js","webpack:///./src/components/productView/productViewDefault.js","webpack:///./src/components/toolbar/toolbarFieldGranularity.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, AlertActionCloseButton, AlertVariant, Button } from '@patternfly/react-core';\nimport { ExternalLinkAltIcon } from '@patternfly/react-icons';\nimport _isEqual from 'lodash/isEqual';\nimport { apiQueries, connect, reduxActions, reduxSelectors } from '../../redux';\nimport { translate } from '../i18n/i18n';\nimport { dateHelpers, helpers } from '../../common';\nimport { RHSM_API_QUERY_GRANULARITY_TYPES as GRANULARITY_TYPES, RHSM_API_QUERY_TYPES } from '../../types/rhsmApiTypes';\n\n/**\n * Render banner messages.\n *\n * @augments React.Component\n */\nclass BannerMessages extends React.Component {\n  state = {};\n\n  componentDidMount() {\n    this.onUpdateData();\n  }\n\n  componentDidUpdate(prevProps) {\n    const { query, productId } = this.props;\n\n    if (productId !== prevProps.productId || !_isEqual(query, prevProps.query)) {\n      this.onUpdateData();\n    }\n  }\n\n  /**\n   * Call the RHSM APIs, apply filters.\n   *\n   * @event onUpdateGraphData\n   */\n  onUpdateData = () => {\n    const { getMessageReports, productId, query } = this.props;\n    const { graphTallyQuery } = apiQueries.parseRhsmQuery(query);\n\n    if (productId) {\n      const { startDate, endDate } = dateHelpers.getRangedDateTime('CURRENT');\n      const updatedGraphQuery = {\n        ...graphTallyQuery,\n        [RHSM_API_QUERY_TYPES.GRANULARITY]: GRANULARITY_TYPES.DAILY,\n        [RHSM_API_QUERY_TYPES.START_DATE]: startDate.toISOString(),\n        [RHSM_API_QUERY_TYPES.END_DATE]: endDate.toISOString()\n      };\n\n      getMessageReports(productId, updatedGraphQuery);\n    }\n  };\n\n  /**\n   * Apply messages' configuration to alerts.\n   *\n   * @returns {Node}\n   */\n  renderAlerts() {\n    const { state } = this;\n    const { appMessages, messages } = this.props;\n    const updatedMessages = [];\n\n    if (messages.length) {\n      Object.entries(appMessages).forEach(([key, value]) => {\n        if (state[key] !== true && value === true) {\n          const message = messages.find(({ id }) => id === key);\n\n          if (message) {\n            updatedMessages.push({\n              key,\n              ...message\n            });\n          }\n        }\n      });\n    }\n\n    return updatedMessages.map(({ key, message, title, variant = AlertVariant.info }) => {\n      const actionClose = <AlertActionCloseButton onClose={() => this.setState({ [key]: true })} />;\n\n      return (\n        <Alert actionClose={actionClose} key={key} title={title} variant={variant}>\n          {message}\n        </Alert>\n      );\n    });\n  }\n\n  /**\n   * Render a banner messages container.\n   *\n   * @returns {Node}\n   */\n  render() {\n    const alerts = this.renderAlerts();\n\n    if (alerts.length) {\n      return <div className=\"curiosity-banner-messages\">{alerts}</div>;\n    }\n\n    return null;\n  }\n}\n\n/**\n * Prop types.\n *\n * @type {{appMessages: object, productId: string, getMessageReports: Function, query: object, messages: Array}}\n */\nBannerMessages.propTypes = {\n  appMessages: PropTypes.object.isRequired,\n  getMessageReports: PropTypes.func,\n  query: PropTypes.object,\n  messages: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      title: PropTypes.node.isRequired,\n      message: PropTypes.node.isRequired,\n      variant: PropTypes.oneOf([...Object.values(AlertVariant)])\n    })\n  ),\n  productId: PropTypes.string.isRequired\n};\n\n/**\n * Default props.\n *\n * @type {{getMessageReports: Function, query: object, messages: Array}}\n */\nBannerMessages.defaultProps = {\n  getMessageReports: helpers.noop,\n  query: {},\n  messages: [\n    {\n      id: 'cloudigradeMismatch',\n      title: translate('curiosity-banner.dataMismatchTitle'),\n      message: translate(\n        'curiosity-banner.dataMismatchMessage',\n        {\n          context: helpers.UI_LINK_REPORT_ACCURACY_RECOMMENDATIONS !== '' && 'cloudigradeMismatch',\n          appName: helpers.UI_DISPLAY_NAME\n        },\n        [\n          <Button\n            isInline\n            component=\"a\"\n            variant=\"link\"\n            icon={<ExternalLinkAltIcon />}\n            iconPosition=\"right\"\n            target=\"_blank\"\n            href={helpers.UI_LINK_REPORT_ACCURACY_RECOMMENDATIONS}\n          />\n        ]\n      )\n    }\n  ]\n};\n\n/**\n * Apply actions to props.\n *\n * @param {Function} dispatch\n * @returns {object}\n */\nconst mapDispatchToProps = dispatch => ({\n  getMessageReports: (id, query) => dispatch(reduxActions.rhsm.getMessageReports(id, query))\n});\n\n/**\n * Create a selector from applied state, props.\n *\n * @type {Function}\n */\nconst makeMapStateToProps = reduxSelectors.appMessages.makeAppMessages();\n\nconst ConnectedBannerMessages = connect(makeMapStateToProps, mapDispatchToProps)(BannerMessages);\n\nexport { ConnectedBannerMessages as default, ConnectedBannerMessages, BannerMessages };\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Title } from '@patternfly/react-core';\nimport { connect, reduxTypes, store } from '../../redux';\nimport { Tabs } from '../tabs/tabs';\nimport { helpers } from '../../common';\nimport { translate } from '../i18n/i18n';\nimport { InventoryTab } from './inventoryTab';\n\n/**\n * A system inventory tabs component.\n *\n * @augments React.Component\n * @fires onTab\n */\nclass InventoryTabs extends React.Component {\n  /**\n   * On tab update state.\n   *\n   * @event onTab\n   * @param {object} params\n   * @param {string} params.index tab index\n   */\n  onTab = ({ index }) => {\n    const { productId } = this.props;\n\n    store.dispatch({\n      type: reduxTypes.inventory.SET_INVENTORY_TAB,\n      tabs: {\n        [productId]: index\n      }\n    });\n  };\n\n  /**\n   * Render inventory tabs using Inventory tab passed props only. A parallel outcome can be\n   * achieved by passing an array of objects through a prop.\n   *\n   * @returns {Node}\n   */\n  render() {\n    const { activeTab, children, defaultActiveTab, isDisabled, t } = this.props;\n\n    if (isDisabled) {\n      return null;\n    }\n\n    const updatedChildren = React.Children.toArray(children).map((child, index) => {\n      const { props = {} } = child;\n\n      return {\n        active: props.active || false,\n        content: props.children || child,\n        title: props.title || t('curiosity-inventory.tabSubHeading', { count: index })\n      };\n    });\n\n    return (\n      <React.Fragment>\n        <Title headingLevel=\"h2\" className=\"sr-only\">\n          {t('curiosity-inventory.tabHeading', { count: updatedChildren.length })}\n        </Title>\n        <Tabs activeTab={activeTab} defaultActiveTab={defaultActiveTab} onTab={this.onTab} tabs={updatedChildren} />\n      </React.Fragment>\n    );\n  }\n}\n\n/**\n * Prop types.\n *\n * @type {{productId: string, t: Function, children: Node, defaultActiveTab: number, isDisabled: boolean,\n *     activeTab: number}}\n */\nInventoryTabs.propTypes = {\n  activeTab: PropTypes.number,\n  children: PropTypes.node.isRequired,\n  defaultActiveTab: PropTypes.number,\n  isDisabled: PropTypes.bool,\n  productId: PropTypes.string.isRequired,\n  t: PropTypes.func\n};\n\n/**\n * Default props.\n *\n * @type {{t: translate, defaultActiveTab: number, isDisabled: boolean, activeTab: number}}\n */\nInventoryTabs.defaultProps = {\n  activeTab: 0,\n  defaultActiveTab: 0,\n  isDisabled: helpers.UI_DISABLED_TABLE,\n  t: translate\n};\n\n/**\n * Create a selector from applied state, props.\n *\n * @type {Function}\n */\nconst mapStateToProps = ({ inventory }, { productId }) => ({ activeTab: inventory.tabs?.[productId] });\n\nconst ConnectedInventoryTabs = connect(mapStateToProps)(InventoryTabs);\n\nexport { ConnectedInventoryTabs as default, ConnectedInventoryTabs, InventoryTabs, InventoryTab };\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Tooltip, TooltipPosition } from '@patternfly/react-core';\nimport InfoCircleIcon from '@patternfly/react-icons/dist/js/icons/info-circle-icon';\nimport { PageLayout, PageHeader, PageSection, PageToolbar, PageMessages } from '../pageLayout/pageLayout';\nimport { apiQueries } from '../../redux';\nimport { ConnectedGraphCard, GraphCard } from '../graphCard/graphCard';\nimport { ConnectedToolbar, Toolbar } from '../toolbar/toolbar';\nimport { ConnectedInventoryList, InventoryList } from '../inventoryList/inventoryList';\nimport { helpers } from '../../common';\nimport BannerMessages from '../bannerMessages/bannerMessages';\nimport { ToolbarFieldGranularity } from '../toolbar/toolbarFieldGranularity';\nimport InventoryTabs, { InventoryTab } from '../inventoryTabs/inventoryTabs';\nimport {\n  ConnectedInventorySubscriptions,\n  InventorySubscriptions\n} from '../inventorySubscriptions/inventorySubscriptions';\nimport {\n  RHSM_API_QUERY_GRANULARITY_TYPES as GRANULARITY_TYPES,\n  RHSM_API_QUERY_SORT_DIRECTION_TYPES as SORT_DIRECTION_TYPES,\n  RHSM_API_QUERY_SORT_TYPES,\n  RHSM_API_QUERY_SUBSCRIPTIONS_SORT_TYPES,\n  RHSM_API_QUERY_TYPES\n} from '../../types/rhsmApiTypes';\nimport { GuestsList } from '../guestsList/guestsList';\nimport { translate } from '../i18n/i18n';\n\n/**\n * ToDo: base for default product layouts, add additional props for various toolbars\n * Next steps include...\n * Consider being able to pass customized toolbars for GraphCard and the\n * various Inventory displays. Have to evaluate how to handle the global toolbar, one\n * consideration is creating optional widgets with self-contained state update ability\n * based off of context/props/etc.\n *\n * Moving existing products to this layout, or maintaining them \"as is\", then renaming and\n * relocating them to this directory if they've been customized beyond a basic layout.\n */\n/**\n * Display a product.\n *\n * @param {object} props\n * @param {object} props.routeDetail\n * @param {Function} props.t\n * @param {Node|boolean} props.toolbarGraph\n * @param {boolean} props.toolbarGraphDescription\n * @param {Node|boolean} props.toolbarProduct\n * @returns {Node}\n */\nconst ProductView = ({ routeDetail, t, toolbarGraph, toolbarGraphDescription, toolbarProduct }) => {\n  const {\n    pathParameter: productId,\n    productConfig,\n    productParameter: productLabel,\n    viewParameter: viewId\n  } = routeDetail;\n\n  const {\n    graphTallyQuery,\n    inventoryHostsQuery,\n    inventorySubscriptionsQuery,\n    query,\n    initialToolbarFilters,\n    initialGraphFilters,\n    initialGraphSettings,\n    initialGuestsFilters,\n    initialInventoryFilters,\n    initialInventorySettings,\n    initialSubscriptionsInventoryFilters\n  } = productConfig?.[0] || {};\n\n  const {\n    query: initialQuery,\n    graphTallyQuery: initialGraphTallyQuery,\n    inventoryHostsQuery: initialInventoryHostsQuery,\n    inventorySubscriptionsQuery: initialInventorySubscriptionsQuery,\n    toolbarQuery: initialToolbarQuery\n  } = apiQueries.parseRhsmQuery(query, { graphTallyQuery, inventoryHostsQuery, inventorySubscriptionsQuery });\n\n  if (!productId || !viewId) {\n    return null;\n  }\n\n  let graphCardTooltip = null;\n\n  if (toolbarGraphDescription) {\n    graphCardTooltip = (\n      <Tooltip\n        content={<p>{t('curiosity-graph.cardHeadingDescription', { context: productId })}</p>}\n        position={TooltipPosition.top}\n        enableFlip={false}\n        distance={5}\n        entryDelay={100}\n        exitDelay={0}\n      >\n        <sup className=\"curiosity-icon__info\">\n          <InfoCircleIcon />\n        </sup>\n      </Tooltip>\n    );\n  }\n\n  const graphCardTitle = (\n    <React.Fragment>\n      {t('curiosity-graph.cardHeading', { context: productId })}\n      {graphCardTooltip}\n    </React.Fragment>\n  );\n\n  return (\n    <PageLayout>\n      <PageHeader productLabel={productLabel} includeTour>\n        {t(`curiosity-view.title`, { appName: helpers.UI_DISPLAY_NAME, context: productLabel })}\n      </PageHeader>\n      <PageMessages>\n        <BannerMessages productId={productId} viewId={viewId} query={initialQuery} />\n      </PageMessages>\n      <PageToolbar>\n        {(React.isValidElement(toolbarProduct) && toolbarProduct) ||\n          (toolbarProduct !== false && (\n            <ConnectedToolbar\n              filterOptions={initialToolbarFilters}\n              productId={productId}\n              query={initialToolbarQuery}\n              viewId={viewId}\n            />\n          ))}\n      </PageToolbar>\n      <PageSection>\n        <ConnectedGraphCard\n          key={`graph_${productId}`}\n          filterGraphData={initialGraphFilters}\n          settings={initialGraphSettings}\n          query={initialGraphTallyQuery}\n          productId={productId}\n          viewId={viewId}\n          cardTitle={graphCardTitle}\n          productLabel={productLabel}\n        >\n          {(React.isValidElement(toolbarGraph) && toolbarGraph) ||\n            (toolbarGraph !== false && (\n              <ToolbarFieldGranularity\n                viewId={viewId}\n                value={initialGraphTallyQuery[RHSM_API_QUERY_TYPES.GRANULARITY]}\n              />\n            ))}\n        </ConnectedGraphCard>\n      </PageSection>\n      <PageSection>\n        <InventoryTabs key={`inventory_${productId}`} productId={productId}>\n          <InventoryTab\n            key={`inventory_hosts_${productId}`}\n            title={t('curiosity-inventory.tabHosts', { context: ['noInstances', productId] })}\n          >\n            <ConnectedInventoryList\n              key={`inv_${productId}`}\n              filterGuestsData={initialGuestsFilters}\n              filterInventoryData={initialInventoryFilters}\n              productId={productId}\n              settings={initialInventorySettings}\n              query={initialInventoryHostsQuery}\n              viewId={viewId}\n            />\n          </InventoryTab>\n          {!helpers.UI_DISABLED_TABLE_SUBSCRIPTIONS && (\n            <InventoryTab\n              key={`inventory_subs_${productId}`}\n              title={t('curiosity-inventory.tabSubscriptions', { context: productId })}\n            >\n              <ConnectedInventorySubscriptions\n                key={`subs_${productId}`}\n                filterInventoryData={initialSubscriptionsInventoryFilters}\n                productId={productId}\n                query={initialInventorySubscriptionsQuery}\n                viewId={viewId}\n              />\n            </InventoryTab>\n          )}\n        </InventoryTabs>\n      </PageSection>\n    </PageLayout>\n  );\n};\n\n/**\n * Prop types.\n *\n * @type {{t: translate, toolbarGraph: (Node|boolean), toolbarGraphDescription: boolean, routeDetail: object,\n *    productConfig: object, toolbarProduct: (Node|boolean)}}\n */\nProductView.propTypes = {\n  routeDetail: PropTypes.shape({\n    pathParameter: PropTypes.string,\n    productConfig: PropTypes.arrayOf(\n      PropTypes.shape({\n        graphTallyQuery: PropTypes.shape({\n          [RHSM_API_QUERY_TYPES.GRANULARITY]: PropTypes.oneOf([...Object.values(GRANULARITY_TYPES)])\n        }),\n        inventoryHostsQuery: PropTypes.shape({\n          [RHSM_API_QUERY_TYPES.LIMIT]: PropTypes.number,\n          [RHSM_API_QUERY_TYPES.OFFSET]: PropTypes.number,\n          [RHSM_API_QUERY_TYPES.SORT]: PropTypes.oneOf([...Object.values(RHSM_API_QUERY_SORT_TYPES)]),\n          [RHSM_API_QUERY_TYPES.DIRECTION]: PropTypes.oneOf([...Object.values(SORT_DIRECTION_TYPES)])\n        }),\n        inventorySubscriptionsQuery: PropTypes.shape({\n          [RHSM_API_QUERY_TYPES.LIMIT]: PropTypes.number,\n          [RHSM_API_QUERY_TYPES.OFFSET]: PropTypes.number,\n          [RHSM_API_QUERY_TYPES.SORT]: PropTypes.oneOf([...Object.values(RHSM_API_QUERY_SUBSCRIPTIONS_SORT_TYPES)]),\n          [RHSM_API_QUERY_TYPES.DIRECTION]: PropTypes.oneOf([...Object.values(SORT_DIRECTION_TYPES)])\n        }),\n        query: PropTypes.shape({\n          [RHSM_API_QUERY_TYPES.START_DATE]: PropTypes.string,\n          [RHSM_API_QUERY_TYPES.END_DATE]: PropTypes.string\n        }),\n        initialToolbarFilters: Toolbar.propTypes.filterOptions,\n        initialGraphFilters: GraphCard.propTypes.filterGraphData,\n        initialGraphSettings: GraphCard.propTypes.settings,\n        initialGuestsFilters: GuestsList.propTypes.filterGuestsData,\n        initialInventoryFilters: InventoryList.propTypes.filterInventoryData,\n        initialInventorySettings: InventoryList.propTypes.settings,\n        initialSubscriptionsInventoryFilters: InventorySubscriptions.propTypes.filterInventoryData\n      })\n    ),\n    productParameter: PropTypes.string,\n    viewParameter: PropTypes.string\n  }).isRequired,\n  t: PropTypes.func,\n  toolbarGraph: PropTypes.oneOfType([PropTypes.node, PropTypes.bool]),\n  toolbarGraphDescription: PropTypes.bool,\n  toolbarProduct: PropTypes.oneOfType([PropTypes.node, PropTypes.bool])\n};\n\n/**\n * Default props.\n *\n * @type {{t: translate, toolbarGraph: (Node|boolean), toolbarGraphDescription: boolean, toolbarProduct: (Node|boolean)}}\n */\nProductView.defaultProps = {\n  t: translate,\n  toolbarGraph: null,\n  toolbarGraphDescription: false,\n  toolbarProduct: null\n};\n\nexport { ProductView as default, ProductView };\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { ProductView } from './productView';\n\n/**\n * A default product view.\n *\n * @param {object} props\n * @param {object} props.routeDetail\n * @returns {Node}\n */\nconst ProductViewDefault = ({ routeDetail }) => <ProductView routeDetail={routeDetail} />;\n\n/**\n * Prop types.\n *\n * @type {{routeDetail: object}}\n */\nProductViewDefault.propTypes = {\n  routeDetail: PropTypes.shape(ProductView.propTypes.routeDetail).isRequired\n};\n\n/**\n * Default props.\n */\nProductViewDefault.defaultProps = {};\n\nexport { ProductViewDefault as default, ProductViewDefault };\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { reduxTypes, store, useSelector } from '../../redux';\nimport { Select } from '../form/select';\nimport { RHSM_API_QUERY_GRANULARITY_TYPES as FIELD_TYPES, RHSM_API_QUERY_TYPES } from '../../types/rhsmApiTypes';\nimport { dateHelpers } from '../../common';\nimport { translate } from '../i18n/i18n';\n\n/**\n * Select field options.\n *\n * @type {{title: (string|Node), value: string, selected: boolean}[]}\n */\nconst toolbarFieldOptions = Object.values(FIELD_TYPES).map(type => ({\n  title: translate('curiosity-toolbar.granularity', { context: type }),\n  value: type,\n  selected: false\n}));\n\n/**\n * Display a granularity field with options.\n *\n * @fires onSelect\n * @param {object} props\n * @param {Array} props.options\n * @param {Function} props.t\n * @param {string} props.value\n * @param {string} props.viewId\n * @returns {Node}\n */\nconst ToolbarFieldGranularity = ({ options, t, value, viewId }) => {\n  const updatedValue = useSelector(\n    ({ view }) => view.graphTallyQuery?.[viewId]?.[RHSM_API_QUERY_TYPES.GRANULARITY],\n    value\n  );\n\n  const updatedOptions = options.map(option => ({ ...option, selected: option.value === updatedValue }));\n\n  /**\n   * On select, dispatch type.\n   *\n   * @event onSelect\n   * @param {object} event\n   * @returns {void}\n   */\n  const onSelect = event => {\n    const { startDate, endDate } = dateHelpers.getRangedDateTime(event.value);\n    store.dispatch([\n      {\n        type: reduxTypes.query.SET_QUERY_CLEAR_INVENTORY_LIST,\n        viewId\n      },\n      {\n        type: reduxTypes.query.SET_QUERY_RHSM_TYPES[RHSM_API_QUERY_TYPES.GRANULARITY],\n        viewId,\n        [RHSM_API_QUERY_TYPES.GRANULARITY]: event.value\n      },\n      {\n        type: reduxTypes.query.SET_QUERY_RHSM_TYPES[RHSM_API_QUERY_TYPES.START_DATE],\n        viewId,\n        [RHSM_API_QUERY_TYPES.START_DATE]: startDate.toISOString()\n      },\n      {\n        type: reduxTypes.query.SET_QUERY_RHSM_TYPES[RHSM_API_QUERY_TYPES.END_DATE],\n        viewId,\n        [RHSM_API_QUERY_TYPES.END_DATE]: endDate.toISOString()\n      }\n    ]);\n  };\n\n  return (\n    <Select\n      aria-label={t('curiosity-toolbar.placeholder', { context: 'granularity' })}\n      onSelect={onSelect}\n      options={updatedOptions}\n      selectedOptions={updatedValue}\n      placeholder={t('curiosity-toolbar.placeholder', { context: 'granularity' })}\n      data-test={ToolbarFieldGranularity.defaultProps.viewId}\n    />\n  );\n};\n\n/**\n * Prop types.\n *\n * @type {{viewId: string, t: Function, options: Array, value: string}}\n */\nToolbarFieldGranularity.propTypes = {\n  options: PropTypes.arrayOf(\n    PropTypes.shape({\n      title: PropTypes.node,\n      value: PropTypes.any,\n      selected: PropTypes.bool\n    })\n  ),\n  t: PropTypes.func,\n  value: PropTypes.oneOf([...Object.values(FIELD_TYPES)]),\n  viewId: PropTypes.string\n};\n\n/**\n * Default props.\n *\n * @type {{viewId: string, t: translate, options: Array, value: string}}\n */\nToolbarFieldGranularity.defaultProps = {\n  options: toolbarFieldOptions,\n  t: translate,\n  value: FIELD_TYPES.DAILY,\n  viewId: 'toolbarFieldGranularity'\n};\n\nexport { ToolbarFieldGranularity as default, ToolbarFieldGranularity, toolbarFieldOptions };\n"],"names":["BannerMessages","state","onUpdateData","props","getMessageReports","productId","query","graphTallyQuery","apiQueries","dateHelpers","startDate","endDate","RHSM_API_QUERY_TYPES","GRANULARITY_TYPES","toISOString","this","prevProps","_isEqual","appMessages","messages","updatedMessages","length","Object","entries","forEach","key","value","message","find","id","push","map","title","variant","AlertVariant","actionClose","AlertActionCloseButton","onClose","setState","Alert","alerts","renderAlerts","className","React","defaultProps","helpers","translate","context","appName","Button","isInline","component","icon","ExternalLinkAltIcon","iconPosition","target","href","makeMapStateToProps","reduxSelectors","ConnectedBannerMessages","connect","dispatch","reduxActions","InventoryTabs","onTab","index","store","type","reduxTypes","tabs","activeTab","children","defaultActiveTab","isDisabled","t","updatedChildren","child","active","content","count","Title","headingLevel","Tabs","ConnectedInventoryTabs","inventory","ProductView","routeDetail","toolbarGraph","toolbarGraphDescription","toolbarProduct","pathParameter","productConfig","productLabel","productParameter","viewId","viewParameter","inventoryHostsQuery","inventorySubscriptionsQuery","initialToolbarFilters","initialGraphFilters","initialGraphSettings","initialGuestsFilters","initialInventoryFilters","initialInventorySettings","initialSubscriptionsInventoryFilters","initialQuery","initialGraphTallyQuery","initialInventoryHostsQuery","initialInventorySubscriptionsQuery","initialToolbarQuery","toolbarQuery","graphCardTooltip","Tooltip","position","TooltipPosition","enableFlip","distance","entryDelay","exitDelay","graphCardTitle","PageLayout","PageHeader","includeTour","PageMessages","PageToolbar","ConnectedToolbar","filterOptions","PageSection","ConnectedGraphCard","filterGraphData","settings","cardTitle","ToolbarFieldGranularity","InventoryTab","ConnectedInventoryList","filterGuestsData","filterInventoryData","ConnectedInventorySubscriptions","ProductViewDefault","toolbarFieldOptions","values","FIELD_TYPES","selected","options","updatedValue","useSelector","view","updatedOptions","option","Select","onSelect","event","selectedOptions","placeholder"],"sourceRoot":""}