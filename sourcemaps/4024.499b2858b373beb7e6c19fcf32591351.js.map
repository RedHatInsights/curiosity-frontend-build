{"version":3,"file":"js/4024.1678225419897.821098227f56bf49efa9.js","mappings":"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","sources":["webpack:///./src/components/graphCard/graphCardChartTooltip.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useProduct, useProductGraphTallyQuery } from '../productView/productViewContext';\nimport { getTooltipDate } from './graphCardHelpers';\nimport { translate } from '../i18n/i18n';\nimport { ChartTypeVariant } from '../chart/chart';\nimport { ChartIcon } from '../chart/chartIcon';\nimport { RHSM_API_QUERY_SET_TYPES } from '../../services/rhsm/rhsmConstants';\nimport { helpers } from '../../common';\n\n/**\n * @memberof GraphCard\n * @module GraphCardChartTooltip\n */\n\n/**\n * A custom chart tooltip.\n *\n * @param {object} props\n * @param {object} props.datum\n * @param {Function} props.t\n * @param {Function} props.useProduct\n * @returns {React.ReactNode}\n */\nconst GraphCardChartTooltip = ({\n  datum,\n  t,\n  useProduct: useAliasProduct,\n  useProductGraphTallyQuery: useAliasProductGraphTallyQuery\n}) => {\n  const { productLabel } = useAliasProduct();\n  const { [RHSM_API_QUERY_SET_TYPES.GRANULARITY]: granularity } = useAliasProductGraphTallyQuery();\n\n  let header = null;\n  const data = [];\n  const { itemsByKey = {} } = datum || {};\n\n  Object.keys(itemsByKey)\n    .reverse()\n    .forEach((key, index) => {\n      if (index === 0) {\n        header = getTooltipDate({\n          date: itemsByKey[key]?.data.date,\n          granularity\n        });\n      }\n\n      const tempDataFacet = {\n        color: itemsByKey[key]?.color\n      };\n\n      if (itemsByKey[key]?.chartType === ChartTypeVariant.threshold) {\n        let thresholdStringValue = itemsByKey[key]?.data.y ?? t('curiosity-graph.label', { context: 'noData' });\n\n        // ToDo: Remove hasInfinite check once deprecated graphCard components are removed\n        if (itemsByKey[key]?.data.hasInfinite || itemsByKey[key]?.data.hasInfiniteQuantity) {\n          thresholdStringValue = t('curiosity-graph.label', { context: ['threshold', 'infinite'] }, [\n            tempDataFacet.color && (\n              <ChartIcon\n                symbol=\"infinity\"\n                fill=\"#ffffff\"\n                title={t('curiosity-graph.label', { context: ['threshold', 'infinite'] })}\n              />\n            )\n          ]);\n        }\n\n        tempDataFacet.label = t('curiosity-graph.label', { context: ['threshold'] });\n        tempDataFacet.value = thresholdStringValue;\n      } else {\n        const dataFactsValue =\n          (itemsByKey[key]?.data.hasData === false && t('curiosity-graph.label', { context: 'noData' })) ||\n          itemsByKey[key]?.data.y ||\n          0;\n\n        tempDataFacet.label = t(`curiosity-graph.label`, { context: key, product: productLabel });\n        tempDataFacet.value = dataFactsValue;\n      }\n\n      tempDataFacet.chartType = itemsByKey[key]?.chartType;\n      data.push(tempDataFacet);\n    });\n\n  return (\n    <div className=\"curiosity-usage-graph__tooltip\">\n      <table summary={t('curiosity-graph.tooltipSummary')}>\n        {(data.length && header && (\n          <thead>\n            <tr>\n              <th colSpan={2}>{header}</th>\n            </tr>\n          </thead>\n        )) ||\n          null}\n        {(data.length && (\n          <tbody>\n            {data.map(dataFacet => {\n              const updatedDataFacetValue =\n                (typeof dataFacet.value === 'number' &&\n                  !Number.isInteger(dataFacet.value) &&\n                  helpers\n                    .numberDisplay(dataFacet.value)\n                    ?.format({ average: true, mantissa: 5, trimMantissa: true, lowPrecision: true })\n                    ?.toUpperCase()) ||\n                dataFacet.value;\n\n              return (\n                <tr key={`tooltip-${dataFacet.label}`}>\n                  <th>\n                    {dataFacet.chartType === ChartTypeVariant.threshold && (\n                      <ChartIcon size=\"sm\" symbol=\"dash\" fill={dataFacet.color || 'transparent'} />\n                    )}\n                    {dataFacet.chartType !== ChartTypeVariant.threshold && (\n                      <ChartIcon size=\"sm\" fill={dataFacet.color || 'transparent'} />\n                    )}{' '}\n                    {dataFacet.label}\n                  </th>\n                  <td>{updatedDataFacetValue}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        )) ||\n          null}\n      </table>\n      {(!data.length && t('curiosity-graph.label', { context: ['noData', 'error'] })) || null}\n    </div>\n  );\n};\n\n/**\n * Prop types.\n *\n * @type {{datum: object, useProduct: Function, useProductGraphTallyQuery: Function, t: Function}}\n */\nGraphCardChartTooltip.propTypes = {\n  datum: PropTypes.shape({\n    itemsByKey: PropTypes.objectOf(\n      PropTypes.shape({\n        chartType: PropTypes.string,\n        color: PropTypes.string,\n        data: PropTypes.shape({\n          date: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Date)]),\n          hasData: PropTypes.bool,\n          hasInfinite: PropTypes.bool,\n          hasInfiniteQuantity: PropTypes.bool,\n          y: PropTypes.number\n        })\n      })\n    )\n  }),\n  t: PropTypes.func,\n  useProduct: PropTypes.func,\n  useProductGraphTallyQuery: PropTypes.func\n};\n\n/**\n * Default props.\n *\n * @type {{datum: object, useProduct: Function, useProductGraphTallyQuery: Function, t: Function}}\n */\nGraphCardChartTooltip.defaultProps = {\n  datum: {},\n  t: translate,\n  useProduct,\n  useProductGraphTallyQuery\n};\n\nexport { GraphCardChartTooltip as default, GraphCardChartTooltip };\n"],"names":["GraphCardChartTooltip","_ref","datum","t","useAliasProduct","useProduct","useAliasProductGraphTallyQuery","useProductGraphTallyQuery","productLabel","granularity","RHSM_API_QUERY_SET_TYPES","header","data","_ref2$itemsByKey","itemsByKey","Object","keys","reverse","forEach","key","index","_itemsByKey$key2","_itemsByKey$key3","_itemsByKey$key9","_itemsByKey$key","getTooltipDate","date","tempDataFacet","color","chartType","ChartTypeVariant","_itemsByKey$key$data$","_itemsByKey$key4","_itemsByKey$key5","_itemsByKey$key6","thresholdStringValue","y","context","hasInfinite","hasInfiniteQuantity","React","ChartIcon","symbol","fill","title","label","value","_itemsByKey$key7","_itemsByKey$key8","dataFactsValue","hasData","product","push","className","summary","length","colSpan","map","dataFacet","_helpers$numberDispla","_helpers$numberDispla2","updatedDataFacetValue","Number","isInteger","helpers","format","average","mantissa","trimMantissa","lowPrecision","toUpperCase","concat","size","defaultProps","translate"],"sourceRoot":""}