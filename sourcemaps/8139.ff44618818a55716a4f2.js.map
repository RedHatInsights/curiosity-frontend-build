{"version":3,"file":"js/8139.02e20d844f82d110aaa5.js","mappings":"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","sources":["webpack:///./src/components/graphCard/graphCardHelpers.js"],"sourcesContent":["import moment from 'moment';\nimport { RHSM_API_QUERY_GRANULARITY_TYPES as GRANULARITY_TYPES } from '../../types/rhsmApiTypes';\nimport { dateHelpers, helpers } from '../../common';\n\n/**\n * Returns x axis ticks/intervals array for the xAxisTickInterval\n *\n * @param {string} granularity See enum of RHSM_API_QUERY_GRANULARITY_TYPES\n * @returns {number}\n */\nconst getChartXAxisLabelIncrement = granularity => {\n  switch (granularity) {\n    case GRANULARITY_TYPES.DAILY:\n      return 5;\n    case GRANULARITY_TYPES.WEEKLY:\n    case GRANULARITY_TYPES.MONTHLY:\n      return 2;\n    case GRANULARITY_TYPES.QUARTERLY:\n    default:\n      return 1;\n  }\n};\n\n/**\n * Return a formatted date string.\n *\n * @param {object} params\n * @param {Date} params.date\n * @param {string} params.granularity See enum of RHSM_API_QUERY_GRANULARITY_TYPES\n * @returns {string}\n */\nconst getTooltipDate = ({ date, granularity }) => {\n  const momentDate = moment.utc(date);\n\n  switch (granularity) {\n    case GRANULARITY_TYPES.QUARTERLY:\n      return `${momentDate.format(dateHelpers.timestampQuarterFormats.yearShort)} - ${momentDate\n        .add(1, 'quarter')\n        .format(dateHelpers.timestampQuarterFormats.yearShort)}`;\n\n    case GRANULARITY_TYPES.MONTHLY:\n      return momentDate.format(dateHelpers.timestampMonthFormats.yearLong);\n\n    case GRANULARITY_TYPES.WEEKLY:\n      return `${momentDate.format(dateHelpers.timestampDayFormats.short)} - ${momentDate\n        .add(1, 'week')\n        .format(dateHelpers.timestampDayFormats.yearShort)}`;\n\n    case GRANULARITY_TYPES.DAILY:\n    default:\n      return momentDate.format(dateHelpers.timestampDayFormats.long);\n  }\n};\n\n/**\n * Format x axis ticks.\n *\n * @param {object} params\n * @param {Date} params.date\n * @param {string} params.granularity See enum of RHSM_API_QUERY_GRANULARITY_TYPES\n * @param {number|string} params.tick\n * @param {Date} params.previousDate\n * @returns {string|undefined}\n */\nconst xAxisTickFormat = ({ date, granularity, tick, previousDate }) => {\n  if (!date || !granularity) {\n    return undefined;\n  }\n\n  const momentDate = moment.utc(date);\n  const isNewYear =\n    tick !== 0 && Number.parseInt(momentDate.year(), 10) !== Number.parseInt(moment.utc(previousDate).year(), 10);\n  let formattedDate;\n\n  switch (granularity) {\n    case GRANULARITY_TYPES.QUARTERLY:\n      formattedDate = isNewYear\n        ? momentDate.format(dateHelpers.timestampQuarterFormats.yearShort)\n        : momentDate.format(dateHelpers.timestampQuarterFormats.short);\n\n      formattedDate = formattedDate.replace(/\\s/, '\\n');\n      break;\n    case GRANULARITY_TYPES.MONTHLY:\n      formattedDate = isNewYear\n        ? momentDate.format(dateHelpers.timestampMonthFormats.yearShort)\n        : momentDate.format(dateHelpers.timestampMonthFormats.short);\n\n      formattedDate = formattedDate.replace(/\\s/, '\\n');\n      break;\n    case GRANULARITY_TYPES.WEEKLY:\n    case GRANULARITY_TYPES.DAILY:\n    default:\n      formattedDate = isNewYear\n        ? momentDate.format(dateHelpers.timestampDayFormats.yearShort)\n        : momentDate.format(dateHelpers.timestampDayFormats.short);\n\n      formattedDate = formattedDate.replace(/\\s(\\d{4})$/, '\\n$1');\n      break;\n  }\n\n  return formattedDate;\n};\n\n/**\n * ToDo: Remove yAxisTickFormatFallback.\n * Appears Linux combined with Firefox has an issue using `Intl.NumberFormat` method.\n * We've applied shim code from NumeralJS and Numbro as a fallback. Up-to-date\n * browsers still have the optimal version with locale. If the original package used\n * corrects its rounding behavior we may consider re-implementing it.\n */\n/**\n * Fallback method for Linux and Firefox.\n *\n * @param {object} params\n * @param {number|string} params.tick\n * @returns {string}\n */\nconst yAxisTickFormatFallback = ({ tick }) => {\n  const abs = Math.abs(tick);\n  let updatedTick = tick;\n  let updatedAbbr = '';\n\n  if (abs >= Math.pow(10, 12)) {\n    updatedAbbr = 'T';\n    updatedTick = tick / Math.pow(10, 12);\n  } else if (abs < Math.pow(10, 12) && abs >= Math.pow(10, 9)) {\n    updatedAbbr = 'B';\n    updatedTick = tick / Math.pow(10, 9);\n  } else if (abs < Math.pow(10, 9) && abs >= Math.pow(10, 6)) {\n    updatedAbbr = 'M';\n    updatedTick = tick / Math.pow(10, 6);\n  } else if (abs < Math.pow(10, 6) && abs >= Math.pow(10, 3)) {\n    updatedAbbr = 'K';\n    updatedTick = tick / Math.pow(10, 3);\n  }\n\n  return `${updatedTick}${updatedAbbr}`;\n};\n\n// ToDo: remove yAxisTickFormatFallback check.\n/**\n * Format y axis ticks.\n *\n * @param {object} params\n * @param {number|string} params.tick\n * @param {string} params.locale\n * @returns {string}\n */\nconst yAxisTickFormat = ({ tick, locale = helpers.UI_LOCALE_DEFAULT }) => {\n  let updatedTick = `${new Intl.NumberFormat(locale, {\n    maximumFractionDigits: 1,\n    notation: 'compact',\n    compactDisplay: 'short'\n  }).format(tick)}`;\n\n  if (updatedTick.length > 3 && updatedTick.length >= `${tick}`.length) {\n    updatedTick = yAxisTickFormatFallback({ tick });\n  }\n\n  return updatedTick;\n};\n\nconst graphCardHelpers = {\n  getChartXAxisLabelIncrement,\n  getTooltipDate,\n  xAxisTickFormat,\n  yAxisTickFormat,\n  yAxisTickFormatFallback\n};\n\nexport {\n  graphCardHelpers as default,\n  graphCardHelpers,\n  getChartXAxisLabelIncrement,\n  getTooltipDate,\n  xAxisTickFormat,\n  yAxisTickFormat,\n  yAxisTickFormatFallback\n};\n"],"names":["getChartXAxisLabelIncrement","granularity","GRANULARITY_TYPES","getTooltipDate","date","momentDate","moment","format","dateHelpers","add","xAxisTickFormat","tick","previousDate","formattedDate","isNewYear","Number","parseInt","year","replace","yAxisTickFormatFallback","abs","Math","updatedTick","updatedAbbr","pow","yAxisTickFormat","locale","helpers","Intl","NumberFormat","maximumFractionDigits","notation","compactDisplay","length","graphCardHelpers"],"sourceRoot":""}