{"version":3,"file":"js/3385.25a315a365846cb4ddfb.js","mappings":"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","sources":["webpack:///./node_modules/react-use/esm/useUnmount.js","webpack:///./src/components/inventoryGuests/inventoryGuestsContext.js","webpack:///./node_modules/fast-deep-equal/react.js","webpack:///./node_modules/react-use/esm/misc/isDeepEqual.js","webpack:///./node_modules/react-use/esm/useDeepCompareEffect.js"],"sourcesContent":["import { useRef } from 'react';\nimport useEffectOnce from './useEffectOnce';\nvar useUnmount = function (fn) {\n    var fnRef = useRef(fn);\n    // update the ref each render so if it change the newest callback will be invoked\n    fnRef.current = fn;\n    useEffectOnce(function () { return function () { return fnRef.current(); }; });\n};\nexport default useUnmount;\n","import { useState } from 'react';\nimport { useDeepCompareEffect, useUnmount, useShallowCompareEffect } from 'react-use';\nimport { reduxActions, reduxTypes, storeHooks } from '../../redux';\nimport { useProductInventoryGuestsQuery } from '../productView/productViewContext';\nimport { RHSM_API_QUERY_SET_TYPES } from '../../services/rhsm/rhsmConstants';\n\n/**\n * @memberof InventoryGuests\n * @module InventoryGuestsContext\n */\n\n/**\n * Guests inventory selector response.\n *\n * @param {string} id\n * @param {object} options\n * @param {Function} options.useSelectorsResponse\n * @returns {{data: (*|{}), pending: (*|boolean), fulfilled, error}}\n */\nconst useSelectorsGuestsInventory = (\n  id,\n  { useSelectorsResponse: useAliasSelectorsResponse = storeHooks.reactRedux.useSelectorsResponse } = {}\n) => {\n  const { error, cancelled, fulfilled, pending, data } = useAliasSelectorsResponse(\n    ({ inventory }) => inventory?.hostsGuests?.[id]\n  );\n\n  return {\n    error,\n    fulfilled,\n    pending: pending || cancelled || false,\n    data: (data?.length === 1 && data[0]) || data || {}\n  };\n};\n\n/**\n * Combined Redux RHSM Actions, getHostsInventoryGuests, and inventory selector response.\n *\n * @param {string} id\n * @param {object} options\n * @param {Function} options.getInventory\n * @param {Function} options.useDispatch\n * @param {Function} options.useProductInventoryQuery\n * @param {Function} options.useSelectorsInventory\n * @returns {Function}\n */\nconst useGetGuestsInventory = (\n  id,\n  {\n    getInventory = reduxActions.rhsm.getHostsInventoryGuests,\n    useDispatch: useAliasDispatch = storeHooks.reactRedux.useDispatch,\n    useProductInventoryQuery: useAliasProductInventoryQuery = useProductInventoryGuestsQuery,\n    useSelectorsInventory: useAliasSelectorsInventory = useSelectorsGuestsInventory\n  } = {}\n) => {\n  const [updatedData, setUpdatedData] = useState([]);\n  const query = useAliasProductInventoryQuery({ options: { overrideId: id } });\n  const dispatch = useAliasDispatch();\n  const { data = {}, fulfilled = false, ...response } = useAliasSelectorsInventory(id);\n  const { data: listData = [] } = data;\n\n  useShallowCompareEffect(() => {\n    getInventory(id, query)(dispatch);\n  }, [dispatch, id, query]);\n\n  useDeepCompareEffect(() => {\n    if (fulfilled) {\n      setUpdatedData(prevState => [...prevState, ...listData]);\n    }\n  }, [fulfilled, listData]);\n\n  return {\n    data: updatedData,\n    fulfilled,\n    ...response\n  };\n};\n\n/**\n * Use paging as onScroll event for guests inventory.\n *\n * @param {string} id\n * @param {object} options\n * @param {Function} options.useDispatch\n * @param {Function} options.useSelectorsInventory\n * @param {Function} options.useProductInventoryQuery\n * @returns {Function}\n */\nconst useOnScroll = (\n  id,\n  {\n    useDispatch: useAliasDispatch = storeHooks.reactRedux.useDispatch,\n    useSelectorsInventory: useAliasSelectorsInventory = useSelectorsGuestsInventory,\n    useProductInventoryQuery: useAliasProductInventoryQuery = useProductInventoryGuestsQuery\n  } = {}\n) => {\n  const dispatch = useAliasDispatch();\n  const { pending, data = {} } = useAliasSelectorsInventory(id);\n  const { count: numberOfGuests } = data?.meta || {};\n\n  const query = useAliasProductInventoryQuery({ options: { overrideId: id } });\n  const { [RHSM_API_QUERY_SET_TYPES.LIMIT]: limit, [RHSM_API_QUERY_SET_TYPES.OFFSET]: currentPage } = query;\n\n  /**\n   * Reset paging in scenarios where inventory is filtered, or guests is collapsed.\n   */\n  useUnmount(() => {\n    dispatch([\n      {\n        type: reduxTypes.query.SET_QUERY_CLEAR_INVENTORY_GUESTS_LIST,\n        viewId: id\n      },\n      {\n        type: reduxTypes.inventory.CLEAR_INVENTORY_GUESTS,\n        id\n      }\n    ]);\n  });\n\n  /**\n   * On scroll, dispatch type.\n   *\n   * @event onScroll\n   * @param {object} event\n   * @returns {void}\n   */\n  return event => {\n    const { target } = event;\n    const bottom = target.scrollHeight - target.scrollTop === target.clientHeight;\n\n    if (numberOfGuests > currentPage + limit && bottom && !pending) {\n      dispatch([\n        {\n          type: reduxTypes.query.SET_QUERY_RHSM_GUESTS_INVENTORY_TYPES[RHSM_API_QUERY_SET_TYPES.OFFSET],\n          viewId: id,\n          [RHSM_API_QUERY_SET_TYPES.OFFSET]: currentPage + limit\n        },\n        {\n          type: reduxTypes.query.SET_QUERY_RHSM_GUESTS_INVENTORY_TYPES[RHSM_API_QUERY_SET_TYPES.LIMIT],\n          viewId: id,\n          [RHSM_API_QUERY_SET_TYPES.LIMIT]: limit\n        }\n      ]);\n    }\n  };\n};\n\nconst context = {\n  useGetGuestsInventory,\n  useOnScroll,\n  useSelectorsGuestsInventory\n};\n\nexport { context as default, context, useGetGuestsInventory, useOnScroll, useSelectorsGuestsInventory };\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (key === '_owner' && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner.\n        //  _owner contains circular references\n        // and is not needed when comparing the actual elements (and not their owners)\n        continue;\n      }\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","import isDeepEqualReact from 'fast-deep-equal/react';\nexport default isDeepEqualReact;\n","import useCustomCompareEffect from './useCustomCompareEffect';\nimport isDeepEqual from './misc/isDeepEqual';\nvar isPrimitive = function (val) { return val !== Object(val); };\nvar useDeepCompareEffect = function (effect, deps) {\n    if (process.env.NODE_ENV !== 'production') {\n        if (!(deps instanceof Array) || !deps.length) {\n            console.warn('`useDeepCompareEffect` should not be used with no dependencies. Use React.useEffect instead.');\n        }\n        if (deps.every(isPrimitive)) {\n            console.warn('`useDeepCompareEffect` should not be used with dependencies that are all primitive values. Use React.useEffect instead.');\n        }\n    }\n    useCustomCompareEffect(effect, deps, isDeepEqual);\n};\nexport default useDeepCompareEffect;\n"],"names":["fn","fnRef","useRef","current","useEffectOnce","useSelectorsGuestsInventory","id","_ref","arguments","length","undefined","_ref$useSelectorsResp","useSelectorsResponse","useAliasSelectorsResponse","storeHooks","_useAliasSelectorsRes","_ref2","_inventory$hostsGuest","inventory","hostsGuests","error","cancelled","fulfilled","pending","data","useGetGuestsInventory","_ref3","_ref3$getInventory","getInventory","reduxActions","_ref3$useDispatch","useDispatch","useAliasDispatch","_ref3$useProductInven","useProductInventoryQuery","useAliasProductInventoryQuery","useProductInventoryGuestsQuery","_ref3$useSelectorsInv","useSelectorsInventory","useAliasSelectorsInventory","_useState","useState","_useState2","_slicedToArray","updatedData","setUpdatedData","query","options","overrideId","dispatch","_useAliasSelectorsInv","_useAliasSelectorsInv2","_useAliasSelectorsInv3","response","_objectWithoutProperties","_excluded","_data$data","listData","useShallowCompareEffect","useDeepCompareEffect","prevState","concat","_toConsumableArray","_objectSpread","useOnScroll","_ref4","_ref4$useDispatch","_ref4$useSelectorsInv","_ref4$useProductInven","_useAliasSelectorsInv4","_useAliasSelectorsInv5","_ref5","meta","numberOfGuests","count","limit","RHSM_API_QUERY_SET_TYPES","currentPage","useUnmount","type","reduxTypes","viewId","event","target","bottom","scrollHeight","scrollTop","clientHeight","_defineProperty","context","module","exports","equal","a","b","constructor","i","keys","Array","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key","$$typeof","effect","deps","useCustomCompareEffect","isDeepEqual"],"sourceRoot":""}