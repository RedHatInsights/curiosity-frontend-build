{"version":3,"file":"js/4262.1666107056054.48308e819dd870386c7f.js","mappings":"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","sources":["webpack:///./src/components/productView/productViewOpenShiftContainer.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Tooltip, TooltipPosition } from '@patternfly/react-core';\nimport InfoCircleIcon from '@patternfly/react-icons/dist/js/icons/info-circle-icon';\nimport { useRouteDetail } from '../../hooks/useRouter';\nimport { ProductViewContext } from './productViewContext';\nimport { PageLayout, PageColumns, PageHeader, PageSection, PageToolbar } from '../pageLayout/pageLayout';\nimport { RHSM_API_PATH_ID_TYPES, RHSM_API_QUERY_TYPES } from '../../types/rhsmApiTypes';\nimport { apiQueries, storeHooks } from '../../redux';\nimport GraphCard from '../graphCard/graphCard.deprecated';\nimport { SelectPosition } from '../form/select';\nimport { ToolbarFieldUom } from '../toolbar/toolbarFieldUom';\nimport { ToolbarFieldGranularity } from '../toolbar/toolbarFieldGranularity';\nimport { ToolbarFieldRangedMonthly } from '../toolbar/toolbarFieldRangedMonthly';\nimport { Toolbar } from '../toolbar/toolbar';\nimport InventoryList from '../inventoryCard/inventoryList.deprecated';\nimport InventoryCardSubscriptions from '../inventoryCardSubscriptions/inventoryCardSubscriptions';\nimport InventoryTabs, { InventoryTab } from '../inventoryTabs/inventoryTabs';\nimport { translate } from '../i18n/i18n';\nimport { helpers } from '../../common';\n\n/**\n * An OpenShift Container Platform encompassing view.\n *\n * @param {object} props\n * @param {Function} props.t\n * @param {Function} props.useRouteDetail\n * @returns {Node}\n */\nconst ProductViewOpenShiftContainer = ({ t, useRouteDetail: useAliasRouteDetail }) => {\n  const { productParameter: viewProductLabel, productConfig } = useAliasRouteDetail();\n  const uomValue = storeHooks.reactRedux.useSelector(\n    ({ view }) => view.query?.[productConfig[0].viewId]?.[RHSM_API_QUERY_TYPES.UOM],\n    null\n  );\n\n  const renderProduct = (config, updatedUomValue) => {\n    const {\n      productContextFilterUom,\n      query = {},\n      graphTallyQuery = {},\n      inventoryHostsQuery = {},\n      inventorySubscriptionsQuery = {},\n      initialGuestsFilters = [],\n      initialInventoryFilters = [],\n      initialInventorySettings = {},\n      initialSubscriptionsInventoryFilters,\n      productId,\n      viewId\n    } = config;\n\n    if (!productId || !viewId) {\n      return null;\n    }\n\n    const { graphTallyQuery: initialGraphTallyQuery, inventoryHostsQuery: initialInventoryHostsQuery } =\n      apiQueries.parseRhsmQuery(query, { graphTallyQuery, inventoryHostsQuery, inventorySubscriptionsQuery });\n\n    let inventoryFilters = initialInventoryFilters;\n    let uomFilter;\n\n    if (productContextFilterUom) {\n      uomFilter = updatedUomValue || query[RHSM_API_QUERY_TYPES.UOM];\n\n      const filter = ({ id, isOptional }) => {\n        if (!isOptional) {\n          return true;\n        }\n        return new RegExp(uomFilter, 'i').test(id);\n      };\n\n      inventoryFilters = initialInventoryFilters.filter(filter);\n    }\n\n    const graphCardTitle = (\n      <React.Fragment>\n        {t('curiosity-graph.cardHeading', { context: productId })}\n        <Tooltip\n          content={<p>{t('curiosity-graph.cardHeadingDescription', { context: productId })}</p>}\n          position={TooltipPosition.top}\n          enableFlip={false}\n          distance={5}\n          entryDelay={100}\n          exitDelay={0}\n        >\n          <sup className=\"curiosity-icon__info\">\n            <InfoCircleIcon />\n          </sup>\n        </Tooltip>\n      </React.Fragment>\n    );\n\n    return (\n      <ProductViewContext.Provider value={config} key={`product_${productId}_${uomFilter}`}>\n        <PageToolbar>\n          <Toolbar />\n        </PageToolbar>\n        <PageSection>\n          <GraphCard\n            key={`graph_${productId}`}\n            query={initialGraphTallyQuery}\n            productId={productId}\n            viewId={viewId}\n            cardTitle={graphCardTitle}\n          >\n            {productId === RHSM_API_PATH_ID_TYPES.OPENSHIFT && uomFilter && (\n              <ToolbarFieldUom position={SelectPosition.right} />\n            )}\n            {productId === RHSM_API_PATH_ID_TYPES.OPENSHIFT && (\n              <ToolbarFieldGranularity position={SelectPosition.right} />\n            )}\n            {productId === RHSM_API_PATH_ID_TYPES.OPENSHIFT_METRICS && (\n              <ToolbarFieldRangedMonthly position={SelectPosition.right} />\n            )}\n          </GraphCard>\n        </PageSection>\n        <PageSection>\n          <InventoryTabs key={`inventory_${productId}`} productId={productId}>\n            <InventoryTab\n              key={`inventory_hosts_${productId}`}\n              title={t('curiosity-inventory.tabHosts', { context: ['noInstances', productId] })}\n            >\n              <InventoryList\n                key={`inv_${productId}`}\n                filterGuestsData={initialGuestsFilters}\n                filterInventoryData={inventoryFilters}\n                productId={productId}\n                settings={initialInventorySettings}\n                query={initialInventoryHostsQuery}\n                viewId={viewId}\n              />\n            </InventoryTab>\n            {!helpers.UI_DISABLED_TABLE_SUBSCRIPTIONS && initialSubscriptionsInventoryFilters && (\n              <InventoryTab\n                key={`inventory_subs_${productId}`}\n                title={t('curiosity-inventory.tabSubscriptions', { context: productId })}\n              >\n                <InventoryCardSubscriptions />\n              </InventoryTab>\n            )}\n          </InventoryTabs>\n        </PageSection>\n      </ProductViewContext.Provider>\n    );\n  };\n\n  return (\n    <PageLayout>\n      <PageHeader productLabel={viewProductLabel}>\n        {t(`curiosity-view.title`, { appName: helpers.UI_DISPLAY_NAME, context: viewProductLabel })}\n      </PageHeader>\n      <PageColumns>{productConfig.map(config => renderProduct(config, uomValue))}</PageColumns>\n    </PageLayout>\n  );\n};\n\n/**\n * Prop types.\n *\n * @type {{t: Function, useRouteDetail: Function}}\n */\nProductViewOpenShiftContainer.propTypes = {\n  t: PropTypes.func,\n  useRouteDetail: PropTypes.func\n};\n\n/**\n * Default props.\n *\n * @type {{t: Function, useRouteDetail: Function}}\n */\nProductViewOpenShiftContainer.defaultProps = {\n  t: translate,\n  useRouteDetail\n};\n\nexport { ProductViewOpenShiftContainer as default, ProductViewOpenShiftContainer };\n"],"names":["ProductViewOpenShiftContainer","t","useAliasRouteDetail","useRouteDetail","viewProductLabel","productParameter","productConfig","uomValue","storeHooks","view","query","viewId","RHSM_API_QUERY_TYPES","PageLayout","PageHeader","productLabel","appName","helpers","context","PageColumns","map","config","updatedUomValue","productContextFilterUom","graphTallyQuery","inventoryHostsQuery","inventorySubscriptionsQuery","initialGuestsFilters","initialInventoryFilters","initialInventorySettings","initialSubscriptionsInventoryFilters","productId","uomFilter","apiQueries","initialGraphTallyQuery","initialInventoryHostsQuery","inventoryFilters","filter","id","isOptional","RegExp","test","graphCardTitle","Tooltip","content","position","TooltipPosition","enableFlip","distance","entryDelay","exitDelay","className","ProductViewContext","value","key","PageToolbar","Toolbar","PageSection","cardTitle","RHSM_API_PATH_ID_TYPES","ToolbarFieldUom","SelectPosition","ToolbarFieldGranularity","ToolbarFieldRangedMonthly","InventoryTab","title","filterGuestsData","filterInventoryData","settings","renderProduct","defaultProps","translate"],"sourceRoot":""}