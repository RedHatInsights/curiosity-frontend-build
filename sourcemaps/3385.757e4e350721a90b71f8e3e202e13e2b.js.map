{"version":3,"file":"js/3385.328921d942e2cbf3eaf8.js","mappings":"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","sources":["webpack:///./src/components/inventoryGuests/inventoryGuestsContext.js","webpack:///./node_modules/react-use/esm/useUnmount.js","webpack:///./node_modules/fast-deep-equal/react.js","webpack:///./node_modules/react-use/esm/misc/isDeepEqual.js","webpack:///./node_modules/react-use/esm/useDeepCompareEffect.js"],"sourcesContent":["import { useState } from 'react';\nimport { useDeepCompareEffect, useUnmount, useShallowCompareEffect } from 'react-use';\nimport { reduxActions, reduxTypes, storeHooks } from '../../redux';\nimport { useProductInventoryGuestsQuery } from '../productView/productViewContext';\nimport { RHSM_API_QUERY_SET_TYPES } from '../../services/rhsm/rhsmConstants';\n\n/**\n * @memberof InventoryGuests\n * @module InventoryGuestsContext\n */\n\n/**\n * Guests inventory selector response.\n *\n * @param {string} id\n * @param {object} options\n * @param {Function} options.useSelectorsResponse\n * @returns {{data: (*|{}), pending: (*|boolean), fulfilled, error}}\n */\nconst useSelectorsGuestsInventory = (\n  id,\n  { useSelectorsResponse: useAliasSelectorsResponse = storeHooks.reactRedux.useSelectorsResponse } = {}\n) => {\n  const { error, cancelled, fulfilled, pending, data } = useAliasSelectorsResponse(\n    ({ inventory }) => inventory?.hostsGuests?.[id]\n  );\n\n  return {\n    error,\n    fulfilled,\n    pending: pending || cancelled || false,\n    data: (data?.length === 1 && data[0]) || data || {}\n  };\n};\n\n/**\n * Combined Redux RHSM Actions, getHostsInventoryGuests, and inventory selector response.\n *\n * @param {string} id\n * @param {object} options\n * @param {Function} options.getInventory\n * @param {Function} options.useDispatch\n * @param {Function} options.useProductInventoryQuery\n * @param {Function} options.useSelectorsInventory\n * @returns {Function}\n */\nconst useGetGuestsInventory = (\n  id,\n  {\n    getInventory = reduxActions.rhsm.getHostsInventoryGuests,\n    useDispatch: useAliasDispatch = storeHooks.reactRedux.useDispatch,\n    useProductInventoryQuery: useAliasProductInventoryQuery = useProductInventoryGuestsQuery,\n    useSelectorsInventory: useAliasSelectorsInventory = useSelectorsGuestsInventory\n  } = {}\n) => {\n  const [updatedData, setUpdatedData] = useState([]);\n  const query = useAliasProductInventoryQuery({ options: { overrideId: id } });\n  const dispatch = useAliasDispatch();\n  const { data = {}, fulfilled = false, ...response } = useAliasSelectorsInventory(id);\n  const { data: listData = [] } = data;\n\n  useShallowCompareEffect(() => {\n    getInventory(id, query)(dispatch);\n  }, [dispatch, id, query]);\n\n  useDeepCompareEffect(() => {\n    if (fulfilled) {\n      setUpdatedData(prevState => [...prevState, ...listData]);\n    }\n  }, [fulfilled, listData]);\n\n  return {\n    data: updatedData,\n    fulfilled,\n    ...response\n  };\n};\n\n/**\n * Use paging as onScroll event for guests inventory.\n *\n * @param {string} id\n * @param {object} options\n * @param {Function} options.useDispatch\n * @param {Function} options.useSelectorsInventory\n * @param {Function} options.useProductInventoryQuery\n * @returns {Function}\n */\nconst useOnScroll = (\n  id,\n  {\n    useDispatch: useAliasDispatch = storeHooks.reactRedux.useDispatch,\n    useSelectorsInventory: useAliasSelectorsInventory = useSelectorsGuestsInventory,\n    useProductInventoryQuery: useAliasProductInventoryQuery = useProductInventoryGuestsQuery\n  } = {}\n) => {\n  const dispatch = useAliasDispatch();\n  const { pending, data = {} } = useAliasSelectorsInventory(id);\n  const { count: numberOfGuests } = data?.meta || {};\n\n  const query = useAliasProductInventoryQuery({ options: { overrideId: id } });\n  const { [RHSM_API_QUERY_SET_TYPES.LIMIT]: limit, [RHSM_API_QUERY_SET_TYPES.OFFSET]: currentPage } = query;\n\n  /**\n   * Reset paging in scenarios where inventory is filtered, or guests is collapsed.\n   */\n  useUnmount(() => {\n    dispatch([\n      {\n        type: reduxTypes.query.SET_QUERY_CLEAR_INVENTORY_GUESTS_LIST,\n        viewId: id\n      },\n      {\n        type: reduxTypes.inventory.CLEAR_INVENTORY_GUESTS,\n        id\n      }\n    ]);\n  });\n\n  /**\n   * On scroll, dispatch type.\n   *\n   * @event onScroll\n   * @param {object} event\n   * @returns {void}\n   */\n  return event => {\n    const { target } = event;\n    const bottom = target.scrollHeight - target.scrollTop === target.clientHeight;\n\n    if (numberOfGuests > currentPage + limit && bottom && !pending) {\n      dispatch([\n        {\n          type: reduxTypes.query.SET_QUERY_RHSM_GUESTS_INVENTORY_TYPES[RHSM_API_QUERY_SET_TYPES.OFFSET],\n          viewId: id,\n          [RHSM_API_QUERY_SET_TYPES.OFFSET]: currentPage + limit\n        },\n        {\n          type: reduxTypes.query.SET_QUERY_RHSM_GUESTS_INVENTORY_TYPES[RHSM_API_QUERY_SET_TYPES.LIMIT],\n          viewId: id,\n          [RHSM_API_QUERY_SET_TYPES.LIMIT]: limit\n        }\n      ]);\n    }\n  };\n};\n\nconst context = {\n  useGetGuestsInventory,\n  useOnScroll,\n  useSelectorsGuestsInventory\n};\n\nexport { context as default, context, useGetGuestsInventory, useOnScroll, useSelectorsGuestsInventory };\n","import { useRef } from 'react';\nimport useEffectOnce from './useEffectOnce';\nvar useUnmount = function (fn) {\n    var fnRef = useRef(fn);\n    // update the ref each render so if it change the newest callback will be invoked\n    fnRef.current = fn;\n    useEffectOnce(function () { return function () { return fnRef.current(); }; });\n};\nexport default useUnmount;\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (key === '_owner' && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner.\n        //  _owner contains circular references\n        // and is not needed when comparing the actual elements (and not their owners)\n        continue;\n      }\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","import isDeepEqualReact from 'fast-deep-equal/react';\nexport default isDeepEqualReact;\n","import useCustomCompareEffect from './useCustomCompareEffect';\nimport isDeepEqual from './misc/isDeepEqual';\nvar isPrimitive = function (val) { return val !== Object(val); };\nvar useDeepCompareEffect = function (effect, deps) {\n    if (process.env.NODE_ENV !== 'production') {\n        if (!(deps instanceof Array) || !deps.length) {\n            console.warn('`useDeepCompareEffect` should not be used with no dependencies. Use React.useEffect instead.');\n        }\n        if (deps.every(isPrimitive)) {\n            console.warn('`useDeepCompareEffect` should not be used with dependencies that are all primitive values. Use React.useEffect instead.');\n        }\n    }\n    useCustomCompareEffect(effect, deps, isDeepEqual);\n};\nexport default useDeepCompareEffect;\n"],"names":["useSelectorsGuestsInventory","id","_ref$useSelectorsResp","arguments","length","undefined","useSelectorsResponse","_useAliasSelectorsRes","storeHooks","_ref2","_inventory$hostsGuest","inventory","hostsGuests","error","cancelled","fulfilled","pending","data","useGetGuestsInventory","_ref3","_ref3$getInventory","getInventory","reduxActions","_ref3$useDispatch","useDispatch","useAliasDispatch","_ref3$useProductInven","useProductInventoryQuery","useAliasProductInventoryQuery","useProductInventoryGuestsQuery","_ref3$useSelectorsInv","useSelectorsInventory","useAliasSelectorsInventory","_useState","useState","_useState2","_slicedToArray","updatedData","setUpdatedData","query","options","overrideId","dispatch","_useAliasSelectorsInv","_useAliasSelectorsInv2","_useAliasSelectorsInv3","response","_objectWithoutProperties","_excluded","_data$data","listData","useShallowCompareEffect","useDeepCompareEffect","prevState","concat","_toConsumableArray","_objectSpread","useOnScroll","fn","fnRef","_ref4","_ref4$useDispatch","_ref4$useSelectorsInv","_ref4$useProductInven","_useAliasSelectorsInv4","_useAliasSelectorsInv5","numberOfGuests","meta","count","limit","RHSM_API_QUERY_SET_TYPES","currentPage","type","reduxTypes","viewId","useRef","current","useEffectOnce","event","target","bottom","scrollHeight","scrollTop","clientHeight","_defineProperty","context","module","exports","equal","a","b","constructor","i","keys","Array","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key","$$typeof","effect","deps","useCustomCompareEffect","isDeepEqual"],"sourceRoot":""}