{"version":3,"file":"js/2293.1675104582617.e2ae5a56b659722f2b22.js","mappings":"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","sources":["webpack:///./src/components/inventoryGuests/inventoryGuestsContext.js","webpack:///./node_modules/fast-deep-equal/react.js","webpack:///./node_modules/react-use/esm/misc/isDeepEqual.js","webpack:///./node_modules/react-use/esm/useDeepCompareEffect.js"],"sourcesContent":["import { useState } from 'react';\nimport { useDeepCompareEffect, useUnmount, useShallowCompareEffect } from 'react-use';\nimport { reduxActions, reduxTypes, storeHooks } from '../../redux';\nimport { useProductInventoryGuestsQuery } from '../productView/productViewContext';\nimport { RHSM_API_QUERY_SET_TYPES } from '../../services/rhsm/rhsmConstants';\n\n/**\n * Guests inventory selector response.\n *\n * @param {string} id\n * @param {object} options\n * @param {Function} options.useSelectorsResponse\n * @returns {{data: (*|{}), pending: (*|boolean), fulfilled, error}}\n */\nconst useSelectorsGuestsInventory = (\n  id,\n  { useSelectorsResponse: useAliasSelectorsResponse = storeHooks.reactRedux.useSelectorsResponse } = {}\n) => {\n  const { error, cancelled, fulfilled, pending, data } = useAliasSelectorsResponse(\n    ({ inventory }) => inventory?.hostsGuests?.[id]\n  );\n\n  return {\n    error,\n    fulfilled,\n    pending: pending || cancelled || false,\n    data: (data?.length === 1 && data[0]) || data || {}\n  };\n};\n\n/**\n * Combined Redux RHSM Actions, getHostsInventoryGuests, and inventory selector response.\n *\n * @param {string} id\n * @param {object} options\n * @param {Function} options.getInventory\n * @param {Function} options.useDispatch\n * @param {Function} options.useProductInventoryQuery\n * @param {Function} options.useSelectorsInventory\n * @returns {Function}\n */\nconst useGetGuestsInventory = (\n  id,\n  {\n    getInventory = reduxActions.rhsm.getHostsInventoryGuests,\n    useDispatch: useAliasDispatch = storeHooks.reactRedux.useDispatch,\n    useProductInventoryQuery: useAliasProductInventoryQuery = useProductInventoryGuestsQuery,\n    useSelectorsInventory: useAliasSelectorsInventory = useSelectorsGuestsInventory\n  } = {}\n) => {\n  const [updatedData, setUpdatedData] = useState([]);\n  const query = useAliasProductInventoryQuery({ options: { overrideId: id } });\n  const dispatch = useAliasDispatch();\n  const { data = {}, fulfilled = false, ...response } = useAliasSelectorsInventory(id);\n  const { data: listData = [] } = data;\n\n  useShallowCompareEffect(() => {\n    getInventory(id, query)(dispatch);\n  }, [dispatch, id, query]);\n\n  useDeepCompareEffect(() => {\n    if (fulfilled) {\n      setUpdatedData(prevState => [...prevState, ...listData]);\n    }\n  }, [fulfilled, listData]);\n\n  return {\n    data: updatedData,\n    fulfilled,\n    ...response\n  };\n};\n\n/**\n * Use paging as onScroll event for guests inventory.\n *\n * @param {string} id\n * @param {object} options\n * @param {Function} options.useDispatch\n * @param {Function} options.useSelectorsInventory\n * @param {Function} options.useProductInventoryQuery\n * @returns {Function}\n */\nconst useOnScroll = (\n  id,\n  {\n    useDispatch: useAliasDispatch = storeHooks.reactRedux.useDispatch,\n    useSelectorsInventory: useAliasSelectorsInventory = useSelectorsGuestsInventory,\n    useProductInventoryQuery: useAliasProductInventoryQuery = useProductInventoryGuestsQuery\n  } = {}\n) => {\n  const dispatch = useAliasDispatch();\n  const { pending, data = {} } = useAliasSelectorsInventory(id);\n  const { count: numberOfGuests } = data?.meta || {};\n\n  const query = useAliasProductInventoryQuery({ options: { overrideId: id } });\n  const { [RHSM_API_QUERY_SET_TYPES.LIMIT]: limit, [RHSM_API_QUERY_SET_TYPES.OFFSET]: currentPage } = query;\n\n  /**\n   * Reset paging in scenarios where inventory is filtered, or guests is collapsed.\n   */\n  useUnmount(() => {\n    dispatch([\n      {\n        type: reduxTypes.query.SET_QUERY_CLEAR_INVENTORY_GUESTS_LIST,\n        viewId: id\n      },\n      {\n        type: reduxTypes.inventory.CLEAR_INVENTORY_GUESTS,\n        id\n      }\n    ]);\n  });\n\n  /**\n   * On scroll, dispatch type.\n   *\n   * @event onScroll\n   * @param {object} event\n   * @returns {void}\n   */\n  return event => {\n    const { target } = event;\n    const bottom = target.scrollHeight - target.scrollTop === target.clientHeight;\n\n    if (numberOfGuests > currentPage + limit && bottom && !pending) {\n      dispatch([\n        {\n          type: reduxTypes.query.SET_QUERY_RHSM_GUESTS_INVENTORY_TYPES[RHSM_API_QUERY_SET_TYPES.OFFSET],\n          viewId: id,\n          [RHSM_API_QUERY_SET_TYPES.OFFSET]: currentPage + limit\n        },\n        {\n          type: reduxTypes.query.SET_QUERY_RHSM_GUESTS_INVENTORY_TYPES[RHSM_API_QUERY_SET_TYPES.LIMIT],\n          viewId: id,\n          [RHSM_API_QUERY_SET_TYPES.LIMIT]: limit\n        }\n      ]);\n    }\n  };\n};\n\nconst context = {\n  useGetGuestsInventory,\n  useOnScroll,\n  useSelectorsGuestsInventory\n};\n\nexport { context as default, context, useGetGuestsInventory, useOnScroll, useSelectorsGuestsInventory };\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (key === '_owner' && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner.\n        //  _owner contains circular references\n        // and is not needed when comparing the actual elements (and not their owners)\n        continue;\n      }\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","import isDeepEqualReact from 'fast-deep-equal/react';\nexport default isDeepEqualReact;\n","import useCustomCompareEffect from './useCustomCompareEffect';\nimport isDeepEqual from './misc/isDeepEqual';\nvar isPrimitive = function (val) { return val !== Object(val); };\nvar useDeepCompareEffect = function (effect, deps) {\n    if (process.env.NODE_ENV !== 'production') {\n        if (!(deps instanceof Array) || !deps.length) {\n            console.warn('`useDeepCompareEffect` should not be used with no dependencies. Use React.useEffect instead.');\n        }\n        if (deps.every(isPrimitive)) {\n            console.warn('`useDeepCompareEffect` should not be used with dependencies that are all primitive values. Use React.useEffect instead.');\n        }\n    }\n    useCustomCompareEffect(effect, deps, isDeepEqual);\n};\nexport default useDeepCompareEffect;\n"],"names":["useSelectorsGuestsInventory","id","useSelectorsResponse","useAliasSelectorsResponse","storeHooks","inventory","hostsGuests","error","cancelled","fulfilled","pending","data","length","useGetGuestsInventory","getInventory","reduxActions","useDispatch","useAliasDispatch","useProductInventoryQuery","useAliasProductInventoryQuery","useProductInventoryGuestsQuery","useSelectorsInventory","useAliasSelectorsInventory","useState","updatedData","setUpdatedData","query","options","overrideId","dispatch","response","listData","useShallowCompareEffect","useDeepCompareEffect","prevState","useOnScroll","meta","numberOfGuests","count","limit","RHSM_API_QUERY_SET_TYPES","currentPage","useUnmount","type","reduxTypes","viewId","event","target","bottom","scrollHeight","scrollTop","clientHeight","context","module","exports","equal","a","b","constructor","i","keys","Array","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key","$$typeof","effect","deps","useCustomCompareEffect","isDeepEqual"],"sourceRoot":""}