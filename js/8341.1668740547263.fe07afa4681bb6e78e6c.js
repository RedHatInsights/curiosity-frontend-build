(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[8341,9270,4021,4418,4024,1339,1858,7297],{28341:function(t,e,r){"use strict";r.r(e),r.d(e,{ConnectedGraphCard:function(){return g},GraphCard:function(){return f},default:function(){return g}});var n=r(1413),i=r(92950),o=r.n(i),a=r(21242),u=r(17297),s=r(61072),l=r(51858),c=r(76006),d=r(30446),v=r(1797),p=r(91339),h=r(89270),f=function(t){var e=t.cardTitle,r=t.children,i=t.error,s=t.getGraphReportsCapacity,l=t.graphData,c=t.meta,f=t.isDisabled,y=t.pending,g=t.useProduct,m=t.useProductGraphConfig,C=t.useProductGraphTallyQuery,T=g().productId,b=m().settings,E=C();if((0,u.Z)((function(){var t=E[d.VN.START_DATE],e=E[d.VN.END_DATE],r=E[d.VN.GRANULARITY];!f&&r&&t&&e&&T&&s(T,E)}),[s,f,T,E]),f)return null;var P=null;return"function"==typeof(null==b?void 0:b.actionDisplay)&&(P=b.actionDisplay({data:(0,n.Z)({},l),meta:(0,n.Z)({},c)})),o().createElement(a.Card,{className:"curiosity-usage-graph"},o().createElement(p.MinHeight,{key:"headerMinHeight"},o().createElement(a.CardHeader,null,o().createElement(a.CardTitle,null,o().createElement(a.Title,{headingLevel:"h2",size:"lg"},e)),o().createElement(a.CardActions,{className:i?"blur":""},o().createElement(o().Fragment,{key:"actionDisplay"},P),r))),o().createElement(p.MinHeight,{key:"bodyMinHeight"},o().createElement(a.CardBody,null,o().createElement("div",{className:(i?"blur":y&&"fadein")||""},y&&o().createElement(v.Loader,{variant:"graph"}),!y&&o().createElement(h.GraphCardChart,{graphData:l})))))};f.defaultProps={cardTitle:null,children:null,error:!1,getGraphReportsCapacity:c.BM.noop,graphData:{},isDisabled:c.BM.UI_DISABLED_GRAPH,meta:{},pending:!1,useProduct:l.useProduct,useProductGraphConfig:l.useProductGraphConfig,useProductGraphTallyQuery:l.useProductGraphTallyQuery};var y=s.R1.graphCard.makeGraphCard(),g=(0,s.$j)(y,(function(t){return{getGraphReportsCapacity:function(e,r){return t(s.Ak.rhsm.getGraphReportsCapacity(e,r))}}}))(f)},89270:function(t,e,r){"use strict";r.r(e),r.d(e,{GraphCardChart:function(){return v},default:function(){return v}});var n=r(92950),i=r.n(n),o=r(18604),a=r(51858),u=r(78139),s=r(60930),l=r(64418),c=r(44024),d=r(30446),v=function(t){var e,r,n=t.graphData,a=t.useProductGraphConfig,v=t.useProductGraphTallyQuery,p=a().filters,h=v(),f=h[d.VN.GRANULARITY],y={xAxisLabelIncrement:u.graphCardHelpers.getChartXAxisLabelIncrement(f),xAxisTickFormat:function(t){var e=t.item,r=t.previousItem,n=t.tick;return u.graphCardHelpers.xAxisTickFormat({tick:n,date:e.date,previousDate:r.date,granularity:f})},yAxisTickFormat:u.graphCardHelpers.yAxisTickFormat};return i().createElement(s.Chart,Object.assign({key:"chart_".concat(JSON.stringify(h))},y,{dataSets:(e=n,r=function(t){var r={data:e[t],id:t,strokeWidth:2,isStacked:!/^threshold/.test(t),isThreshold:/^threshold/.test(t)};return/^threshold/.test(t)&&(r.stroke=o.chart_color_green_300.value,r.strokeDasharray="4,3",r.strokeWidth=3),r},null!=p&&p.length?p.map((function(t){return Object.assign(r(t.id),t)})):Object.keys(e).map((function(t){return r(t)}))),chartLegend:function(t){var e=t.chart,r=t.datum;return i().createElement(l.default,{chart:e,datum:r})},chartTooltip:function(t){var e=t.datum;return i().createElement(c.default,{datum:e})}}))};v.defaultProps={graphData:{},useProductGraphConfig:a.useProductGraphConfig,useProductGraphTallyQuery:a.useProductGraphTallyQuery}},64418:function(t,e,r){"use strict";r.r(e),r.d(e,{GraphCardChartLegend:function(){return v},default:function(){return v}});var n=r(92950),i=r.n(n),o=r(21242),a=r(89048),u=r(51858),s=r(61072),l=r(76006),c=r(83109),d=r(1138),v=function(t){var e=t.chart,r=t.datum,n=t.t,u=t.useDispatch,l=t.useSelectors,c=(0,t.useProduct)(),v=c.productLabel,p=c.viewId,h=u(),f=l(r.dataSets.map((function(t){var e=t.id;return function(t){var r;return null===(r=t.graph.legend)||void 0===r?void 0:r["".concat(p,"-").concat(e)]}})));(0,a.Z)((function(){r.dataSets.forEach((function(t,r){var n=t.id;((null==f?void 0:f[r])||e.isToggled(n))&&e.hide(n)}))}));var y=function(t){var r=e.toggle(t);h({type:s.JD.graph.SET_GRAPH_LEGEND,id:"".concat(p,"-").concat(t),value:r})};return i().createElement(i().Fragment,null,r.dataSets.map((function(t,r){var a=t.id,u=t.isThreshold,s=t.stroke,l=t.data,c=!(void 0===l?[]:l).find((function(t){var e=t.y,r=t.hasData;return e>=0&&!0===r||e>=0&&!0===u}))||!1,p=n(["curiosity-graph.label","curiosity-graph.label_no"],{product:v,context:a}),h=n("curiosity-graph.legendTooltip",{product:v,context:a},[i().createElement("span",{style:{whiteSpace:"nowrap"}})]),g=(null==f?void 0:f[r])||e.isToggled(a),m=i().createElement(o.Button,{onClick:function(){return y(a)},onKeyPress:function(){return y(a)},className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(a),variant:"link",component:"a",isDisabled:c,icon:(c||g)&&i().createElement(d.ChartIcon,{symbol:"eyeSlash"})||i().createElement(d.ChartIcon,{symbol:u?"dash":"square",style:{visibility:c||g?"hidden":"visible"},fill:s})},p);return h?i().createElement(o.Tooltip,{key:"curiosity-tooltip-".concat(a),content:i().createElement("p",null,h),position:o.TooltipPosition.top,enableFlip:!0,distance:5},m):m})))};v.defaultProps={chart:{hide:l.BM.noop,toggle:l.BM.noop,isToggled:l.BM.noop},datum:{dataSets:[]},t:c.translate,useDispatch:s.Cr.reactRedux.useDispatch,useSelectors:s.Cr.reactRedux.useSelectors,useProduct:u.useProduct}},44024:function(t,e,r){"use strict";r.r(e),r.d(e,{GraphCardChartTooltip:function(){return v},default:function(){return v}});var n=r(92950),i=r.n(n),o=r(51858),a=r(78139),u=r(83109),s=r(60930),l=r(1138),c=r(46262),d=r(76006),v=function(t){var e=t.datum,r=t.t,n=t.useProduct,o=t.useProductGraphTallyQuery,u=n().productLabel,v=o()[c.O6.GRANULARITY],p=null,h=[],f=(e||{}).itemsByKey,y=void 0===f?{}:f;return Object.keys(y).reverse().forEach((function(t,e){var n,o,c,d;0===e&&(p=(0,a.getTooltipDate)({date:null===(d=y[t])||void 0===d?void 0:d.data.date,granularity:v}));var f={color:null===(n=y[t])||void 0===n?void 0:n.color};if((null===(o=y[t])||void 0===o?void 0:o.chartType)===s.ChartTypeVariant.threshold){var g,m,C,T,b=null!==(g=null===(m=y[t])||void 0===m?void 0:m.data.y)&&void 0!==g?g:r("curiosity-graph.label",{context:"noData"});(null!==(C=y[t])&&void 0!==C&&C.data.hasInfinite||null!==(T=y[t])&&void 0!==T&&T.data.hasInfiniteQuantity)&&(b=r("curiosity-graph.label",{context:["threshold","infinite"]},[f.color&&i().createElement(l.ChartIcon,{symbol:"infinity",fill:"#ffffff",title:r("curiosity-graph.label",{context:["threshold","infinite"]})})])),f.label=r("curiosity-graph.label",{context:["threshold"]}),f.value=b}else{var E,P,I=!1===(null===(E=y[t])||void 0===E?void 0:E.data.hasData)&&r("curiosity-graph.label",{context:"noData"})||(null===(P=y[t])||void 0===P?void 0:P.data.y)||0;f.label=r("curiosity-graph.label",{context:t,product:u}),f.value=I}f.chartType=null===(c=y[t])||void 0===c?void 0:c.chartType,h.push(f)})),i().createElement("div",{className:"curiosity-usage-graph__tooltip"},i().createElement("table",{summary:r("curiosity-graph.tooltipSummary")},h.length&&p&&i().createElement("thead",null,i().createElement("tr",null,i().createElement("th",{colSpan:2},p)))||null,h.length&&i().createElement("tbody",null,h.map((function(t){var e,r,n="number"==typeof t.value&&!Number.isInteger(t.value)&&(null===(e=d.BM.numberDisplay(t.value))||void 0===e||null===(r=e.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!0}))||void 0===r?void 0:r.toUpperCase())||t.value;return i().createElement("tr",{key:"tooltip-".concat(t.label)},i().createElement("th",null,t.chartType===s.ChartTypeVariant.threshold&&i().createElement(l.ChartIcon,{size:"sm",symbol:"dash",fill:t.color||"transparent"}),t.chartType!==s.ChartTypeVariant.threshold&&i().createElement(l.ChartIcon,{size:"sm",fill:t.color||"transparent"})," ",t.label),i().createElement("td",null,n))})))||null),!h.length&&r("curiosity-graph.label",{context:["noData","error"]})||null)};v.defaultProps={datum:{},t:u.translate,useProduct:o.useProduct,useProductGraphTallyQuery:o.useProductGraphTallyQuery}},91339:function(t,e,r){"use strict";r.r(e),r.d(e,{MinHeight:function(){return d},default:function(){return d}});var n=r(15671),i=r(43144),o=r(97326),a=r(60136),u=r(54062),s=r(92950),l=r.n(s),c=r(76006),d=function(t){(0,a.Z)(r,t);var e=(0,u.Z)(r);function r(){var t;(0,n.Z)(this,r);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return(t=e.call.apply(e,[this].concat(a))).containerRef=l().createRef(),t.innerContainerRef=l().createRef(),t.updatedContainerWidth=0,t.resizeObserver=c.BM.noop,t.onResizeContainer=function(){var e,r,n=(0,o.Z)(t).updatedContainerWidth,i=t.props.updateOnResize,a=(null===(e=t.containerRef)||void 0===e||null===(r=e.current)||void 0===r?void 0:r.clientWidth)||0;i&&a!==n&&(t.updatedContainerWidth=a,t.setMinHeight(!0))},t}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){var t=this,e=this.props.updateOnResize;window.setTimeout((function(){t.setMinHeight()})),e&&this.setResizeObserver()}},{key:"componentDidUpdate",value:function(){var t=this;this.props.updateOnContent&&window.setTimeout((function(){t.setMinHeight()}))}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setMinHeight",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.props.minHeight,n=this.containerRef.current,i=void 0===n?{}:n,o=this.innerContainerRef.current,a=void 0===o?{}:o;null!=i&&i.style&&(r>(t=e?(null==a?void 0:a.clientHeight)||0:(null==i?void 0:i.clientHeight)||0)&&(t=r),i.style.minHeight="".concat(t,"px"))}},{key:"setResizeObserver",value:function(){var t=this;window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",t.onResizeContainer)}}},{key:"render",value:function(){var t=this.props.children;return l().createElement("div",{className:"curiosity-minheight",ref:this.containerRef},l().createElement("div",{ref:this.innerContainerRef},t))}}]),r}(l().Component);d.defaultProps={updateOnContent:!1,updateOnResize:!0,minHeight:0}},51858:function(t,e,r){"use strict";r.r(e),r.d(e,{DEFAULT_CONTEXT:function(){return p},ProductViewContext:function(){return h},context:function(){return k},default:function(){return k},useProduct:function(){return P},useProductContext:function(){return E},useProductGraphConfig:function(){return I},useProductGraphTallyQuery:function(){return m},useProductInventoryGuestsConfig:function(){return S},useProductInventoryGuestsQuery:function(){return C},useProductInventoryHostsConfig:function(){return G},useProductInventoryHostsQuery:function(){return T},useProductInventorySubscriptionsConfig:function(){return R},useProductInventorySubscriptionsQuery:function(){return b},useProductQuery:function(){return g},useProductQueryFactory:function(){return y},useProductToolbarConfig:function(){return x}});var n=r(45987),i=r(4942),o=r(1413),a=r(92950),u=r.n(a),s=r(12723),l=r(2606),c=r(46262),d=r(62834),v=["initialGraphFilters","initialInventoryFilters","initialSubscriptionsInventoryFilters","productContextFilterUom"],p=[{},d.B.noop],h=u().createContext(p),f=function(){return(0,a.useContext)(h)},y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.overrideId,n=e.useProductViewContext,i=void 0===n?f:n,a=i(),u=a[t],s=a.productId,c=a.viewId,d=l.Cr.reactRedux.useSelector((function(e){var n,i=e.view;return null==i||null===(n=i[t])||void 0===n?void 0:n[r]}),void 0),v=l.Cr.reactRedux.useSelector((function(e){var r,n=e.view;return null==n||null===(r=n[t])||void 0===r?void 0:r[s]}),void 0),p=l.Cr.reactRedux.useSelector((function(e){var r,n=e.view;return null==n||null===(r=n[t])||void 0===r?void 0:r[c]}),void 0);return(0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},u),d),v),p)},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.queryType,r=void 0===e?"query":e,n=t.options;return y(r,n)},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.queryType,r=void 0===e?"graphTallyQuery":e,n=t.schemaCheck,i=void 0===n?c.pM.RHSM_API_QUERY_SET_TALLY_CAPACITY_TYPES:n,a=t.options;return s.VS.setApiQuery((0,o.Z)((0,o.Z)({},g()),y(r,a)),i)},C=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.defaultLimit,n=void 0===r?100:r,a=e.defaultOffset,u=void 0===a?0:a,l=e.queryType,d=void 0===l?"inventoryGuestsQuery":l,v=e.schemaCheck,p=void 0===v?c.pM.RHSM_API_QUERY_SET_INVENTORY_TYPES:v,h=e.options;return s.VS.setApiQuery((0,o.Z)((0,o.Z)((t={},(0,i.Z)(t,c.O6.LIMIT,n),(0,i.Z)(t,c.O6.OFFSET,u),t),g()),y(d,h)),p)},T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.queryType,r=void 0===e?"inventoryHostsQuery":e,n=t.schemaCheck,i=void 0===n?c.pM.RHSM_API_QUERY_SET_INVENTORY_TYPES:n,a=t.options;return s.VS.setApiQuery((0,o.Z)((0,o.Z)({},g()),y(r,a)),i)},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.queryType,r=void 0===e?"inventorySubscriptionsQuery":e,n=t.schemaCheck,i=void 0===n?c.pM.RHSM_API_QUERY_SET_INVENTORY_TYPES:n,a=t.options;return s.VS.setApiQuery((0,o.Z)((0,o.Z)({},g()),y(r,a)),i)},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductQuery,r=void 0===e?g:e,i=t.useProductViewContext,u=void 0===i?f:i,s=r(),l=s[c.O6.UOM],d=u(),p=d.initialGraphFilters,h=void 0===p?[]:p,y=d.initialInventoryFilters,m=void 0===y?[]:y,C=d.initialSubscriptionsInventoryFilters,T=void 0===C?[]:C,b=d.productContextFilterUom,E=(0,n.Z)(d,v),P=(0,a.useCallback)((function(){if(!0===b){var t=function(t){var e=t.id,r=t.metric;return!t.isOptional||new RegExp(l,"i").test(r)||new RegExp(l,"i").test(e)};return(0,o.Z)((0,o.Z)({},E),{},{initialGraphFilters:h.filter(t),initialInventoryFilters:m.filter(t),initialSubscriptionsInventoryFilters:T.filter(t)})}return(0,o.Z)((0,o.Z)({},E),{},{initialGraphFilters:h,initialInventoryFilters:m,initialSubscriptionsInventoryFilters:T})}),[E,h,m,T,b,l]);return P()},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductViewContext,r=void 0===e?f:e,n=r(),i=n.productGroup,o=n.productId,a=n.productLabel,u=n.viewId;return{productGroup:i,productId:o,productLabel:a,viewId:u}},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductContext,r=void 0===e?E:e,n=r(),i=n.initialGraphFilters,o=n.initialGraphSettings,a=void 0===o?{}:o;return{filters:i,settings:a}},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductContext,r=void 0===e?E:e,n=r(),i=n.inventoryGuestsQuery,o=void 0===i?{}:i,a=n.initialGuestsFilters,u=n.initialGuestsSettings,s=void 0===u?{}:u;return{filters:a,initialQuery:o,settings:s}},G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductContext,r=void 0===e?E:e,n=r(),i=n.initialInventoryFilters,o=n.initialInventorySettings,a=void 0===o?{}:o;return{filters:i,settings:a}},R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductContext,r=void 0===e?E:e,n=r(),i=n.initialSubscriptionsInventoryFilters,o=n.initialSubscriptionsInventorySettings,a=void 0===o?{}:o;return{filters:i,settings:a}},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductContext,r=void 0===e?E:e,n=r(),i=n.initialToolbarFilters,o=n.initialToolbarSettings,a=void 0===o?{}:o,u=n.initialSecondaryToolbarFilters;return{filters:i,secondaryFilters:u,settings:a}},k={ProductViewContext:h,DEFAULT_CONTEXT:p,useProductContext:E,useQuery:g,useQueryFactory:y,useGraphTallyQuery:m,useInventoryGuestsQuery:C,useInventoryHostsQuery:T,useInventorySubscriptionsQuery:b,useProduct:P,useGraphConfig:I,useInventoryGuestsConfig:S,useInventoryHostsConfig:G,useInventorySubscriptionsConfig:R,useToolbarConfig:x}},99376:function(t,e){var r=Object.keys;e.D=function(t,e){if(t===e)return!0;if(!(t instanceof Object&&e instanceof Object))return!1;for(var n=r(t),i=n.length,o=0;o<i;o++)if(!(n[o]in e))return!1;for(o=0;o<i;o++)if(t[n[o]]!==e[n[o]])return!1;return i===r(e).length}},37124:function(t,e,r){"use strict";var n=r(92950);e.Z=function(t,e,r){var i=(0,n.useRef)(void 0);i.current&&r(e,i.current)||(i.current=e),(0,n.useEffect)(t,i.current)}},17297:function(t,e,r){"use strict";var n=r(99376),i=r(37124),o=function(t,e){return t.every((function(t,r){return(0,n.D)(t,e[r])}))};e.Z=function(t,e){(0,i.Z)(t,e,o)}}}]);
//# sourceMappingURL=../sourcemaps/8341.js.map