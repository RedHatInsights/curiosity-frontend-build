"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[8869,9844,8139,1339],{49844:function(t,e,n){n.r(e),n.d(e,{Select:function(){return D},SelectDirection:function(){return b},SelectPosition:function(){return E},default:function(){return D}});var r=n(29439),a=n(1413),i=n(15671),o=n(43144),l=n(60136),c=n(54062),s=n(92950),u=n.n(s),d=n(65834),p=n(50361),h=n.n(p),f=n(18446),v=n.n(f),m=n(30998),g=n.n(m),y=n(68630),S=n.n(y),T=n(62834),b=d.DropdownDirection,E=d.DropdownPosition,D=function(t){(0,l.Z)(n,t);var e=(0,c.Z)(n);function n(){var t;(0,i.Z)(this,n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(t=e.call.apply(e,[this].concat(o))).state={isExpanded:!1,options:null,selected:null},t.selectField=u().createRef(),t.onSelect=function(e,n){var r=t.state.options,i=t.props,o=i.id,l=i.name,c=i.onSelect,s=i.variant,u=r,p=u.findIndex((function(t){return t.title===n}));u[p].selected=s===d.SelectVariant.single||!u[p].selected,s===d.SelectVariant.single&&u.forEach((function(t,e){p!==e&&(u[e].selected=!1)}));var f=s===d.SelectVariant.single?n:u.filter((function(t){return!0===t.selected})).map((function(t){return t.title}));t.setState({options:u,selected:f},(function(){var e=h()(u),n={id:o,name:l||o,value:e[p].value,selected:s===d.SelectVariant.single&&e[p]||h()(f),selectedIndex:p,type:"select-".concat(s===d.SelectVariant.single?"one":"multiple"),options:e};s===d.SelectVariant.checkbox&&(n.checked=e[p].selected);var r=(0,a.Z)((0,a.Z)({},n),{},{target:(0,a.Z)({},n),currentTarget:(0,a.Z)({},n),persist:T.B.noop});c((0,a.Z)({},r),p,e),s===d.SelectVariant.single&&t.setState({isExpanded:!1})}))},t.onToggle=function(e){t.setState({isExpanded:e})},t}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){null===this.state.options&&this.formatOptions()}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.options,r=e.selectedOptions;v()(t.options,n)&&v()(t.selectedOptions,r)||this.formatOptions()}},{key:"formatOptions",value:function(){var t,e,n=this.selectField.current,i=void 0===n?{}:n,o=this.props,l=o.options,c=o.selectedOptions,s=o.variant,u=Object.entries(this.props).filter((function(t){var e=(0,r.Z)(t,1)[0];return/^data-/i.test(e)})),p=S()(l)?Object.entries(l).map((function(t){var e=(0,r.Z)(t,2),n=e[0],i=e[1];return(0,a.Z)((0,a.Z)({},i),{},{title:n,value:i})})):h()(l),f=c&&"string"==typeof c||"number"==typeof c?[c]:c;p.forEach((function(t,e){var n,r=t;("string"==typeof r&&(r={title:t,value:t},p[e]=r),r.text=r.text||r.title,r.textContent=r.textContent||r.title,r.label=r.label||r.title,f)&&(S()(r.value)?(n=g()(f,r.value)>-1)||(n=!!f.find((function(t){return Object.values(r.value).includes(t)}))):n=f.includes(r.value),n||(n=f.includes(r.title)),p[e].selected=n)})),e=s===d.SelectVariant.single?(p.find((function(t){return!0===t.selected}))||{}).title:p.filter((function(t){return!0===t.selected})).map((function(t){return t.title})),null!=i&&null!==(t=i.parentRef)&&void 0!==t&&t.current&&u.forEach((function(t){var e,n=(0,r.Z)(t,2),a=n[0],o=n[1];return null==i||null===(e=i.parentRef)||void 0===e?void 0:e.current.setAttribute(a,o)})),this.setState({options:p,selected:e})}},{key:"render",value:function(){var t=this.state,e=t.options,n=t.selected,r=t.isExpanded,a=this.props,i=a.ariaLabel,o=a.className,l=a.direction,c=a.isDisabled,s=a.isToggleText,p=a.maxHeight,h=a.placeholder,f=a.position,v=a.toggleIcon,m=a.variant,g={direction:l,maxHeight:p};return e&&e.length&&!c||(g.isDisabled=!0),u().createElement("div",{className:"curiosity-select"},u().createElement(d.Select,Object.assign({menuAppendTo:"parent",className:"curiosity-select-pf".concat(s?"":"__no-toggle-text"," ").concat(f===d.DropdownPosition.right?"curiosity-select-pf__position-right":""," ").concat(o),variant:m,"aria-label":i,onToggle:this.onToggle,onSelect:this.onSelect,selections:n,isOpen:r,toggleIcon:v,placeholderText:h,ref:this.selectField},g),e&&e.map((function(t){return u().createElement(d.SelectOption,{key:window.btoa("".concat(t.title,"-").concat(t.value)),id:window.btoa("".concat(t.title,"-").concat(t.value)),value:t.title,"data-value":S()(t.value)&&JSON.stringify([t.value])||t.value,"data-title":t.title})}))||[]))}}]),n}(u().Component);D.defaultProps={ariaLabel:"Select option",className:"",direction:b.down,id:T.B.generateId(),isDisabled:!1,isToggleText:!0,maxHeight:null,name:null,onSelect:T.B.noop,options:[],placeholder:"Select option",position:E.left,selectedOptions:null,toggleIcon:null,variant:d.SelectVariant.single}},64418:function(t,e,n){n.r(e),n.d(e,{GraphCardChartLegend:function(){return p},default:function(){return p}});var r=n(92950),a=n.n(r),i=n(65834),o=n(89048),l=n(51858),c=n(61072),s=n(76006),u=n(83109),d=n(1138),p=function(t){var e=t.chart,n=t.datum,r=t.t,l=t.useDispatch,s=t.useSelectors,u=(0,t.useProduct)(),p=u.productLabel,h=u.viewId,f=l(),v=s(n.dataSets.map((function(t){var e=t.id;return function(t){var n;return null===(n=t.graph.legend)||void 0===n?void 0:n["".concat(h,"-").concat(e)]}})));(0,o.Z)((function(){n.dataSets.forEach((function(t,n){var r=t.id;((null==v?void 0:v[n])||e.isToggled(r))&&e.hide(r)}))}));var m=function(t){var n=e.toggle(t);f({type:c.JD.graph.SET_GRAPH_LEGEND,id:"".concat(h,"-").concat(t),value:n})};return a().createElement(a().Fragment,null,n.dataSets.map((function(t,n){var o=t.id,l=t.isThreshold,c=t.stroke,s=t.data,u=!(void 0===s?[]:s).find((function(t){var e=t.y,n=t.hasData;return e>=0&&!0===n||e>=0&&!0===l}))||!1,h=r(["curiosity-graph.label_".concat(l?"threshold":o),"curiosity-graph.label_no"],{product:p,context:p}),f=r("curiosity-graph.legendTooltip".concat(l?"_threshold":"","_").concat(o),{product:p,context:p},[a().createElement("span",{style:{whiteSpace:"nowrap"}})]),g=(null==v?void 0:v[n])||e.isToggled(o),y=a().createElement(i.Button,{onClick:function(){return m(o)},onKeyPress:function(){return m(o)},className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(o),variant:"link",component:"a",isDisabled:u,icon:(u||g)&&a().createElement(d.ChartIcon,{symbol:"eyeSlash"})||a().createElement(d.ChartIcon,{symbol:l?"dash":"square",style:{visibility:u||g?"hidden":"visible"},fill:c})},h);return f?a().createElement(i.Tooltip,{key:"curiosity-tooltip-".concat(o),content:a().createElement("p",null,f),position:i.TooltipPosition.top,enableFlip:!0,distance:5},y):y})))};p.defaultProps={chart:{hide:s.BM.noop,toggle:s.BM.noop,isToggled:s.BM.noop},datum:{dataSets:[]},t:u.translate,useDispatch:c.Cr.reactRedux.useDispatch,useSelectors:c.Cr.reactRedux.useSelectors,useProduct:l.useProduct}},44024:function(t,e,n){n.r(e),n.d(e,{GraphCardChartTooltip:function(){return p},default:function(){return p}});var r=n(92950),a=n.n(r),i=n(51858),o=n(78139),l=n(83109),c=n(60930),s=n(1138),u=n(46262),d=n(76006),p=function(t){var e=t.datum,n=t.t,r=t.useProduct,i=t.useProductGraphTallyQuery,l=r(),p=l.productId,h=l.productLabel,f=i()[u.O6.GRANULARITY],v=null,m=[],g=(e||{}).itemsByKey,y=void 0===g?{}:g;return Object.keys(y).reverse().forEach((function(t,e){var r,i,l,u;0===e&&(v=(0,o.getTooltipDate)({date:null===(u=y[t])||void 0===u?void 0:u.data.date,granularity:f}));var d={color:null===(r=y[t])||void 0===r?void 0:r.color};if((null===(i=y[t])||void 0===i?void 0:i.chartType)===c.ChartTypeVariant.threshold){var g,S,T,b=null!==(g=null===(S=y[t])||void 0===S?void 0:S.data.y)&&void 0!==g?g:n("curiosity-graph.label_noData");null!==(T=y[t])&&void 0!==T&&T.data.hasInfinite&&(b=d.color?a().createElement(s.ChartIcon,{symbol:"infinity",fill:"#ffffff",title:n("curiosity-graph.label_threshold",{context:"infinite"})}):n("curiosity-graph.label_threshold",{context:"infinite"})),d.label=n("curiosity-graph.label_threshold"),d.value=b}else{var E,D,k=!1===(null===(E=y[t])||void 0===E?void 0:E.data.hasData)&&n("curiosity-graph.label_noData")||(null===(D=y[t])||void 0===D?void 0:D.data.y)||0;d.label=n("curiosity-graph.label_".concat(t),{context:p,product:h}),d.value=k}d.chartType=null===(l=y[t])||void 0===l?void 0:l.chartType,m.push(d)})),a().createElement("div",{className:"curiosity-usage-graph__tooltip"},a().createElement("table",{summary:n("curiosity-graph.tooltipSummary")},m.length&&v&&a().createElement("thead",null,a().createElement("tr",null,a().createElement("th",{colSpan:2},v)))||null,m.length&&a().createElement("tbody",null,m.map((function(t){var e,n,r="number"==typeof t.value&&!Number.isInteger(t.value)&&(null===(e=d.BM.numberDisplay(t.value))||void 0===e||null===(n=e.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!0}))||void 0===n?void 0:n.toUpperCase())||t.value;return a().createElement("tr",{key:"tooltip-".concat(t.label)},a().createElement("th",null,t.chartType===c.ChartTypeVariant.threshold&&a().createElement(s.ChartIcon,{size:"sm",symbol:"dash",fill:t.color||"transparent"}),t.chartType!==c.ChartTypeVariant.threshold&&a().createElement(s.ChartIcon,{size:"sm",fill:t.color||"transparent"})," ",t.label),a().createElement("td",null,r))})))||null),!m.length&&n("curiosity-graph.label_noData",{context:"error"})||null)};p.defaultProps={datum:{},t:l.translate,useProduct:i.useProduct,useProductGraphTallyQuery:i.useProductGraphTallyQuery}},78139:function(t,e,n){n.r(e),n.d(e,{default:function(){return y},generateChartSettings:function(){return p},generateExtendedChartSettings:function(){return g},getChartXAxisLabelIncrement:function(){return h},getTooltipDate:function(){return f},graphCardHelpers:function(){return y},xAxisTickFormat:function(){return v},yAxisTickFormat:function(){return m}});var r=n(1413),a=n(45987),i=n(30381),o=n.n(i),l=n(77323),c=n(60930),s=n(30446),u=n(76006),d=["id","isStandalone"],p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],i=[];t.forEach((function(t){var o=t.id,s=t.isStandalone,u=void 0!==s&&s,p=(0,a.Z)(t,d);if(o){var h=(null==p?void 0:p.chartType)===c.ChartTypeVariant.threshold,f={id:o,isStacked:!h,isStandalone:u,isThreshold:h,isCapacity:h,strokeWidth:2};h&&(f.stroke=l.chart_color_green_300.value,f.strokeDasharray="4,3",f.strokeWidth=3),u?n.push({settings:(0,r.Z)((0,r.Z)({padding:{bottom:75,left:75,right:45,top:45}},e),{},{isStandalone:!0,metric:(0,r.Z)((0,r.Z)({},f),p),metrics:[(0,r.Z)((0,r.Z)({},f),p)]})}):i.push((0,r.Z)((0,r.Z)({},f),p))}}));var o=i.length&&{settings:(0,r.Z)((0,r.Z)({},e),{},{isStandalone:!1,metric:void 0,metrics:i})}||void 0;return{standaloneFiltersSettings:n,groupedFiltersSettings:o}},h=function(t){switch(t){case s.U9.DAILY:return 5;case s.U9.WEEKLY:case s.U9.MONTHLY:return 2;case s.U9.QUARTERLY:default:return 1}},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.date,n=t.granularity,r=o().utc(e);switch(n){case s.U9.QUARTERLY:return"".concat(r.format(u.i3.timestampQuarterFormats.yearShort)," - ").concat(r.add(1,"quarter").format(u.i3.timestampQuarterFormats.yearShort));case s.U9.MONTHLY:return r.format(u.i3.timestampMonthFormats.yearLong);case s.U9.WEEKLY:return"".concat(r.format(u.i3.timestampDayFormats.short)," - ").concat(r.add(1,"week").format(u.i3.timestampDayFormats.yearShort));case s.U9.DAILY:default:return r.format(u.i3.timestampDayFormats.long)}},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.callback,n=t.date,r=t.granularity,a=t.tick,i=t.previousDate;if(n&&r){if(e)return e({callback:e,date:n,granularity:r,tick:a,previousDate:i});var l,c=o().utc(n),d=0!==a&&Number.parseInt(c.year(),10)!==Number.parseInt(o().utc(i).year(),10);switch(r){case s.U9.QUARTERLY:l=(l=d?c.format(u.i3.timestampQuarterFormats.yearShort):c.format(u.i3.timestampQuarterFormats.short)).replace(/\s/,"\n");break;case s.U9.MONTHLY:l=(l=d?c.format(u.i3.timestampMonthFormats.yearShort):c.format(u.i3.timestampMonthFormats.short)).replace(/\s/,"\n");break;case s.U9.WEEKLY:case s.U9.DAILY:default:l=(l=d?c.format(u.i3.timestampDayFormats.yearShort):c.format(u.i3.timestampDayFormats.short)).replace(/\s(\d{4})$/,"\n$1")}return l}},m=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.callback,a=n.tick;return r?r({tick:a}):null===(t=u.BM.numberDisplay(a))||void 0===t||null===(e=t.format({average:!0,mantissa:1,trimMantissa:!0,lowPrecision:!1}))||void 0===e?void 0:e.toUpperCase()},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.settings,n=t.granularity;return(0,r.Z)((0,r.Z)({},e),{},{xAxisLabelIncrement:h(n),xAxisTickFormat:function(t){var r=t.item,a=t.previousItem,i=t.tick;return v({callback:null==e?void 0:e.xAxisTickFormat,tick:i,date:r.date,previousDate:a.date,granularity:n})},yAxisTickFormat:function(t){var n=t.tick;return m({callback:null==e?void 0:e.yAxisTickFormat,tick:n})}})},y={generateChartSettings:p,generateExtendedChartSettings:g,getChartXAxisLabelIncrement:h,getTooltipDate:f,xAxisTickFormat:v,yAxisTickFormat:m}},91339:function(t,e,n){n.r(e),n.d(e,{MinHeight:function(){return d},default:function(){return d}});var r=n(15671),a=n(43144),i=n(97326),o=n(60136),l=n(54062),c=n(92950),s=n.n(c),u=n(76006),d=function(t){(0,o.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;(0,r.Z)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(t=e.call.apply(e,[this].concat(o))).containerRef=s().createRef(),t.innerContainerRef=s().createRef(),t.updatedContainerWidth=0,t.resizeObserver=u.BM.noop,t.onResizeContainer=function(){var e,n,r=(0,i.Z)(t).updatedContainerWidth,a=t.props.updateOnResize,o=(null===(e=t.containerRef)||void 0===e||null===(n=e.current)||void 0===n?void 0:n.clientWidth)||0;a&&o!==r&&(t.updatedContainerWidth=o,t.setMinHeight(!0))},t}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.updateOnResize;window.setTimeout((function(){t.setMinHeight()})),e&&this.setResizeObserver()}},{key:"componentDidUpdate",value:function(){var t=this;this.props.updateOnContent&&window.setTimeout((function(){t.setMinHeight()}))}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setMinHeight",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.props.minHeight,r=this.containerRef.current,a=void 0===r?{}:r,i=this.innerContainerRef.current,o=void 0===i?{}:i;null!=a&&a.style&&(n>(t=e?(null==o?void 0:o.clientHeight)||0:(null==a?void 0:a.clientHeight)||0)&&(t=n),a.style.minHeight="".concat(t,"px"))}},{key:"setResizeObserver",value:function(){var t=this;window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",t.onResizeContainer)}}},{key:"render",value:function(){var t=this.props.children;return s().createElement("div",{className:"curiosity-minheight",ref:this.containerRef},s().createElement("div",{ref:this.innerContainerRef},t))}}]),n}(s().Component);d.defaultProps={updateOnContent:!1,updateOnResize:!0,minHeight:0}},65876:function(t,e,n){n.r(e),n.d(e,{ToolbarFieldRangedMonthly:function(){return v},default:function(){return v},toolbarFieldOptions:function(){return h},useOnSelect:function(){return f}});var r=n(4942),a=n(1413),i=n(92950),o=n.n(i),l=n(61072),c=n(51858),s=n(49844),u=n(30446),d=n(76006),p=n(83109),h=d.i3.getRangedMonthDateTime().listDateTimeRanges.map((function(t){return(0,a.Z)((0,a.Z)({},t),{},{selected:!1})})),f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useDispatch,n=void 0===e?l.Cr.reactRedux.useDispatch:e,a=t.useProduct,i=void 0===a?c.useProduct:a,o=i(),s=o.viewId,d=n();return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.value,n=e.startDate,a=e.endDate;d([{type:l.JD.query.SET_QUERY_CLEAR_INVENTORY_LIST,viewId:s},(0,r.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[u.VN.GRANULARITY],viewId:s},u.VN.GRANULARITY,u.U9.DAILY),(0,r.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[u.VN.START_DATE],viewId:s},u.VN.START_DATE,null==n?void 0:n.toISOString()),(0,r.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[u.VN.END_DATE],viewId:s},u.VN.END_DATE,null==a?void 0:a.toISOString())])}},v=function(t){var e=t.isFilter,n=t.options,r=t.position,i=t.t,l=t.useOnSelect,c=(0,t.useProductGraphTallyQuery)()[u.VN.START_DATE],d=l(),p=n.map((function(t){return(0,a.Z)((0,a.Z)({},t),{},{selected:t.title===c||t.value.startDate.toISOString()===c})}));return o().createElement(s.Select,{"aria-label":i("curiosity-toolbar.placeholder".concat(e?"_filter":""),{context:"rangedMonthly"}),onSelect:d,options:p,placeholder:i("curiosity-toolbar.placeholder".concat(e?"_filter":""),{context:"rangedMonthly"}),position:r,maxHeight:250,"data-test":"toolbarFieldRangeGranularity"})};v.defaultProps={isFilter:!1,options:h,position:s.SelectPosition.left,t:p.translate,useOnSelect:f,useProductGraphTallyQuery:c.useProductGraphTallyQuery}}}]);
//# sourceMappingURL=../sourcemaps/8869.8e863d1d9370ab634e6ed70f3e6a718f.js.map