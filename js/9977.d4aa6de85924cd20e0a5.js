"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[9977,608,1799,9877,9407,1014,8900],{87585:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y,BannerMessages:()=>y});var a=r(15274),n=r(56949),l=r(48418),i=r(92950),o=r.n(i),s=r(21012),c=r(91999),u=r(15451),d=r(186),m=r(83109),p=r(76006),g=r(30446),h=r(3281),y=function(e){var t,r=e.messages,c=e.useRouteDetail,m=e.useAppMessages,h=(0,i.useState)({}),y=(0,l.Z)(h,2),f=y[0],v=y[1],E=(0,i.useState)([]),C=(0,l.Z)(E,2),P=C[0],S=C[1],M=c()||{},T=M.pathParameter,_=M.productConfig,G=1===(null==_?void 0:_.length)&&(null==_?void 0:_[0]),I=d.IT.parseRhsmQuery((null==_||null===(t=_[0])||void 0===t?void 0:t.query)||{}).query,D=m().appMessages;return(0,u.Z)((function(){if(T&&G){var e,t=p.i3.getRangedDateTime("CURRENT"),r=t.startDate,l=t.endDate,i=(0,n.Z)((0,n.Z)({},I),{},(e={},(0,a.Z)(e,g.VN.GRANULARITY,g.U9.DAILY),(0,a.Z)(e,g.VN.START_DATE,r.toISOString()),(0,a.Z)(e,g.VN.END_DATE,l.toISOString()),e));d.Cr.rhsmActions.useGetMessageReports(T,i)}}),[T,G,I]),(0,u.Z)((function(){var e=[];r.length&&Object.entries(D).forEach((function(t){var a=(0,l.Z)(t,2),i=a[0],o=a[1];if(!0!==f[i]&&!0===o){var s=r.find((function(e){return e.id===i}));s&&e.push((0,n.Z)({key:i},s))}})),S(e.map((function(e){var t=e.key,r=e.message,l=e.title,i=e.variant,c=void 0===i?s.AlertVariant.info:i,u=o().createElement(s.AlertActionCloseButton,{onClose:function(){return v((0,n.Z)((0,n.Z)({},f),{},(0,a.Z)({},t,!0)))}});return o().createElement(s.Alert,{actionClose:u,key:t,title:l,variant:c},r)})))}),[D,f,r]),(null==P?void 0:P.length)?o().createElement("div",{className:"curiosity-banner-messages"},P):null};y.defaultProps={messages:[{id:"cloudigradeMismatch",title:(0,m.translate)("curiosity-banner.dataMismatchTitle"),message:(0,m.translate)("curiosity-banner.dataMismatchMessage",{context:""!==p.BM.UI_LINK_REPORT_ACCURACY_RECOMMENDATIONS&&"cloudigradeMismatch",appName:p.BM.UI_DISPLAY_NAME},[o().createElement(s.Button,{isInline:!0,component:"a",variant:"link",icon:o().createElement(c.ExternalLinkAltIcon,null),iconPosition:"right",target:"_blank",href:p.BM.UI_LINK_REPORT_ACCURACY_RECOMMENDATIONS})])}],useAppMessages:d.Cr.rhsmSelectors.useAppMessages,useRouteDetail:h.Tu}},10608:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u,GraphCard:()=>u});var a=r(92950),n=r.n(a),l=r(51858),i=r(76006),o=r(11014),s=r(49877),c=r(78139),u=function(e){var t=e.isDisabled,r=(0,e.useProductGraphConfig)().filters,a=c.graphCardHelpers.generateChartSettings(r),l=a.groupedFilters,i=a.standaloneFilters;return t?null:n().createElement(n().Fragment,null,(null==l?void 0:l.length)&&n().createElement(o.GraphCardMetrics,{metricFilters:l})||null,i.map((function(e){return n().createElement(s.GraphCardMetric,{key:"graphCard_".concat(e.id),metricFilter:e})})))};u.defaultProps={isDisabled:i.BM.UI_DISABLED_GRAPH,useProductGraphConfig:l.useProductGraphConfig}},91799:(e,t,r)=>{r.r(t),r.d(t,{default:()=>E,GraphCardChart:()=>E});var a=r(56949),n=r(92950),l=r.n(n),i=r(21012),o=r(15451),s=r(51858),c=r(25394),u=r(78139),d=r(60930),m=r(64418),p=r(44024),g=r(99171),h=r(46262),y=r(91339),f=r(1797),v=r(83109),E=function(e){var t=e.t,r=e.useGetGraphTally,n=e.useGraphCardContext,s=e.useMetricsSelector,c=e.useProduct,v=e.useProductGraphTallyQuery,E=c().productId,C=n().settings,P=void 0===C?{}:C,S=P.actionDisplay,M=P.metric,T=P.metrics,_=void 0===T?[]:T,G=v()[h.O6.GRANULARITY],I=s(),D=I.pending,b=I.error,A=I.data,F=void 0===A?{}:A,k=I.dataSets,B=void 0===k?[]:k,N=r();(0,o.Z)((function(){N(_.map((function(e){var t=e.id;return{id:E,metric:t}})))}),[_,E,N]);var x=(null==M?void 0:M.id)&&"_".concat(null==M?void 0:M.id)||"",H=null;return"function"==typeof S&&(H=S({data:(0,a.Z)({},F)})),l().createElement(i.Card,{className:"curiosity-usage-graph"},l().createElement(y.MinHeight,{key:"headerMinHeight"},l().createElement(i.CardHeader,null,l().createElement(i.CardTitle,null,l().createElement(i.Title,{headingLevel:"h2",size:"lg"},t("curiosity-graph.cardHeading".concat(x),{context:E}),l().createElement(g.GraphCardChartTitleTooltip,null))),H&&l().createElement(i.CardActions,{className:b?"blur":""},H))),l().createElement(y.MinHeight,{key:"bodyMinHeight"},l().createElement(i.CardBody,null,l().createElement("div",{className:(b?"blur":D&&"fadein")||""},D&&l().createElement(f.Loader,{variant:"graph"}),!D&&l().createElement(d.Chart,Object.assign({},u.graphCardHelpers.generateExtendedChartSettings({settings:P,granularity:G}),{dataSets:B,chartLegend:function(e){var t=e.chart,r=e.datum;return l().createElement(m.GraphCardChartLegend,{chart:t,datum:r})},chartTooltip:function(e){var t=e.datum;return l().createElement(p.GraphCardChartTooltip,{datum:t})}}))))))};E.defaultProps={t:v.translate,useGetGraphTally:c.useGetGraphTally,useGraphCardContext:c.useGraphCardContext,useMetricsSelector:c.useMetricsSelector,useProduct:s.useProduct,useProductGraphTallyQuery:s.useProductGraphTallyQuery}},49877:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d,GraphCardMetric:()=>d});var a=r(56949),n=r(48418),l=r(92950),i=r.n(l),o=r(91799),s=r(51858),c=r(25394),u=(r(46262),r(29407)),d=function(e){var t=e.metricFilter,r=e.useProductGraphConfig,s=(0,l.useState)({}),d=(0,n.Z)(s,2),m=d[0],p=d[1],g=r().settings;return(0,l.useEffect)((function(){p({settings:(0,a.Z)((0,a.Z)({padding:{bottom:75,left:75,right:45,top:45}},g),{},{isStandalone:!0,metric:t,metrics:[t]})})}),[t,g,p]),i().createElement(c.GraphCardContext.Provider,{value:m},i().createElement(u.GraphCardMetricTotals,null,i().createElement(o.GraphCardChart,null)))};d.defaultProps={metricFilter:{},useProductGraphConfig:s.useProductGraphConfig}},29407:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y,GraphCardMetricTotals:()=>y});var a=r(92950),n=r.n(a),l=r(21012),i=r(30381),o=r.n(i),s=r(51858),c=r(25394),u=r(91339),d=r(1797),m=r(76006),p=r(65876),g=r(46262),h=r(83109),y=function(e){var t,r,a,i,s=e.children,c=e.t,h=e.useMetricsSelector,y=(0,e.useProductGraphTallyQuery)()[g.O6.START_DATE],f=h(),v=f.pending,E=f.error,C=f.fulfilled,P=f.dataSets,S=(void 0===P?[]:P)[0]||{},M=S.data,T=void 0===M?[]:M,_=S.id,G=S.meta,I=void 0===G?{}:G,D=T[T.length-1]||{},b=D.date,A=D.hasData,F=D.y,k=T.find((function(e){return!0===e.isCurrentDate}))||{},B=k.date,N=k.hasData,x=k.y,H=I.totalMonthlyDate,R=I.totalMonthlyHasData,L=I.totalMonthlyValue,Z=p.toolbarFieldOptions.find((function(e){return e.title===y||e.value.startDate.toISOString()===y}))||{},O=Z.title,Q=Z.isCurrent,U=Q?B:b,w=Q?N:A,K=Q?x:F;return n().createElement(l.Flex,{className:"curiosity-usage-graph__totals"},n().createElement(l.Flex,{flex:{default:"flex_1"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},n().createElement(l.FlexItem,{className:"curiosity-usage-graph__totals-column"},n().createElement(l.Card,{className:"curiosity-usage-graph__totals-column-card ".concat(E?"blur":"")},n().createElement(l.CardTitle,null,c("curiosity-graph.cardHeadingMetric_dailyTotal",{context:[Q&&"current",_],month:O})),n().createElement(u.MinHeight,{key:"currentBody"},n().createElement(l.CardBody,null,n().createElement("div",null,v&&n().createElement(d.Loader,{variant:"skeleton",skeletonProps:{size:d.SkeletonSize.lg}}),C&&c("curiosity-graph.cardBodyMetric_total",{context:w&&_||"",total:null===(t=m.BM.numberDisplay(K))||void 0===t||null===(r=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===r?void 0:r.toUpperCase()},[n().createElement("strong",{title:K,"aria-label":K})])))),n().createElement(u.MinHeight,{key:"currentFooter"},n().createElement(l.CardFooter,null,n().createElement("div",{className:w?"":"hidden"},C&&U&&c("curiosity-graph.cardFooterMetric",{date:o().utc(U).format(m.i3.timestampTimeFormats.yearTimeShort)}))))),n().createElement(l.Card,{className:"curiosity-usage-graph__totals-column-card ".concat(E?"blur":"")},n().createElement(l.CardTitle,null,c("curiosity-graph.cardHeadingMetric_monthlyTotal",{context:[Q&&"current",_],month:O})),n().createElement(u.MinHeight,{key:"totalMonthlyBody"},n().createElement(l.CardBody,null,n().createElement("div",null,v&&n().createElement(d.Loader,{variant:"skeleton",skeletonProps:{size:d.SkeletonSize.lg}}),C&&c("curiosity-graph.cardBodyMetric_total",{context:R&&_||"",total:null===(a=m.BM.numberDisplay(L))||void 0===a||null===(i=a.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===i?void 0:i.toUpperCase()},[n().createElement("strong",{title:L,"aria-label":L})])))),n().createElement(u.MinHeight,{key:"totalMonthlyFooter"},n().createElement(l.CardFooter,null,n().createElement("div",{className:R?"":"hidden"},C&&H&&c("curiosity-graph.cardFooterMetric",{date:o().utc(H).format(m.i3.timestampTimeFormats.yearTimeShort)}))))))),n().createElement(l.Flex,{flex:{default:"flex_3"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},n().createElement(l.FlexItem,{className:"curiosity-usage-graph__totals-graph-column"},s)))};y.defaultProps={children:null,t:h.translate,useMetricsSelector:c.useMetricsSelector,useProductGraphTallyQuery:s.useProductGraphTallyQuery}},11014:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u,GraphCardMetrics:()=>u});var a=r(56949),n=r(48418),l=r(92950),i=r.n(l),o=r(91799),s=r(51858),c=r(25394),u=(r(46262),function(e){var t=e.metricFilters,r=e.useProductGraphConfig,s=(0,l.useState)({}),u=(0,n.Z)(s,2),d=u[0],m=u[1],p=r().settings;return(0,l.useEffect)((function(){m({settings:(0,a.Z)((0,a.Z)({},p),{},{isStandalone:!1,metric:void 0,metrics:t})})}),[t,p,m]),i().createElement(c.GraphCardContext.Provider,{value:d},i().createElement(o.GraphCardChart,null))});u.defaultProps={metricFilters:[],useProductGraphConfig:s.useProductGraphConfig}},68900:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s,Pagination:()=>s});var a=r(92950),n=r.n(a),l=r(21012),i=r(76006),o=r(65020),s=function e(t){var r=t.dropDirection,a=t.isDisabled,i=t.isCompact,s=t.itemCount,c=t.offset,u=t.onPage,d=t.onPerPage,m=t.perPage,p=t.variant;return n().createElement(l.Pagination,{dropDirection:r,isCompact:i,isDisabled:a||!s,itemCount:s,onSetPage:function(e,t,r){return u({event:e,perPage:r,offset:o.paginationHelpers.calculateOffsetFromPage(t,r)})},onPerPageSelect:function(t,r){return d({event:t,perPage:r,offset:e.defaultProps.offset})},page:o.paginationHelpers.calculatePageFromOffset(c||e.defaultProps.offset,m),perPage:m,variant:p})};s.defaultProps={dropDirection:"down",isCompact:!1,isDisabled:!1,itemCount:0,offset:0,onPage:i.BM.noop,onPerPage:i.BM.noop,perPage:10,variant:null}},29175:(e,t,r)=>{r.r(t),r.d(t,{default:()=>M,ProductView:()=>M});var a=r(92950),n=r.n(a),l=r(21012),i=r(31369),o=r(3281),s=r(51858),c=r(52422),u=r(186),d=r(28341),m=r(10608),p=r(92227),g=r(86876),h=r(76006),y=r(87585),f=r(49844),v=r(2738),E=r(69051),C=r(47493),P=r(46262),S=r(83109),M=function(e){var t=e.t,r=e.toolbarGraph,a=e.toolbarGraphDescription,o=(0,e.useRouteDetail)(),S=o.pathParameter,M=o.productParameter,T=o.productConfig;return n().createElement(c.PageLayout,null,n().createElement(c.PageHeader,{productLabel:M},t("curiosity-view.title",{appName:h.BM.UI_DISPLAY_NAME,context:M})),n().createElement(c.PageMessages,null,S!==P.WK.RHOSAK&&n().createElement(y.default,null)),n().createElement(c.PageColumns,null,T.map((function(e){return function(e){var o=e.graphTallyQuery,y=e.inventoryHostsQuery,S=e.inventorySubscriptionsQuery,M=e.query,T=e.initialGuestsFilters,_=e.initialInventoryFilters,G=e.initialInventorySettings,I=e.initialSubscriptionsInventoryFilters,D=e.productId,b=e.viewId;if(!D||!b)return null;var A=u.IT.parseRhsmQuery(M,{graphTallyQuery:o,inventoryHostsQuery:y,inventorySubscriptionsQuery:S}),F=A.graphTallyQuery,k=A.inventoryHostsQuery,B=A.inventorySubscriptionsQuery,N=null;a&&(N=n().createElement(l.Tooltip,{content:n().createElement("p",null,t("curiosity-graph.cardHeadingDescription",{context:D})),position:l.TooltipPosition.top,enableFlip:!1,distance:5,entryDelay:100,exitDelay:0},n().createElement("sup",{className:"curiosity-icon__info"},n().createElement(i.ZP,null))));var x=n().createElement(n().Fragment,null,t("curiosity-graph.cardHeading",{context:D}),N);return n().createElement(s.ProductViewContext.Provider,{value:e,key:"product_".concat(D)},n().createElement(c.PageToolbar,null,n().createElement(p.Toolbar,null)),n().createElement(c.PageSection,null,D!==P.WK.RHOSAK&&n().createElement(d.ConnectedGraphCard,{key:"graph_".concat(D),query:F,productId:D,viewId:b,cardTitle:x},n().isValidElement(r)&&r||!1!==r&&n().createElement(v.ToolbarFieldGranularity,{position:f.SelectPosition.right})),D===P.WK.RHOSAK&&n().createElement(m.GraphCard,null)),n().createElement(c.PageSection,null,n().createElement(E.default,{key:"inventory_".concat(D),productId:D,isDisabled:!_&&!I||h.BM.UI_DISABLED_TABLE},!h.BM.UI_DISABLED_TABLE_HOSTS&&_&&n().createElement(E.InventoryTab,{key:"inventory_hosts_".concat(D),title:t("curiosity-inventory.tabHosts",{context:["noInstances",D]})},n().createElement(g.ConnectedInventoryList,{key:"inv_".concat(D),filterGuestsData:T,filterInventoryData:_,productId:D,settings:G,query:k,viewId:b})),!h.BM.UI_DISABLED_TABLE_SUBSCRIPTIONS&&I&&n().createElement(E.InventoryTab,{key:"inventory_subs_".concat(D),title:t("curiosity-inventory.tabSubscriptions",{context:D})},n().createElement(C.ConnectedInventorySubscriptions,{key:"subs_".concat(D),filterInventoryData:I,productId:D,query:B,viewId:b})))))}(e)}))))};M.defaultProps={t:S.translate,toolbarGraph:null,toolbarGraphDescription:!1,useRouteDetail:o.Tu}}}]);
//# sourceMappingURL=../sourcemaps/9977.7739b4ccb0b5bfdc3d7464e46dbfeb6b.js.map