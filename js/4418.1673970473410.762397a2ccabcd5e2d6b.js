"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[4418,5394],{64418:function(t,e,n){n.r(e),n.d(e,{GraphCardChartLegend:function(){return g},default:function(){return g}});var r=n(93433),o=n(84506),i=n(92950),a=n.n(i),u=n(54653),s=n(89048),c=n(51858),d=n(25394),l=n(82410),p=n(76006),v=n(83109),f=n(1138),g=function(t){var e=t.chart,n=t.datum,i=t.t,c=t.useDispatch,d=t.useGraphCardContext,p=t.useSelectors,v=t.useProduct,g=d().settings,h=void 0===g?{}:g,C=v(),m=C.productLabel,y=C.viewId,S=h.isDisabledLegendClick,G=c(),b=p([function(t){var e;return null===(e=t.graph.legend)||void 0===e?void 0:e["".concat(y,"-inverted")]}].concat((0,r.Z)(n.dataSets.map((function(t){var e=t.id;return function(t){var n;return null===(n=t.graph.legend)||void 0===n?void 0:n["".concat(y,"-").concat(e)]}}))))),x=(0,o.Z)(b),E=x[0],T=x.slice(1);(0,s.Z)((function(){n.dataSets.forEach((function(t,n){var r=t.id,o=t.isToolbarFilter;E&&o?new RegExp(E).test(r)||e.hide(r):((null==T?void 0:T[n])||e.isToggled(r))&&e.hide(r)}))}));var P=function(t){var n=e.toggle(t);G({type:l.JD.graph.SET_GRAPH_LEGEND,id:"".concat(y,"-").concat(t),value:n})};return a().createElement(a().Fragment,null,n.dataSets.map((function(t,n){var r=t.id,o=t.isThreshold,s=t.stroke,c=t.data,d=!(void 0===c?[]:c).find((function(t){var e=t.y,n=t.hasData;return e>=0&&!0===n||e>=0&&!0===o}))||!1,l=i(["curiosity-graph.label","curiosity-graph.label_no"],{product:m,context:r}),p=i("curiosity-graph.legendTooltip",{product:m,context:r},[a().createElement("span",{style:{whiteSpace:"nowrap"}})]),v=(null==T?void 0:T[n])||e.isToggled(r),g={};S||(g.onClick=function(){return P(r)},g.onKeyPress=function(){return P(r)});var h=a().createElement(u.Button,Object.assign({},g,{className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(r),variant:"link",component:"a",isDisabled:null!=S?S:d,icon:(d||v)&&a().createElement(f.ChartIcon,{symbol:"eyeSlash"})||a().createElement(f.ChartIcon,{symbol:o?"dash":"square",style:{visibility:d||v?"hidden":"visible"},fill:s})}),l);return p?a().createElement(u.Tooltip,{key:"curiosity-tooltip-".concat(r),content:a().createElement("p",null,p),position:u.TooltipPosition.top,enableFlip:!0,distance:5},a().createElement("span",{className:"pf-c-button pf-m-link"},h)):h})))};g.defaultProps={chart:{hide:p.BM.noop,toggle:p.BM.noop,isToggled:p.BM.noop},datum:{dataSets:[]},t:v.translate,useDispatch:l.Cr.reactRedux.useDispatch,useGraphCardContext:d.useGraphCardContext,useProduct:c.useProduct,useSelectors:l.Cr.reactRedux.useSelectors}},25394:function(t,e,n){n.r(e),n.d(e,{DEFAULT_CONTEXT:function(){return h},GraphCardContext:function(){return C},context:function(){return x},default:function(){return x},useGetMetrics:function(){return G},useGraphCardActions:function(){return b},useGraphCardContext:function(){return m},useMetricsSelector:function(){return S},useParseFiltersSettings:function(){return y}});var r=n(1413),o=n(45987),i=n(92950),a=n.n(i),u=n(17297),s=n(54653),c=n(82410),d=n(51858),l=n(70136),p=n(62834),v=n(78139),f=["error","fulfilled","pending","data"],g=["id","content"],h=[{settings:{isStandalone:!1,metrics:[],metric:void 0}},p.B.noop],C=a().createContext(h),m=function(){return(0,i.useContext)(C)},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProduct,n=void 0===e?d.useProduct:e,r=t.useProductGraphConfig,o=void 0===r?d.useProductGraphConfig:r,a=n(),u=a.productId,s=o(),c=s.filters,l=void 0===c?[]:c,p=s.settings,f=void 0===p?{}:p,g=(0,i.useMemo)((function(){return v.graphCardHelpers.generateChartSettings({filters:l,settings:f,productId:u})}),[l,f,u]),h=g.groupedFiltersSettings,C=g.standaloneFiltersSettings,m=void 0===C?[]:C;return{groupedFiltersSettings:h,standaloneFiltersSettings:m}},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useGraphCardContext,n=void 0===e?m:e,i=t.useSelectorsResponse,a=void 0===i?c.Cr.reactRedux.useSelectorsResponse:i,u=n(),s=u.settings,d=void 0===s?{}:s,l=d.metrics,p=void 0===l?[]:l,v=a(p.map((function(t){var e=t.id,n=t.isCapacity;return function(t){var r,o,i=t.graph;return n?null===(r=i.capacity)||void 0===r?void 0:r[e]:null===(o=i.tally)||void 0===o?void 0:o[e]}}))),g=v.error,h=v.fulfilled,C=v.pending,y=v.data,S=void 0===y?[]:y,G=(0,o.Z)(v,f),b={},x=null==S?void 0:S.map((function(t,e){var n=(0,r.Z)((0,r.Z)({},p[e]),t);return b[p[e].id]=n,n}));return(0,r.Z)((0,r.Z)({},G),{},{data:b,dataSets:x,error:g,fulfilled:h,pending:C})},G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.getGraphMetrics,n=void 0===e?c.Ak.rhsm.getGraphMetrics:e,r=t.useDispatch,o=void 0===r?c.Cr.reactRedux.useDispatch:r,i=t.useGraphCardContext,a=void 0===i?m:i,s=t.useMetricsSelector,l=void 0===s?S:s,p=t.useProduct,v=void 0===p?d.useProduct:p,f=t.useProductGraphTallyQuery,g=void 0===f?d.useProductGraphTallyQuery:f,h=v(),C=h.productId,y=g(),G=o(),b=l(),x=a(),E=x.settings,T=void 0===E?{}:E,P=T.metrics,k=void 0===P?[]:P;return(0,u.Z)((function(){var t=k.map((function(t){var e=t.metric,n=t.isCapacity,r=t.query;return{id:C,metric:e,isCapacity:n,query:r}}));n(t,y)(G)}),[k,C,y]),b},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.categoryOptions,n=void 0===e?l.toolbarFieldOptions:e,r=t.useMetricsSelector,u=void 0===r?S:r,c=t.useGraphCardContext,d=void 0===c?m:c,v=u(),f=v.pending,h=v.dataSets,C=d(),y=C.settings,G=void 0===y?{}:y,b=G.actions;return(0,i.useMemo)((function(){return null==b?void 0:b.map((function(t){var e=t.id,r=t.content,i=(0,o.Z)(t,g),u=(n.find((function(t){var n=t.value;return e===n}))||{}).component;return u&&a().createElement(s.ToolbarItem,{key:"option-".concat(e)},a().createElement(u,Object.assign({isFilter:!1},i)))||r&&!f&&h.length&&a().createElement(s.ToolbarItem,{key:e||p.B.generateId()},"function"==typeof r?r({data:h}):r)||null}))}),[b,n,h,f])},x={GraphCardContext:C,DEFAULT_CONTEXT:h,useGetMetrics:G,useGraphCardActions:b,useGraphCardContext:m,useMetricsSelector:S,useParseFiltersSettings:y}}}]);
//# sourceMappingURL=../sourcemaps/4418.46aa3718f3c0a9f51646c3d6cf6d3f98.js.map