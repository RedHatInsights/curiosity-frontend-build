"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[608,1339,9877,1806,353],{49844:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M,Select:()=>M,SelectDirection:()=>C,SelectPosition:()=>T});var r=n(70885),a=n(1413),i=n(15671),l=n(43144),o=n(60136),s=n(54062),c=n(96985),u=n.n(c),d=n(75857),p=n(50361),h=n.n(p),f=n(18446),m=n.n(f),v=n(30998),g=n.n(v),y=n(68630),S=n.n(y),E=n(62834),C=d.DropdownDirection,T=d.DropdownPosition,M=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={isExpanded:!1,options:null,selected:null},e.selectField=u().createRef(),e.onSelect=function(t,n){var r=e.state.options,i=e.props,l=i.id,o=i.name,s=i.onSelect,c=i.variant,u=r,p=u.findIndex((function(e){return e.title===n}));u[p].selected=c===d.SelectVariant.single||!u[p].selected,c===d.SelectVariant.single&&u.forEach((function(e,t){p!==t&&(u[t].selected=!1)}));var f=c===d.SelectVariant.single?n:u.filter((function(e){return!0===e.selected})).map((function(e){return e.title}));e.setState({options:u,selected:f},(function(){var t=h()(u),n={id:l,name:o||l,value:t[p].value,selected:c===d.SelectVariant.single&&t[p]||h()(f),selectedIndex:p,type:"select-".concat(c===d.SelectVariant.single?"one":"multiple"),options:t};c===d.SelectVariant.checkbox&&(n.checked=t[p].selected);var r=(0,a.Z)((0,a.Z)({},n),{},{target:(0,a.Z)({},n),currentTarget:(0,a.Z)({},n),persist:E.B.noop});s((0,a.Z)({},r),p,t),c===d.SelectVariant.single&&e.setState({isExpanded:!1})}))},e.onToggle=function(t){e.setState({isExpanded:t})},e}return(0,l.Z)(n,[{key:"componentDidMount",value:function(){null===this.state.options&&this.formatOptions()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.options,r=t.selectedOptions;m()(e.options,n)&&m()(e.selectedOptions,r)||this.formatOptions()}},{key:"formatOptions",value:function(){var e,t,n=this.selectField.current,i=void 0===n?{}:n,l=this.props,o=l.options,s=l.selectedOptions,c=l.variant,u=Object.entries(this.props).filter((function(e){var t=(0,r.Z)(e,1)[0];return/^data-/i.test(t)})),p=S()(o)?Object.entries(o).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,a.Z)((0,a.Z)({},i),{},{title:n,value:i})})):h()(o),f=s&&"string"==typeof s||"number"==typeof s?[s]:s;p.forEach((function(e,t){var n,r=e;("string"==typeof r&&(r={title:e,value:e},p[t]=r),r.text=r.text||r.title,r.textContent=r.textContent||r.title,r.label=r.label||r.title,f)&&(S()(r.value)?(n=g()(f,r.value)>-1)||(n=!!f.find((function(e){return Object.values(r.value).includes(e)}))):n=f.includes(r.value),n||(n=f.includes(r.title)),p[t].selected=n)})),t=c===d.SelectVariant.single?(p.find((function(e){return!0===e.selected}))||{}).title:p.filter((function(e){return!0===e.selected})).map((function(e){return e.title})),null!=i&&null!==(e=i.parentRef)&&void 0!==e&&e.current&&u.forEach((function(e){var t,n=(0,r.Z)(e,2),a=n[0],l=n[1];return null==i||null===(t=i.parentRef)||void 0===t?void 0:t.current.setAttribute(a,l)})),this.setState({options:p,selected:t})}},{key:"render",value:function(){var e=this.state,t=e.options,n=e.selected,r=e.isExpanded,a=this.props,i=a.ariaLabel,l=a.className,o=a.direction,s=a.isDisabled,c=a.isToggleText,p=a.maxHeight,h=a.placeholder,f=a.position,m=a.toggleIcon,v=a.variant,g={direction:o,maxHeight:p};return t&&t.length&&!s||(g.isDisabled=!0),u().createElement("div",{className:"curiosity-select"},u().createElement(d.Select,Object.assign({menuAppendTo:"parent",className:"curiosity-select-pf".concat(c?"":"__no-toggle-text"," ").concat(f===d.DropdownPosition.right?"curiosity-select-pf__position-right":""," ").concat(l),variant:v,"aria-label":i,onToggle:this.onToggle,onSelect:this.onSelect,selections:n,isOpen:r,toggleIcon:m,placeholderText:h,ref:this.selectField},g),t&&t.map((function(e){return u().createElement(d.SelectOption,{key:window.btoa("".concat(e.title,"-").concat(e.value)),id:window.btoa("".concat(e.title,"-").concat(e.value)),value:e.title,"data-value":S()(e.value)&&JSON.stringify([e.value])||e.value,"data-title":e.title})}))||[]))}}]),n}(u().Component);M.defaultProps={ariaLabel:"Select option",className:"",direction:C.down,id:E.B.generateId(),isDisabled:!1,isToggleText:!0,maxHeight:null,name:null,onSelect:E.B.noop,options:[],placeholder:"Select option",position:T.left,selectedOptions:null,toggleIcon:null,variant:d.SelectVariant.single}},10608:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u,GraphCard:()=>u});var r=n(96985),a=n.n(r),i=n(51858),l=n(76006),o=n(11014),s=n(49877),c=n(78139),u=function(e){var t=e.isDisabled,n=(0,e.useProductGraphConfig)().filters,r=c.graphCardHelpers.generateChartSettings(n),i=r.groupedFilters,l=r.standaloneFilters;return t?null:a().createElement(a().Fragment,null,(null==i?void 0:i.length)&&a().createElement(o.GraphCardMetrics,{metricFilters:i})||null,l.map((function(e){return a().createElement(s.GraphCardMetric,{key:"graphCard_".concat(e.id),metricFilter:e})})))};u.defaultProps={isDisabled:l.BM.UI_DISABLED_GRAPH,useProductGraphConfig:i.useProductGraphConfig}},49877:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d,GraphCardMetric:()=>d});var r=n(1413),a=n(70885),i=n(96985),l=n.n(i),o=n(91799),s=n(51858),c=n(25394),u=(n(46262),n(29407)),d=function(e){var t=e.metricFilter,n=e.useProductGraphConfig,s=(0,i.useState)({}),d=(0,a.Z)(s,2),p=d[0],h=d[1],f=n().settings;return(0,i.useEffect)((function(){h({settings:(0,r.Z)((0,r.Z)({padding:{bottom:75,left:75,right:45,top:45}},f),{},{isStandalone:!0,metric:t,metrics:[t]})})}),[t,f,h]),l().createElement(c.GraphCardContext.Provider,{value:p},l().createElement(u.GraphCardMetricTotals,null,l().createElement(o.GraphCardChart,null)))};d.defaultProps={metricFilter:{},useProductGraphConfig:s.useProductGraphConfig}},29407:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y,GraphCardMetricTotals:()=>y});var r=n(96985),a=n.n(r),i=n(75857),l=n(30381),o=n.n(l),s=n(68929),c=n.n(s),u=n(51858),d=n(25394),p=n(91339),h=n(1797),f=n(76006),m=n(65876),v=n(46262),g=n(83109),y=function(e){var t,n,r,l,s=e.children,u=e.t,d=e.useMetricsSelector,g=(0,e.useProductGraphTallyQuery)()[v.O6.START_DATE],y=d(),S=y.pending,E=y.error,C=y.fulfilled,T=y.dataSets,M=(void 0===T?[]:T)[0]||{},_=M.data,D=void 0===_?[]:_,R=M.id,b=M.meta,x=void 0===b?{}:b,P=D[D.length-1]||{},O=P.date,Z=P.hasData,F=P.y,G=D.find((function(e){return!0===e.isCurrentDate}))||{},k=G.date,w=G.hasData,H=G.y,N=x.totalMonthlyDate,I=x.totalMonthlyHasData,A=x.totalMonthlyValue,V=m.toolbarFieldOptions.find((function(e){return e.title===g||e.value.startDate.toISOString()===g}))||{},z=V.title,U=V.isCurrent,B=U?k:O,L=U?w:Z,Y=U?H:F;return a().createElement(i.Flex,{"data-test":"graphMetricTotals-".concat(c()(R)),className:"curiosity-usage-graph__totals"},a().createElement(i.Flex,{flex:{default:"flex_1"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},a().createElement(i.FlexItem,{className:"curiosity-usage-graph__totals-column"},a().createElement(i.Card,{"data-test":"graphDailyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(E?"blur":"")},a().createElement(i.CardTitle,null,u("curiosity-graph.cardHeadingMetric_dailyTotal",{context:R,month:z})),a().createElement(p.MinHeight,{key:"currentBody"},a().createElement(i.CardBody,null,a().createElement("div",null,S&&a().createElement(h.Loader,{variant:"skeleton",skeletonProps:{size:h.SkeletonSize.lg}}),C&&u("curiosity-graph.cardBodyMetric_total",{context:L&&R||"",total:null===(t=f.BM.numberDisplay(Y))||void 0===t||null===(n=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===n?void 0:n.toUpperCase()},[a().createElement("strong",{title:Y,"aria-label":Y})])))),a().createElement(p.MinHeight,{key:"currentFooter"},a().createElement(i.CardFooter,null,a().createElement("div",{className:L?"":"hidden"},C&&B&&u("curiosity-graph.cardFooterMetric",{date:o().utc(B).format(f.i3.timestampUTCTimeFormats.yearTimeShort)}))))),a().createElement(i.Card,{"data-test":"graphMonthlyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(E?"blur":"")},a().createElement(i.CardTitle,null,u("curiosity-graph.cardHeadingMetric_monthlyTotal",{context:R,month:z})),a().createElement(p.MinHeight,{key:"totalMonthlyBody"},a().createElement(i.CardBody,null,a().createElement("div",null,S&&a().createElement(h.Loader,{variant:"skeleton",skeletonProps:{size:h.SkeletonSize.lg}}),C&&u("curiosity-graph.cardBodyMetric_total",{context:I&&R||"",total:null===(r=f.BM.numberDisplay(A))||void 0===r||null===(l=r.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===l?void 0:l.toUpperCase()},[a().createElement("strong",{title:A,"aria-label":A})])))),a().createElement(p.MinHeight,{key:"totalMonthlyFooter"},a().createElement(i.CardFooter,null,a().createElement("div",{className:I?"":"hidden"},C&&N&&u("curiosity-graph.cardFooterMetric",{date:o().utc(N).format(f.i3.timestampUTCTimeFormats.yearTimeShort)}))))))),a().createElement(i.Flex,{flex:{default:"flex_3"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},a().createElement(i.FlexItem,{className:"curiosity-usage-graph__totals-graph-column"},s)))};y.defaultProps={children:null,t:g.translate,useMetricsSelector:d.useMetricsSelector,useProductGraphTallyQuery:u.useProductGraphTallyQuery}},11014:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u,GraphCardMetrics:()=>u});var r=n(1413),a=n(70885),i=n(96985),l=n.n(i),o=n(91799),s=n(51858),c=n(25394),u=(n(46262),function(e){var t=e.metricFilters,n=e.useProductGraphConfig,s=(0,i.useState)({}),u=(0,a.Z)(s,2),d=u[0],p=u[1],h=n().settings;return(0,i.useEffect)((function(){p({settings:(0,r.Z)((0,r.Z)({},h),{},{isStandalone:!1,metric:void 0,metrics:t})})}),[t,h,p]),l().createElement(c.GraphCardContext.Provider,{value:d},l().createElement(o.GraphCardChart,null))});u.defaultProps={metricFilters:[],useProductGraphConfig:s.useProductGraphConfig}},91339:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d,MinHeight:()=>d});var r=n(15671),a=n(43144),i=n(97326),l=n(60136),o=n(54062),s=n(96985),c=n.n(s),u=n(76006),d=function(e){(0,l.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).containerRef=c().createRef(),e.innerContainerRef=c().createRef(),e.updatedContainerWidth=0,e.resizeObserver=u.BM.noop,e.onResizeContainer=function(){var t,n,r=(0,i.Z)(e).updatedContainerWidth,a=e.props.updateOnResize,l=(null===(t=e.containerRef)||void 0===t||null===(n=t.current)||void 0===n?void 0:n.clientWidth)||0;a&&l!==r&&(e.updatedContainerWidth=l,e.setMinHeight(!0))},e}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.updateOnResize;window.setTimeout((function(){e.setMinHeight()})),t&&this.setResizeObserver()}},{key:"componentDidUpdate",value:function(){var e=this;this.props.updateOnContent&&window.setTimeout((function(){e.setMinHeight()}))}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setMinHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.props.minHeight,r=this.containerRef.current,a=void 0===r?{}:r,i=this.innerContainerRef.current,l=void 0===i?{}:i;null!=a&&a.style&&(n>(e=t?(null==l?void 0:l.clientHeight)||0:(null==a?void 0:a.clientHeight)||0)&&(e=n),a.style.minHeight="".concat(e,"px"))}},{key:"setResizeObserver",value:function(){var e=this;window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",e.onResizeContainer)}}},{key:"render",value:function(){var e=this.props.children;return c().createElement("div",{className:"curiosity-minheight",ref:this.containerRef},c().createElement("div",{ref:this.innerContainerRef},e))}}]),n}(c().Component);d.defaultProps={updateOnContent:!1,updateOnResize:!0,minHeight:0}},65876:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m,ToolbarFieldRangedMonthly:()=>m,toolbarFieldOptions:()=>h,useOnSelect:()=>f});var r=n(4942),a=n(1413),i=n(96985),l=n.n(i),o=n(61072),s=n(51858),c=n(49844),u=n(30446),d=n(76006),p=n(83109),h=d.i3.getRangedMonthDateTime().listDateTimeRanges.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{selected:!1})})),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useDispatch,n=void 0===t?o.Cr.reactRedux.useDispatch:t,a=e.useProduct,i=void 0===a?s.useProduct:a,l=i(),c=l.viewId,d=n();return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,n=t.startDate,a=t.endDate;d([{type:o.JD.query.SET_QUERY_CLEAR_INVENTORY_LIST,viewId:c},(0,r.Z)({type:o.JD.query.SET_QUERY_RHSM_TYPES[u.VN.GRANULARITY],viewId:c},u.VN.GRANULARITY,u.U9.DAILY),(0,r.Z)({type:o.JD.query.SET_QUERY_RHSM_TYPES[u.VN.START_DATE],viewId:c},u.VN.START_DATE,null==n?void 0:n.toISOString()),(0,r.Z)({type:o.JD.query.SET_QUERY_RHSM_TYPES[u.VN.END_DATE],viewId:c},u.VN.END_DATE,null==a?void 0:a.toISOString())])}},m=function(e){var t=e.isFilter,n=e.options,r=e.position,i=e.t,o=e.useOnSelect,s=(0,e.useProductGraphTallyQuery)()[u.VN.START_DATE],d=o(),p=n.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{selected:e.title===s||e.value.startDate.toISOString()===s})}));return l().createElement(c.Select,{"aria-label":i("curiosity-toolbar.placeholder".concat(t?"_filter":""),{context:"rangedMonthly"}),onSelect:d,options:p,placeholder:i("curiosity-toolbar.placeholder".concat(t?"_filter":""),{context:"rangedMonthly"}),position:r,maxHeight:250,"data-test":"toolbarFieldRangeGranularity"})};m.defaultProps={isFilter:!1,options:h,position:c.SelectPosition.left,t:p.translate,useOnSelect:f,useProductGraphTallyQuery:s.useProductGraphTallyQuery}}}]);
//# sourceMappingURL=../sourcemaps/608.e48e725204afbb79231c01c86c0fdc30.js.map