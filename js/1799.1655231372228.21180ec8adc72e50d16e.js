(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[1799,8139,1339],{91799:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C,GraphCardChart:()=>C});var a=r(1413),n=r(96985),i=r.n(n),o=r(75857),l=r(15451),s=r(51858),u=r(25394),c=r(78139),d=r(60930),h=r(64418),p=r(44024),m=r(99171),v=r(46262),f=r(91339),y=r(1797),g=r(83109),C=function(e){var t=e.t,r=e.useGetGraphTally,n=e.useGraphCardContext,s=e.useMetricsSelector,u=e.useProduct,g=e.useProductGraphTallyQuery,C=u().productId,T=n().settings,E=void 0===T?{}:T,b=E.actionDisplay,k=E.metric,x=E.metrics,D=void 0===x?[]:x,G=g()[v.O6.GRANULARITY],S=s(),P=S.pending,R=S.error,L=S.data,M=void 0===L?{}:L,_=S.dataSets,A=void 0===_?[]:_,F=r();(0,l.Z)((function(){F(D.map((function(e){var t=e.id;return{id:C,metric:t}})))}),[D,C,F]);var I=(null==k?void 0:k.id)&&"_".concat(null==k?void 0:k.id)||"",H=null;return"function"==typeof b&&(H=b({data:(0,a.Z)({},M)})),i().createElement(o.Card,{className:"curiosity-usage-graph"},i().createElement(f.MinHeight,{key:"headerMinHeight"},i().createElement(o.CardHeader,null,i().createElement(o.CardTitle,null,i().createElement(o.Title,{headingLevel:"h2",size:"lg"},t("curiosity-graph.cardHeading".concat(I),{context:C}),i().createElement(m.GraphCardChartTitleTooltip,null))),H&&i().createElement(o.CardActions,{className:R?"blur":""},H))),i().createElement(f.MinHeight,{key:"bodyMinHeight"},i().createElement(o.CardBody,null,i().createElement("div",{className:(R?"blur":P&&"fadein")||""},P&&i().createElement(y.Loader,{variant:"graph"}),!P&&i().createElement(d.Chart,Object.assign({},c.graphCardHelpers.generateExtendedChartSettings({settings:E,granularity:G}),{dataSets:A,chartLegend:function(e){var t=e.chart,r=e.datum;return i().createElement(h.GraphCardChartLegend,{chart:t,datum:r})},chartTooltip:function(e){var t=e.datum;return i().createElement(p.GraphCardChartTooltip,{datum:t})}}))))))};C.defaultProps={t:g.translate,useGetGraphTally:u.useGetGraphTally,useGraphCardContext:u.useGraphCardContext,useMetricsSelector:u.useMetricsSelector,useProduct:s.useProduct,useProductGraphTallyQuery:s.useProductGraphTallyQuery}},64418:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h,GraphCardChartLegend:()=>h});var a=r(96985),n=r.n(a),i=r(75857),o=r(89048),l=r(51858),s=r(20169),u=r(76006),c=r(83109),d=r(1138),h=function(e){var t=e.chart,r=e.datum,a=e.t,l=e.useDispatch,u=e.useSelectors,c=(0,e.useProduct)(),h=c.productLabel,p=c.viewId,m=l(),v=u(r.dataSets.map((function(e){var t=e.id;return function(e){var r;return null===(r=e.graph.legend)||void 0===r?void 0:r["".concat(p,"-").concat(t)]}})));(0,o.Z)((function(){r.dataSets.forEach((function(e,r){var a=e.id;((null==v?void 0:v[r])||t.isToggled(a))&&t.hide(a)}))}));var f=function(e){var r=t.toggle(e);m({type:s.JD.graph.SET_GRAPH_LEGEND,id:"".concat(p,"-").concat(e),value:r})};return n().createElement(n().Fragment,null,r.dataSets.map((function(e,r){var o=e.id,l=e.isThreshold,s=e.stroke,u=e.data,c=!(void 0===u?[]:u).find((function(e){var t=e.y,r=e.hasData;return t>=0&&!0===r||t>=0&&!0===l}))||!1,p=a(["curiosity-graph.label_".concat(l?"threshold":o),"curiosity-graph.label_no"],{product:h,context:h}),m=a("curiosity-graph.legendTooltip".concat(l?"_threshold":"","_").concat(o),{product:h,context:h},[n().createElement("span",{style:{whiteSpace:"nowrap"}})]),y=(null==v?void 0:v[r])||t.isToggled(o),g=n().createElement(i.Button,{onClick:function(){return f(o)},onKeyPress:function(){return f(o)},className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(o),variant:"link",component:"a",isDisabled:c,icon:(c||y)&&n().createElement(d.ChartIcon,{symbol:"eyeSlash"})||n().createElement(d.ChartIcon,{symbol:l?"dash":"square",style:{visibility:c||y?"hidden":"visible"},fill:s})},p);return m?n().createElement(i.Tooltip,{key:"curiosity-tooltip-".concat(o),content:n().createElement("p",null,m),position:i.TooltipPosition.top,enableFlip:!0,distance:5},g):g})))};h.defaultProps={chart:{hide:u.BM.noop,toggle:u.BM.noop,isToggled:u.BM.noop},datum:{dataSets:[]},t:c.translate,useDispatch:s.Cr.reactRedux.useDispatch,useSelectors:s.Cr.reactRedux.useSelectors,useProduct:l.useProduct}},99171:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,GraphCardChartTitleTooltip:()=>c});var a=r(96985),n=r.n(a),i=r(75857),o=r(36100),l=r(51858),s=r(25394),u=r(83109),c=function(e){var t=e.t,r=e.useGraphCardContext,a=(0,e.useProduct)().productId,l=r().settings,s=void 0===l?{}:l,u=s.isCardTitleDescription,c=s.metric,d=(null==c?void 0:c.id)&&"_".concat(null==c?void 0:c.id)||"";return u?n().createElement(i.Tooltip,{content:n().createElement("p",null,t("curiosity-graph.cardHeadingDescription".concat(d),{context:a})),position:i.TooltipPosition.top,enableFlip:!1,distance:5,entryDelay:100,exitDelay:0},n().createElement("span",{className:"curiosity-icon__question"},n().createElement(o.OutlinedQuestionCircleIcon,null))):null};c.defaultProps={t:u.translate,useProduct:l.useProduct,useGraphCardContext:s.useGraphCardContext}},44024:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,GraphCardChartTooltip:()=>d});var a=r(96985),n=r.n(a),i=r(51858),o=r(78139),l=r(83109),s=r(1138),u=r(46262),c=r(76006),d=function(e){var t=e.datum,r=e.t,a=e.useProduct,i=e.useProductGraphTallyQuery,l=a().productLabel,d=i()[u.O6.GRANULARITY],h=null,p=[],m=(t||{}).itemsByKey,v=void 0===m?{}:m;return Object.keys(v).reverse().forEach((function(e,t){var a,i,u,c;0===t&&(h=(0,o.getTooltipDate)({date:null===(c=v[e])||void 0===c?void 0:c.data.date,granularity:d}));var m={color:null===(a=v[e])||void 0===a?void 0:a.color};if("threshold"===(null===(i=v[e])||void 0===i?void 0:i.chartType)){var f,y,g,C=null!==(f=null===(y=v[e])||void 0===y?void 0:y.data.y)&&void 0!==f?f:r("curiosity-graph.label_noData");null!==(g=v[e])&&void 0!==g&&g.data.hasInfinite&&(C=m.color?n().createElement(s.ChartIcon,{symbol:"infinity",fill:"#ffffff",title:r("curiosity-graph.label_threshold",{context:"infinite"})}):r("curiosity-graph.label_threshold",{context:"infinite"})),m.label=r("curiosity-graph.label_threshold"),m.value=C}else{var T,E,b=!1===(null===(T=v[e])||void 0===T?void 0:T.data.hasData)&&r("curiosity-graph.label_noData")||(null===(E=v[e])||void 0===E?void 0:E.data.y)||0;m.label=r("curiosity-graph.label",{context:e,product:l}),m.value=b}m.chartType=null===(u=v[e])||void 0===u?void 0:u.chartType,p.push(m)})),n().createElement("div",{className:"curiosity-usage-graph__tooltip"},n().createElement("table",{summary:r("curiosity-graph.tooltipSummary")},p.length&&h&&n().createElement("thead",null,n().createElement("tr",null,n().createElement("th",{colSpan:2},h)))||null,p.length&&n().createElement("tbody",null,p.map((function(e){var t,r,a="number"==typeof e.value&&!Number.isInteger(e.value)&&(null===(t=c.BM.numberDisplay(e.value))||void 0===t||null===(r=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!0}))||void 0===r?void 0:r.toUpperCase())||e.value;return n().createElement("tr",{key:"tooltip-".concat(e.label)},n().createElement("th",null,"threshold"===e.chartType&&n().createElement(s.ChartIcon,{size:"sm",symbol:"dash",fill:e.color||"transparent"}),"threshold"!==e.chartType&&n().createElement(s.ChartIcon,{size:"sm",fill:e.color||"transparent"})," ",e.label),n().createElement("td",null,a))})))||null),!p.length&&r("curiosity-graph.label_noData",{context:"error"})||null)};d.defaultProps={datum:{},t:l.translate,useProduct:i.useProduct,useProductGraphTallyQuery:i.useProductGraphTallyQuery}},25394:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p,context:()=>p,GraphCardContext:()=>u,DEFAULT_CONTEXT:()=>s,useGetGraphTally:()=>d,useGraphCardContext:()=>c,useMetricsSelector:()=>h});var a=r(1413),n=r(96985),i=r.n(n),o=r(20169),l=r(51858),s=[{settings:{isStandalone:!1,metrics:[],metric:void 0}},r(62834).B.noop],u=i().createContext(s),c=function(){return(0,n.useContext)(u)},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useDispatch,r=void 0===t?o.Cr.reactRedux.useDispatch:t,a=e.useProductGraphTallyQuery,n=void 0===a?l.useProductGraphTallyQuery:a,i=n(),s=r();return function(e){return o.Ak.rhsm.getGraphTally(e,i)(s)}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGraphCardContext,r=void 0===t?c:t,n=e.useSelectors,i=void 0===n?o.Cr.reactRedux.useSelectors:n,s=e.useProduct,u=void 0===s?l.useProduct:s,d=u(),h=d.productId,p=r(),m=p.settings,v=void 0===m?{}:m,f=v.metrics,y=void 0===f?[]:f,g={},C=i(y.map((function(e){var t=e.id;return function(e){var r;return null===(r=e.graph.tally)||void 0===r?void 0:r["".concat(h,"_").concat(t)]}})),[]),T=!1,E=!1,b=0,k=C.map((function(e,t){var r,n,i=e||{},o=i.pending,l=i.fulfilled,s=i.error,u=i.cancelled;!(!o&&!u)&&(T=!0),l&&(E=!0),s&&(b+=1);var c=(0,a.Z)((0,a.Z)({},y[t]),{},{data:(null==e||null===(r=e.data)||void 0===r?void 0:r.data)||[],meta:(null==e||null===(n=e.data)||void 0===n?void 0:n.meta)||{}});return g[y[t].id]=c,c})),x={data:g,dataSets:k,error:!1,fulfilled:!1,pending:!1};return b===k.length?x.error=!0:T?x.pending=!0:E&&(x.fulfilled=!0),x},p={GraphCardContext:u,DEFAULT_CONTEXT:s,useGetGraphTally:d,useGraphCardContext:c,useMetricsSelector:h}},78139:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y,graphCardHelpers:()=>y,generateChartSettings:()=>d,generateExtendedChartSettings:()=>f,getChartXAxisLabelIncrement:()=>h,getTooltipDate:()=>p,xAxisTickFormat:()=>m,yAxisTickFormat:()=>v});var a=r(1413),n=r(45987),i=r(30381),o=r.n(i),l=r(98454),s=r(30446),u=r(76006),c=["id","isStandalone","isThreshold"],d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],r=[];return e.forEach((function(e){var i=e.id,o=e.isStandalone,s=void 0!==o&&o,u=e.isThreshold,d=void 0!==u&&u,h=(0,n.Z)(e,c);if(i){var p={id:i,isStacked:!d,isStandalone:s,isThreshold:d,strokeWidth:2};d&&(p.stroke=l.chart_color_green_300.value,p.strokeDasharray="4,3",p.strokeWidth=3),s?t.push((0,a.Z)((0,a.Z)({},p),h)):r.push((0,a.Z)((0,a.Z)({},p),h))}})),{standaloneFilters:t,groupedFilters:r}},h=function(e){switch(e){case s.U9.DAILY:return 5;case s.U9.WEEKLY:case s.U9.MONTHLY:return 2;case s.U9.QUARTERLY:default:return 1}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.date,r=e.granularity,a=o().utc(t);switch(r){case s.U9.QUARTERLY:return"".concat(a.format(u.i3.timestampQuarterFormats.yearShort)," - ").concat(a.add(1,"quarter").format(u.i3.timestampQuarterFormats.yearShort));case s.U9.MONTHLY:return a.format(u.i3.timestampMonthFormats.yearLong);case s.U9.WEEKLY:return"".concat(a.format(u.i3.timestampDayFormats.short)," - ").concat(a.add(1,"week").format(u.i3.timestampDayFormats.yearShort));case s.U9.DAILY:default:return a.format(u.i3.timestampDayFormats.long)}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.callback,r=e.date,a=e.granularity,n=e.tick,i=e.previousDate;if(r&&a){if(t)return t({callback:t,date:r,granularity:a,tick:n,previousDate:i});var l,c=o().utc(r),d=0!==n&&Number.parseInt(c.year(),10)!==Number.parseInt(o().utc(i).year(),10);switch(a){case s.U9.QUARTERLY:l=(l=d?c.format(u.i3.timestampQuarterFormats.yearShort):c.format(u.i3.timestampQuarterFormats.short)).replace(/\s/,"\n");break;case s.U9.MONTHLY:l=(l=d?c.format(u.i3.timestampMonthFormats.yearShort):c.format(u.i3.timestampMonthFormats.short)).replace(/\s/,"\n");break;case s.U9.WEEKLY:case s.U9.DAILY:default:l=(l=d?c.format(u.i3.timestampDayFormats.yearShort):c.format(u.i3.timestampDayFormats.short)).replace(/\s(\d{4})$/,"\n$1")}return l}},v=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.callback,n=r.tick;return a?a({tick:n}):null===(e=u.BM.numberDisplay(n))||void 0===e||null===(t=e.format({average:!0,mantissa:1,trimMantissa:!0,lowPrecision:!1}))||void 0===t?void 0:t.toUpperCase()},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.settings,r=e.granularity;return(0,a.Z)((0,a.Z)({},t),{},{xAxisLabelIncrement:h(r),xAxisTickFormat:function(e){var a=e.item,n=e.previousItem,i=e.tick;return m({callback:null==t?void 0:t.xAxisTickFormat,tick:i,date:a.date,previousDate:n.date,granularity:r})},yAxisTickFormat:function(e){var r=e.tick;return v({callback:null==t?void 0:t.yAxisTickFormat,tick:r})}})},y={generateChartSettings:d,generateExtendedChartSettings:f,getChartXAxisLabelIncrement:h,getTooltipDate:p,xAxisTickFormat:m,yAxisTickFormat:v}},91339:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,MinHeight:()=>d});var a=r(15671),n=r(43144),i=r(97326),o=r(60136),l=r(54062),s=r(96985),u=r.n(s),c=r(76006),d=function(e){(0,o.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;(0,a.Z)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).containerRef=u().createRef(),e.innerContainerRef=u().createRef(),e.updatedContainerWidth=0,e.resizeObserver=c.BM.noop,e.onResizeContainer=function(){var t,r,a=(0,i.Z)(e).updatedContainerWidth,n=e.props.updateOnResize,o=(null===(t=e.containerRef)||void 0===t||null===(r=t.current)||void 0===r?void 0:r.clientWidth)||0;n&&o!==a&&(e.updatedContainerWidth=o,e.setMinHeight(!0))},e}return(0,n.Z)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props.updateOnResize;window.setTimeout((function(){e.setMinHeight()})),t&&this.setResizeObserver()}},{key:"componentDidUpdate",value:function(){var e=this;this.props.updateOnContent&&window.setTimeout((function(){e.setMinHeight()}))}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setMinHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.props.minHeight,a=this.containerRef.current,n=void 0===a?{}:a,i=this.innerContainerRef.current,o=void 0===i?{}:i;null!=n&&n.style&&(r>(e=t?(null==o?void 0:o.clientHeight)||0:(null==n?void 0:n.clientHeight)||0)&&(e=r),n.style.minHeight="".concat(e,"px"))}},{key:"setResizeObserver",value:function(){var e=this;window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",e.onResizeContainer)}}},{key:"render",value:function(){var e=this.props.children;return u().createElement("div",{className:"curiosity-minheight",ref:this.containerRef},u().createElement("div",{ref:this.innerContainerRef},e))}}]),r}(u().Component);d.defaultProps={updateOnContent:!1,updateOnResize:!0,minHeight:0}},99376:(e,t)=>{var r=Object.keys;t.D=function(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;for(var a=r(e),n=a.length,i=0;i<n;i++)if(!(a[i]in t))return!1;for(i=0;i<n;i++)if(e[a[i]]!==t[a[i]])return!1;return n===r(t).length}},15451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(99376),n=r(96985);var i=function(e,t){return e.every((function(e,r){return(0,a.D)(e,t[r])}))};const o=function(e,t){!function(e,t,r){var a=(0,n.useRef)(void 0);a.current&&r(t,a.current)||(a.current=t),(0,n.useEffect)(e,a.current)}(e,t,i)}}}]);
//# sourceMappingURL=../sourcemaps/1799.9c14910a04b65df1a7f537193daccf6a.js.map