"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[4059,608,7493,9051,2738,5876,4097],{10608:(e,t,r)=>{r.r(t),r.d(t,{default:()=>N,ConnectedGraphCard:()=>N,GraphCard:()=>D});var a=r(56949),n=r(90237),i=r(65337),o=r(39576),l=r(80239),u=r(92950),c=r.n(u),s=r(21012),d=r(28070),p=r(18446),v=r.n(p),y=r(95423),h=r(76006),E=r(30446),T=r(78139),f=r(44024),m=r(64418),I=r(60930),g=r(1797),S=r(91339),b=r(83109),D=function(e){(0,o.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;(0,n.Z)(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onUpdateGraphData=function(){var t=e.props,r=t.getGraphReportsCapacity,a=t.isDisabled,n=t.productId,i=t.query,o=e.getQueryGranularity(),l=i[E.VN.START_DATE],u=i[E.VN.END_DATE];!a&&o&&l&&u&&n&&r(n,i)},e}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){this.onUpdateGraphData()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.productId,a=t.query;r===e.productId&&v()(a,e.query)||this.onUpdateGraphData()}},{key:"getQueryGranularity",value:function(){var e=this.props.query;return null==e?void 0:e[E.VN.GRANULARITY]}},{key:"renderChart",value:function(){var e,t,r=this.props,a=r.filterGraphData,n=r.graphData,i=r.productLabel,o=r.query,l=r.viewId,u=this.getQueryGranularity(),s={xAxisLabelIncrement:T.graphCardHelpers.getChartXAxisLabelIncrement(u),xAxisTickFormat:function(e){var t=e.item,r=e.previousItem,a=e.tick;return T.graphCardHelpers.xAxisTickFormat({tick:a,date:t.date,previousDate:r.date,granularity:u})},yAxisTickFormat:T.graphCardHelpers.yAxisTickFormat};return c().createElement(I.Chart,Object.assign({key:"chart_".concat(JSON.stringify(o))},s,{dataSets:(e=n,t=function(t){var r={data:e[t],id:t,strokeWidth:2,isStacked:!/^threshold/.test(t),isThreshold:/^threshold/.test(t)};return/^threshold/.test(t)&&(r.stroke=d.chart_color_green_300.value,r.strokeDasharray="4,3",r.strokeWidth=3),r},a.length?a.map((function(e){return Object.assign(t(e.id),e)})):Object.keys(e).map((function(e){return t(e)}))),chartLegend:function(e){var t=e.chart,r=e.datum;return c().createElement(m.default,{chart:t,datum:r,productLabel:i,viewId:l})},chartTooltip:function(e){var t=e.datum;return c().createElement(f.default,{datum:t,granularity:u,productLabel:i})}}))}},{key:"render",value:function(){var e=this.props,t=e.cardTitle,r=e.children,n=e.error,i=e.graphData,o=e.meta,l=e.isDisabled,u=e.pending,d=e.settings;if(l)return null;var p=null;return"function"==typeof(null==d?void 0:d.actionDisplay)&&(p=d.actionDisplay({data:(0,a.Z)({},i),meta:(0,a.Z)({},o)})),c().createElement(s.Card,{className:"curiosity-usage-graph"},c().createElement(S.MinHeight,{key:"headerMinHeight"},c().createElement(s.CardHeader,null,c().createElement(s.CardTitle,null,c().createElement(s.Title,{headingLevel:"h2",size:"lg"},t)),c().createElement(s.CardActions,{className:n?"blur":""},c().createElement(c().Fragment,{key:"actionDisplay"},p),r))),c().createElement(S.MinHeight,{key:"bodyMinHeight"},c().createElement(s.CardBody,null,c().createElement("div",{className:(n?"blur":u&&"fadein")||""},u&&c().createElement(g.Loader,{variant:"graph"}),!u&&this.renderChart()))))}}]),r}(c().Component);D.defaultProps={cardTitle:null,children:null,error:!1,filterGraphData:[],getGraphReportsCapacity:h.BM.noop,graphData:{},meta:{},isDisabled:h.BM.UI_DISABLED_GRAPH,pending:!1,productLabel:"",settings:{},t:b.translate,viewId:"graphCard"};var _=y.R1.graphCard.makeGraphCard(),N=(0,y.$j)(_,(function(e){return{getGraphReportsCapacity:function(t,r){return e(y.Ak.rhsm.getGraphReportsCapacity(t,r))}}}))(D)},47493:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A,ConnectedInventorySubscriptions:()=>A,InventorySubscriptions:()=>R});var a=r(15274),n=r(90237),i=r(65337),o=r(39576),l=r(80239),u=r(92950),c=r.n(u),s=r(18446),d=r.n(s),p=r(86445),v=r(21012),y=r(32875),h=r(68929),E=r.n(h),T=r(76006),f=r(95423),m=r(78697),I=r(1797),g=r(91339),S=r(44822),b=r(68900),D=r(65020),_=r(30446),N=r(83109),R=function(e){(0,o.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;(0,n.Z)(this,r);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).onColumnSort=function(t,r){var n,i=r.direction,o=r.id,l=e.props.productId,u=Object.values(_.Fs).find((function(e){return E()(e)===o}));if(u){switch(i){case p.SortByDirection.desc:n=_.hb.DESCENDING;break;default:n=_.hb.ASCENDING}f.h.dispatch([(0,a.Z)({type:f.JD.query.SET_QUERY_RHSM_SUBSCRIPTIONS_INVENTORY_TYPES[_.VN.DIRECTION],viewId:l},_.VN.DIRECTION,n),(0,a.Z)({type:f.JD.query.SET_QUERY_RHSM_SUBSCRIPTIONS_INVENTORY_TYPES[_.VN.SORT],viewId:l},_.VN.SORT,u)])}else(T.BM.DEV_MODE||T.BM.REVIEW_MODE)&&console.warn("Sorting can only be performed on select fields, confirm field ".concat(o," is allowed."))},e.onPage=function(t){var r=t.offset,n=t.perPage,i=e.props.productId;f.h.dispatch([(0,a.Z)({type:f.JD.query.SET_QUERY_RHSM_SUBSCRIPTIONS_INVENTORY_TYPES[_.VN.OFFSET],viewId:i},_.VN.OFFSET,r),(0,a.Z)({type:f.JD.query.SET_QUERY_RHSM_SUBSCRIPTIONS_INVENTORY_TYPES[_.VN.LIMIT],viewId:i},_.VN.LIMIT,n)])},e.onUpdateInventoryData=function(){var t=e.props,r=t.getSubscriptionsInventory,a=t.isDisabled,n=t.productId,i=t.query;!a&&n&&r(n,i)},e}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){this.onUpdateInventoryData()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.productId,a=t.query;r===e.productId&&d()(a,e.query)||this.onUpdateInventoryData()}},{key:"renderTable",value:function(){var e=this,t=this.props,r=t.filterInventoryData,a=t.listData,n=t.query,i=t.session,o=[],l=a.map((function(t){var a=Object.assign({},t),l=S.inventoryListHelpers.parseRowCellsListData({filters:S.inventoryListHelpers.parseInventoryFilters({filters:r,onSort:e.onColumnSort,query:n}),cellData:a,session:i}),u=l.columnHeaders,c=l.cells;return o=u,{cells:c}}));return c().createElement(m.default,{borders:!0,variant:p.TableVariant.compact,className:"curiosity-inventory-list",columnHeaders:o,rows:l})}},{key:"render",value:function(){var e=this.props,t=e.error,r=e.filterInventoryData,a=e.fulfilled,n=e.isDisabled,i=e.itemCount,o=e.listData,l=e.pending,u=e.perPageDefault,s=e.query,d=e.t;if(n)return c().createElement(v.Card,{className:"curiosity-inventory-card__disabled"},c().createElement(v.CardBody,null,c().createElement(v.Bullseye,null,d("curiosity-inventory.tab",{context:"disabled"}))));var h=s[_.VN.LIMIT]||u,E=s[_.VN.OFFSET],T=D.paginationHelpers.isLastPage(E,h,i),f=!0===a&&i<h&&"bodyMinHeight-".concat(h,"-resize")||!0===a&&T&&"bodyMinHeight-".concat(h,"-resize")||!0===t&&"bodyMinHeight-".concat(h,"-resize")||"bodyMinHeight-".concat(h);return c().createElement(v.Card,{className:"curiosity-inventory-card"},c().createElement(g.MinHeight,{key:"headerMinHeight",updateOnContent:!0},c().createElement(v.CardHeader,{className:t?"hidden":"","aria-hidden":t||!1},c().createElement(v.CardActions,{className:i?"":"transparent","aria-hidden":!i||!1},c().createElement(b.default,{isCompact:!0,isDisabled:l||t,itemCount:i,offset:E,onPage:this.onPage,onPerPage:this.onPage,perPage:h})))),c().createElement(g.MinHeight,{key:f,updateOnContent:!0},c().createElement(v.CardBody,null,c().createElement("div",{className:(t?"blur":l&&"fadein")||""},l&&c().createElement(I.Loader,{variant:"table",tableProps:{className:"curiosity-inventory-list",colCount:(null==r?void 0:r.length)||(null==o?void 0:o[0])&&Object.keys(o[0]).length||1,colWidth:(null==r?void 0:r.length)&&r.map((function(e){return e.cellWidth}))||[],rowCount:(null==o?void 0:o.length)||h,variant:p.TableVariant.compact}}),!l&&this.renderTable()))),c().createElement(g.MinHeight,{key:"footerMinHeight",updateOnContent:!0},c().createElement(v.CardFooter,{className:(t?"hidden":!i&&"transparent")||"","aria-hidden":t||!i||!1},c().createElement(y.Z,{isFooter:!0},c().createElement(b.default,{dropDirection:"up",isDisabled:l||t,itemCount:i,offset:E,onPage:this.onPage,onPerPage:this.onPage,perPage:h})))))}}]),r}(c().Component);R.defaultProps={error:!1,fulfilled:!1,filterInventoryData:[],getSubscriptionsInventory:T.BM.noop,isDisabled:T.BM.UI_DISABLED_TABLE_SUBSCRIPTIONS,itemCount:0,listData:[],pending:!1,perPageDefault:10,session:{},t:N.translate};var C=f.R1.subscriptionsList.makeSubscriptionsList(),A=(0,f.$j)(C,(function(e){return{getSubscriptionsInventory:function(t,r){return e(f.Ak.rhsm.getSubscriptionsInventory(t,r))}}}))(R)},69051:(e,t,r)=>{r.r(t),r.d(t,{default:()=>T,ConnectedInventoryTabs:()=>T,InventoryTabs:()=>E,InventoryTab:()=>h.InventoryTab});var a=r(15274),n=r(90237),i=r(65337),o=r(39576),l=r(80239),u=r(92950),c=r.n(u),s=r(21012),d=r(95423),p=r(70031),v=r(76006),y=r(83109),h=r(80931),E=function(e){(0,o.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;(0,n.Z)(this,r);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).onTab=function(t){var r=t.index,n=e.props.productId;d.h.dispatch({type:d.JD.inventory.SET_INVENTORY_TAB,tabs:(0,a.Z)({},n,r)})},e}return(0,i.Z)(r,[{key:"render",value:function(){var e=this.props,t=e.activeTab,r=e.children,a=e.defaultActiveTab,n=e.isDisabled,i=e.t;if(n)return null;var o=c().Children.toArray(r).map((function(e,t){var r=e.props,a=void 0===r?{}:r;return{active:a.active||!1,content:a.children||e,title:a.title||i("curiosity-inventory.tabSubHeading",{count:t})}}));return c().createElement(c().Fragment,null,c().createElement(s.Title,{headingLevel:"h2",className:"sr-only"},i("curiosity-inventory.tabHeading",{count:o.length})),c().createElement(p.Tabs,{activeTab:t,defaultActiveTab:a,onTab:this.onTab,tabs:o}))}}]),r}(c().Component);E.defaultProps={activeTab:0,defaultActiveTab:0,isDisabled:v.BM.UI_DISABLED_TABLE,t:y.translate};var T=(0,d.$j)((function(e,t){var r,a=e.inventory,n=t.productId;return{activeTab:null===(r=a.tabs)||void 0===r?void 0:r[n]}}))(E)},81114:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S,ProductViewOpenShiftContainer:()=>S});var a=r(92950),n=r.n(a),i=r(21012),o=r(31369),l=r(3281),u=r(51858),c=r(52422),s=r(30446),d=r(95423),p=r(10608),v=r(74097),y=r(2738),h=r(65876),E=r(92227),T=r(86876),f=r(47493),m=r(69051),I=r(83109),g=r(76006),S=function(e){var t=e.t,r=(0,e.useRouteDetail)(),a=r.productParameter,l=r.productConfig,I=d.Cr.reactRedux.useSelector((function(e){var t,r;return null===(t=e.view.query)||void 0===t||null===(r=t[l[0].viewId])||void 0===r?void 0:r[s.VN.UOM]}),null);return n().createElement(c.PageLayout,null,n().createElement(c.PageHeader,{productLabel:a},t("curiosity-view.title",{appName:g.BM.UI_DISPLAY_NAME,context:a})),n().createElement(c.PageColumns,null,l.map((function(e){return function(e,r){var a=e.productContextFilterUom,l=e.query,I=void 0===l?{}:l,g=e.graphTallyQuery,S=void 0===g?{}:g,b=e.inventoryHostsQuery,D=void 0===b?{}:b,_=e.inventorySubscriptionsQuery,N=void 0===_?{}:_,R=e.initialGraphFilters,C=void 0===R?[]:R,A=e.initialGraphSettings,P=void 0===A?{}:A,w=e.initialGuestsFilters,O=void 0===w?[]:w,U=e.initialInventoryFilters,M=void 0===U?[]:U,H=e.initialInventorySettings,V=void 0===H?{}:H,k=e.initialSubscriptionsInventoryFilters,L=e.initialToolbarFilters,Y=e.productLabel,F=e.productId,Z=e.viewId;if(!F||!Z)return null;var x,G=d.IT.parseRhsmQuery(I,{graphTallyQuery:S,inventoryHostsQuery:D,inventorySubscriptionsQuery:N}),q=G.graphTallyQuery,Q=G.inventoryHostsQuery,B=G.inventorySubscriptionsQuery,J=G.toolbarQuery,j=C,W=M,z=k;if(a){x=r||I[s.VN.UOM];var $=function(e){var t=e.id;return!e.isOptional||new RegExp(x,"i").test(t)};j=C.filter($),W=M.filter($),z=k.filter($)}var X=n().createElement(n().Fragment,null,t("curiosity-graph.cardHeading",{context:F}),n().createElement(i.Tooltip,{content:n().createElement("p",null,t("curiosity-graph.cardHeadingDescription",{context:F})),position:i.TooltipPosition.top,enableFlip:!1,distance:5,entryDelay:100,exitDelay:0},n().createElement("sup",{className:"curiosity-icon__info"},n().createElement(o.ZP,null))));return n().createElement(u.ProductViewContext.Provider,{value:e,key:"product_".concat(F,"_").concat(x)},L&&n().createElement(c.PageToolbar,null,n().createElement(E.default,{filterOptions:L,productId:F,query:J,viewId:Z})),n().createElement(c.PageSection,null,n().createElement(p.default,{key:"graph_".concat(F),filterGraphData:j,settings:P,query:q,productId:F,viewId:Z,cardTitle:X,productLabel:Y},F===s.wc.OPENSHIFT&&x&&n().createElement(v.ToolbarFieldUom,{value:x,viewId:Z}),F===s.wc.OPENSHIFT&&n().createElement(y.ToolbarFieldGranularity,{value:S[s.VN.GRANULARITY],viewId:Z}),F===s.wc.OPENSHIFT_METRICS&&n().createElement(h.ToolbarFieldRangedMonthly,{viewId:Z}))),n().createElement(c.PageSection,null,n().createElement(m.default,{key:"inventory_".concat(F),productId:F},n().createElement(m.InventoryTab,{key:"inventory_hosts_".concat(F),title:t("curiosity-inventory.tabHosts",{context:["noInstances",F]})},n().createElement(T.default,{key:"inv_".concat(F),filterGuestsData:O,filterInventoryData:W,productId:F,settings:V,query:Q,viewId:Z})),k&&n().createElement(m.InventoryTab,{key:"inventory_subs_".concat(F),title:t("curiosity-inventory.tabSubscriptions",{context:F})},n().createElement(f.default,{key:"subs_".concat(F),filterInventoryData:z,productId:F,query:B,viewId:Z})))))}(e,I)}))))};S.defaultProps={t:I.translate,useRouteDetail:l.Tu}},2738:(e,t,r)=>{r.r(t),r.d(t,{default:()=>v,ToolbarFieldGranularity:()=>v,toolbarFieldOptions:()=>p});var a=r(15274),n=r(56949),i=r(92950),o=r.n(i),l=r(95423),u=r(49844),c=r(30446),s=r(76006),d=r(83109),p=Object.values(c.U9).map((function(e){return{title:(0,d.translate)("curiosity-toolbar.granularity",{context:e}),value:e,selected:!1}})),v=function e(t){var r=t.options,i=t.t,d=t.value,p=t.viewId,v=l.Cr.reactRedux.useSelector((function(e){var t,r;return null===(t=e.view.graphTallyQuery)||void 0===t||null===(r=t[p])||void 0===r?void 0:r[c.VN.GRANULARITY]}),d),y=r.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{selected:e.value===v})}));return o().createElement(u.Select,{"aria-label":i("curiosity-toolbar.placeholder",{context:"granularity"}),onSelect:function(e){var t=s.i3.getRangedDateTime(e.value),r=t.startDate,n=t.endDate;l.h.dispatch([{type:l.JD.query.SET_QUERY_CLEAR_INVENTORY_LIST,viewId:p},(0,a.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[c.VN.GRANULARITY],viewId:p},c.VN.GRANULARITY,e.value),(0,a.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[c.VN.START_DATE],viewId:p},c.VN.START_DATE,r.toISOString()),(0,a.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[c.VN.END_DATE],viewId:p},c.VN.END_DATE,n.toISOString())])},options:y,selectedOptions:v,placeholder:i("curiosity-toolbar.placeholder",{context:"granularity"}),"data-test":e.defaultProps.viewId})};v.defaultProps={options:p,t:d.translate,value:c.U9.DAILY,viewId:"toolbarFieldGranularity"}},65876:(e,t,r)=>{r.r(t),r.d(t,{default:()=>v,ToolbarFieldRangedMonthly:()=>v,toolbarFieldOptions:()=>p});var a=r(15274),n=r(56949),i=r(92950),o=r.n(i),l=r(95423),u=r(49844),c=r(30446),s=r(76006),d=r(83109),p=s.i3.getRangedMonthDateTime().listDateTimeRanges.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{selected:!1})})),v=function e(t){var r=t.options,i=t.t,s=t.value,d=t.viewId,p=l.Cr.reactRedux.useSelector((function(e){var t,r;return null===(t=e.view.query)||void 0===t||null===(r=t[d])||void 0===r?void 0:r[c.VN.START_DATE]}),s),v=r.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{selected:e.title===p||e.value.startDate.toISOString()===p})}));return o().createElement(u.Select,{"aria-label":i("curiosity-toolbar.placeholder",{context:"granularity"}),onSelect:function(e){var t=e.value,r=t.startDate,n=t.endDate;l.h.dispatch([{type:l.JD.query.SET_QUERY_CLEAR_INVENTORY_LIST,viewId:d},(0,a.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[c.VN.GRANULARITY],viewId:d},c.VN.GRANULARITY,c.U9.DAILY),(0,a.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[c.VN.START_DATE],viewId:d},c.VN.START_DATE,r.toISOString()),(0,a.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[c.VN.END_DATE],viewId:d},c.VN.END_DATE,n.toISOString())])},options:v,placeholder:i("curiosity-toolbar.placeholder",{context:"granularity"}),position:u.SelectPosition.right,maxHeight:250,"data-test":e.defaultProps.viewId})};v.defaultProps={options:p,t:d.translate,value:(0,d.translate)("curiosity-toolbar.granularityRange",{context:"current"}),viewId:"toolbarFieldRangeGranularity"}},74097:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p,ToolbarFieldUom:()=>p,toolbarFieldOptions:()=>d});var a=r(15274),n=r(56949),i=r(92950),o=r.n(i),l=r(95423),u=r(49844),c=r(30446),s=r(83109),d=Object.values(c.lu).map((function(e){return{title:(0,s.translate)("curiosity-toolbar.uom",{context:e}),value:e,selected:!1}})),p=function e(t){var r=t.options,i=t.t,s=t.value,d=t.viewId,p=l.Cr.reactRedux.useSelector((function(e){var t,r;return null===(t=e.view.query)||void 0===t||null===(r=t[d])||void 0===r?void 0:r[c.VN.UOM]}),s),v=r.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{selected:e.value===p})}));return o().createElement(u.Select,{"aria-label":i("curiosity-toolbar.placeholder",{context:"uom"}),onSelect:function(e){return l.h.dispatch([{type:l.JD.query.SET_QUERY_RESET_INVENTORY_LIST,viewId:d},(0,a.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[c.VN.UOM],viewId:d},c.VN.UOM,e.value)])},options:v,selectedOptions:p,placeholder:i("curiosity-toolbar.placeholder",{context:"uom"}),"data-test":e.defaultProps.viewId})};p.defaultProps={options:d,t:s.translate,value:c.lu.CORES,viewId:"toolbarFieldUom"}}}]);
//# sourceMappingURL=../sourcemaps/4059.67db5c9f20668776c5d56e2c858b5c58.js.map