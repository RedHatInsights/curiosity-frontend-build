"use strict";(self.webpackChunksubscriptions=self.webpackChunksubscriptions||[]).push([[5925,1339,353],{10608:function(e,t,n){n.r(t),n.d(t,{GraphCard:function(){return u},default:function(){return u}});var r=n(92950),a=n.n(r),i=n(76006),l=n(29407),s=n(91799),o=n(25394),u=function(e){var t=e.isDisabled,n=(0,e.useParseFiltersSettings)().filtersSettings;return t||null==n||!n.length?null:null==n?void 0:n.map((function(e){var t,n,r;return a().createElement(o.GraphCardContext.Provider,{key:"graphCard-".concat(null==e||null===(t=e.settings)||void 0===t||null===(n=t.metrics)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.id),value:e},a().createElement(l.GraphCardMetricTotals,null,a().createElement(s.GraphCardChart,null)))}))};u.defaultProps={isDisabled:i.BM.UI_DISABLED_GRAPH,useParseFiltersSettings:o.useParseFiltersSettings}},29407:function(e,t,n){n.r(t),n.d(t,{GraphCardMetricTotals:function(){return g},default:function(){return g}});var r=n(1413),a=n(92950),i=n.n(a),l=n(90154),s=n(68929),o=n.n(s),u=n(51858),d=n(25394),c=n(1797),p=n(65876),h=n(46262),v=n(78139),f=n(76006),g=function(e){var t,n=e.children,a=e.useGraphCardContext,s=e.useMetricsSelector,u=e.useProductGraphTallyQuery,d=a().settings,g=void 0===d?{}:d,m=u(),C=s(),y=C.pending,E=C.error,k=C.fulfilled,S=C.dataSets,R=void 0===S?[]:S,z=m[h.O6.START_DATE],M=(p.toolbarFieldOptions.find((function(e){return e.title===z||e.value.startDate.toISOString()===z}))||{}).isCurrent;if(null!=g&&g.isMetricDisplay&&null!=g&&null!==(t=g.cards)&&void 0!==t&&t.length){var H,P,T,b=f.BM.setImmutableData({dataSets:R.map((function(e){var t=e||{},n=t.id,a=t.metric;return(0,r.Z)((0,r.Z)({},e),{},{display:(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},v.graphCardHelpers.getDailyMonthlyTotals({dataSet:e,isCurrent:M})),v.graphCardHelpers.getRemainingCapacity((0,r.Z)((0,r.Z)({},v.graphCardHelpers.getPrepaidTallyCapacity({data:R})),{},{isCurrent:M}))),v.graphCardHelpers.getRemainingOverage((0,r.Z)((0,r.Z)({},v.graphCardHelpers.getPrepaidTallyCapacity({data:R})),{},{isCurrent:M}))),{},{chartId:n,metricId:a})})}))},{isClone:!0});return i().createElement("div",{"data-test":"graphMetricTotals-".concat(null==g||null===(H=g.groupMetric)||void 0===H||null===(P=H.map((function(e){return o()(e)})))||void 0===P?void 0:P.join("-")),"data-test-data":JSON.stringify(b),className:"curiosity-usage-graph__totals"},i().createElement("div",null,i().createElement("div",{className:"curiosity-usage-graph__totals-column"},null==g||null===(T=g.cards)||void 0===T?void 0:T.map((function(e,t){var n=e.key,r=e.header,a=e.body,s=e.footer;return i().createElement(l.Card,{key:n||f.BM.generateHash({metricDisplayPassedData:b,index:t}),isPlain:!0,"data-test":"graphMetricTotalsCard-".concat(t),className:"curiosity-usage-graph__totals-column-card ".concat(E?"blur":"")},i().createElement(l.CardHeader,null,i().createElement(l.CardTitle,null,i().createElement(l.Title,{headingLevel:"h2",size:"md"},y&&i().createElement(c.Loader,{variant:"skeleton",skeletonProps:{size:c.SkeletonSize.lg}}),k&&("function"==typeof r&&r(b)||r)))),i().createElement(l.CardBody,null,i().createElement("div",null,y&&i().createElement(c.Loader,{variant:"skeleton",skeletonProps:{size:c.SkeletonSize.lg,height:"60px"}}),k&&("function"==typeof a&&a(b)||a))),i().createElement(l.CardFooter,null,i().createElement("div",null,y&&i().createElement(c.Loader,{variant:"skeleton",skeletonProps:{size:c.SkeletonSize.lg}}),k&&("function"==typeof s&&s(b)||s))))})))),i().createElement("div",null,i().createElement("div",{className:"curiosity-usage-graph__totals-graph-column"},n)))}return i().createElement("div",{"data-test":"graphStandalone",className:"curiosity-usage-graph__standalone"},n)};g.defaultProps={children:null,useGraphCardContext:d.useGraphCardContext,useMetricsSelector:d.useMetricsSelector,useProductGraphTallyQuery:u.useProductGraphTallyQuery}},91339:function(e,t,n){n.r(t),n.d(t,{MinHeight:function(){return c},default:function(){return c}});var r=n(15671),a=n(43144),i=n(97326),l=n(79340),s=n(54062),o=n(92950),u=n.n(o),d=n(76006),c=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).containerRef=u().createRef(),e.innerContainerRef=u().createRef(),e.updatedContainerWidth=0,e.resizeObserver=d.BM.noop,e.onResizeContainer=function(){var t,n,r=(0,i.Z)(e).updatedContainerWidth,a=e.props.updateOnResize,l=(null===(t=e.containerRef)||void 0===t||null===(n=t.current)||void 0===n?void 0:n.clientWidth)||0;a&&l!==r&&(e.updatedContainerWidth=l,e.setMinHeight(!0))},e}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.updateOnResize;window.setTimeout((function(){e.setMinHeight()})),t&&this.setResizeObserver()}},{key:"componentDidUpdate",value:function(){var e=this;this.props.updateOnContent&&window.setTimeout((function(){e.setMinHeight()}))}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setMinHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.props.minHeight,r=this.containerRef.current,a=void 0===r?{}:r,i=this.innerContainerRef.current,l=void 0===i?{}:i;null!=a&&a.style&&(n>(e=t?(null==l?void 0:l.clientHeight)||0:(null==a?void 0:a.clientHeight)||0)&&(e=n),a.style.minHeight="".concat(e,"px"))}},{key:"setResizeObserver",value:function(){var e=this;window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",e.onResizeContainer)}}},{key:"render",value:function(){var e=this.props.children;return u().createElement("div",{className:"curiosity-minheight",ref:this.containerRef},u().createElement("div",{ref:this.innerContainerRef},e))}}]),n}(u().Component);c.defaultProps={updateOnContent:!1,updateOnResize:!0,minHeight:0}}}]);
//# sourceMappingURL=../sourcemaps/5925.e0973654bbb1edad5e8164470d47e0e1.js.map