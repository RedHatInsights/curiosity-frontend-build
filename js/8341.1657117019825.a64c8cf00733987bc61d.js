"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[8341,1339,8139,353],{28341:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y,ConnectedGraphCard:()=>y,GraphCard:()=>v});var r=a(1413),n=a(96985),i=a.n(n),o=a(75857),l=a(15451),s=a(61072),c=a(51858),u=a(76006),d=a(30446),h=a(1797),p=a(91339),m=a(89270),v=function(e){var t=e.cardTitle,a=e.children,n=e.error,s=e.getGraphReportsCapacity,c=e.graphData,u=e.meta,v=e.isDisabled,f=e.pending,y=e.useProduct,g=e.useProductGraphConfig,k=e.useProductGraphTallyQuery,C=y().productId,T=g().settings,b=k();if((0,l.Z)((function(){var e=b[d.VN.START_DATE],t=b[d.VN.END_DATE],a=b[d.VN.GRANULARITY];!v&&a&&e&&t&&C&&s(C,b)}),[s,v,C,b]),v)return null;var E=null;return"function"==typeof(null==T?void 0:T.actionDisplay)&&(E=T.actionDisplay({data:(0,r.Z)({},c),meta:(0,r.Z)({},u)})),i().createElement(o.Card,{className:"curiosity-usage-graph"},i().createElement(p.MinHeight,{key:"headerMinHeight"},i().createElement(o.CardHeader,null,i().createElement(o.CardTitle,null,i().createElement(o.Title,{headingLevel:"h2",size:"lg"},t)),i().createElement(o.CardActions,{className:n?"blur":""},i().createElement(i().Fragment,{key:"actionDisplay"},E),a))),i().createElement(p.MinHeight,{key:"bodyMinHeight"},i().createElement(o.CardBody,null,i().createElement("div",{className:(n?"blur":f&&"fadein")||""},f&&i().createElement(h.Loader,{variant:"graph"}),!f&&i().createElement(m.GraphCardChart,{graphData:c})))))};v.defaultProps={cardTitle:null,children:null,error:!1,getGraphReportsCapacity:u.BM.noop,graphData:{},isDisabled:u.BM.UI_DISABLED_GRAPH,meta:{},pending:!1,useProduct:c.useProduct,useProductGraphConfig:c.useProductGraphConfig,useProductGraphTallyQuery:c.useProductGraphTallyQuery};var f=s.R1.graphCard.makeGraphCard(),y=(0,s.$j)(f,(function(e){return{getGraphReportsCapacity:function(t,a){return e(s.Ak.rhsm.getGraphReportsCapacity(t,a))}}}))(v)},89270:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h,GraphCardChart:()=>h});var r=a(96985),n=a.n(r),i=a(98454),o=a(51858),l=a(78139),s=a(60930),c=a(64418),u=a(44024),d=a(30446),h=function(e){var t,a,r=e.graphData,o=e.useProductGraphConfig,h=e.useProductGraphTallyQuery,p=o().filters,m=h(),v=m[d.VN.GRANULARITY],f={xAxisLabelIncrement:l.graphCardHelpers.getChartXAxisLabelIncrement(v),xAxisTickFormat:function(e){var t=e.item,a=e.previousItem,r=e.tick;return l.graphCardHelpers.xAxisTickFormat({tick:r,date:t.date,previousDate:a.date,granularity:v})},yAxisTickFormat:l.graphCardHelpers.yAxisTickFormat};return n().createElement(s.Chart,Object.assign({key:"chart_".concat(JSON.stringify(m))},f,{dataSets:(t=r,a=function(e){var a={data:t[e],id:e,strokeWidth:2,isStacked:!/^threshold/.test(e),isThreshold:/^threshold/.test(e)};return/^threshold/.test(e)&&(a.stroke=i.chart_color_green_300.value,a.strokeDasharray="4,3",a.strokeWidth=3),a},null!=p&&p.length?p.map((function(e){return Object.assign(a(e.id),e)})):Object.keys(t).map((function(e){return a(e)}))),chartLegend:function(e){var t=e.chart,a=e.datum;return n().createElement(c.default,{chart:t,datum:a})},chartTooltip:function(e){var t=e.datum;return n().createElement(u.default,{datum:t})}}))};h.defaultProps={graphData:{},useProductGraphConfig:o.useProductGraphConfig,useProductGraphTallyQuery:o.useProductGraphTallyQuery}},64418:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h,GraphCardChartLegend:()=>h});var r=a(96985),n=a.n(r),i=a(75857),o=a(89048),l=a(51858),s=a(61072),c=a(76006),u=a(83109),d=a(1138),h=function(e){var t=e.chart,a=e.datum,r=e.t,l=e.useDispatch,c=e.useSelectors,u=(0,e.useProduct)(),h=u.productLabel,p=u.viewId,m=l(),v=c(a.dataSets.map((function(e){var t=e.id;return function(e){var a;return null===(a=e.graph.legend)||void 0===a?void 0:a["".concat(p,"-").concat(t)]}})));(0,o.Z)((function(){a.dataSets.forEach((function(e,a){var r=e.id;((null==v?void 0:v[a])||t.isToggled(r))&&t.hide(r)}))}));var f=function(e){var a=t.toggle(e);m({type:s.JD.graph.SET_GRAPH_LEGEND,id:"".concat(p,"-").concat(e),value:a})};return n().createElement(n().Fragment,null,a.dataSets.map((function(e,a){var o=e.id,l=e.isThreshold,s=e.stroke,c=e.data,u=!(void 0===c?[]:c).find((function(e){var t=e.y,a=e.hasData;return t>=0&&!0===a||t>=0&&!0===l}))||!1,p=r(["curiosity-graph.label_".concat(l?"threshold":o),"curiosity-graph.label_no"],{product:h,context:h}),m=r("curiosity-graph.legendTooltip".concat(l?"_threshold":"","_").concat(o),{product:h,context:h},[n().createElement("span",{style:{whiteSpace:"nowrap"}})]),y=(null==v?void 0:v[a])||t.isToggled(o),g=n().createElement(i.Button,{onClick:function(){return f(o)},onKeyPress:function(){return f(o)},className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(o),variant:"link",component:"a",isDisabled:u,icon:(u||y)&&n().createElement(d.ChartIcon,{symbol:"eyeSlash"})||n().createElement(d.ChartIcon,{symbol:l?"dash":"square",style:{visibility:u||y?"hidden":"visible"},fill:s})},p);return m?n().createElement(i.Tooltip,{key:"curiosity-tooltip-".concat(o),content:n().createElement("p",null,m),position:i.TooltipPosition.top,enableFlip:!0,distance:5},g):g})))};h.defaultProps={chart:{hide:c.BM.noop,toggle:c.BM.noop,isToggled:c.BM.noop},datum:{dataSets:[]},t:u.translate,useDispatch:s.Cr.reactRedux.useDispatch,useSelectors:s.Cr.reactRedux.useSelectors,useProduct:l.useProduct}},44024:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d,GraphCardChartTooltip:()=>d});var r=a(96985),n=a.n(r),i=a(51858),o=a(78139),l=a(83109),s=a(1138),c=a(46262),u=a(76006),d=function(e){var t=e.datum,a=e.t,r=e.useProduct,i=e.useProductGraphTallyQuery,l=r().productLabel,d=i()[c.O6.GRANULARITY],h=null,p=[],m=(t||{}).itemsByKey,v=void 0===m?{}:m;return Object.keys(v).reverse().forEach((function(e,t){var r,i,c,u;0===t&&(h=(0,o.getTooltipDate)({date:null===(u=v[e])||void 0===u?void 0:u.data.date,granularity:d}));var m={color:null===(r=v[e])||void 0===r?void 0:r.color};if("threshold"===(null===(i=v[e])||void 0===i?void 0:i.chartType)){var f,y,g,k=null!==(f=null===(y=v[e])||void 0===y?void 0:y.data.y)&&void 0!==f?f:a("curiosity-graph.label_noData");null!==(g=v[e])&&void 0!==g&&g.data.hasInfinite&&(k=m.color?n().createElement(s.ChartIcon,{symbol:"infinity",fill:"#ffffff",title:a("curiosity-graph.label_threshold",{context:"infinite"})}):a("curiosity-graph.label_threshold",{context:"infinite"})),m.label=a("curiosity-graph.label_threshold"),m.value=k}else{var C,T,b=!1===(null===(C=v[e])||void 0===C?void 0:C.data.hasData)&&a("curiosity-graph.label_noData")||(null===(T=v[e])||void 0===T?void 0:T.data.y)||0;m.label=a("curiosity-graph.label",{context:e,product:l}),m.value=b}m.chartType=null===(c=v[e])||void 0===c?void 0:c.chartType,p.push(m)})),n().createElement("div",{className:"curiosity-usage-graph__tooltip"},n().createElement("table",{summary:a("curiosity-graph.tooltipSummary")},p.length&&h&&n().createElement("thead",null,n().createElement("tr",null,n().createElement("th",{colSpan:2},h)))||null,p.length&&n().createElement("tbody",null,p.map((function(e){var t,a,r="number"==typeof e.value&&!Number.isInteger(e.value)&&(null===(t=u.BM.numberDisplay(e.value))||void 0===t||null===(a=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!0}))||void 0===a?void 0:a.toUpperCase())||e.value;return n().createElement("tr",{key:"tooltip-".concat(e.label)},n().createElement("th",null,"threshold"===e.chartType&&n().createElement(s.ChartIcon,{size:"sm",symbol:"dash",fill:e.color||"transparent"}),"threshold"!==e.chartType&&n().createElement(s.ChartIcon,{size:"sm",fill:e.color||"transparent"})," ",e.label),n().createElement("td",null,r))})))||null),!p.length&&a("curiosity-graph.label_noData",{context:"error"})||null)};d.defaultProps={datum:{},t:l.translate,useProduct:i.useProduct,useProductGraphTallyQuery:i.useProductGraphTallyQuery}},78139:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y,graphCardHelpers:()=>y,generateChartSettings:()=>d,generateExtendedChartSettings:()=>f,getChartXAxisLabelIncrement:()=>h,getTooltipDate:()=>p,xAxisTickFormat:()=>m,yAxisTickFormat:()=>v});var r=a(1413),n=a(45987),i=a(30381),o=a.n(i),l=a(98454),s=a(30446),c=a(76006),u=["id","isStandalone","isThreshold"],d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],a=[];return e.forEach((function(e){var i=e.id,o=e.isStandalone,s=void 0!==o&&o,c=e.isThreshold,d=void 0!==c&&c,h=(0,n.Z)(e,u);if(i){var p={id:i,isStacked:!d,isStandalone:s,isThreshold:d,strokeWidth:2};d&&(p.stroke=l.chart_color_green_300.value,p.strokeDasharray="4,3",p.strokeWidth=3),s?t.push((0,r.Z)((0,r.Z)({},p),h)):a.push((0,r.Z)((0,r.Z)({},p),h))}})),{standaloneFilters:t,groupedFilters:a}},h=function(e){switch(e){case s.U9.DAILY:return 5;case s.U9.WEEKLY:case s.U9.MONTHLY:return 2;case s.U9.QUARTERLY:default:return 1}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.date,a=e.granularity,r=o().utc(t);switch(a){case s.U9.QUARTERLY:return"".concat(r.format(c.i3.timestampQuarterFormats.yearShort)," - ").concat(r.add(1,"quarter").format(c.i3.timestampQuarterFormats.yearShort));case s.U9.MONTHLY:return r.format(c.i3.timestampMonthFormats.yearLong);case s.U9.WEEKLY:return"".concat(r.format(c.i3.timestampDayFormats.short)," - ").concat(r.add(1,"week").format(c.i3.timestampDayFormats.yearShort));case s.U9.DAILY:default:return r.format(c.i3.timestampDayFormats.long)}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.callback,a=e.date,r=e.granularity,n=e.tick,i=e.previousDate;if(a&&r){if(t)return t({callback:t,date:a,granularity:r,tick:n,previousDate:i});var l,u=o().utc(a),d=0!==n&&Number.parseInt(u.year(),10)!==Number.parseInt(o().utc(i).year(),10);switch(r){case s.U9.QUARTERLY:l=(l=d?u.format(c.i3.timestampQuarterFormats.yearShort):u.format(c.i3.timestampQuarterFormats.short)).replace(/\s/,"\n");break;case s.U9.MONTHLY:l=(l=d?u.format(c.i3.timestampMonthFormats.yearShort):u.format(c.i3.timestampMonthFormats.short)).replace(/\s/,"\n");break;case s.U9.WEEKLY:case s.U9.DAILY:default:l=(l=d?u.format(c.i3.timestampDayFormats.yearShort):u.format(c.i3.timestampDayFormats.short)).replace(/\s(\d{4})$/,"\n$1")}return l}},v=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.callback,n=a.tick;return r?r({tick:n}):null===(e=c.BM.numberDisplay(n))||void 0===e||null===(t=e.format({average:!0,mantissa:1,trimMantissa:!0,lowPrecision:!1}))||void 0===t?void 0:t.toUpperCase()},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.settings,a=e.granularity;return(0,r.Z)((0,r.Z)({},t),{},{xAxisLabelIncrement:h(a),xAxisTickFormat:function(e){var r=e.item,n=e.previousItem,i=e.tick;return m({callback:null==t?void 0:t.xAxisTickFormat,tick:i,date:r.date,previousDate:n.date,granularity:a})},yAxisTickFormat:function(e){var a=e.tick;return v({callback:null==t?void 0:t.yAxisTickFormat,tick:a})}})},y={generateChartSettings:d,generateExtendedChartSettings:f,getChartXAxisLabelIncrement:h,getTooltipDate:p,xAxisTickFormat:m,yAxisTickFormat:v}},91339:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d,MinHeight:()=>d});var r=a(15671),n=a(43144),i=a(97326),o=a(60136),l=a(54062),s=a(96985),c=a.n(s),u=a(76006),d=function(e){(0,o.Z)(a,e);var t=(0,l.Z)(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).containerRef=c().createRef(),e.innerContainerRef=c().createRef(),e.updatedContainerWidth=0,e.resizeObserver=u.BM.noop,e.onResizeContainer=function(){var t,a,r=(0,i.Z)(e).updatedContainerWidth,n=e.props.updateOnResize,o=(null===(t=e.containerRef)||void 0===t||null===(a=t.current)||void 0===a?void 0:a.clientWidth)||0;n&&o!==r&&(e.updatedContainerWidth=o,e.setMinHeight(!0))},e}return(0,n.Z)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.updateOnResize;window.setTimeout((function(){e.setMinHeight()})),t&&this.setResizeObserver()}},{key:"componentDidUpdate",value:function(){var e=this;this.props.updateOnContent&&window.setTimeout((function(){e.setMinHeight()}))}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setMinHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.props.minHeight,r=this.containerRef.current,n=void 0===r?{}:r,i=this.innerContainerRef.current,o=void 0===i?{}:i;null!=n&&n.style&&(a>(e=t?(null==o?void 0:o.clientHeight)||0:(null==n?void 0:n.clientHeight)||0)&&(e=a),n.style.minHeight="".concat(e,"px"))}},{key:"setResizeObserver",value:function(){var e=this;window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",e.onResizeContainer)}}},{key:"render",value:function(){var e=this.props.children;return c().createElement("div",{className:"curiosity-minheight",ref:this.containerRef},c().createElement("div",{ref:this.innerContainerRef},e))}}]),a}(c().Component);d.defaultProps={updateOnContent:!1,updateOnResize:!0,minHeight:0}}}]);
//# sourceMappingURL=../sourcemaps/8341.616f917e6bffd47468ec66d5ceb2cec4.js.map