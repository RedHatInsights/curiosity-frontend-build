"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[9270,4418,4024,8139,1858],{89270:(t,e,r)=>{r.r(e),r.d(e,{default:()=>v,GraphCardChart:()=>v});var i=r(96985),a=r.n(i),o=r(98454),n=r(51858),u=r(78139),s=r(60930),l=r(64418),c=r(44024),d=r(30446),v=function(t){var e,r,i=t.graphData,n=t.useProductGraphConfig,v=t.useProductGraphTallyQuery,h=n().filters,p=v(),y=p[d.VN.GRANULARITY],m={xAxisLabelIncrement:u.graphCardHelpers.getChartXAxisLabelIncrement(y),xAxisTickFormat:function(t){var e=t.item,r=t.previousItem,i=t.tick;return u.graphCardHelpers.xAxisTickFormat({tick:i,date:e.date,previousDate:r.date,granularity:y})},yAxisTickFormat:u.graphCardHelpers.yAxisTickFormat};return a().createElement(s.Chart,Object.assign({key:"chart_".concat(JSON.stringify(p))},m,{dataSets:(e=i,r=function(t){var r={data:e[t],id:t,strokeWidth:2,isStacked:!/^threshold/.test(t),isThreshold:/^threshold/.test(t)};return/^threshold/.test(t)&&(r.stroke=o.chart_color_green_300.value,r.strokeDasharray="4,3",r.strokeWidth=3),r},null!=h&&h.length?h.map((function(t){return Object.assign(r(t.id),t)})):Object.keys(e).map((function(t){return r(t)}))),chartLegend:function(t){var e=t.chart,r=t.datum;return a().createElement(l.default,{chart:e,datum:r})},chartTooltip:function(t){var e=t.datum;return a().createElement(c.default,{datum:e})}}))};v.defaultProps={graphData:{},useProductGraphConfig:n.useProductGraphConfig,useProductGraphTallyQuery:n.useProductGraphTallyQuery}},64418:(t,e,r)=>{r.r(e),r.d(e,{default:()=>v,GraphCardChartLegend:()=>v});var i=r(96985),a=r.n(i),o=r(75857),n=r(89048),u=r(51858),s=r(61072),l=r(76006),c=r(83109),d=r(1138),v=function(t){var e=t.chart,r=t.datum,i=t.t,u=t.useDispatch,l=t.useSelectors,c=(0,t.useProduct)(),v=c.productLabel,h=c.viewId,p=u(),y=l(r.dataSets.map((function(t){var e=t.id;return function(t){var r;return null===(r=t.graph.legend)||void 0===r?void 0:r["".concat(h,"-").concat(e)]}})));(0,n.Z)((function(){r.dataSets.forEach((function(t,r){var i=t.id;((null==y?void 0:y[r])||e.isToggled(i))&&e.hide(i)}))}));var m=function(t){var r=e.toggle(t);p({type:s.JD.graph.SET_GRAPH_LEGEND,id:"".concat(h,"-").concat(t),value:r})};return a().createElement(a().Fragment,null,r.dataSets.map((function(t,r){var n=t.id,u=t.isThreshold,s=t.stroke,l=t.data,c=!(void 0===l?[]:l).find((function(t){var e=t.y,r=t.hasData;return e>=0&&!0===r||e>=0&&!0===u}))||!1,h=i(["curiosity-graph.label_".concat(u?"threshold":n),"curiosity-graph.label_no"],{product:v,context:v}),p=i("curiosity-graph.legendTooltip".concat(u?"_threshold":"","_").concat(n),{product:v,context:v},[a().createElement("span",{style:{whiteSpace:"nowrap"}})]),f=(null==y?void 0:y[r])||e.isToggled(n),g=a().createElement(o.Button,{onClick:function(){return m(n)},onKeyPress:function(){return m(n)},className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(n),variant:"link",component:"a",isDisabled:c,icon:(c||f)&&a().createElement(d.ChartIcon,{symbol:"eyeSlash"})||a().createElement(d.ChartIcon,{symbol:u?"dash":"square",style:{visibility:c||f?"hidden":"visible"},fill:s})},h);return p?a().createElement(o.Tooltip,{key:"curiosity-tooltip-".concat(n),content:a().createElement("p",null,p),position:o.TooltipPosition.top,enableFlip:!0,distance:5},g):g})))};v.defaultProps={chart:{hide:l.BM.noop,toggle:l.BM.noop,isToggled:l.BM.noop},datum:{dataSets:[]},t:c.translate,useDispatch:s.Cr.reactRedux.useDispatch,useSelectors:s.Cr.reactRedux.useSelectors,useProduct:u.useProduct}},44024:(t,e,r)=>{r.r(e),r.d(e,{default:()=>d,GraphCardChartTooltip:()=>d});var i=r(96985),a=r.n(i),o=r(51858),n=r(78139),u=r(83109),s=r(1138),l=r(46262),c=r(76006),d=function(t){var e=t.datum,r=t.t,i=t.useProduct,o=t.useProductGraphTallyQuery,u=i().productLabel,d=o()[l.O6.GRANULARITY],v=null,h=[],p=(e||{}).itemsByKey,y=void 0===p?{}:p;return Object.keys(y).reverse().forEach((function(t,e){var i,o,l,c;0===e&&(v=(0,n.getTooltipDate)({date:null===(c=y[t])||void 0===c?void 0:c.data.date,granularity:d}));var p={color:null===(i=y[t])||void 0===i?void 0:i.color};if("threshold"===(null===(o=y[t])||void 0===o?void 0:o.chartType)){var m,f,g,T=null!==(m=null===(f=y[t])||void 0===f?void 0:f.data.y)&&void 0!==m?m:r("curiosity-graph.label_noData");null!==(g=y[t])&&void 0!==g&&g.data.hasInfinite&&(T=p.color?a().createElement(s.ChartIcon,{symbol:"infinity",fill:"#ffffff",title:r("curiosity-graph.label_threshold",{context:"infinite"})}):r("curiosity-graph.label_threshold",{context:"infinite"})),p.label=r("curiosity-graph.label_threshold"),p.value=T}else{var C,b,S=!1===(null===(C=y[t])||void 0===C?void 0:C.data.hasData)&&r("curiosity-graph.label_noData")||(null===(b=y[t])||void 0===b?void 0:b.data.y)||0;p.label=r("curiosity-graph.label",{context:t,product:u}),p.value=S}p.chartType=null===(l=y[t])||void 0===l?void 0:l.chartType,h.push(p)})),a().createElement("div",{className:"curiosity-usage-graph__tooltip"},a().createElement("table",{summary:r("curiosity-graph.tooltipSummary")},h.length&&v&&a().createElement("thead",null,a().createElement("tr",null,a().createElement("th",{colSpan:2},v)))||null,h.length&&a().createElement("tbody",null,h.map((function(t){var e,r,i="number"==typeof t.value&&!Number.isInteger(t.value)&&(null===(e=c.BM.numberDisplay(t.value))||void 0===e||null===(r=e.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!0}))||void 0===r?void 0:r.toUpperCase())||t.value;return a().createElement("tr",{key:"tooltip-".concat(t.label)},a().createElement("th",null,"threshold"===t.chartType&&a().createElement(s.ChartIcon,{size:"sm",symbol:"dash",fill:t.color||"transparent"}),"threshold"!==t.chartType&&a().createElement(s.ChartIcon,{size:"sm",fill:t.color||"transparent"})," ",t.label),a().createElement("td",null,i))})))||null),!h.length&&r("curiosity-graph.label_noData",{context:"error"})||null)};d.defaultProps={datum:{},t:u.translate,useProduct:o.useProduct,useProductGraphTallyQuery:o.useProductGraphTallyQuery}},78139:(t,e,r)=>{r.r(e),r.d(e,{default:()=>f,graphCardHelpers:()=>f,generateChartSettings:()=>d,generateExtendedChartSettings:()=>m,getChartXAxisLabelIncrement:()=>v,getTooltipDate:()=>h,xAxisTickFormat:()=>p,yAxisTickFormat:()=>y});var i=r(1413),a=r(45987),o=r(30381),n=r.n(o),u=r(98454),s=r(30446),l=r(76006),c=["id","isStandalone","isThreshold"],d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[],r=[];return t.forEach((function(t){var o=t.id,n=t.isStandalone,s=void 0!==n&&n,l=t.isThreshold,d=void 0!==l&&l,v=(0,a.Z)(t,c);if(o){var h={id:o,isStacked:!d,isStandalone:s,isThreshold:d,strokeWidth:2};d&&(h.stroke=u.chart_color_green_300.value,h.strokeDasharray="4,3",h.strokeWidth=3),s?e.push((0,i.Z)((0,i.Z)({},h),v)):r.push((0,i.Z)((0,i.Z)({},h),v))}})),{standaloneFilters:e,groupedFilters:r}},v=function(t){switch(t){case s.U9.DAILY:return 5;case s.U9.WEEKLY:case s.U9.MONTHLY:return 2;case s.U9.QUARTERLY:default:return 1}},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.date,r=t.granularity,i=n().utc(e);switch(r){case s.U9.QUARTERLY:return"".concat(i.format(l.i3.timestampQuarterFormats.yearShort)," - ").concat(i.add(1,"quarter").format(l.i3.timestampQuarterFormats.yearShort));case s.U9.MONTHLY:return i.format(l.i3.timestampMonthFormats.yearLong);case s.U9.WEEKLY:return"".concat(i.format(l.i3.timestampDayFormats.short)," - ").concat(i.add(1,"week").format(l.i3.timestampDayFormats.yearShort));case s.U9.DAILY:default:return i.format(l.i3.timestampDayFormats.long)}},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.callback,r=t.date,i=t.granularity,a=t.tick,o=t.previousDate;if(r&&i){if(e)return e({callback:e,date:r,granularity:i,tick:a,previousDate:o});var u,c=n().utc(r),d=0!==a&&Number.parseInt(c.year(),10)!==Number.parseInt(n().utc(o).year(),10);switch(i){case s.U9.QUARTERLY:u=(u=d?c.format(l.i3.timestampQuarterFormats.yearShort):c.format(l.i3.timestampQuarterFormats.short)).replace(/\s/,"\n");break;case s.U9.MONTHLY:u=(u=d?c.format(l.i3.timestampMonthFormats.yearShort):c.format(l.i3.timestampMonthFormats.short)).replace(/\s/,"\n");break;case s.U9.WEEKLY:case s.U9.DAILY:default:u=(u=d?c.format(l.i3.timestampDayFormats.yearShort):c.format(l.i3.timestampDayFormats.short)).replace(/\s(\d{4})$/,"\n$1")}return u}},y=function(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.callback,a=r.tick;return i?i({tick:a}):null===(t=l.BM.numberDisplay(a))||void 0===t||null===(e=t.format({average:!0,mantissa:1,trimMantissa:!0,lowPrecision:!1}))||void 0===e?void 0:e.toUpperCase()},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.settings,r=t.granularity;return(0,i.Z)((0,i.Z)({},e),{},{xAxisLabelIncrement:v(r),xAxisTickFormat:function(t){var i=t.item,a=t.previousItem,o=t.tick;return p({callback:null==e?void 0:e.xAxisTickFormat,tick:o,date:i.date,previousDate:a.date,granularity:r})},yAxisTickFormat:function(t){var r=t.tick;return y({callback:null==e?void 0:e.yAxisTickFormat,tick:r})}})},f={generateChartSettings:d,generateExtendedChartSettings:m,getChartXAxisLabelIncrement:v,getTooltipDate:h,xAxisTickFormat:p,yAxisTickFormat:y}},51858:(t,e,r)=>{r.r(e),r.d(e,{default:()=>A,context:()=>A,ProductViewContext:()=>y,DEFAULT_CONTEXT:()=>p,useProductContext:()=>I,useProductQuery:()=>g,useProductQueryFactory:()=>f,useProductGraphTallyQuery:()=>T,useProductInventoryGuestsQuery:()=>C,useProductInventoryHostsQuery:()=>b,useProductInventorySubscriptionsQuery:()=>S,useProduct:()=>E,useProductGraphConfig:()=>P,useProductInventoryGuestsConfig:()=>k,useProductInventoryHostsConfig:()=>x,useProductInventorySubscriptionsConfig:()=>F,useProductToolbarConfig:()=>_});var i=r(45987),a=r(4942),o=r(1413),n=r(96985),u=r.n(n),s=r(12723),l=r(2606),c=r(30446),d=r(46262),v=r(62834),h=["initialGraphFilters","initialInventoryFilters","initialSubscriptionsInventoryFilters","productContextFilterUom"],p=[{},v.B.noop],y=u().createContext(p),m=function(){return(0,n.useContext)(y)},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.overrideId,i=e.useProductViewContext,a=void 0===i?m:i,n=a(),u=n[t],s=n.productId,c=n.viewId,d=l.Cr.reactRedux.useSelector((function(e){var i,a=e.view;return null==a||null===(i=a[t])||void 0===i?void 0:i[r]}),void 0),v=l.Cr.reactRedux.useSelector((function(e){var r,i=e.view;return null==i||null===(r=i[t])||void 0===r?void 0:r[s]}),void 0),h=l.Cr.reactRedux.useSelector((function(e){var r,i=e.view;return null==i||null===(r=i[t])||void 0===r?void 0:r[c]}),void 0);return(0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},u),d),v),h)},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.queryType,r=void 0===e?"query":e,i=t.options;return f(r,i)},T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.queryType,r=void 0===e?"graphTallyQuery":e,i=t.schemaCheck,a=void 0===i?c.VX.RHSM_API_QUERY_SET_REPORT_CAPACITY_TYPES:i,n=t.options;return s.VS.setApiQuery((0,o.Z)((0,o.Z)({},g()),f(r,n)),a)},C=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.defaultLimit,i=void 0===r?100:r,n=e.defaultOffset,u=void 0===n?0:n,l=e.queryType,v=void 0===l?"inventoryGuestsQuery":l,h=e.schemaCheck,p=void 0===h?c.VX.RHSM_API_QUERY_SET_INVENTORY_GUESTS_TYPES:h,y=e.options;return s.VS.setApiQuery((0,o.Z)((0,o.Z)((t={},(0,a.Z)(t,d.O6.LIMIT,i),(0,a.Z)(t,d.O6.OFFSET,u),t),g()),f(v,y)),p)},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.queryType,r=void 0===e?"inventoryHostsQuery":e,i=t.schemaCheck,a=void 0===i?c.VX.RHSM_API_QUERY_SET_INVENTORY_TYPES:i,n=t.options;return s.VS.setApiQuery((0,o.Z)((0,o.Z)({},g()),f(r,n)),a)},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.queryType,r=void 0===e?"inventorySubscriptionsQuery":e,i=t.schemaCheck,a=void 0===i?c.VX.RHSM_API_QUERY_SET_INVENTORY_TYPES:i,n=t.options;return s.VS.setApiQuery((0,o.Z)((0,o.Z)({},g()),f(r,n)),a)},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductQuery,r=void 0===e?g:e,a=t.useProductViewContext,u=void 0===a?m:a,s=r(),l=s[c.VN.UOM],d=u(),v=d.initialGraphFilters,p=void 0===v?[]:v,y=d.initialInventoryFilters,f=void 0===y?[]:y,T=d.initialSubscriptionsInventoryFilters,C=void 0===T?[]:T,b=d.productContextFilterUom,S=(0,i.Z)(d,h),I=(0,n.useCallback)((function(){if(!0===b){var t=function(t){var e=t.id;return!t.isOptional||new RegExp(l,"i").test(e)};return(0,o.Z)((0,o.Z)({},S),{},{initialGraphFilters:p.filter(t),initialInventoryFilters:f.filter(t),initialSubscriptionsInventoryFilters:C.filter(t)})}return(0,o.Z)((0,o.Z)({},S),{},{initialGraphFilters:p,initialInventoryFilters:f,initialSubscriptionsInventoryFilters:C})}),[S,p,f,C,b,l]);return I()},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductViewContext,r=void 0===e?m:e,i=r(),a=i.productGroup,o=i.productId,n=i.productLabel,u=i.viewId;return{productGroup:a,productId:o,productLabel:n,viewId:u}},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductContext,r=void 0===e?I:e,i=r(),a=i.initialGraphFilters,o=i.initialGraphSettings,n=void 0===o?{}:o;return{filters:a,settings:n}},k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductContext,r=void 0===e?I:e,i=r(),a=i.inventoryGuestsQuery,o=void 0===a?{}:a,n=i.initialGuestsFilters,u=i.initialGuestsSettings,s=void 0===u?{}:u;return{filters:n,initialQuery:o,settings:s}},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductContext,r=void 0===e?I:e,i=r(),a=i.initialInventoryFilters,o=i.initialInventorySettings,n=void 0===o?{}:o;return{filters:a,settings:n}},F=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductContext,r=void 0===e?I:e,i=r(),a=i.initialSubscriptionsInventoryFilters,o=i.initialSubscriptionsInventorySettings,n=void 0===o?{}:o;return{filters:a,settings:n}},_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductContext,r=void 0===e?I:e,i=r(),a=i.initialToolbarFilters,o=i.initialToolbarSettings,n=void 0===o?{}:o,u=i.initialSecondaryToolbarFilters;return{filters:a,secondaryFilters:u,settings:n}},A={ProductViewContext:y,DEFAULT_CONTEXT:p,useProductContext:I,useQuery:g,useQueryFactory:f,useGraphTallyQuery:T,useInventoryGuestsQuery:C,useInventoryHostsQuery:b,useInventorySubscriptionsQuery:S,useProduct:E,useGraphConfig:P,useInventoryGuestsConfig:k,useInventoryHostsConfig:x,useInventorySubscriptionsConfig:F,useToolbarConfig:_}}}]);
//# sourceMappingURL=../sourcemaps/9270.14bbd1e695c0828c26857d6b346f3716.js.map