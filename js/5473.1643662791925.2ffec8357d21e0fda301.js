"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[5473,2243],{12243:(t,e,r)=>{r.r(e),r.d(e,{default:()=>D,inventoryCardHelpers:()=>D,applySortFilters:()=>f,applyWrappableFilters:()=>h,parseInventoryFilters:()=>y,parseRowCellsListData:()=>m});var n=r(29439),a=r(93433),o=r(1413),s=r(92950),i=r.n(s),l=r(57294),u=r(68929),c=r.n(u),p=r(83109),d=r(30446),v=r(76006),f=function(t){var e=t.filter,r=void 0===e?{}:e,n=t.onSort,a=t.query,s=void 0===a?{}:a,i=r.id,u=r.sortId||i,p=(0,o.Z)({},r),v=p.onSort||n;return!p.onSort&&n&&(p.onSort=n),v&&"boolean"!=typeof p.sortActive&&null!=s&&s[d.VN.SORT]&&((null==s?void 0:s[d.VN.SORT])===u||c()(null==s?void 0:s[d.VN.SORT])===u)&&(p.sortActive=!0),v&&!p.sortDirection&&null!=s&&s[d.VN.DIRECTION]&&((null==s?void 0:s[d.VN.DIRECTION])===d.hb.DESCENDING?p.sortDirection=l.SortByDirection.desc:p.sortDirection=l.SortByDirection.asc),!v||p.sortActive||null!=s&&s[d.VN.SORT]||!0!==p.isSortDefault||(p.sortActive=!0,p.sortDefaultInitialDirection&&(p.sortDirection=p.sortDefaultInitialDirection)),p},h=function(t){var e=t.filter,r=void 0===e?{}:e,n=(0,o.Z)({},r);return Array.isArray(n.transforms)?n.transforms.push(l.wrappable):n.transforms=[l.wrappable],n},y=function(t){var e=t.filters,r=void 0===e?[]:e,n=t.onSort,s=t.query,i=void 0===s?{}:s;return(0,a.Z)(r).map((function(t){var e=(0,o.Z)({},t);return e.isSortable&&Object.assign(e,f({filter:e,onSort:n,query:i})),e.isWrappable&&Object.assign(e,h({filter:e})),e}))},m=function(t){var e=t.filters,r=void 0===e?[]:e,s=t.cellData,u=void 0===s?{}:s,c=t.session,d=void 0===c?{}:c,f=[],h=[],y={};return Object.entries(u).forEach((function(t){var e=(0,n.Z)(t,2),r=e[0],a=e[1];y[r]={title:(0,p.translate)("curiosity-inventory.header",{context:r}),value:a},f.push(y[r].title),h.push(a)})),null!=r&&r.length&&(f.length=0,h.length=0,r.forEach((function(t){var e,r,n,s,u,c,m,D=t.id,g=t.cell,b=t.cellWidth,Z=t.header,S=t.onSort,E=t.sortId,I=t.sortActive,G=t.sortDirection,N=t.transforms;y[D]?(r=null!==(s=null===(u=y[D])||void 0===u?void 0:u.title)&&void 0!==s?s:D,n=null!==(c=null===(m=y[D])||void 0===m?void 0:m.value)&&void 0!==c?c:""):D&&(r=(0,p.translate)("curiosity-inventory.header",{context:D}),n=""),Z&&(r="function"==typeof Z&&Z((0,o.Z)({},y))||Z),("string"==typeof r||"number"==typeof r||i().isValidElement(r))&&(r={title:r}),r&&(r.transforms=[],Array.isArray(N)&&(r.transforms=r.transforms.concat((0,a.Z)(N))),"number"==typeof b&&r.transforms.push((0,l.cellWidth)(b))),"function"==typeof S&&(r=(0,o.Z)((0,o.Z)({},r),{},{onSort:function(t){return S((0,o.Z)({},y),(0,o.Z)((0,o.Z)({},t),{},{id:E||D}))},sortActive:I,sortDirection:G})),g&&(n="function"==typeof g?g((0,o.Z)({},y),(0,o.Z)({},d)):g),"string"==typeof n||"number"==typeof n||i().isValidElement(n)?n={title:n}:null!==(e=n)&&void 0!==e&&e.title||((v.BM.DEV_MODE||v.BM.REVIEW_MODE)&&console.error("PF table throws an error when cell values don't conform to what it is expecting, or align exactly to column headers.\n            \n\nSee cell ID=".concat(D," with VALUE=").concat(n)),n={title:""}),f.push(r),h.push(n)}))),{columnHeaders:f,cells:h,data:(0,o.Z)({},y)}},D={applySortFilters:f,applyWrappableFilters:h,parseInventoryFilters:y,parseRowCellsListData:m}},95473:(t,e,r)=>{r.r(e),r.d(e,{default:()=>Z,ConnectedGuestsList:()=>Z,GuestsList:()=>g});var n=r(93433),a=r(4942),o=r(1413),s=r(15671),i=r(43144),l=r(60136),u=r(54062),c=r(92950),p=r.n(c),d=r(57294),v=r(76006),f=r(186),h=r(1797),y=r(12243),m=r(30446),D=r(78697),g=function(t){(0,l.Z)(r,t);var e=(0,u.Z)(r);function r(){var t;(0,s.Z)(this,r);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return(t=e.call.apply(e,[this].concat(l))).state={currentPage:0,limit:100,previousData:[]},t.onUpdateGuestsData=function(){var e=t.state,r=e.currentPage,n=e.limit,s=t.props,i=s.getHostsInventoryGuests,l=s.query,u=s.id;if(u){var c,p=(0,o.Z)((0,o.Z)({},l),{},(c={},(0,a.Z)(c,m.VN.LIMIT,n),(0,a.Z)(c,m.VN.OFFSET,r*n||0),c));i(u,f.IT.parseRhsmQuery(p).inventoryGuestsQuery)}},t.onScroll=function(e){var r=e.target,a=t.state,o=a.currentPage,s=a.limit,i=a.previousData,l=t.props,u=l.numberOfGuests,c=l.pending,p=l.listData,d=r.scrollHeight-r.scrollTop===r.clientHeight;if(u>(o+1)*s&&d&&!c){var v=o+1,f=[].concat((0,n.Z)(i),(0,n.Z)(p||[]));t.setState({previousData:f,currentPage:v})}},t}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){this.onUpdateGuestsData()}},{key:"componentDidUpdate",value:function(t,e){this.state.currentPage!==e.currentPage&&this.onUpdateGuestsData()}},{key:"renderLoader",value:function(){var t=this.state.currentPage,e=this.props,r=e.filterGuestsData,n=e.listData,a=e.pending;if(t>0&&a){var o=p().createElement(h.Loader,{variant:"table",tableProps:{borders:!1,colCount:(null==r?void 0:r.length)||(null==n?void 0:n[0])&&Object.keys(n[0]).length||1,colWidth:(null==r?void 0:r.length)&&r.map((function(t){return t.cellWidth}))||[],rowCount:0,variant:d.TableVariant.compact}});return p().createElement("div",{className:"curiosity-table-scroll-loader__custom"},o)}return null}},{key:"renderTable",value:function(){var t=this.state.previousData,e=this.props,r=e.filterGuestsData,a=e.listData,o=e.numberOfGuests,s=e.session,i=[],l=[].concat((0,n.Z)(t),(0,n.Z)(a||[])).map((function(t){var e=Object.assign({},t),n=y.inventoryCardHelpers.parseRowCellsListData({filters:r,cellData:e,session:s}),a=n.columnHeaders,o=n.cells;return i=a,{cells:o}})),u=42*(o+1);return u=u<275&&u||275,p().createElement("div",{className:"curiosity-table-scroll",style:{height:"".concat(u,"px")}},p().createElement("div",{className:"curiosity-table-scroll-list".concat(u<275?"__no-scroll":""),onScroll:this.onScroll},this.renderLoader(),l.length&&p().createElement(D.Table,{borders:!1,variant:d.TableVariant.compact,className:"curiosity-guests-list",columnHeaders:i,rows:l})||null))}},{key:"render",value:function(){var t=this.state.currentPage,e=this.props,r=e.error,n=e.filterGuestsData,a=e.listData,o=e.numberOfGuests,s=e.pending,i=e.perPageDefault;return p().createElement("div",{className:"fadein ".concat(r?"blur":"")},s&&0===t&&p().createElement(h.Loader,{variant:"table",tableProps:{borders:!1,className:"curiosity-guests-list",colCount:(null==n?void 0:n.length)||(null==a?void 0:a[0])&&Object.keys(a[0]).length||1,colWidth:(null==n?void 0:n.length)&&n.map((function(t){return t.cellWidth}))||[],rowCount:o<i?o:i,variant:d.TableVariant.compact}}),(!s&&0===t||t>0)&&this.renderTable())}}]),r}(p().Component);g.defaultProps={error:!1,filterGuestsData:[],getHostsInventoryGuests:v.BM.noop,listData:[],pending:!1,perPageDefault:5,query:{},session:{}};var b=f.R1.guestsList.makeGuestsList(),Z=(0,f.$j)(b,(function(t){return{getHostsInventoryGuests:function(e,r){return t(f.Ak.rhsm.getHostsInventoryGuests(e,r))}}}))(g)}}]);
//# sourceMappingURL=../sourcemaps/5473.d7f66620f1417c23c563818c53bc454a.js.map