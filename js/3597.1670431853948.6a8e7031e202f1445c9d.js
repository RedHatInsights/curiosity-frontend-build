"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[3597,9844],{49844:function(e,t,n){n.r(t),n.d(t,{Select:function(){return T},SelectDirection:function(){return O},SelectPosition:function(){return E},default:function(){return T}});var i=n(29439),o=n(1413),l=n(15671),r=n(43144),a=n(60136),c=n(54062),s=n(92950),u=n.n(s),d=n(54653),p=n(50361),f=n.n(p),v=n(18446),g=n.n(v),h=n(30998),y=n.n(h),m=n(68630),S=n.n(m),b=n(62834),O=d.DropdownDirection,E=d.DropdownPosition,T=function(e){(0,a.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,l.Z)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={isExpanded:!1,options:null,selected:null},e.selectField=u().createRef(),e.onSelect=function(t,n){var i=e.state.options,l=e.props,r=l.id,a=l.name,c=l.onSelect,s=l.variant,u=i,p=u.findIndex((function(e){return e.title===n}));u[p].selected=s===d.SelectVariant.single||!u[p].selected,s===d.SelectVariant.single&&u.forEach((function(e,t){p!==t&&(u[t].selected=!1)}));var v=s===d.SelectVariant.single?n:u.filter((function(e){return!0===e.selected})).map((function(e){return e.title}));e.setState({options:u,selected:v},(function(){var t=f()(u),n={id:r,name:a||r,value:t[p].value,selected:s===d.SelectVariant.single&&t[p]||f()(v),selectedIndex:p,type:"select-".concat(s===d.SelectVariant.single?"one":"multiple"),options:t};s===d.SelectVariant.checkbox&&(n.checked=t[p].selected);var i=(0,o.Z)((0,o.Z)({},n),{},{target:(0,o.Z)({},n),currentTarget:(0,o.Z)({},n),persist:b.B.noop});c((0,o.Z)({},i),p,t),s===d.SelectVariant.single&&e.setState({isExpanded:!1})}))},e.onToggle=function(t){e.setState({isExpanded:t})},e}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){null===this.state.options&&this.formatOptions()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.options,i=t.selectedOptions;g()(e.options,n)&&g()(e.selectedOptions,i)||this.formatOptions()}},{key:"formatOptions",value:function(){var e,t,n=this.selectField.current,l=void 0===n?{}:n,r=this.props,a=r.options,c=r.selectedOptions,s=r.variant,u=Object.entries(this.props).filter((function(e){var t=(0,i.Z)(e,1)[0];return/^data-/i.test(t)})),p=S()(a)?Object.entries(a).map((function(e){var t=(0,i.Z)(e,2),n=t[0],l=t[1];return(0,o.Z)((0,o.Z)({},l),{},{title:n,value:l})})):f()(a),v=c&&"string"==typeof c||"number"==typeof c?[c]:c;p.forEach((function(e,t){var n,i=e;("string"==typeof i&&(i={title:e,value:e},p[t]=i),i.text=i.text||i.title,i.textContent=i.textContent||i.title,i.label=i.label||i.title,v)&&(S()(i.value)?(n=y()(v,i.value)>-1)||(n=!!v.find((function(e){return Object.values(i.value).includes(e)}))):n=v.includes(i.value),n||(n=v.includes(i.title)),p[t].selected=n)})),t=s===d.SelectVariant.single?(p.find((function(e){return!0===e.selected}))||{}).title:p.filter((function(e){return!0===e.selected})).map((function(e){return e.title})),null!=l&&null!==(e=l.parentRef)&&void 0!==e&&e.current&&u.forEach((function(e){var t,n=(0,i.Z)(e,2),o=n[0],r=n[1];return null==l||null===(t=l.parentRef)||void 0===t?void 0:t.current.setAttribute(o,r)})),this.setState({options:p,selected:t})}},{key:"render",value:function(){var e=this.state,t=e.options,n=e.selected,i=e.isExpanded,o=this.props,l=o.ariaLabel,r=o.className,a=o.direction,c=o.isDisabled,s=o.isFlipEnabled,p=o.isToggleText,f=o.maxHeight,v=o.placeholder,g=o.position,h=o.toggleIcon,y=o.variant,m={direction:a,isFlipEnabled:s,maxHeight:f};return t&&t.length&&!c||(m.isDisabled=!0),u().createElement("div",{className:"curiosity-select"},u().createElement(d.Select,Object.assign({menuAppendTo:"parent",className:"curiosity-select-pf".concat(p?"":"__no-toggle-text"," ").concat(g===d.DropdownPosition.right?"curiosity-select-pf__position-right":""," ").concat(r),variant:y,"aria-label":l,onToggle:this.onToggle,onSelect:this.onSelect,selections:n,isOpen:i,toggleIcon:h,placeholderText:v,ref:this.selectField},m),t&&t.map((function(e){return u().createElement(d.SelectOption,{key:window.btoa("".concat(e.title,"-").concat(e.value)),id:window.btoa("".concat(e.title,"-").concat(e.value)),value:e.title,"data-value":S()(e.value)&&JSON.stringify([e.value])||e.value,"data-title":e.title})}))||[]))}}]),n}(u().Component);T.defaultProps={ariaLabel:"Select option",className:"",direction:O.down,id:b.B.generateId(),isDisabled:!1,isFlipEnabled:!1,isToggleText:!0,maxHeight:null,name:null,onSelect:b.B.noop,options:[],placeholder:"Select option",position:E.left,selectedOptions:null,toggleIcon:null,variant:d.SelectVariant.single}},93597:function(e,t,n){n.r(t),n.d(t,{ToolbarFieldCategory:function(){return h},default:function(){return h},useOnSelect:function(){return g},useToolbarFieldOptions:function(){return v}});var i=n(1413),o=n(4942),l=n(93433),r=n(92950),a=n.n(r),c=n(51858),s=n(82410),u=n(46262),d=n(49844),p=n(78139),f=n(83109),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProductGraphConfig,n=void 0===t?c.useProductGraphConfig:t,i=n(),o=i.filters,r=[];if(Array.isArray(o)){var a=null==o?void 0:o.map((function(e){var t=e.metric,n=e.query,i=null==n?void 0:n[u.O6.CATEGORY];if(void 0!==i)return{title:(0,f.translate)("curiosity-toolbar.label",{context:["category",""===i?"none":i]}),value:i,metaData:{metric:t,query:n},selected:!1}})).filter((function(e){return void 0!==e}));null!=a&&a.length&&r.push.apply(r,(0,l.Z)(a))}return r},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useDispatch,n=void 0===t?s.Cr.reactRedux.useDispatch:t,i=e.useProduct,l=void 0===i?c.useProduct:i,r=l(),a=r.productId,d=r.viewId,f=n();return function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.value,i=void 0===n?null:n,l=t.selected,r=void 0===l?{}:l,c=i;null!=r&&null!==(e=r.metaData)&&void 0!==e&&e.metric&&(c=p.graphCardHelpers.generateChartIds({metric:r.metaData.metric,productId:a,query:(0,o.Z)({},u.O6.CATEGORY,i)})),f([{type:s.JD.graph.SET_GRAPH_LEGEND,id:"".concat(d,"-inverted"),value:c},{type:s.JD.query.SET_QUERY_RESET_INVENTORY_LIST,viewId:d},{type:s.JD.query.SET_QUERY,viewId:d,filter:u.O6.CATEGORY,value:i}])}},h=function(e){var t=e.isFilter,n=e.position,o=e.t,l=e.useOnSelect,r=e.useProductToolbarQuery,c=e.useToolbarFieldOptions,s=r()[u.O6.CATEGORY],p=l(),f=c().map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{selected:e.value===s})}));return a().createElement(d.Select,{"aria-label":o("curiosity-toolbar.placeholder",{context:[t&&"filter","category"]}),onSelect:p,options:f,selectedOptions:s,placeholder:o("curiosity-toolbar.placeholder",{context:[t&&"filter","category"]}),position:n,"data-test":"toolbarFieldCategory"})};h.defaultProps={isFilter:!1,position:d.SelectPosition.left,t:f.translate,useOnSelect:g,useProductToolbarQuery:c.useProductToolbarQuery,useToolbarFieldOptions:v}}}]);
//# sourceMappingURL=../sourcemaps/3597.251c096faa2202ff50217dca34d7d56c.js.map