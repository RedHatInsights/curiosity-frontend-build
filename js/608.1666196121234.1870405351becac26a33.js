"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[608],{10608:function(e,t,r){r.r(t),r.d(t,{GraphCard:function(){return s},default:function(){return s}});var a=r(92950),n=r.n(a),l=r(51858),i=r(76006),o=r(29407),u=r(91799),c=r(25394),d=r(78139),s=function(e){var t=e.isDisabled,r=(0,e.useProductGraphConfig)(),a=r.filters,l=r.settings,i=d.graphCardHelpers.generateChartSettings(a,l),s=i.groupedFiltersSettings,h=i.standaloneFiltersSettings;return t?null:n().createElement(n().Fragment,null,s&&n().createElement(c.GraphCardContext.Provider,{value:s},n().createElement(u.GraphCardChart,null))||null,null==h?void 0:h.map((function(e){var t,r;return n().createElement(c.GraphCardContext.Provider,{key:"graphCard_".concat(null==e||null===(t=e.settings)||void 0===t||null===(r=t.metric)||void 0===r?void 0:r.id),value:e},n().createElement(o.GraphCardMetricTotals,null,n().createElement(u.GraphCardChart,null)))})))};s.defaultProps={isDisabled:i.BM.UI_DISABLED_GRAPH,useProductGraphConfig:l.useProductGraphConfig}},91799:function(e,t,r){r.r(t),r.d(t,{GraphCardChart:function(){return v},default:function(){return v}});var a=r(1413),n=r(92950),l=r.n(n),i=r(65834),o=r(15451),u=r(51858),c=r(25394),d=r(78139),s=r(60930),h=r(64418),p=r(44024),m=r(99171),f=r(46262),g=r(91339),C=r(1797),y=r(83109),v=function(e){var t=e.t,r=e.useGetGraphTally,n=e.useGraphCardContext,u=e.useMetricsSelector,c=e.useProduct,y=e.useProductGraphTallyQuery,v=c().productId,E=n().settings,T=void 0===E?{}:E,G=T.actionDisplay,M=T.metric,x=T.metrics,S=void 0===x?[]:x,P=y()[f.O6.GRANULARITY],_=u(),D=_.pending,F=_.error,k=_.data,H=void 0===k?{}:k,b=_.dataSets,N=void 0===b?[]:b,B=r();(0,o.Z)((function(){B(S.map((function(e){var t=e.id;return{id:v,metric:t}})))}),[S,v,B]);var A=(null==M?void 0:M.id)&&"_".concat(null==M?void 0:M.id)||"",I=null;return"function"==typeof G&&(I=G({data:(0,a.Z)({},H)})),l().createElement(i.Card,{className:"curiosity-usage-graph"},l().createElement(g.MinHeight,{key:"headerMinHeight"},l().createElement(i.CardHeader,null,l().createElement(i.CardTitle,null,l().createElement(i.Title,{headingLevel:"h2",size:"lg"},t("curiosity-graph.cardHeading".concat(A),{context:v}),l().createElement(m.GraphCardChartTitleTooltip,null))),I&&l().createElement(i.CardActions,{className:F?"blur":""},I))),l().createElement(g.MinHeight,{key:"bodyMinHeight"},l().createElement(i.CardBody,null,l().createElement("div",{className:(F?"blur":D&&"fadein")||""},D&&l().createElement(C.Loader,{variant:"graph"}),!D&&l().createElement(s.Chart,Object.assign({},d.graphCardHelpers.generateExtendedChartSettings({settings:T,granularity:P}),{dataSets:N,chartLegend:function(e){var t=e.chart,r=e.datum;return l().createElement(h.GraphCardChartLegend,{chart:t,datum:r})},chartTooltip:function(e){var t=e.datum;return l().createElement(p.GraphCardChartTooltip,{datum:t})}}))))))};v.defaultProps={t:y.translate,useGetGraphTally:c.useGetGraphTally,useGraphCardContext:c.useGraphCardContext,useMetricsSelector:c.useMetricsSelector,useProduct:u.useProduct,useProductGraphTallyQuery:u.useProductGraphTallyQuery}},99171:function(e,t,r){r.r(t),r.d(t,{GraphCardChartTitleTooltip:function(){return d},default:function(){return d}});var a=r(92950),n=r.n(a),l=r(65834),i=r(82197),o=r(51858),u=r(25394),c=r(83109),d=function(e){var t=e.t,r=e.useGraphCardContext,a=(0,e.useProduct)().productId,o=r().settings,u=void 0===o?{}:o,c=u.isCardTitleDescription,d=u.metric,s=(null==d?void 0:d.id)&&"_".concat(null==d?void 0:d.id)||"";return c?n().createElement(l.Tooltip,{content:n().createElement("p",null,t("curiosity-graph.cardHeadingDescription".concat(s),{context:a})),position:l.TooltipPosition.top,enableFlip:!1,distance:5,entryDelay:100,exitDelay:0},n().createElement("span",{className:"curiosity-icon__question"},n().createElement(i.OutlinedQuestionCircleIcon,null))):null};d.defaultProps={t:c.translate,useProduct:o.useProduct,useGraphCardContext:u.useGraphCardContext}},25394:function(e,t,r){r.r(t),r.d(t,{DEFAULT_CONTEXT:function(){return u},GraphCardContext:function(){return c},context:function(){return p},default:function(){return p},useGetGraphTally:function(){return s},useGraphCardContext:function(){return d},useMetricsSelector:function(){return h}});var a=r(1413),n=r(92950),l=r.n(n),i=r(61072),o=r(51858),u=[{settings:{isStandalone:!1,metrics:[],metric:void 0}},r(62834).B.noop],c=l().createContext(u),d=function(){return(0,n.useContext)(c)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useDispatch,r=void 0===t?i.Cr.reactRedux.useDispatch:t,a=e.useProductGraphTallyQuery,n=void 0===a?o.useProductGraphTallyQuery:a,l=n(),u=r();return function(e){return i.Ak.rhsm.getGraphTally(e,l)(u)}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGraphCardContext,r=void 0===t?d:t,n=e.useSelectors,l=void 0===n?i.Cr.reactRedux.useSelectors:n,u=e.useProduct,c=void 0===u?o.useProduct:u,s=c(),h=s.productId,p=r(),m=p.settings,f=void 0===m?{}:m,g=f.metrics,C=void 0===g?[]:g,y={},v=l(C.map((function(e){var t=e.id;return function(e){var r;return null===(r=e.graph.tally)||void 0===r?void 0:r["".concat(h,"_").concat(t)]}})),[]),E=!1,T=!1,G=0,M=v.map((function(e,t){var r,n,l=e||{},i=l.pending,o=l.fulfilled,u=l.error,c=l.cancelled;!(!i&&!c)&&(E=!0),o&&(T=!0),u&&(G+=1);var d=(0,a.Z)((0,a.Z)({},C[t]),{},{data:(null==e||null===(r=e.data)||void 0===r?void 0:r.data)||[],meta:(null==e||null===(n=e.data)||void 0===n?void 0:n.meta)||{}});return y[C[t].id]=d,d})),x={data:y,dataSets:M,error:!1,fulfilled:!1,pending:!1};return G===M.length?x.error=!0:E?x.pending=!0:T&&(x.fulfilled=!0),x},p={GraphCardContext:c,DEFAULT_CONTEXT:u,useGetGraphTally:s,useGraphCardContext:d,useMetricsSelector:h}},29407:function(e,t,r){r.r(t),r.d(t,{GraphCardMetricTotals:function(){return y},default:function(){return y}});var a=r(92950),n=r.n(a),l=r(65834),i=r(30381),o=r.n(i),u=r(68929),c=r.n(u),d=r(51858),s=r(25394),h=r(91339),p=r(1797),m=r(76006),f=r(65876),g=r(46262),C=r(83109),y=function(e){var t,r,a,i,u=e.children,d=e.t,s=e.useMetricsSelector,C=(0,e.useProductGraphTallyQuery)()[g.O6.START_DATE],y=s(),v=y.pending,E=y.error,T=y.fulfilled,G=y.dataSets,M=(void 0===G?[]:G)[0]||{},x=M.data,S=void 0===x?[]:x,P=M.id,_=M.meta,D=void 0===_?{}:_,F=S[S.length-1]||{},k=F.date,H=F.hasData,b=F.y,N=S.find((function(e){return!0===e.isCurrentDate}))||{},B=N.date,A=N.hasData,I=N.y,L=D.totalMonthlyDate,Q=D.totalMonthlyHasData,O=D.totalMonthlyValue,U=f.toolbarFieldOptions.find((function(e){return e.title===C||e.value.startDate.toISOString()===C}))||{},R=U.title,z=U.isCurrent,w=z?B:k,Z=z?A:H,X=z?I:b;return n().createElement(l.Flex,{"data-test":"graphMetricTotals-".concat(c()(P)),className:"curiosity-usage-graph__totals"},n().createElement(l.Flex,{flex:{default:"flex_1"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},n().createElement(l.FlexItem,{className:"curiosity-usage-graph__totals-column"},n().createElement(l.Card,{"data-test":"graphDailyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(E?"blur":"")},n().createElement(l.CardTitle,null,d("curiosity-graph.cardHeadingMetric_dailyTotal",{context:P,month:R})),n().createElement(h.MinHeight,{key:"currentBody"},n().createElement(l.CardBody,null,n().createElement("div",null,v&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg}}),T&&d("curiosity-graph.cardBodyMetric_total",{context:Z&&P||"",total:null===(t=m.BM.numberDisplay(X))||void 0===t||null===(r=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===r?void 0:r.toUpperCase()},[n().createElement("strong",{title:X,"aria-label":X})])))),n().createElement(h.MinHeight,{key:"currentFooter"},n().createElement(l.CardFooter,null,n().createElement("div",{className:Z?"":"hidden"},T&&w&&d("curiosity-graph.cardFooterMetric",{date:o().utc(w).format(m.i3.timestampUTCTimeFormats.yearTimeShort)}))))),n().createElement(l.Card,{"data-test":"graphMonthlyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(E?"blur":"")},n().createElement(l.CardTitle,null,d("curiosity-graph.cardHeadingMetric_monthlyTotal",{context:P,month:R})),n().createElement(h.MinHeight,{key:"totalMonthlyBody"},n().createElement(l.CardBody,null,n().createElement("div",null,v&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg}}),T&&d("curiosity-graph.cardBodyMetric_total",{context:Q&&P||"",total:null===(a=m.BM.numberDisplay(O))||void 0===a||null===(i=a.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===i?void 0:i.toUpperCase()},[n().createElement("strong",{title:O,"aria-label":O})])))),n().createElement(h.MinHeight,{key:"totalMonthlyFooter"},n().createElement(l.CardFooter,null,n().createElement("div",{className:Q?"":"hidden"},T&&L&&d("curiosity-graph.cardFooterMetric",{date:o().utc(L).format(m.i3.timestampUTCTimeFormats.yearTimeShort)}))))))),n().createElement(l.Flex,{flex:{default:"flex_3"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},n().createElement(l.FlexItem,{className:"curiosity-usage-graph__totals-graph-column"},u)))};y.defaultProps={children:null,t:C.translate,useMetricsSelector:s.useMetricsSelector,useProductGraphTallyQuery:d.useProductGraphTallyQuery}}}]);
//# sourceMappingURL=../sourcemaps/608.9a6cb8b5838542b02772c1fe1543aeda.js.map