"use strict";(self.webpackChunksubscriptions=self.webpackChunksubscriptions||[]).push([[9407,5394],{25394:function(e,t,r){r.r(t),r.d(t,{DEFAULT_CONTEXT:function(){return h},GraphCardContext:function(){return g},context:function(){return S},default:function(){return S},useGetMetrics:function(){return y},useGraphCardActions:function(){return v},useGraphCardContext:function(){return C},useMetricsSelector:function(){return f},useParseFiltersSettings:function(){return m}});var a=r(87462),n=r(28416),s=r.n(n),l=r(15451),i=r(90154),o=r(87284),u=r(51858),c=r(70136),d=r(62834),p=r(78139);const h=[{settings:{metrics:[]}},d.B.noop],g=s().createContext(h),C=()=>(0,n.useContext)(g),m=function(){let{useProduct:e=u.useProduct,useProductGraphConfig:t=u.useProductGraphConfig}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{productId:r}=e(),{filters:a=[],settings:s={}}=t();return(0,n.useMemo)((()=>p.graphCardHelpers.generateChartSettings({filters:a,settings:s,productId:r})),[a,s,r])},f=function(){let{useGraphCardContext:e=C,useSelectorsResponse:t=o.Cr.reactRedux.useSelectorsResponse}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{settings:r={}}=e(),{metrics:a=[]}=r,{error:n,fulfilled:s,pending:l,data:i=[],...u}=t(a.map((e=>{let{id:t,isCapacity:r}=e;return e=>{var a,n;let{graph:s}=e;return r?null===(a=s.capacity)||void 0===a?void 0:a[t]:null===(n=s.tally)||void 0===n?void 0:n[t]}}))),c={},d=null==i?void 0:i.map(((e,t)=>{const r={...a[t],...e};return c[a[t].id]=r,r}));return{...u,data:c,dataSets:d,error:n,fulfilled:s,pending:l}},y=function(){let{getGraphMetrics:e=o.Ak.rhsm.getGraphMetrics,useDispatch:t=o.Cr.reactRedux.useDispatch,useGraphCardContext:r=C,useMetricsSelector:a=f,useProduct:n=u.useProduct,useProductGraphTallyQuery:s=u.useProductGraphTallyQuery}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{productId:i}=n(),c=s(),d=t(),p=a(),{settings:h={}}=r(),{metrics:g=[]}=h;return(0,l.Z)((()=>{const t=g.map((e=>{let{metric:t,isCapacity:r,query:a}=e;return{id:i,metric:t,isCapacity:r,query:a}}));e(t,c)(d)}),[g,i,c]),p},v=function(){let{categoryOptions:e=c.toolbarFieldOptions,useMetricsSelector:t=f,useGraphCardContext:r=C}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{pending:l,dataSets:o}=t(),{settings:u={}}=r(),{actions:p}=u;return(0,n.useMemo)((()=>null==p?void 0:p.map((t=>{let{id:r,content:n,...u}=t;const c=e.find((e=>{let{value:t}=e;return r===t})),{component:p}=c||{};return p&&s().createElement(i.ToolbarItem,{key:"option-".concat(r)},s().createElement(p,(0,a.Z)({isFilter:!1},u)))||n&&!l&&o.length&&s().createElement(i.ToolbarItem,{key:r||d.B.generateId()},"function"==typeof n?n({data:o}):n)||null}))),[p,e,o,l])},S={GraphCardContext:g,DEFAULT_CONTEXT:h,useGetMetrics:y,useGraphCardActions:v,useGraphCardContext:C,useMetricsSelector:f,useParseFiltersSettings:m}},29407:function(e,t,r){r.r(t),r.d(t,{GraphCardMetricTotals:function(){return f},default:function(){return f}});var a=r(28416),n=r.n(a),s=r(45697),l=r.n(s),i=r(90154),o=r(68929),u=r.n(o),c=r(51858),d=r(25394),p=r(1797),h=r(65876),g=r(46262),C=r(78139),m=r(76006);const f=e=>{var t;let{children:r,useGraphCardContext:a,useMetricsSelector:s,useProductGraphTallyQuery:l}=e;const{settings:o={}}=a(),c=l(),{pending:d,error:f,fulfilled:y,dataSets:v=[]}=s(),{[g.O6.START_DATE]:S}=c,{isCurrent:G}=h.toolbarFieldOptions.find((e=>e.title===S||e.value.startDate.toISOString()===S))||{};if(null!=o&&o.isMetricDisplay&&null!=o&&null!==(t=o.cards)&&void 0!==t&&t.length){var T,E;const e=m.helpers.setImmutableData({dataSets:v.map((e=>{const{id:t,metric:r}=e||{};return{...e,display:{...C.graphCardHelpers.getDailyMonthlyTotals({dataSet:e,isCurrent:G}),...C.graphCardHelpers.getRemainingCapacity({...C.graphCardHelpers.getPrepaidTallyCapacity({data:v}),isCurrent:G}),...C.graphCardHelpers.getRemainingOverage({...C.graphCardHelpers.getPrepaidTallyCapacity({data:v}),isCurrent:G}),chartId:t,metricId:r}}}))},{isClone:!0});return n().createElement("div",{"data-test":"graphMetricTotals-".concat(null==o||null===(T=o.groupMetric)||void 0===T||null===(T=T.map((e=>u()(e))))||void 0===T?void 0:T.join("-")),"data-test-data":JSON.stringify(e),className:"curiosity-usage-graph__totals"},n().createElement("div",null,n().createElement("div",{className:"curiosity-usage-graph__totals-column"},null==o||null===(E=o.cards)||void 0===E?void 0:E.map(((t,r)=>{let{key:a,header:s,body:l,footer:o}=t;return n().createElement(i.Card,{key:a||m.helpers.generateHash({metricDisplayPassedData:e,index:r}),isPlain:!0,"data-test":"graphMetricTotalsCard-".concat(r),className:"curiosity-usage-graph__totals-column-card ".concat(f?"blur":"")},n().createElement(i.CardHeader,null,n().createElement(i.CardTitle,null,n().createElement(i.Title,{headingLevel:"h2",size:"md"},d&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg}}),y&&("function"==typeof s&&s(e)||s)))),n().createElement(i.CardBody,null,n().createElement("div",null,d&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg,height:"60px"}}),y&&("function"==typeof l&&l(e)||l))),n().createElement(i.CardFooter,null,n().createElement("div",null,d&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg}}),y&&("function"==typeof o&&o(e)||o))))})))),n().createElement("div",null,n().createElement("div",{className:"curiosity-usage-graph__totals-graph-column"},r)))}return n().createElement("div",{"data-test":"graphStandalone",className:"curiosity-usage-graph__standalone"},r)};f.propTypes={children:l().node,useGraphCardContext:l().func,useMetricsSelector:l().func,useProductGraphTallyQuery:l().func},f.defaultProps={children:null,useGraphCardContext:d.useGraphCardContext,useMetricsSelector:d.useMetricsSelector,useProductGraphTallyQuery:c.useProductGraphTallyQuery}}}]);
//# sourceMappingURL=../sourcemaps/9407.4a5ad12a6f31163b8239cbe1b8c55508.js.map