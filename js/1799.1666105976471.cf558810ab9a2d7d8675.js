"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[1799,8139,1339],{91799:function(t,e,r){r.r(e),r.d(e,{GraphCardChart:function(){return C},default:function(){return C}});var a=r(1413),n=r(92950),i=r.n(n),o=r(65834),l=r(15451),u=r(51858),c=r(25394),s=r(78139),d=r(60930),h=r(64418),p=r(44024),m=r(99171),v=r(46262),f=r(91339),y=r(1797),g=r(83109),C=function(t){var e=t.t,r=t.useGetGraphTally,n=t.useGraphCardContext,u=t.useMetricsSelector,c=t.useProduct,g=t.useProductGraphTallyQuery,C=c().productId,T=n().settings,E=void 0===T?{}:T,b=E.actionDisplay,k=E.metric,x=E.metrics,S=void 0===x?[]:x,G=g()[v.O6.GRANULARITY],D=u(),P=D.pending,R=D.error,L=D.data,M=void 0===L?{}:L,_=D.dataSets,A=void 0===_?[]:_,F=r();(0,l.Z)((function(){F(S.map((function(t){var e=t.id;return{id:C,metric:e}})))}),[S,C,F]);var I=(null==k?void 0:k.id)&&"_".concat(null==k?void 0:k.id)||"",H=null;return"function"==typeof b&&(H=b({data:(0,a.Z)({},M)})),i().createElement(o.Card,{className:"curiosity-usage-graph"},i().createElement(f.MinHeight,{key:"headerMinHeight"},i().createElement(o.CardHeader,null,i().createElement(o.CardTitle,null,i().createElement(o.Title,{headingLevel:"h2",size:"lg"},e("curiosity-graph.cardHeading".concat(I),{context:C}),i().createElement(m.GraphCardChartTitleTooltip,null))),H&&i().createElement(o.CardActions,{className:R?"blur":""},H))),i().createElement(f.MinHeight,{key:"bodyMinHeight"},i().createElement(o.CardBody,null,i().createElement("div",{className:(R?"blur":P&&"fadein")||""},P&&i().createElement(y.Loader,{variant:"graph"}),!P&&i().createElement(d.Chart,Object.assign({},s.graphCardHelpers.generateExtendedChartSettings({settings:E,granularity:G}),{dataSets:A,chartLegend:function(t){var e=t.chart,r=t.datum;return i().createElement(h.GraphCardChartLegend,{chart:e,datum:r})},chartTooltip:function(t){var e=t.datum;return i().createElement(p.GraphCardChartTooltip,{datum:e})}}))))))};C.defaultProps={t:g.translate,useGetGraphTally:c.useGetGraphTally,useGraphCardContext:c.useGraphCardContext,useMetricsSelector:c.useMetricsSelector,useProduct:u.useProduct,useProductGraphTallyQuery:u.useProductGraphTallyQuery}},64418:function(t,e,r){r.r(e),r.d(e,{GraphCardChartLegend:function(){return h},default:function(){return h}});var a=r(92950),n=r.n(a),i=r(65834),o=r(89048),l=r(51858),u=r(61072),c=r(76006),s=r(83109),d=r(1138),h=function(t){var e=t.chart,r=t.datum,a=t.t,l=t.useDispatch,c=t.useSelectors,s=(0,t.useProduct)(),h=s.productLabel,p=s.viewId,m=l(),v=c(r.dataSets.map((function(t){var e=t.id;return function(t){var r;return null===(r=t.graph.legend)||void 0===r?void 0:r["".concat(p,"-").concat(e)]}})));(0,o.Z)((function(){r.dataSets.forEach((function(t,r){var a=t.id;((null==v?void 0:v[r])||e.isToggled(a))&&e.hide(a)}))}));var f=function(t){var r=e.toggle(t);m({type:u.JD.graph.SET_GRAPH_LEGEND,id:"".concat(p,"-").concat(t),value:r})};return n().createElement(n().Fragment,null,r.dataSets.map((function(t,r){var o=t.id,l=t.isThreshold,u=t.stroke,c=t.data,s=!(void 0===c?[]:c).find((function(t){var e=t.y,r=t.hasData;return e>=0&&!0===r||e>=0&&!0===l}))||!1,p=a(["curiosity-graph.label_".concat(l?"threshold":o),"curiosity-graph.label_no"],{product:h,context:h}),m=a("curiosity-graph.legendTooltip".concat(l?"_threshold":"","_").concat(o),{product:h,context:h},[n().createElement("span",{style:{whiteSpace:"nowrap"}})]),y=(null==v?void 0:v[r])||e.isToggled(o),g=n().createElement(i.Button,{onClick:function(){return f(o)},onKeyPress:function(){return f(o)},className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(o),variant:"link",component:"a",isDisabled:s,icon:(s||y)&&n().createElement(d.ChartIcon,{symbol:"eyeSlash"})||n().createElement(d.ChartIcon,{symbol:l?"dash":"square",style:{visibility:s||y?"hidden":"visible"},fill:u})},p);return m?n().createElement(i.Tooltip,{key:"curiosity-tooltip-".concat(o),content:n().createElement("p",null,m),position:i.TooltipPosition.top,enableFlip:!0,distance:5},g):g})))};h.defaultProps={chart:{hide:c.BM.noop,toggle:c.BM.noop,isToggled:c.BM.noop},datum:{dataSets:[]},t:s.translate,useDispatch:u.Cr.reactRedux.useDispatch,useSelectors:u.Cr.reactRedux.useSelectors,useProduct:l.useProduct}},99171:function(t,e,r){r.r(e),r.d(e,{GraphCardChartTitleTooltip:function(){return s},default:function(){return s}});var a=r(92950),n=r.n(a),i=r(65834),o=r(82197),l=r(51858),u=r(25394),c=r(83109),s=function(t){var e=t.t,r=t.useGraphCardContext,a=(0,t.useProduct)().productId,l=r().settings,u=void 0===l?{}:l,c=u.isCardTitleDescription,s=u.metric,d=(null==s?void 0:s.id)&&"_".concat(null==s?void 0:s.id)||"";return c?n().createElement(i.Tooltip,{content:n().createElement("p",null,e("curiosity-graph.cardHeadingDescription".concat(d),{context:a})),position:i.TooltipPosition.top,enableFlip:!1,distance:5,entryDelay:100,exitDelay:0},n().createElement("span",{className:"curiosity-icon__question"},n().createElement(o.OutlinedQuestionCircleIcon,null))):null};s.defaultProps={t:c.translate,useProduct:l.useProduct,useGraphCardContext:u.useGraphCardContext}},44024:function(t,e,r){r.r(e),r.d(e,{GraphCardChartTooltip:function(){return h},default:function(){return h}});var a=r(92950),n=r.n(a),i=r(51858),o=r(78139),l=r(83109),u=r(60930),c=r(1138),s=r(46262),d=r(76006),h=function(t){var e=t.datum,r=t.t,a=t.useProduct,i=t.useProductGraphTallyQuery,l=a(),h=l.productId,p=l.productLabel,m=i()[s.O6.GRANULARITY],v=null,f=[],y=(e||{}).itemsByKey,g=void 0===y?{}:y;return Object.keys(g).reverse().forEach((function(t,e){var a,i,l,s;0===e&&(v=(0,o.getTooltipDate)({date:null===(s=g[t])||void 0===s?void 0:s.data.date,granularity:m}));var d={color:null===(a=g[t])||void 0===a?void 0:a.color};if((null===(i=g[t])||void 0===i?void 0:i.chartType)===u.ChartTypeVariant.threshold){var y,C,T,E=null!==(y=null===(C=g[t])||void 0===C?void 0:C.data.y)&&void 0!==y?y:r("curiosity-graph.label_noData");null!==(T=g[t])&&void 0!==T&&T.data.hasInfinite&&(E=d.color?n().createElement(c.ChartIcon,{symbol:"infinity",fill:"#ffffff",title:r("curiosity-graph.label_threshold",{context:"infinite"})}):r("curiosity-graph.label_threshold",{context:"infinite"})),d.label=r("curiosity-graph.label_threshold"),d.value=E}else{var b,k,x=!1===(null===(b=g[t])||void 0===b?void 0:b.data.hasData)&&r("curiosity-graph.label_noData")||(null===(k=g[t])||void 0===k?void 0:k.data.y)||0;d.label=r("curiosity-graph.label_".concat(t),{context:h,product:p}),d.value=x}d.chartType=null===(l=g[t])||void 0===l?void 0:l.chartType,f.push(d)})),n().createElement("div",{className:"curiosity-usage-graph__tooltip"},n().createElement("table",{summary:r("curiosity-graph.tooltipSummary")},f.length&&v&&n().createElement("thead",null,n().createElement("tr",null,n().createElement("th",{colSpan:2},v)))||null,f.length&&n().createElement("tbody",null,f.map((function(t){var e,r,a="number"==typeof t.value&&!Number.isInteger(t.value)&&(null===(e=d.BM.numberDisplay(t.value))||void 0===e||null===(r=e.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!0}))||void 0===r?void 0:r.toUpperCase())||t.value;return n().createElement("tr",{key:"tooltip-".concat(t.label)},n().createElement("th",null,t.chartType===u.ChartTypeVariant.threshold&&n().createElement(c.ChartIcon,{size:"sm",symbol:"dash",fill:t.color||"transparent"}),t.chartType!==u.ChartTypeVariant.threshold&&n().createElement(c.ChartIcon,{size:"sm",fill:t.color||"transparent"})," ",t.label),n().createElement("td",null,a))})))||null),!f.length&&r("curiosity-graph.label_noData",{context:"error"})||null)};h.defaultProps={datum:{},t:l.translate,useProduct:i.useProduct,useProductGraphTallyQuery:i.useProductGraphTallyQuery}},25394:function(t,e,r){r.r(e),r.d(e,{DEFAULT_CONTEXT:function(){return u},GraphCardContext:function(){return c},context:function(){return p},default:function(){return p},useGetGraphTally:function(){return d},useGraphCardContext:function(){return s},useMetricsSelector:function(){return h}});var a=r(1413),n=r(92950),i=r.n(n),o=r(61072),l=r(51858),u=[{settings:{isStandalone:!1,metrics:[],metric:void 0}},r(62834).B.noop],c=i().createContext(u),s=function(){return(0,n.useContext)(c)},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useDispatch,r=void 0===e?o.Cr.reactRedux.useDispatch:e,a=t.useProductGraphTallyQuery,n=void 0===a?l.useProductGraphTallyQuery:a,i=n(),u=r();return function(t){return o.Ak.rhsm.getGraphTally(t,i)(u)}},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useGraphCardContext,r=void 0===e?s:e,n=t.useSelectors,i=void 0===n?o.Cr.reactRedux.useSelectors:n,u=t.useProduct,c=void 0===u?l.useProduct:u,d=c(),h=d.productId,p=r(),m=p.settings,v=void 0===m?{}:m,f=v.metrics,y=void 0===f?[]:f,g={},C=i(y.map((function(t){var e=t.id;return function(t){var r;return null===(r=t.graph.tally)||void 0===r?void 0:r["".concat(h,"_").concat(e)]}})),[]),T=!1,E=!1,b=0,k=C.map((function(t,e){var r,n,i=t||{},o=i.pending,l=i.fulfilled,u=i.error,c=i.cancelled;!(!o&&!c)&&(T=!0),l&&(E=!0),u&&(b+=1);var s=(0,a.Z)((0,a.Z)({},y[e]),{},{data:(null==t||null===(r=t.data)||void 0===r?void 0:r.data)||[],meta:(null==t||null===(n=t.data)||void 0===n?void 0:n.meta)||{}});return g[y[e].id]=s,s})),x={data:g,dataSets:k,error:!1,fulfilled:!1,pending:!1};return b===k.length?x.error=!0:T?x.pending=!0:E&&(x.fulfilled=!0),x},p={GraphCardContext:c,DEFAULT_CONTEXT:u,useGetGraphTally:d,useGraphCardContext:s,useMetricsSelector:h}},78139:function(t,e,r){r.r(e),r.d(e,{default:function(){return g},generateChartSettings:function(){return h},generateExtendedChartSettings:function(){return y},getChartXAxisLabelIncrement:function(){return p},getTooltipDate:function(){return m},graphCardHelpers:function(){return g},xAxisTickFormat:function(){return v},yAxisTickFormat:function(){return f}});var a=r(1413),n=r(45987),i=r(30381),o=r.n(i),l=r(77323),u=r(60930),c=r(30446),s=r(76006),d=["id","isStandalone"],h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],i=[];t.forEach((function(t){var o=t.id,c=t.isStandalone,s=void 0!==c&&c,h=(0,n.Z)(t,d);if(o){var p=(null==h?void 0:h.chartType)===u.ChartTypeVariant.threshold,m={id:o,isStacked:!p,isStandalone:s,isThreshold:p,isCapacity:p,strokeWidth:2};p&&(m.stroke=l.chart_color_green_300.value,m.strokeDasharray="4,3",m.strokeWidth=3),s?r.push({settings:(0,a.Z)((0,a.Z)({padding:{bottom:75,left:75,right:45,top:45}},e),{},{isStandalone:!0,metric:(0,a.Z)((0,a.Z)({},m),h),metrics:[(0,a.Z)((0,a.Z)({},m),h)]})}):i.push((0,a.Z)((0,a.Z)({},m),h))}}));var o=i.length&&{settings:(0,a.Z)((0,a.Z)({},e),{},{isStandalone:!1,metric:void 0,metrics:i})}||void 0;return{standaloneFiltersSettings:r,groupedFiltersSettings:o}},p=function(t){switch(t){case c.U9.DAILY:return 5;case c.U9.WEEKLY:case c.U9.MONTHLY:return 2;case c.U9.QUARTERLY:default:return 1}},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.date,r=t.granularity,a=o().utc(e);switch(r){case c.U9.QUARTERLY:return"".concat(a.format(s.i3.timestampQuarterFormats.yearShort)," - ").concat(a.add(1,"quarter").format(s.i3.timestampQuarterFormats.yearShort));case c.U9.MONTHLY:return a.format(s.i3.timestampMonthFormats.yearLong);case c.U9.WEEKLY:return"".concat(a.format(s.i3.timestampDayFormats.short)," - ").concat(a.add(1,"week").format(s.i3.timestampDayFormats.yearShort));case c.U9.DAILY:default:return a.format(s.i3.timestampDayFormats.long)}},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.callback,r=t.date,a=t.granularity,n=t.tick,i=t.previousDate;if(r&&a){if(e)return e({callback:e,date:r,granularity:a,tick:n,previousDate:i});var l,u=o().utc(r),d=0!==n&&Number.parseInt(u.year(),10)!==Number.parseInt(o().utc(i).year(),10);switch(a){case c.U9.QUARTERLY:l=(l=d?u.format(s.i3.timestampQuarterFormats.yearShort):u.format(s.i3.timestampQuarterFormats.short)).replace(/\s/,"\n");break;case c.U9.MONTHLY:l=(l=d?u.format(s.i3.timestampMonthFormats.yearShort):u.format(s.i3.timestampMonthFormats.short)).replace(/\s/,"\n");break;case c.U9.WEEKLY:case c.U9.DAILY:default:l=(l=d?u.format(s.i3.timestampDayFormats.yearShort):u.format(s.i3.timestampDayFormats.short)).replace(/\s(\d{4})$/,"\n$1")}return l}},f=function(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.callback,n=r.tick;return a?a({tick:n}):null===(t=s.BM.numberDisplay(n))||void 0===t||null===(e=t.format({average:!0,mantissa:1,trimMantissa:!0,lowPrecision:!1}))||void 0===e?void 0:e.toUpperCase()},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.settings,r=t.granularity;return(0,a.Z)((0,a.Z)({},e),{},{xAxisLabelIncrement:p(r),xAxisTickFormat:function(t){var a=t.item,n=t.previousItem,i=t.tick;return v({callback:null==e?void 0:e.xAxisTickFormat,tick:i,date:a.date,previousDate:n.date,granularity:r})},yAxisTickFormat:function(t){var r=t.tick;return f({callback:null==e?void 0:e.yAxisTickFormat,tick:r})}})},g={generateChartSettings:h,generateExtendedChartSettings:y,getChartXAxisLabelIncrement:p,getTooltipDate:m,xAxisTickFormat:v,yAxisTickFormat:f}},91339:function(t,e,r){r.r(e),r.d(e,{MinHeight:function(){return d},default:function(){return d}});var a=r(15671),n=r(43144),i=r(97326),o=r(60136),l=r(54062),u=r(92950),c=r.n(u),s=r(76006),d=function(t){(0,o.Z)(r,t);var e=(0,l.Z)(r);function r(){var t;(0,a.Z)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(t=e.call.apply(e,[this].concat(o))).containerRef=c().createRef(),t.innerContainerRef=c().createRef(),t.updatedContainerWidth=0,t.resizeObserver=s.BM.noop,t.onResizeContainer=function(){var e,r,a=(0,i.Z)(t).updatedContainerWidth,n=t.props.updateOnResize,o=(null===(e=t.containerRef)||void 0===e||null===(r=e.current)||void 0===r?void 0:r.clientWidth)||0;n&&o!==a&&(t.updatedContainerWidth=o,t.setMinHeight(!0))},t}return(0,n.Z)(r,[{key:"componentDidMount",value:function(){var t=this,e=this.props.updateOnResize;window.setTimeout((function(){t.setMinHeight()})),e&&this.setResizeObserver()}},{key:"componentDidUpdate",value:function(){var t=this;this.props.updateOnContent&&window.setTimeout((function(){t.setMinHeight()}))}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setMinHeight",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.props.minHeight,a=this.containerRef.current,n=void 0===a?{}:a,i=this.innerContainerRef.current,o=void 0===i?{}:i;null!=n&&n.style&&(r>(t=e?(null==o?void 0:o.clientHeight)||0:(null==n?void 0:n.clientHeight)||0)&&(t=r),n.style.minHeight="".concat(t,"px"))}},{key:"setResizeObserver",value:function(){var t=this;window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",t.onResizeContainer)}}},{key:"render",value:function(){var t=this.props.children;return c().createElement("div",{className:"curiosity-minheight",ref:this.containerRef},c().createElement("div",{ref:this.innerContainerRef},t))}}]),r}(c().Component);d.defaultProps={updateOnContent:!1,updateOnResize:!0,minHeight:0}}}]);
//# sourceMappingURL=../sourcemaps/1799.6ad1f62e93927b8110d2e665a422e039.js.map