"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[9175,7585,1824],{87585:function(e,t,r){r.r(t),r.d(t,{BannerMessages:function(){return f},default:function(){return f}});var a=r(4942),n=r(1413),i=r(29439),l=r(92950),o=r.n(l),c=r(73666),s=r(52831),u=r(15451),d=r(31824),m=r(76006),p=r(83109),f=function(e){var t=e.messages,r=e.useGetAppMessages,s=(0,l.useState)({}),d=(0,i.Z)(s,2),m=d[0],p=d[1],f=(0,l.useState)([]),g=(0,i.Z)(f,2),y=g[0],h=g[1],v=r().data;return(0,u.Z)((function(){var e=[];t.length&&Object.entries(v).forEach((function(r){var a=(0,i.Z)(r,2),l=a[0],o=a[1];if(!0!==m[l]&&!0===o){var c=t.find((function(e){return e.id===l}));c&&e.push((0,n.Z)({key:l},c))}})),h(e.map((function(e){var t=e.key,r=e.message,i=e.title,l=e.variant,s=void 0===l?c.AlertVariant.info:l,u=o().createElement(c.AlertActionCloseButton,{onClose:function(){return p((0,n.Z)((0,n.Z)({},m),{},(0,a.Z)({},t,!0)))}});return o().createElement(c.Alert,{actionClose:u,key:t,title:i,variant:s},r)})))}),[v,m,t]),null!=y&&y.length?o().createElement("div",{className:"curiosity-banner-messages"},y):null};f.defaultProps={messages:[{id:"cloudigradeMismatch",title:(0,p.translate)("curiosity-banner.dataMismatchTitle"),message:(0,p.translate)("curiosity-banner.dataMismatchMessage",{context:""!==m.BM.UI_LINK_REPORT_ACCURACY_RECOMMENDATIONS&&"cloudigradeMismatch",appName:m.BM.UI_DISPLAY_NAME},[o().createElement(c.Button,{isInline:!0,component:"a",variant:"link",icon:o().createElement(s.ExternalLinkAltIcon,null),iconPosition:"right",target:"_blank",href:m.BM.UI_LINK_REPORT_ACCURACY_RECOMMENDATIONS})])}],useGetAppMessages:d.useGetAppMessages}},31824:function(e,t,r){r.r(t),r.d(t,{context:function(){return d},default:function(){return d},useGetAppMessages:function(){return u}});var a=r(4942),n=r(1413),i=r(15451),l=r(61072),o=r(51858),c=r(76006),s=r(46262),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getMessageReports,r=void 0===t?l.Ak.rhsm.getMessageReports:t,u=e.useDispatch,d=void 0===u?l.Cr.reactRedux.useDispatch:u,m=e.useProduct,p=void 0===m?o.useProduct:m,f=e.useProductQuery,g=void 0===f?o.useProductQuery:f,y=e.useSelectorsResponse,h=void 0===y?l.Cr.reactRedux.useSelectorsResponse:y,v=p(),E=v.productId,C=g(),_=d(),M=h({id:"messages",selector:function(e){var t,r=e.messages;return null==r||null===(t=r.report)||void 0===t?void 0:t[E]}}),S=M.error,T=M.fulfilled,I=M.pending,P=M.data;(0,i.Z)((function(){if(E){var e,t=c.i3.getRangedDateTime("CURRENT"),i=t.startDate,l=t.endDate,o=(0,n.Z)((0,n.Z)({},C),{},(e={},(0,a.Z)(e,s.O6.GRANULARITY,s.U9.DAILY),(0,a.Z)(e,s.O6.START_DATE,i.toISOString()),(0,a.Z)(e,s.O6.END_DATE,l.toISOString()),e));r(E,o)(_)}}),[E,C]);var D={cloudigradeMismatch:!1};if(T){var A,b,G=P||{},R=G.messages,x=void 0===R?{}:R;D.cloudigradeMismatch=void 0!==(null==x||null===(A=x.data)||void 0===A||null===(b=A.reverse())||void 0===b?void 0:b.find((function(e){return!0===e[s.pM.RHSM_API_RESPONSE_TALLY_META_TYPES.HAS_CLOUDIGRADE_MISMATCH]})))}return{error:S,fulfilled:T,pending:I,data:(0,n.Z)({},D)}},d={useGetAppMessages:u}},10608:function(e,t,r){r.r(t),r.d(t,{GraphCard:function(){return u},default:function(){return u}});var a=r(92950),n=r.n(a),i=r(51858),l=r(76006),o=r(11014),c=r(49877),s=r(78139),u=function(e){var t=e.isDisabled,r=(0,e.useProductGraphConfig)().filters,a=s.graphCardHelpers.generateChartSettings(r),i=a.groupedFilters,l=a.standaloneFilters;return t?null:n().createElement(n().Fragment,null,(null==i?void 0:i.length)&&n().createElement(o.GraphCardMetrics,{metricFilters:i})||null,l.map((function(e){return n().createElement(c.GraphCardMetric,{key:"graphCard_".concat(e.id),metricFilter:e})})))};u.defaultProps={isDisabled:l.BM.UI_DISABLED_GRAPH,useProductGraphConfig:i.useProductGraphConfig}},49877:function(e,t,r){r.r(t),r.d(t,{GraphCardMetric:function(){return d},default:function(){return d}});var a=r(1413),n=r(29439),i=r(92950),l=r.n(i),o=r(91799),c=r(51858),s=r(25394),u=(r(46262),r(29407)),d=function(e){var t=e.metricFilter,r=e.useProductGraphConfig,c=(0,i.useState)({}),d=(0,n.Z)(c,2),m=d[0],p=d[1],f=r().settings;return(0,i.useEffect)((function(){p({settings:(0,a.Z)((0,a.Z)({padding:{bottom:75,left:75,right:45,top:45}},f),{},{isStandalone:!0,metric:t,metrics:[t]})})}),[t,f,p]),l().createElement(s.GraphCardContext.Provider,{value:m},l().createElement(u.GraphCardMetricTotals,null,l().createElement(o.GraphCardChart,null)))};d.defaultProps={metricFilter:{},useProductGraphConfig:c.useProductGraphConfig}},29407:function(e,t,r){r.r(t),r.d(t,{GraphCardMetricTotals:function(){return v},default:function(){return v}});var a=r(92950),n=r.n(a),i=r(73666),l=r(30381),o=r.n(l),c=r(68929),s=r.n(c),u=r(51858),d=r(25394),m=r(91339),p=r(1797),f=r(76006),g=r(65876),y=r(46262),h=r(83109),v=function(e){var t,r,a,l,c=e.children,u=e.t,d=e.useMetricsSelector,h=(0,e.useProductGraphTallyQuery)()[y.O6.START_DATE],v=d(),E=v.pending,C=v.error,_=v.fulfilled,M=v.dataSets,S=(void 0===M?[]:M)[0]||{},T=S.data,I=void 0===T?[]:T,P=S.id,D=S.meta,A=void 0===D?{}:D,b=I[I.length-1]||{},G=b.date,R=b.hasData,x=b.y,B=I.find((function(e){return!0===e.isCurrentDate}))||{},L=B.date,k=B.hasData,F=B.y,N=A.totalMonthlyDate,H=A.totalMonthlyHasData,U=A.totalMonthlyValue,O=g.toolbarFieldOptions.find((function(e){return e.title===h||e.value.startDate.toISOString()===h}))||{},Z=O.title,Q=O.isCurrent,Y=Q?L:G,w=Q?k:R,V=Q?F:x;return n().createElement(i.Flex,{"data-test":"graphMetricTotals-".concat(s()(P)),className:"curiosity-usage-graph__totals"},n().createElement(i.Flex,{flex:{default:"flex_1"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},n().createElement(i.FlexItem,{className:"curiosity-usage-graph__totals-column"},n().createElement(i.Card,{"data-test":"graphDailyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(C?"blur":"")},n().createElement(i.CardTitle,null,u("curiosity-graph.cardHeadingMetric_dailyTotal",{context:P,month:Z})),n().createElement(m.MinHeight,{key:"currentBody"},n().createElement(i.CardBody,null,n().createElement("div",null,E&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg}}),_&&u("curiosity-graph.cardBodyMetric_total",{context:w&&P||"",total:null===(t=f.BM.numberDisplay(V))||void 0===t||null===(r=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===r?void 0:r.toUpperCase()},[n().createElement("strong",{title:V,"aria-label":V})])))),n().createElement(m.MinHeight,{key:"currentFooter"},n().createElement(i.CardFooter,null,n().createElement("div",{className:w?"":"hidden"},_&&Y&&u("curiosity-graph.cardFooterMetric",{date:o().utc(Y).format(f.i3.timestampUTCTimeFormats.yearTimeShort)}))))),n().createElement(i.Card,{"data-test":"graphMonthlyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(C?"blur":"")},n().createElement(i.CardTitle,null,u("curiosity-graph.cardHeadingMetric_monthlyTotal",{context:P,month:Z})),n().createElement(m.MinHeight,{key:"totalMonthlyBody"},n().createElement(i.CardBody,null,n().createElement("div",null,E&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg}}),_&&u("curiosity-graph.cardBodyMetric_total",{context:H&&P||"",total:null===(a=f.BM.numberDisplay(U))||void 0===a||null===(l=a.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===l?void 0:l.toUpperCase()},[n().createElement("strong",{title:U,"aria-label":U})])))),n().createElement(m.MinHeight,{key:"totalMonthlyFooter"},n().createElement(i.CardFooter,null,n().createElement("div",{className:H?"":"hidden"},_&&N&&u("curiosity-graph.cardFooterMetric",{date:o().utc(N).format(f.i3.timestampUTCTimeFormats.yearTimeShort)}))))))),n().createElement(i.Flex,{flex:{default:"flex_3"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},n().createElement(i.FlexItem,{className:"curiosity-usage-graph__totals-graph-column"},c)))};v.defaultProps={children:null,t:h.translate,useMetricsSelector:d.useMetricsSelector,useProductGraphTallyQuery:u.useProductGraphTallyQuery}},11014:function(e,t,r){r.r(t),r.d(t,{GraphCardMetrics:function(){return u},default:function(){return u}});var a=r(1413),n=r(29439),i=r(92950),l=r.n(i),o=r(91799),c=r(51858),s=r(25394),u=(r(46262),function(e){var t=e.metricFilters,r=e.useProductGraphConfig,c=(0,i.useState)({}),u=(0,n.Z)(c,2),d=u[0],m=u[1],p=r().settings;return(0,i.useEffect)((function(){m({settings:(0,a.Z)((0,a.Z)({},p),{},{isStandalone:!1,metric:void 0,metrics:t})})}),[t,p,m]),l().createElement(s.GraphCardContext.Provider,{value:d},l().createElement(o.GraphCardChart,null))});u.defaultProps={metricFilters:[],useProductGraphConfig:c.useProductGraphConfig}},29175:function(e,t,r){r.r(t),r.d(t,{ProductView:function(){return T},default:function(){return T}});var a=r(92950),n=r.n(a),i=r(73666),l=r(31369),o=r(3281),c=r(51858),s=r(52422),u=r(61072),d=r(28341),m=r(10608),p=r(92227),f=r(88191),g=r(82195),y=r(76006),h=r(87585),v=r(49844),E=r(2738),C=r(69051),_=r(16696),M=r(46262),S=r(83109),T=function(e){var t=e.t,r=e.toolbarGraph,a=e.toolbarGraphDescription,o=(0,e.useRouteDetail)(),S=o.productParameter,T=o.productConfig;return n().createElement(s.PageLayout,null,n().createElement(s.PageHeader,{productLabel:S},t("curiosity-view.title",{appName:y.BM.UI_DISPLAY_NAME,context:S})),n().createElement(s.PageColumns,null,T.map((function(e){return function(e){var o=e.graphTallyQuery,S=e.inventoryHostsQuery,T=e.inventorySubscriptionsQuery,I=e.query,P=e.initialGuestsFilters,D=e.initialInventoryFilters,A=e.initialInventorySettings,b=e.initialSubscriptionsInventoryFilters,G=e.productDisplay,R=e.productId,x=e.viewId;if(!R||!x)return null;var B=u.IT.parseRhsmQuery(I,{graphTallyQuery:o,inventoryHostsQuery:S,inventorySubscriptionsQuery:T}),L=B.graphTallyQuery,k=B.inventoryHostsQuery,F=null;a&&(F=n().createElement(i.Tooltip,{content:n().createElement("p",null,t("curiosity-graph.cardHeadingDescription",{context:R})),position:i.TooltipPosition.top,enableFlip:!1,distance:5,entryDelay:100,exitDelay:0},n().createElement("sup",{className:"curiosity-icon__info"},n().createElement(l.ZP,null))));var N=n().createElement(n().Fragment,null,t("curiosity-graph.cardHeading",{context:R}),F);return n().createElement(c.ProductViewContext.Provider,{value:e,key:"product_".concat(R)},n().createElement(s.PageMessages,null,G!==M.ax.HOURLY&&n().createElement(h.default,null)),n().createElement(s.PageToolbar,null,n().createElement(p.Toolbar,null)),n().createElement(s.PageSection,null,G!==M.ax.HOURLY&&n().createElement(d.ConnectedGraphCard,{key:"graph_".concat(R),query:L,productId:R,viewId:x,cardTitle:N},n().isValidElement(r)&&r||!1!==r&&n().createElement(E.ToolbarFieldGranularity,{position:v.SelectPosition.right})),G===M.ax.HOURLY&&n().createElement(m.GraphCard,null)),n().createElement(s.PageSection,{className:G===M.ax.HOURLY?"curiosity-page-section__tabs":""},n().createElement(C.default,{key:"inventory_".concat(R),productId:R,isDisabled:!D&&!b||y.BM.UI_DISABLED_TABLE},!y.BM.UI_DISABLED_TABLE_HOSTS&&G!==M.ax.HOURLY&&D&&n().createElement(C.InventoryTab,{key:"inventory_hosts_".concat(R),title:t("curiosity-inventory.tabHosts",{context:["noInstances",R]})},n().createElement(f.ConnectedInventoryList,{key:"inv_".concat(R),filterGuestsData:P,filterInventoryData:D,productId:R,settings:A,query:k,viewId:x})),!y.BM.UI_DISABLED_TABLE_INSTANCES&&G===M.ax.HOURLY&&D&&n().createElement(C.InventoryTab,{key:"inventory_instances_".concat(R),title:t("curiosity-inventory.tabInstances",{context:["noInstances",R]})},n().createElement(g.InventoryCard,null)),!y.BM.UI_DISABLED_TABLE_SUBSCRIPTIONS&&b&&n().createElement(C.InventoryTab,{key:"inventory_subs_".concat(R),title:t("curiosity-inventory.tabSubscriptions",{context:R})},n().createElement(_.InventoryCardSubscriptions,null)))))}(e)}))))};T.defaultProps={t:S.translate,toolbarGraph:null,toolbarGraphDescription:!1,useRouteDetail:o.Tu}}}]);
//# sourceMappingURL=../sourcemaps/9175.e3794f01775ab6a7f85b0ebd0f97b4d5.js.map