(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[4418,5394,7297],{64418:function(t,e,r){"use strict";r.r(e),r.d(e,{GraphCardChartLegend:function(){return g},default:function(){return g}});var n=r(93433),i=r(84506),o=r(92950),u=r.n(o),a=r(54653),s=r(89048),c=r(51858),d=r(25394),l=r(82410),p=r(76006),f=r(83109),v=r(1138),g=function(t){var e=t.chart,r=t.datum,o=t.t,c=t.useDispatch,d=t.useGraphCardContext,p=t.useSelectors,f=t.useProduct,g=d().settings,h=void 0===g?{}:g,C=f(),y=C.productLabel,m=C.viewId,S=h.isDisabledLegendClick,b=c(),x=p([function(t){var e;return null===(e=t.graph.legend)||void 0===e?void 0:e["".concat(m,"-inverted")]}].concat((0,n.Z)(r.dataSets.map((function(t){var e=t.id;return function(t){var r;return null===(r=t.graph.legend)||void 0===r?void 0:r["".concat(m,"-").concat(e)]}}))))),G=(0,i.Z)(x),E=G[0],P=G.slice(1);(0,s.Z)((function(){r.dataSets.forEach((function(t,r){var n=t.id,i=t.isToolbarFilter;E&&i?new RegExp(E).test(n)||e.hide(n):((null==P?void 0:P[r])||e.isToggled(n))&&e.hide(n)}))}));var T=function(t){var r=e.toggle(t);b({type:l.JD.graph.SET_GRAPH_LEGEND,id:"".concat(m,"-").concat(t),value:r})};return u().createElement(u().Fragment,null,r.dataSets.map((function(t,r){var n=t.id,i=t.isThreshold,s=t.stroke,c=t.data,d=!(void 0===c?[]:c).find((function(t){var e=t.y,r=t.hasData;return e>=0&&!0===r||e>=0&&!0===i}))||!1,l=o(["curiosity-graph.label","curiosity-graph.label_no"],{product:y,context:n}),p=o("curiosity-graph.legendTooltip",{product:y,context:n},[u().createElement("span",{style:{whiteSpace:"nowrap"}})]),f=(null==P?void 0:P[r])||e.isToggled(n),g={};S||(g.onClick=function(){return T(n)},g.onKeyPress=function(){return T(n)});var h=u().createElement(a.Button,Object.assign({},g,{className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(n),variant:"link",component:"a",isDisabled:null!=S?S:d,icon:(d||f)&&u().createElement(v.ChartIcon,{symbol:"eyeSlash"})||u().createElement(v.ChartIcon,{symbol:i?"dash":"square",style:{visibility:d||f?"hidden":"visible"},fill:s})}),l);return p?u().createElement(a.Tooltip,{key:"curiosity-tooltip-".concat(n),content:u().createElement("p",null,p),position:a.TooltipPosition.top,enableFlip:!0,distance:5},u().createElement("span",{className:"pf-c-button pf-m-link"},h)):h})))};g.defaultProps={chart:{hide:p.BM.noop,toggle:p.BM.noop,isToggled:p.BM.noop},datum:{dataSets:[]},t:f.translate,useDispatch:l.Cr.reactRedux.useDispatch,useGraphCardContext:d.useGraphCardContext,useProduct:c.useProduct,useSelectors:l.Cr.reactRedux.useSelectors}},25394:function(t,e,r){"use strict";r.r(e),r.d(e,{DEFAULT_CONTEXT:function(){return f},GraphCardContext:function(){return v},context:function(){return m},default:function(){return m},useGetMetrics:function(){return y},useGraphCardContext:function(){return g},useMetricsSelector:function(){return C},useParseFiltersSettings:function(){return h}});var n=r(1413),i=r(45987),o=r(92950),u=r.n(o),a=r(17297),s=r(82410),c=r(51858),d=r(62834),l=r(78139),p=["error","fulfilled","pending","data"],f=[{settings:{isStandalone:!1,metrics:[],metric:void 0}},d.B.noop],v=u().createContext(f),g=function(){return(0,o.useContext)(v)},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProduct,r=void 0===e?c.useProduct:e,n=t.useProductGraphConfig,i=void 0===n?c.useProductGraphConfig:n,u=r(),a=u.productId,s=i(),d=s.filters,p=void 0===d?[]:d,f=s.settings,v=void 0===f?{}:f,g=(0,o.useMemo)((function(){return l.graphCardHelpers.generateChartSettings({filters:p,settings:v,productId:a})}),[p,v,a]),h=g.groupedFiltersSettings,C=g.standaloneFiltersSettings,y=void 0===C?[]:C;return{groupedFiltersSettings:h,standaloneFiltersSettings:y}},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useGraphCardContext,r=void 0===e?g:e,o=t.useSelectorsResponse,u=void 0===o?s.Cr.reactRedux.useSelectorsResponse:o,a=r(),c=a.settings,d=void 0===c?{}:c,l=d.metrics,f=void 0===l?[]:l,v=u(f.map((function(t){var e=t.id,r=t.isCapacity;return function(t){var n,i,o=t.graph;return r?null===(n=o.capacity)||void 0===n?void 0:n[e]:null===(i=o.tally)||void 0===i?void 0:i[e]}}))),h=v.error,C=v.fulfilled,y=v.pending,m=v.data,S=void 0===m?[]:m,b=(0,i.Z)(v,p),x={},G=null==S?void 0:S.map((function(t,e){var r=(0,n.Z)((0,n.Z)({},f[e]),t);return x[f[e].id]=r,r}));return(0,n.Z)((0,n.Z)({},b),{},{data:x,dataSets:G,error:h,fulfilled:C,pending:y})},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.getGraphMetrics,r=void 0===e?s.Ak.rhsm.getGraphMetrics:e,n=t.useDispatch,i=void 0===n?s.Cr.reactRedux.useDispatch:n,o=t.useGraphCardContext,u=void 0===o?g:o,d=t.useMetricsSelector,l=void 0===d?C:d,p=t.useProduct,f=void 0===p?c.useProduct:p,v=t.useProductGraphTallyQuery,h=void 0===v?c.useProductGraphTallyQuery:v,y=f(),m=y.productId,S=h(),b=i(),x=l(),G=u(),E=G.settings,P=void 0===E?{}:E,T=P.metrics,D=void 0===T?[]:T;return(0,a.Z)((function(){var t=D.map((function(t){var e=t.metric,r=t.isCapacity,n=t.query;return{id:m,metric:e,isCapacity:r,query:n}}));r(t,S)(b)}),[D,m,S]),x},m={GraphCardContext:v,DEFAULT_CONTEXT:f,useGetMetrics:y,useGraphCardContext:g,useMetricsSelector:C,useParseFiltersSettings:h}},99376:function(t,e){var r=Object.keys;e.D=function(t,e){if(t===e)return!0;if(!(t instanceof Object&&e instanceof Object))return!1;for(var n=r(t),i=n.length,o=0;o<i;o++)if(!(n[o]in e))return!1;for(o=0;o<i;o++)if(t[n[o]]!==e[n[o]])return!1;return i===r(e).length}},37124:function(t,e,r){"use strict";var n=r(92950);e.Z=function(t,e,r){var i=(0,n.useRef)(void 0);i.current&&r(e,i.current)||(i.current=e),(0,n.useEffect)(t,i.current)}},17297:function(t,e,r){"use strict";var n=r(99376),i=r(37124),o=function(t,e){return t.every((function(t,r){return(0,n.D)(t,e[r])}))};e.Z=function(t,e){(0,i.Z)(t,e,o)}}}]);
//# sourceMappingURL=../sourcemaps/4418.3f6e0e855e131b8e04c6f48f7bac7de9.js.map