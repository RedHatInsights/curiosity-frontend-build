(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[9407,9844,1394,5394,1339,5876,7297],{49844:function(e,t,n){"use strict";n.r(t),n.d(t,{Select:function(){return M},SelectDirection:function(){return T},SelectPosition:function(){return C},default:function(){return M}});var r=n(29439),i=n(1413),a=n(15671),o=n(43144),l=n(60136),s=n(54062),c=n(92950),u=n.n(c),d=n(54653),p=n(50361),f=n.n(p),v=n(18446),h=n.n(v),g=n(30998),m=n.n(g),y=n(68630),S=n.n(y),E=n(62834),T=d.DropdownDirection,C=d.DropdownPosition,M=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={isExpanded:!1,options:null,selected:null},e.selectField=u().createRef(),e.onSelect=function(t,n){var r=e.state.options,a=e.props,o=a.id,l=a.name,s=a.onSelect,c=a.variant,u=r,p=u.findIndex((function(e){return e.title===n}));u[p].selected=c===d.SelectVariant.single||!u[p].selected,c===d.SelectVariant.single&&u.forEach((function(e,t){p!==t&&(u[t].selected=!1)}));var v=c===d.SelectVariant.single?n:u.filter((function(e){return!0===e.selected})).map((function(e){return e.title}));e.setState({options:u,selected:v},(function(){var t=f()(u),n={id:o,name:l||o,value:t[p].value,selected:c===d.SelectVariant.single&&t[p]||f()(v),selectedIndex:p,type:"select-".concat(c===d.SelectVariant.single?"one":"multiple"),options:t};c===d.SelectVariant.checkbox&&(n.checked=t[p].selected);var r=(0,i.Z)((0,i.Z)({},n),{},{target:(0,i.Z)({},n),currentTarget:(0,i.Z)({},n),persist:E.B.noop});s((0,i.Z)({},r),p,t),c===d.SelectVariant.single&&e.setState({isExpanded:!1})}))},e.onToggle=function(t){e.setState({isExpanded:t})},e}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){null===this.state.options&&this.formatOptions()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.options,r=t.selectedOptions;h()(e.options,n)&&h()(e.selectedOptions,r)||this.formatOptions()}},{key:"formatOptions",value:function(){var e,t,n=this.selectField.current,a=void 0===n?{}:n,o=this.props,l=o.options,s=o.selectedOptions,c=o.variant,u=Object.entries(this.props).filter((function(e){var t=(0,r.Z)(e,1)[0];return/^data-/i.test(t)})),p=S()(l)?Object.entries(l).map((function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];return(0,i.Z)((0,i.Z)({},a),{},{title:n,value:a})})):f()(l),v=s&&"string"==typeof s||"number"==typeof s?[s]:s;p.forEach((function(e,t){var n,r=e;("string"==typeof r&&(r={title:e,value:e},p[t]=r),r.text=r.text||r.title,r.textContent=r.textContent||r.title,r.label=r.label||r.title,v)&&(S()(r.value)?(n=m()(v,r.value)>-1)||(n=!!v.find((function(e){return Object.values(r.value).includes(e)}))):n=v.includes(r.value),n||(n=v.includes(r.title)),p[t].selected=n)})),t=c===d.SelectVariant.single?(p.find((function(e){return!0===e.selected}))||{}).title:p.filter((function(e){return!0===e.selected})).map((function(e){return e.title})),null!=a&&null!==(e=a.parentRef)&&void 0!==e&&e.current&&u.forEach((function(e){var t,n=(0,r.Z)(e,2),i=n[0],o=n[1];return null==a||null===(t=a.parentRef)||void 0===t?void 0:t.current.setAttribute(i,o)})),this.setState({options:p,selected:t})}},{key:"render",value:function(){var e=this.state,t=e.options,n=e.selected,r=e.isExpanded,i=this.props,a=i.ariaLabel,o=i.className,l=i.direction,s=i.isDisabled,c=i.isFlipEnabled,p=i.isToggleText,f=i.maxHeight,v=i.placeholder,h=i.position,g=i.toggleIcon,m=i.variant,y={direction:l,isFlipEnabled:c,maxHeight:f};return t&&t.length&&!s||(y.isDisabled=!0),u().createElement("div",{className:"curiosity-select"},u().createElement(d.Select,Object.assign({menuAppendTo:"parent",className:"curiosity-select-pf".concat(p?"":"__no-toggle-text"," ").concat(h===d.DropdownPosition.right?"curiosity-select-pf__position-right":""," ").concat(o),variant:m,"aria-label":a,onToggle:this.onToggle,onSelect:this.onSelect,selections:n,isOpen:r,toggleIcon:g,placeholderText:v,ref:this.selectField},y),t&&t.map((function(e){return u().createElement(d.SelectOption,{key:window.btoa("".concat(e.title,"-").concat(e.value)),id:window.btoa("".concat(e.title,"-").concat(e.value)),value:e.title,"data-value":S()(e.value)&&JSON.stringify([e.value])||e.value,"data-title":e.title})}))||[]))}}]),n}(u().Component);M.defaultProps={ariaLabel:"Select option",className:"",direction:T.down,id:E.B.generateId(),isDisabled:!1,isFlipEnabled:!1,isToggleText:!0,maxHeight:null,name:null,onSelect:E.B.noop,options:[],placeholder:"Select option",position:C.left,selectedOptions:null,toggleIcon:null,variant:d.SelectVariant.single}},25394:function(e,t,n){"use strict";n.r(t),n.d(t,{DEFAULT_CONTEXT:function(){return f},GraphCardContext:function(){return v},context:function(){return S},default:function(){return S},useGetMetrics:function(){return y},useGraphCardContext:function(){return h},useMetricsSelector:function(){return m},useParseFiltersSettings:function(){return g}});var r=n(1413),i=n(45987),a=n(92950),o=n.n(a),l=n(17297),s=n(82410),c=n(51858),u=n(62834),d=n(78139),p=["error","fulfilled","pending","data"],f=[{settings:{isStandalone:!1,metrics:[],metric:void 0}},u.B.noop],v=o().createContext(f),h=function(){return(0,a.useContext)(v)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProduct,n=void 0===t?c.useProduct:t,r=e.useProductGraphConfig,i=void 0===r?c.useProductGraphConfig:r,o=n(),l=o.productId,s=i(),u=s.filters,p=void 0===u?[]:u,f=s.settings,v=void 0===f?{}:f,h=(0,a.useMemo)((function(){return d.graphCardHelpers.generateChartSettings({filters:p,settings:v,productId:l})}),[p,v,l]),g=h.groupedFiltersSettings,m=h.standaloneFiltersSettings,y=void 0===m?[]:m;return{groupedFiltersSettings:g,standaloneFiltersSettings:y}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGraphCardContext,n=void 0===t?h:t,a=e.useSelectorsResponse,o=void 0===a?s.Cr.reactRedux.useSelectorsResponse:a,l=n(),c=l.settings,u=void 0===c?{}:c,d=u.metrics,f=void 0===d?[]:d,v=o(f.map((function(e){var t=e.id,n=e.isCapacity;return function(e){var r,i,a=e.graph;return n?null===(r=a.capacity)||void 0===r?void 0:r[t]:null===(i=a.tally)||void 0===i?void 0:i[t]}}))),g=v.error,m=v.fulfilled,y=v.pending,S=v.data,E=void 0===S?[]:S,T=(0,i.Z)(v,p),C={},M=null==E?void 0:E.map((function(e,t){var n=(0,r.Z)((0,r.Z)({},f[t]),e);return C[f[t].id]=n,n}));return(0,r.Z)((0,r.Z)({},T),{},{data:C,dataSets:M,error:g,fulfilled:m,pending:y})},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getGraphMetrics,n=void 0===t?s.Ak.rhsm.getGraphMetrics:t,r=e.useDispatch,i=void 0===r?s.Cr.reactRedux.useDispatch:r,a=e.useGraphCardContext,o=void 0===a?h:a,u=e.useMetricsSelector,d=void 0===u?m:u,p=e.useProduct,f=void 0===p?c.useProduct:p,v=e.useProductGraphTallyQuery,g=void 0===v?c.useProductGraphTallyQuery:v,y=f(),S=y.productId,E=g(),T=i(),C=d(),M=o(),x=M.settings,D=void 0===x?{}:x,O=D.metrics,R=void 0===O?[]:O;return(0,l.Z)((function(){var e=R.map((function(e){var t=e.metric,n=e.isCapacity,r=e.query;return{id:S,metric:t,isCapacity:n,query:r}}));n(e,E)(T)}),[R,S,E]),C},S={GraphCardContext:v,DEFAULT_CONTEXT:f,useGetMetrics:y,useGraphCardContext:h,useMetricsSelector:m,useParseFiltersSettings:g}},29407:function(e,t,n){"use strict";n.r(t),n.d(t,{GraphCardMetricTotals:function(){return y},default:function(){return y}});var r=n(92950),i=n.n(r),a=n(54653),o=n(30381),l=n.n(o),s=n(68929),c=n.n(s),u=n(51858),d=n(25394),p=n(91339),f=n(1797),v=n(76006),h=n(65876),g=n(46262),m=n(83109),y=function(e){var t,n,r,o,s=e.children,u=e.t,d=e.useMetricsSelector,m=(0,e.useProductGraphTallyQuery)()[g.O6.START_DATE],y=d(),S=y.pending,E=y.error,T=y.fulfilled,C=y.dataSets,M=(void 0===C?[]:C)[0]||{},x=M.data,D=void 0===x?[]:x,O=M.id,R=M.metric,b=M.meta,_=void 0===b?{}:b,Z=D[D.length-1]||{},F=Z.date,P=Z.hasData,k=Z.y,w=D.find((function(e){return!0===e.isCurrentDate}))||{},H=w.date,I=w.hasData,G=w.y,A=_.totalMonthlyDate,N=_.totalMonthlyHasData,z=_.totalMonthlyValue,U=h.toolbarFieldOptions.find((function(e){return e.title===m||e.value.startDate.toISOString()===m}))||{},B=U.title,L=U.isCurrent,Q=L?H:F,V=L?I:P,Y=L?G:k;return i().createElement(a.Flex,{"data-test":"graphMetricTotals-".concat(c()(R)),className:"curiosity-usage-graph__totals"},i().createElement(a.Flex,{flex:{default:"flex_1"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},i().createElement(a.FlexItem,{className:"curiosity-usage-graph__totals-column"},i().createElement(a.Card,{"data-test":"graphDailyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(E?"blur":"")},i().createElement(a.CardTitle,null,u("curiosity-graph.cardHeadingMetric",{context:["dailyTotal",O],month:B})),i().createElement(p.MinHeight,{key:"currentBody"},i().createElement(a.CardBody,null,i().createElement("div",null,S&&i().createElement(f.Loader,{variant:"skeleton",skeletonProps:{size:f.SkeletonSize.lg}}),T&&u("curiosity-graph.cardBodyMetric",{context:["total",V&&O],total:null===(t=v.BM.numberDisplay(Y))||void 0===t||null===(n=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===n?void 0:n.toUpperCase()},[i().createElement("strong",{title:Y,"aria-label":Y})])))),i().createElement(p.MinHeight,{key:"currentFooter"},i().createElement(a.CardFooter,null,i().createElement("div",{className:V?"":"hidden"},T&&Q&&u("curiosity-graph.cardFooterMetric",{date:l().utc(Q).format(v.i3.timestampUTCTimeFormats.yearTimeShort)}))))),i().createElement(a.Card,{"data-test":"graphMonthlyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(E?"blur":"")},i().createElement(a.CardTitle,null,u("curiosity-graph.cardHeadingMetric",{context:["monthlyTotal",O],month:B})),i().createElement(p.MinHeight,{key:"totalMonthlyBody"},i().createElement(a.CardBody,null,i().createElement("div",null,S&&i().createElement(f.Loader,{variant:"skeleton",skeletonProps:{size:f.SkeletonSize.lg}}),T&&u("curiosity-graph.cardBodyMetric",{context:["total",N&&O],total:null===(r=v.BM.numberDisplay(z))||void 0===r||null===(o=r.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===o?void 0:o.toUpperCase()},[i().createElement("strong",{title:z,"aria-label":z})])))),i().createElement(p.MinHeight,{key:"totalMonthlyFooter"},i().createElement(a.CardFooter,null,i().createElement("div",{className:N?"":"hidden"},T&&A&&u("curiosity-graph.cardFooterMetric",{date:l().utc(A).format(v.i3.timestampUTCTimeFormats.yearTimeShort)}))))))),i().createElement(a.Flex,{flex:{default:"flex_3"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},i().createElement(a.FlexItem,{className:"curiosity-usage-graph__totals-graph-column"},s)))};y.defaultProps={children:null,t:m.translate,useMetricsSelector:d.useMetricsSelector,useProductGraphTallyQuery:u.useProductGraphTallyQuery}},91339:function(e,t,n){"use strict";n.r(t),n.d(t,{MinHeight:function(){return d},default:function(){return d}});var r=n(15671),i=n(43144),a=n(97326),o=n(60136),l=n(54062),s=n(92950),c=n.n(s),u=n(76006),d=function(e){(0,o.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).containerRef=c().createRef(),e.innerContainerRef=c().createRef(),e.updatedContainerWidth=0,e.resizeObserver=u.BM.noop,e.onResizeContainer=function(){var t,n,r=(0,a.Z)(e).updatedContainerWidth,i=e.props.updateOnResize,o=(null===(t=e.containerRef)||void 0===t||null===(n=t.current)||void 0===n?void 0:n.clientWidth)||0;i&&o!==r&&(e.updatedContainerWidth=o,e.setMinHeight(!0))},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.updateOnResize;window.setTimeout((function(){e.setMinHeight()})),t&&this.setResizeObserver()}},{key:"componentDidUpdate",value:function(){var e=this;this.props.updateOnContent&&window.setTimeout((function(){e.setMinHeight()}))}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setMinHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.props.minHeight,r=this.containerRef.current,i=void 0===r?{}:r,a=this.innerContainerRef.current,o=void 0===a?{}:a;null!=i&&i.style&&(n>(e=t?(null==o?void 0:o.clientHeight)||0:(null==i?void 0:i.clientHeight)||0)&&(e=n),i.style.minHeight="".concat(e,"px"))}},{key:"setResizeObserver",value:function(){var e=this;window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",e.onResizeContainer)}}},{key:"render",value:function(){var e=this.props.children;return c().createElement("div",{className:"curiosity-minheight",ref:this.containerRef},c().createElement("div",{ref:this.innerContainerRef},e))}}]),n}(c().Component);d.defaultProps={updateOnContent:!1,updateOnResize:!0,minHeight:0}},65876:function(e,t,n){"use strict";n.r(t),n.d(t,{ToolbarFieldRangedMonthly:function(){return h},default:function(){return h},toolbarFieldOptions:function(){return f},useOnSelect:function(){return v}});var r=n(4942),i=n(1413),a=n(92950),o=n.n(a),l=n(82410),s=n(51858),c=n(49844),u=n(46262),d=n(76006),p=n(83109),f=d.i3.getRangedMonthDateTime().listDateTimeRanges.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{selected:!1})})),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useDispatch,n=void 0===t?l.Cr.reactRedux.useDispatch:t,i=e.useProduct,a=void 0===i?s.useProduct:i,o=a(),c=o.viewId,d=n();return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,n=t.startDate,i=t.endDate;d([{type:l.JD.query.SET_QUERY_CLEAR_INVENTORY_LIST,viewId:c},(0,r.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[u.O6.GRANULARITY],viewId:c},u.O6.GRANULARITY,u.U9.DAILY),(0,r.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[u.O6.START_DATE],viewId:c},u.O6.START_DATE,null==n?void 0:n.toISOString()),(0,r.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[u.O6.END_DATE],viewId:c},u.O6.END_DATE,null==i?void 0:i.toISOString())])}},h=function(e){var t=e.isFilter,n=e.options,r=e.position,a=e.t,l=e.useOnSelect,s=(0,e.useProductGraphTallyQuery)()[u.O6.START_DATE],d=l(),p=n.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{selected:e.title===s||e.value.startDate.toISOString()===s})}));return o().createElement(c.Select,{"aria-label":a("curiosity-toolbar.placeholder".concat(t?"_filter":""),{context:"rangedMonthly"}),onSelect:d,options:p,placeholder:a("curiosity-toolbar.placeholder".concat(t?"_filter":""),{context:"rangedMonthly"}),position:r,maxHeight:250,"data-test":"toolbarFieldRangeGranularity"})};h.defaultProps={isFilter:!1,options:f,position:c.SelectPosition.left,t:p.translate,useOnSelect:v,useProductGraphTallyQuery:s.useProductGraphTallyQuery}},99376:function(e,t){var n=Object.keys;t.D=function(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;for(var r=n(e),i=r.length,a=0;a<i;a++)if(!(r[a]in t))return!1;for(a=0;a<i;a++)if(e[r[a]]!==t[r[a]])return!1;return i===n(t).length}},37124:function(e,t,n){"use strict";var r=n(92950);t.Z=function(e,t,n){var i=(0,r.useRef)(void 0);i.current&&n(t,i.current)||(i.current=t),(0,r.useEffect)(e,i.current)}},17297:function(e,t,n){"use strict";var r=n(99376),i=n(37124),a=function(e,t){return e.every((function(e,n){return(0,r.D)(e,t[n])}))};t.Z=function(e,t){(0,i.Z)(e,t,a)}}}]);
//# sourceMappingURL=../sourcemaps/9407.10e7d0b4d5d95bd1da3aa1452987c3ae.js.map