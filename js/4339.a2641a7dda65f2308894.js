"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[4339,5394],{24339:function(e,t,r){r.r(t),r.d(t,{GraphCardChartLegend:function(){return m},default:function(){return m}});var n=r(93433),o=r(83878),i=r(59199),a=r(40181),u=r(25267),s=r(92950),c=r.n(s),d=r(3669),l=r(89048),p=r(51858),v=r(25394),f=r(82410),h=r(76006),g=r(83109),C=r(1138),m=function(e){var t,r=e.chart,s=e.datum,p=e.t,v=e.useDispatch,h=e.useGraphCardContext,g=e.useSelectors,m=e.useProduct,y=h().settings,G=void 0===y?{}:y,b=m(),x=b.productLabel,S=b.viewId,E=G.isDisabledLegendClick,T=v(),P=(t=g([function(e){var t;return null===(t=e.graph.legend)||void 0===t?void 0:t["".concat(S,"-inverted")]}].concat((0,n.Z)(s.dataSets.map((function(e){var t=e.id;return function(e){var r;return null===(r=e.graph.legend)||void 0===r?void 0:r["".concat(S,"-").concat(t)]}}))))),(0,o.Z)(t)||(0,i.Z)(t)||(0,a.Z)(t)||(0,u.Z)()),k=P[0],M=P.slice(1);(0,l.Z)((function(){s.dataSets.forEach((function(e,t){var n=e.id,o=e.isToolbarFilter;k&&o?new RegExp(k).test(n)||r.hide(n):((null==M?void 0:M[t])||r.isToggled(n))&&r.hide(n)}))}));var Z=function(e){var t=r.toggle(e);T({type:f.JD.graph.SET_GRAPH_LEGEND,id:"".concat(S,"-").concat(e),value:t})};return c().createElement(c().Fragment,null,s.dataSets.map((function(e,t){var n=e.id,o=e.isThreshold,i=e.stroke,a=e.data,u=!(void 0===a?[]:a).find((function(e){var t=e.y,r=e.hasData;return t>=0&&!0===r||t>=0&&!0===o}))||!1,s=p(["curiosity-graph.label","curiosity-graph.label_no"],{product:x,context:n}),l=p("curiosity-graph.legendTooltip",{product:x,context:n},[c().createElement("span",{style:{whiteSpace:"nowrap"}})]),v=(null==M?void 0:M[t])||r.isToggled(n),f={};E||(f.onClick=function(){return Z(n)},f.onKeyPress=function(){return Z(n)});var h=c().createElement(d.Button,Object.assign({},f,{className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(n),variant:"link",component:"a",isDisabled:null!=E?E:u,icon:(u||v)&&c().createElement(C.ChartIcon,{symbol:"eyeSlash"})||c().createElement(C.ChartIcon,{symbol:o?"dash":"square",style:{visibility:u||v?"hidden":"visible"},fill:i})}),s);return l?c().createElement(d.Tooltip,{key:"curiosity-tooltip-".concat(n),content:c().createElement("p",null,l),position:d.TooltipPosition.top,enableFlip:!0,distance:5},c().createElement("span",{className:"pf-c-button pf-m-link curiosity-usage-graph__legend-item-wrapper"},h)):h})))};m.defaultProps={chart:{hide:h.BM.noop,toggle:h.BM.noop,isToggled:h.BM.noop},datum:{dataSets:[]},t:g.translate,useDispatch:f.Cr.reactRedux.useDispatch,useGraphCardContext:v.useGraphCardContext,useProduct:p.useProduct,useSelectors:f.Cr.reactRedux.useSelectors}},25394:function(e,t,r){r.r(t),r.d(t,{DEFAULT_CONTEXT:function(){return g},GraphCardContext:function(){return C},context:function(){return S},default:function(){return S},useGetMetrics:function(){return b},useGraphCardActions:function(){return x},useGraphCardContext:function(){return m},useMetricsSelector:function(){return G},useParseFiltersSettings:function(){return y}});var n=r(1413),o=r(45987),i=r(92950),a=r.n(i),u=r(17297),s=r(3669),c=r(82410),d=r(51858),l=r(70136),p=r(62834),v=r(78139),f=["error","fulfilled","pending","data"],h=["id","content"],g=[{settings:{metrics:[]}},p.B.noop],C=a().createContext(g),m=function(){return(0,i.useContext)(C)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProduct,r=void 0===t?d.useProduct:t,n=e.useProductGraphConfig,o=void 0===n?d.useProductGraphConfig:n,a=r(),u=a.productId,s=o(),c=s.filters,l=void 0===c?[]:c,p=s.settings,f=void 0===p?{}:p;return(0,i.useMemo)((function(){return v.graphCardHelpers.generateChartSettings({filters:l,settings:f,productId:u})}),[l,f,u])},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGraphCardContext,r=void 0===t?m:t,i=e.useSelectorsResponse,a=void 0===i?c.Cr.reactRedux.useSelectorsResponse:i,u=r(),s=u.settings,d=void 0===s?{}:s,l=d.metrics,p=void 0===l?[]:l,v=a(p.map((function(e){var t=e.id,r=e.isCapacity;return function(e){var n,o,i=e.graph;return r?null===(n=i.capacity)||void 0===n?void 0:n[t]:null===(o=i.tally)||void 0===o?void 0:o[t]}}))),h=v.error,g=v.fulfilled,C=v.pending,y=v.data,G=void 0===y?[]:y,b=(0,o.Z)(v,f),x={},S=null==G?void 0:G.map((function(e,t){var r=(0,n.Z)((0,n.Z)({},p[t]),e);return x[p[t].id]=r,r}));return(0,n.Z)((0,n.Z)({},b),{},{data:x,dataSets:S,error:h,fulfilled:g,pending:C})},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getGraphMetrics,r=void 0===t?c.Ak.rhsm.getGraphMetrics:t,n=e.useDispatch,o=void 0===n?c.Cr.reactRedux.useDispatch:n,i=e.useGraphCardContext,a=void 0===i?m:i,s=e.useMetricsSelector,l=void 0===s?G:s,p=e.useProduct,v=void 0===p?d.useProduct:p,f=e.useProductGraphTallyQuery,h=void 0===f?d.useProductGraphTallyQuery:f,g=v(),C=g.productId,y=h(),b=o(),x=l(),S=a(),E=S.settings,T=void 0===E?{}:E,P=T.metrics,k=void 0===P?[]:P;return(0,u.Z)((function(){var e=k.map((function(e){var t=e.metric,r=e.isCapacity,n=e.query;return{id:C,metric:t,isCapacity:r,query:n}}));r(e,y)(b)}),[k,C,y]),x},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.categoryOptions,r=void 0===t?l.toolbarFieldOptions:t,n=e.useMetricsSelector,u=void 0===n?G:n,c=e.useGraphCardContext,d=void 0===c?m:c,v=u(),f=v.pending,g=v.dataSets,C=d(),y=C.settings,b=void 0===y?{}:y,x=b.actions;return(0,i.useMemo)((function(){return null==x?void 0:x.map((function(e){var t=e.id,n=e.content,i=(0,o.Z)(e,h),u=(r.find((function(e){var r=e.value;return t===r}))||{}).component;return u&&a().createElement(s.ToolbarItem,{key:"option-".concat(t)},a().createElement(u,Object.assign({isFilter:!1},i)))||n&&!f&&g.length&&a().createElement(s.ToolbarItem,{key:t||p.B.generateId()},"function"==typeof n?n({data:g}):n)||null}))}),[x,r,g,f])},S={GraphCardContext:C,DEFAULT_CONTEXT:g,useGetMetrics:b,useGraphCardActions:x,useGraphCardContext:m,useMetricsSelector:G,useParseFiltersSettings:y}}}]);
//# sourceMappingURL=../sourcemaps/4339.e2d7823df713090fc9b71058a326eb52.js.map