"use strict";(self.webpackChunksubscriptions=self.webpackChunksubscriptions||[]).push([[9407,5394],{25394:function(e,t,r){r.r(t),r.d(t,{DEFAULT_CONTEXT:function(){return h},GraphCardContext:function(){return C},context:function(){return T},default:function(){return T},useGetMetrics:function(){return E},useGraphCardActions:function(){return G},useGraphCardContext:function(){return m},useMetricsSelector:function(){return S},useParseFiltersSettings:function(){return y}});var n=r(1413),a=r(45987),i=r(92950),o=r.n(i),u=r(17297),s=r(90154),l=r(82410),c=r(51858),d=r(70136),p=r(62834),v=r(78139),g=["error","fulfilled","pending","data"],f=["id","content"],h=[{settings:{metrics:[]}},p.B.noop],C=o().createContext(h),m=function(){return(0,i.useContext)(C)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProduct,r=void 0===t?c.useProduct:t,n=e.useProductGraphConfig,a=void 0===n?c.useProductGraphConfig:n,o=r().productId,u=a(),s=u.filters,l=void 0===s?[]:s,d=u.settings,p=void 0===d?{}:d;return(0,i.useMemo)((function(){return v.graphCardHelpers.generateChartSettings({filters:l,settings:p,productId:o})}),[l,p,o])},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGraphCardContext,r=void 0===t?m:t,i=e.useSelectorsResponse,o=void 0===i?l.Cr.reactRedux.useSelectorsResponse:i,u=r().settings,s=(void 0===u?{}:u).metrics,c=void 0===s?[]:s,d=o(c.map((function(e){var t=e.id,r=e.isCapacity;return function(e){var n,a,i=e.graph;return r?null===(n=i.capacity)||void 0===n?void 0:n[t]:null===(a=i.tally)||void 0===a?void 0:a[t]}}))),p=d.error,v=d.fulfilled,f=d.pending,h=d.data,C=void 0===h?[]:h,y=(0,a.Z)(d,g),S={},E=null==C?void 0:C.map((function(e,t){var r=(0,n.Z)((0,n.Z)({},c[t]),e);return S[c[t].id]=r,r}));return(0,n.Z)((0,n.Z)({},y),{},{data:S,dataSets:E,error:p,fulfilled:v,pending:f})},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getGraphMetrics,r=void 0===t?l.Ak.rhsm.getGraphMetrics:t,n=e.useDispatch,a=void 0===n?l.Cr.reactRedux.useDispatch:n,i=e.useGraphCardContext,o=void 0===i?m:i,s=e.useMetricsSelector,d=void 0===s?S:s,p=e.useProduct,v=void 0===p?c.useProduct:p,g=e.useProductGraphTallyQuery,f=void 0===g?c.useProductGraphTallyQuery:g,h=v().productId,C=f(),y=a(),E=d(),G=o().settings,T=(void 0===G?{}:G).metrics,M=void 0===T?[]:T;return(0,u.Z)((function(){var e=M.map((function(e){var t=e.metric,r=e.isCapacity,n=e.query;return{id:h,metric:t,isCapacity:r,query:n}}));r(e,C)(y)}),[M,h,C]),E},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.categoryOptions,r=void 0===t?d.toolbarFieldOptions:t,n=e.useMetricsSelector,u=void 0===n?S:n,l=e.useGraphCardContext,c=void 0===l?m:l,v=u(),g=v.pending,h=v.dataSets,C=c().settings,y=(void 0===C?{}:C).actions;return(0,i.useMemo)((function(){return null==y?void 0:y.map((function(e){var t=e.id,n=e.content,i=(0,a.Z)(e,f),u=(r.find((function(e){var r=e.value;return t===r}))||{}).component;return u&&o().createElement(s.ToolbarItem,{key:"option-".concat(t)},o().createElement(u,Object.assign({isFilter:!1},i)))||n&&!g&&h.length&&o().createElement(s.ToolbarItem,{key:t||p.B.generateId()},"function"==typeof n?n({data:h}):n)||null}))}),[y,r,h,g])},T={GraphCardContext:C,DEFAULT_CONTEXT:h,useGetMetrics:E,useGraphCardActions:G,useGraphCardContext:m,useMetricsSelector:S,useParseFiltersSettings:y}},29407:function(e,t,r){r.r(t),r.d(t,{GraphCardMetricTotals:function(){return h},default:function(){return h}});var n=r(1413),a=r(92950),i=r.n(a),o=r(90154),u=r(68929),s=r.n(u),l=r(51858),c=r(25394),d=r(1797),p=r(65876),v=r(46262),g=r(78139),f=r(76006),h=function(e){var t,r=e.children,a=e.useGraphCardContext,u=e.useMetricsSelector,l=e.useProductGraphTallyQuery,c=a().settings,h=void 0===c?{}:c,C=l(),m=u(),y=m.pending,S=m.error,E=m.fulfilled,G=m.dataSets,T=void 0===G?[]:G,M=C[v.O6.START_DATE],P=(p.toolbarFieldOptions.find((function(e){return e.title===M||e.value.startDate.toISOString()===M}))||{}).isCurrent;if(null!=h&&h.isMetricDisplay&&null!=h&&null!==(t=h.cards)&&void 0!==t&&t.length){var k,x,Z,_=f.BM.setImmutableData({dataSets:T.map((function(e){var t=e||{},r=t.id,a=t.metric;return(0,n.Z)((0,n.Z)({},e),{},{display:(0,n.Z)((0,n.Z)((0,n.Z)((0,n.Z)({},g.graphCardHelpers.getDailyMonthlyTotals({dataSet:e,isCurrent:P})),g.graphCardHelpers.getRemainingCapacity((0,n.Z)((0,n.Z)({},g.graphCardHelpers.getPrepaidTallyCapacity({data:T})),{},{isCurrent:P}))),g.graphCardHelpers.getRemainingOverage((0,n.Z)((0,n.Z)({},g.graphCardHelpers.getPrepaidTallyCapacity({data:T})),{},{isCurrent:P}))),{},{chartId:r,metricId:a})})}))},{isClone:!0});return i().createElement("div",{"data-test":"graphMetricTotals-".concat(null==h||null===(k=h.groupMetric)||void 0===k||null===(x=k.map((function(e){return s()(e)})))||void 0===x?void 0:x.join("-")),"data-test-data":JSON.stringify(_),className:"curiosity-usage-graph__totals"},i().createElement("div",null,i().createElement("div",{className:"curiosity-usage-graph__totals-column"},null==h||null===(Z=h.cards)||void 0===Z?void 0:Z.map((function(e,t){var r=e.key,n=e.header,a=e.body,u=e.footer;return i().createElement(o.Card,{key:r||f.BM.generateHash({metricDisplayPassedData:_,index:t}),isPlain:!0,"data-test":"graphMetricTotalsCard-".concat(t),className:"curiosity-usage-graph__totals-column-card ".concat(S?"blur":"")},i().createElement(o.CardHeader,null,i().createElement(o.CardTitle,null,i().createElement(o.Title,{headingLevel:"h2",size:"md"},y&&i().createElement(d.Loader,{variant:"skeleton",skeletonProps:{size:d.SkeletonSize.lg}}),E&&("function"==typeof n&&n(_)||n)))),i().createElement(o.CardBody,null,i().createElement("div",null,y&&i().createElement(d.Loader,{variant:"skeleton",skeletonProps:{size:d.SkeletonSize.lg,height:"60px"}}),E&&("function"==typeof a&&a(_)||a))),i().createElement(o.CardFooter,null,i().createElement("div",null,y&&i().createElement(d.Loader,{variant:"skeleton",skeletonProps:{size:d.SkeletonSize.lg}}),E&&("function"==typeof u&&u(_)||u))))})))),i().createElement("div",null,i().createElement("div",{className:"curiosity-usage-graph__totals-graph-column"},r)))}return i().createElement("div",{"data-test":"graphStandalone",className:"curiosity-usage-graph__standalone"},r)};h.defaultProps={children:null,useGraphCardContext:c.useGraphCardContext,useMetricsSelector:c.useMetricsSelector,useProductGraphTallyQuery:l.useProductGraphTallyQuery}}}]);
//# sourceMappingURL=../sourcemaps/9407.75593443ed7c08aab943d01280af5c23.js.map