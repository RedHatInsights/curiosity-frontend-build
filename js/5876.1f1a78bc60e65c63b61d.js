"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[5876,1858,9942],{49844:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P,Select:()=>P,SelectDirection:()=>E,SelectPosition:()=>_});var i=n(23430),o=n(18489),r=n(27853),l=n(84531),s=n(78932),u=n(82625),a=n(92950),c=n.n(a),d=n(61603),v=n(50361),p=n.n(v),y=n(18446),f=n.n(y),S=n(30998),g=n.n(S),h=n(68630),T=n.n(h),I=n(62834),E=d.DropdownDirection,_=d.DropdownPosition,P=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={isExpanded:!1,options:null,selected:null},e.selectField=c().createRef(),e.onSelect=function(t,n){var i=e.state.options,r=e.props,l=r.id,s=r.name,u=r.onSelect,a=r.variant,c=i,v=c.findIndex((function(e){return e.title===n}));c[v].selected=a===d.SelectVariant.single||!c[v].selected,a===d.SelectVariant.single&&c.forEach((function(e,t){v!==t&&(c[t].selected=!1)}));var y=a===d.SelectVariant.single?n:c.filter((function(e){return!0===e.selected})).map((function(e){return e.title}));e.setState({options:c,selected:y},(function(){var t=p()(c),n={id:l,name:s||l,value:t[v].value,selected:a===d.SelectVariant.single&&t[v]||p()(y),selectedIndex:v,type:"select-".concat(a===d.SelectVariant.single?"one":"multiple"),options:t};a===d.SelectVariant.checkbox&&(n.checked=t[v].selected);var i=(0,o.Z)((0,o.Z)({},n),{},{target:(0,o.Z)({},n),currentTarget:(0,o.Z)({},n),persist:I.B.noop});u((0,o.Z)({},i),v,t),a===d.SelectVariant.single&&e.setState({isExpanded:!1})}))},e.onToggle=function(t){e.setState({isExpanded:t})},e}return(0,l.Z)(n,[{key:"componentDidMount",value:function(){null===this.state.options&&this.formatOptions()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.options,i=t.selectedOptions;f()(e.options,n)&&f()(e.selectedOptions,i)||this.formatOptions()}},{key:"formatOptions",value:function(){var e,t,n=this.selectField.current,r=void 0===n?{}:n,l=this.props,s=l.options,u=l.selectedOptions,a=l.variant,c=Object.entries(this.props).filter((function(e){var t=(0,i.Z)(e,1)[0];return/^data-/i.test(t)})),v=T()(s)?Object.entries(s).map((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];return(0,o.Z)((0,o.Z)({},r),{},{title:n,value:r})})):p()(s),y=u&&"string"==typeof u||"number"==typeof u?[u]:u;v.forEach((function(e,t){var n,i=e;("string"==typeof i&&(i={title:e,value:e},v[t]=i),i.text=i.text||i.title,i.textContent=i.textContent||i.title,i.label=i.label||i.title,y)&&(T()(i.value)?(n=g()(y,i.value)>-1)||(n=!!y.find((function(e){return Object.values(i.value).includes(e)}))):n=y.includes(i.value),n||(n=y.includes(i.title)),v[t].selected=n)})),t=a===d.SelectVariant.single?(v.find((function(e){return!0===e.selected}))||{}).title:v.filter((function(e){return!0===e.selected})).map((function(e){return e.title})),(null==r||null===(e=r.parentRef)||void 0===e?void 0:e.current)&&c.forEach((function(e){var t,n=(0,i.Z)(e,2),o=n[0],l=n[1];return null==r||null===(t=r.parentRef)||void 0===t?void 0:t.current.setAttribute(o,l)})),this.setState({options:v,selected:t})}},{key:"render",value:function(){var e=this.state,t=e.options,n=e.selected,i=e.isExpanded,o=this.props,r=o.ariaLabel,l=o.className,s=o.direction,u=o.isDisabled,a=o.isToggleText,v=o.maxHeight,p=o.placeholder,y=o.position,f=o.toggleIcon,S=o.variant,g={direction:s,maxHeight:v};return t&&t.length&&!u||(g.isDisabled=!0),c().createElement("div",{className:"curiosity-select"},c().createElement(d.Select,Object.assign({menuAppendTo:"parent",className:"curiosity-select-pf".concat(a?"":"__no-toggle-text"," ").concat(y===d.DropdownPosition.right?"curiosity-select-pf__position-right":""," ").concat(l),variant:S,"aria-label":r,onToggle:this.onToggle,onSelect:this.onSelect,selections:n,isOpen:i,toggleIcon:f,placeholderText:p,ref:this.selectField},g),t&&t.map((function(e){return c().createElement(d.SelectOption,{key:window.btoa("".concat(e.title,"-").concat(e.value)),id:window.btoa("".concat(e.title,"-").concat(e.value)),value:e.title,"data-value":T()(e.value)&&JSON.stringify([e.value])||e.value,"data-title":e.title})}))||[]))}}]),n}(c().Component);P.defaultProps={ariaLabel:"Select option",className:"",direction:E.down,id:I.B.generateId(),isDisabled:!1,isToggleText:!0,maxHeight:null,name:null,onSelect:I.B.noop,options:[],placeholder:"Select option",position:_.left,selectedOptions:null,toggleIcon:null,variant:d.SelectVariant.single}},51858:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R,context:()=>R,ProductViewContext:()=>p,DEFAULT_CONTEXT:()=>v,useProductContext:()=>E,useProductQuery:()=>S,useProductQueryFactory:()=>f,useProductGraphTallyQuery:()=>g,useProductInventoryGuestsQuery:()=>h,useProductInventoryHostsQuery:()=>T,useProductInventorySubscriptionsQuery:()=>I,useProduct:()=>_,useProductGraphConfig:()=>P,useProductInventoryHostsConfig:()=>b,useProductInventorySubscriptionsConfig:()=>x,useProductToolbarConfig:()=>C});var i=n(83738),o=n(18489),r=n(92950),l=n.n(r),s=n(12723),u=n(1798),a=n(30446),c=n(62834),d=["initialGraphFilters","initialInventoryFilters","initialSubscriptionsInventoryFilters","productContextFilterUom"],v=[{},c.B.noop],p=l().createContext(v),y=function(){return(0,r.useContext)(p)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useProductViewContext,i=void 0===n?y:n,r=i(),l=r[e],s=r.productId,a=r.viewId,c=u.Cr.reactRedux.useSelector((function(t){var n,i=t.view;return null==i||null===(n=i[e])||void 0===n?void 0:n[s]}),void 0),d=u.Cr.reactRedux.useSelector((function(t){var n,i=t.view;return null==i||null===(n=i[e])||void 0===n?void 0:n[a]}),void 0);return(0,o.Z)((0,o.Z)((0,o.Z)({},l),c),d)},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryType,n=void 0===t?"query":t,i=e.options;return f(n,i)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryType,n=void 0===t?"graphTallyQuery":t,i=e.schemaCheck,r=void 0===i?a.VX.RHSM_API_QUERY_SET_REPORT_CAPACITY_TYPES:i,l=e.options;return s.VS.setApiQuery((0,o.Z)((0,o.Z)({},S()),f(n,l)),r)},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryType,n=void 0===t?"inventoryGuestsQuery":t,i=e.schemaCheck,r=void 0===i?a.VX.RHSM_API_QUERY_SET_INVENTORY_GUESTS_TYPES:i,l=e.options;return s.VS.setApiQuery((0,o.Z)((0,o.Z)({},S()),f(n,l)),r)},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryType,n=void 0===t?"inventoryHostsQuery":t,i=e.schemaCheck,r=void 0===i?a.VX.RHSM_API_QUERY_SET_INVENTORY_TYPES:i,l=e.options;return s.VS.setApiQuery((0,o.Z)((0,o.Z)({},S()),f(n,l)),r)},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryType,n=void 0===t?"inventorySubscriptionsQuery":t,i=e.schemaCheck,r=void 0===i?a.VX.RHSM_API_QUERY_SET_INVENTORY_TYPES:i,l=e.options;return s.VS.setApiQuery((0,o.Z)((0,o.Z)({},S()),f(n,l)),r)},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProductQuery,n=void 0===t?S:t,l=e.useProductViewContext,s=void 0===l?y:l,u=n(),c=u[a.VN.UOM],v=s(),p=v.initialGraphFilters,f=void 0===p?[]:p,g=v.initialInventoryFilters,h=void 0===g?[]:g,T=v.initialSubscriptionsInventoryFilters,I=void 0===T?[]:T,E=v.productContextFilterUom,_=(0,i.Z)(v,d),P=(0,r.useCallback)((function(){if(!0===E){var e=function(e){var t=e.id;return!e.isOptional||new RegExp(c,"i").test(t)};return(0,o.Z)((0,o.Z)({},_),{},{initialGraphFilters:f.filter(e),initialInventoryFilters:h.filter(e),initialSubscriptionsInventoryFilters:I.filter(e)})}return(0,o.Z)((0,o.Z)({},_),{},{initialGraphFilters:f,initialInventoryFilters:h,initialSubscriptionsInventoryFilters:I})}),[_,f,h,I,E,c]);return P()},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProductViewContext,n=void 0===t?y:t,i=n(),o=i.productGroup,r=i.productId,l=i.productLabel,s=i.viewId;return{productGroup:o,productId:r,productLabel:l,viewId:s}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProductContext,n=void 0===t?E:t,i=n(),o=i.initialGraphFilters,r=i.initialGraphSettings,l=void 0===r?{}:r;return{filters:o,settings:l}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProductContext,n=void 0===t?E:t,i=n(),o=i.initialInventoryFilters,r=i.initialInventorySettings,l=void 0===r?{}:r;return{filters:o,settings:l}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProductContext,n=void 0===t?E:t,i=n(),o=i.initialSubscriptionsInventoryFilters,r=i.initialSubscriptionsInventorySettings,l=void 0===r?{}:r;return{filters:o,settings:l}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProductContext,n=void 0===t?E:t,i=n(),o=i.initialToolbarFilters,r=i.initialToolbarSettings,l=void 0===r?{}:r;return{filters:o,settings:l}},R={ProductViewContext:p,DEFAULT_CONTEXT:v,useProductContext:E,useQuery:S,useQueryFactory:f,useGraphTallyQuery:g,useInventoryGuestsQuery:h,useInventoryHostsQuery:T,useInventorySubscriptionsQuery:I,useProduct:_,useGraphConfig:P,useInventoryHostsConfig:b,useInventorySubscriptionsConfig:x,useToolbarConfig:C}},65876:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f,ToolbarFieldRangedMonthly:()=>f,toolbarFieldOptions:()=>p,useOnSelect:()=>y});var i=n(36222),o=n(18489),r=n(92950),l=n.n(r),s=n(186),u=n(51858),a=n(49844),c=n(30446),d=n(76006),v=n(83109),p=d.i3.getRangedMonthDateTime().listDateTimeRanges.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{selected:!1})})),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useDispatch,n=void 0===t?s.Cr.reactRedux.useDispatch:t,o=e.useProduct,r=void 0===o?u.useProduct:o,l=r(),a=l.viewId,d=n();return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,n=t.startDate,o=t.endDate;d([{type:s.JD.query.SET_QUERY_CLEAR_INVENTORY_LIST,viewId:a},(0,i.Z)({type:s.JD.query.SET_QUERY_RHSM_TYPES[c.VN.GRANULARITY],viewId:a},c.VN.GRANULARITY,c.U9.DAILY),(0,i.Z)({type:s.JD.query.SET_QUERY_RHSM_TYPES[c.VN.START_DATE],viewId:a},c.VN.START_DATE,null==n?void 0:n.toISOString()),(0,i.Z)({type:s.JD.query.SET_QUERY_RHSM_TYPES[c.VN.END_DATE],viewId:a},c.VN.END_DATE,null==o?void 0:o.toISOString())])}},f=function(e){var t=e.isFilter,n=e.options,i=e.position,r=e.t,s=e.useOnSelect,u=(0,e.useProductGraphTallyQuery)()[c.VN.START_DATE],d=s(),v=n.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{selected:e.title===u||e.value.startDate.toISOString()===u})}));return l().createElement(a.Select,{"aria-label":r("curiosity-toolbar.placeholder".concat(t?"_filter":""),{context:"rangedMonthly"}),onSelect:d,options:v,placeholder:r("curiosity-toolbar.placeholder".concat(t?"_filter":""),{context:"rangedMonthly"}),position:i,maxHeight:250,"data-test":"toolbarFieldRangeGranularity"})};f.defaultProps={isFilter:!1,options:p,position:a.SelectPosition.left,t:v.translate,useOnSelect:y,useProductGraphTallyQuery:u.useProductGraphTallyQuery}}}]);
//# sourceMappingURL=../sourcemaps/5876.3938b97f9c98285d4f8c445a0c894ba7.js.map