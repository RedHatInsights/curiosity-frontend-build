"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[9175],{87585:function(e,t,r){r.r(t),r.d(t,{BannerMessages:function(){return y},default:function(){return y}});var a=r(4942),n=r(1413),l=r(29439),i=r(92950),o=r.n(i),s=r(21242),c=r(43551),u=r(15451),d=r(31824),m=r(76006),p=r(83109),y=function(e){var t=e.messages,r=e.useGetAppMessages,c=(0,i.useState)({}),d=(0,l.Z)(c,2),m=d[0],p=d[1],y=(0,i.useState)([]),g=(0,l.Z)(y,2),v=g[0],f=g[1],E=r().data;return(0,u.Z)((function(){var e=[];t.length&&Object.entries(E).forEach((function(r){var a=(0,l.Z)(r,2),i=a[0],o=a[1];if(!0!==m[i]&&!0===o){var s=t.find((function(e){return e.id===i}));s&&e.push((0,n.Z)({key:i},s))}})),f(e.map((function(e){var t=e.key,r=e.message,l=e.title,i=e.variant,c=void 0===i?s.AlertVariant.info:i,u=o().createElement(s.AlertActionCloseButton,{onClose:function(){return p((0,n.Z)((0,n.Z)({},m),{},(0,a.Z)({},t,!0)))}});return o().createElement(s.Alert,{actionClose:u,key:t,title:l,variant:c},r)})))}),[E,m,t]),null!=v&&v.length?o().createElement("div",{className:"curiosity-banner-messages"},v):null};y.defaultProps={messages:[{id:"cloudigradeMismatch",title:(0,p.translate)("curiosity-banner.dataMismatchTitle"),message:(0,p.translate)("curiosity-banner.dataMismatchMessage",{context:""!==m.BM.UI_LINK_REPORT_ACCURACY_RECOMMENDATIONS&&"cloudigradeMismatch",appName:m.BM.UI_DISPLAY_NAME},[o().createElement(s.Button,{isInline:!0,component:"a",variant:"link",icon:o().createElement(c.ExternalLinkAltIcon,null),iconPosition:"right",target:"_blank",href:m.BM.UI_LINK_REPORT_ACCURACY_RECOMMENDATIONS})])}],useGetAppMessages:d.useGetAppMessages}},31824:function(e,t,r){r.r(t),r.d(t,{context:function(){return d},default:function(){return d},useGetAppMessages:function(){return u}});var a=r(4942),n=r(1413),l=r(15451),i=r(61072),o=r(51858),s=r(76006),c=r(46262),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getMessageReports,r=void 0===t?i.Ak.rhsm.getMessageReports:t,u=e.useDispatch,d=void 0===u?i.Cr.reactRedux.useDispatch:u,m=e.useProduct,p=void 0===m?o.useProduct:m,y=e.useProductQuery,g=void 0===y?o.useProductQuery:y,v=e.useSelectorsResponse,f=void 0===v?i.Cr.reactRedux.useSelectorsResponse:v,E=p(),h=E.productId,_=g(),I=d(),S=f({id:"messages",selector:function(e){var t,r=e.messages;return null==r||null===(t=r.report)||void 0===t?void 0:t[h]}}),T=S.error,C=S.fulfilled,M=S.pending,A=S.data;(0,l.Z)((function(){if(h){var e,t=s.i3.getRangedDateTime("CURRENT"),l=t.startDate,i=t.endDate,o=(0,n.Z)((0,n.Z)({},_),{},(e={},(0,a.Z)(e,c.O6.GRANULARITY,c.U9.DAILY),(0,a.Z)(e,c.O6.START_DATE,l.toISOString()),(0,a.Z)(e,c.O6.END_DATE,i.toISOString()),e));r(h,o)(I)}}),[h,_]);var D={cloudigradeMismatch:!1};if(C){var P,b,x=A||{},R=x.messages,L=void 0===R?{}:R;D.cloudigradeMismatch=void 0!==(null==L||null===(P=L.data)||void 0===P||null===(b=P.reverse())||void 0===b?void 0:b.find((function(e){return!0===e[c.pM.RHSM_API_RESPONSE_TALLY_META_TYPES.HAS_CLOUDIGRADE_MISMATCH]})))}return{error:T,fulfilled:C,pending:M,data:(0,n.Z)({},D)}},d={useGetAppMessages:u}},10608:function(e,t,r){r.r(t),r.d(t,{GraphCard:function(){return d},default:function(){return d}});var a=r(92950),n=r.n(a),l=r(51858),i=r(76006),o=r(29407),s=r(91799),c=r(25394),u=r(78139),d=function(e){var t=e.isDisabled,r=e.useProduct,a=e.useProductGraphConfig,l=r().productId,i=a(),d=i.filters,m=i.settings,p=u.graphCardHelpers.generateChartSettings({filters:d,settings:m,productId:l}),y=p.groupedFiltersSettings,g=p.standaloneFiltersSettings;return t?null:n().createElement(n().Fragment,null,y&&n().createElement(c.GraphCardContext.Provider,{value:y},n().createElement(s.GraphCardChart,null))||null,null==g?void 0:g.map((function(e){var t,r;return n().createElement(c.GraphCardContext.Provider,{key:"graphCard_".concat(null==e||null===(t=e.settings)||void 0===t||null===(r=t.metric)||void 0===r?void 0:r.id),value:e},n().createElement(o.GraphCardMetricTotals,null,n().createElement(s.GraphCardChart,null)))})))};d.defaultProps={isDisabled:i.BM.UI_DISABLED_GRAPH,useProduct:l.useProduct,useProductGraphConfig:l.useProductGraphConfig}},29407:function(e,t,r){r.r(t),r.d(t,{GraphCardMetricTotals:function(){return E},default:function(){return E}});var a=r(92950),n=r.n(a),l=r(21242),i=r(30381),o=r.n(i),s=r(68929),c=r.n(s),u=r(51858),d=r(25394),m=r(91339),p=r(1797),y=r(76006),g=r(65876),v=r(46262),f=r(83109),E=function(e){var t,r,a,i,s=e.children,u=e.t,d=e.useMetricsSelector,f=(0,e.useProductGraphTallyQuery)()[v.O6.START_DATE],E=d(),h=E.pending,_=E.error,I=E.fulfilled,S=E.dataSets,T=(void 0===S?[]:S)[0]||{},C=T.data,M=void 0===C?[]:C,A=T.id,D=T.metric,P=T.meta,b=void 0===P?{}:P,x=M[M.length-1]||{},R=x.date,L=x.hasData,B=x.y,G=M.find((function(e){return!0===e.isCurrentDate}))||{},H=G.date,k=G.hasData,O=G.y,U=b.totalMonthlyDate,N=b.totalMonthlyHasData,F=b.totalMonthlyValue,Z=g.toolbarFieldOptions.find((function(e){return e.title===f||e.value.startDate.toISOString()===f}))||{},Q=Z.title,Y=Z.isCurrent,w=Y?H:R,V=Y?k:L,z=Y?O:B;return n().createElement(l.Flex,{"data-test":"graphMetricTotals-".concat(c()(D)),className:"curiosity-usage-graph__totals"},n().createElement(l.Flex,{flex:{default:"flex_1"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},n().createElement(l.FlexItem,{className:"curiosity-usage-graph__totals-column"},n().createElement(l.Card,{"data-test":"graphDailyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(_?"blur":"")},n().createElement(l.CardTitle,null,u("curiosity-graph.cardHeadingMetric",{context:["dailyTotal",A],month:Q})),n().createElement(m.MinHeight,{key:"currentBody"},n().createElement(l.CardBody,null,n().createElement("div",null,h&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg}}),I&&u("curiosity-graph.cardBodyMetric",{context:["total",V&&A],total:null===(t=y.BM.numberDisplay(z))||void 0===t||null===(r=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===r?void 0:r.toUpperCase()},[n().createElement("strong",{title:z,"aria-label":z})])))),n().createElement(m.MinHeight,{key:"currentFooter"},n().createElement(l.CardFooter,null,n().createElement("div",{className:V?"":"hidden"},I&&w&&u("curiosity-graph.cardFooterMetric",{date:o().utc(w).format(y.i3.timestampUTCTimeFormats.yearTimeShort)}))))),n().createElement(l.Card,{"data-test":"graphMonthlyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(_?"blur":"")},n().createElement(l.CardTitle,null,u("curiosity-graph.cardHeadingMetric",{context:["monthlyTotal",A],month:Q})),n().createElement(m.MinHeight,{key:"totalMonthlyBody"},n().createElement(l.CardBody,null,n().createElement("div",null,h&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg}}),I&&u("curiosity-graph.cardBodyMetric",{context:["total",N&&A],total:null===(a=y.BM.numberDisplay(F))||void 0===a||null===(i=a.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===i?void 0:i.toUpperCase()},[n().createElement("strong",{title:F,"aria-label":F})])))),n().createElement(m.MinHeight,{key:"totalMonthlyFooter"},n().createElement(l.CardFooter,null,n().createElement("div",{className:N?"":"hidden"},I&&U&&u("curiosity-graph.cardFooterMetric",{date:o().utc(U).format(y.i3.timestampUTCTimeFormats.yearTimeShort)}))))))),n().createElement(l.Flex,{flex:{default:"flex_3"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},n().createElement(l.FlexItem,{className:"curiosity-usage-graph__totals-graph-column"},s)))};E.defaultProps={children:null,t:f.translate,useMetricsSelector:d.useMetricsSelector,useProductGraphTallyQuery:u.useProductGraphTallyQuery}},83341:function(e,t,r){r.r(t),r.d(t,{InventoryCardHosts:function(){return s},default:function(){return s}});var a=r(92950),n=r.n(a),l=r(42896),i=r(82195),o=r(76006),s=function(e){var t=Object.assign({},e);return n().createElement(i.default,t)};s.defaultProps={isDisabled:o.BM.UI_DISABLED_TABLE_HOSTS,useGetInventory:l.useGetHostsInventory}},29175:function(e,t,r){r.r(t),r.d(t,{ProductView:function(){return M},default:function(){return M}});var a=r(92950),n=r.n(a),l=r(21242),i=r(31369),o=r(3281),s=r(51858),c=r(52422),u=r(61072),d=r(28341),m=r(10608),p=r(92227),y=r(88191),g=r(82195),v=r(83341),f=r(76006),E=r(87585),h=r(49844),_=r(2738),I=r(69051),S=r(16696),T=r(46262),C=r(83109),M=function(e){var t=e.t,r=e.toolbarGraph,a=e.toolbarGraphDescription,o=(0,e.useRouteDetail)(),C=o.productParameter,M=o.productConfig;return n().createElement(c.PageLayout,null,n().createElement(c.PageHeader,{productLabel:C},t("curiosity-view.title",{appName:f.BM.UI_DISPLAY_NAME,context:C})),n().createElement(c.PageColumns,null,M.map((function(e){return function(e){var o=e.graphTallyQuery,C=e.inventoryHostsQuery,M=e.inventorySubscriptionsQuery,A=e.query,D=e.initialGuestsFilters,P=e.initialInventoryFilters,b=e.initialInventorySettings,x=e.initialSubscriptionsInventoryFilters,R=e.productDisplay,L=e.productId,B=e.viewId;if(!L||!B)return null;var G=u.IT.parseRhsmQuery(A,{graphTallyQuery:o,inventoryHostsQuery:C,inventorySubscriptionsQuery:M}),H=G.graphTallyQuery,k=G.inventoryHostsQuery,O=null;a&&(O=n().createElement(l.Tooltip,{content:n().createElement("p",null,t("curiosity-graph.cardHeadingDescription",{context:L})),position:l.TooltipPosition.top,enableFlip:!1,distance:5,entryDelay:100,exitDelay:0},n().createElement("sup",{className:"curiosity-icon__info"},n().createElement(i.ZP,null))));var U=n().createElement(n().Fragment,null,t("curiosity-graph.cardHeading",{context:L}),O);return n().createElement(s.ProductViewContext.Provider,{value:e,key:"product_".concat(L)},n().createElement(c.PageMessages,null,R!==T.ax.HOURLY&&n().createElement(E.default,null)),n().createElement(c.PageToolbar,null,n().createElement(p.Toolbar,null)),n().createElement(c.PageSection,null,R!==T.ax.HOURLY&&R!==T.ax.PARTIAL&&n().createElement(d.ConnectedGraphCard,{key:"graph_".concat(L),query:H,productId:L,viewId:B,cardTitle:U},n().isValidElement(r)&&r||!1!==r&&n().createElement(_.ToolbarFieldGranularity,{position:h.SelectPosition.right})),R===T.ax.HOURLY&&n().createElement(m.GraphCard,null)||R===T.ax.PARTIAL&&n().createElement(m.GraphCard,null)),n().createElement(c.PageSection,{className:R===T.ax.HOURLY?"curiosity-page-section__tabs":""},n().createElement(I.default,{key:"inventory_".concat(L),productId:L,isDisabled:!P&&!x||f.BM.UI_DISABLED_TABLE},!f.BM.UI_DISABLED_TABLE_HOSTS&&R!==T.ax.HOURLY&&R!==T.ax.PARTIAL&&P&&n().createElement(I.InventoryTab,{key:"inventory_deprecated-hosts_".concat(L),title:t("curiosity-inventory.tabHosts",{context:[L]})},n().createElement(y.ConnectedInventoryList,{key:"inv_".concat(L),filterGuestsData:D,filterInventoryData:P,productId:L,settings:b,query:k,viewId:B})),!f.BM.UI_DISABLED_TABLE_HOSTS&&R===T.ax.PARTIAL&&P&&n().createElement(I.InventoryTab,{key:"inventory_hosts_".concat(L),title:t("curiosity-inventory.tabHosts",{context:[L]})},n().createElement(v.InventoryCardHosts,null)),!f.BM.UI_DISABLED_TABLE_INSTANCES&&R===T.ax.HOURLY&&P&&n().createElement(I.InventoryTab,{key:"inventory_instances_".concat(L),title:t("curiosity-inventory.tabInstances",{context:[L]})},n().createElement(g.InventoryCard,null)),!f.BM.UI_DISABLED_TABLE_SUBSCRIPTIONS&&x&&n().createElement(I.InventoryTab,{key:"inventory_subs_".concat(L),title:t("curiosity-inventory.tabSubscriptions",{context:[L]})},n().createElement(S.InventoryCardSubscriptions,null)))))}(e)}))))};M.defaultProps={t:C.translate,toolbarGraph:null,toolbarGraphDescription:!1,useRouteDetail:o.Tu}}}]);
//# sourceMappingURL=../sourcemaps/9175.js.map