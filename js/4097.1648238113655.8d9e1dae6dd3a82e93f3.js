"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[4097,9844,1858,9942],{49844:(e,t,i)=>{i.r(t),i.d(t,{default:()=>C,Select:()=>C,SelectDirection:()=>P,SelectPosition:()=>b});var n=i(70885),o=i(1413),r=i(15671),u=i(43144),s=i(60136),l=i(54062),a=i(96985),c=i.n(a),d=i(75857),v=i(50361),p=i.n(v),f=i(18446),y=i.n(f),g=i(30998),S=i.n(g),h=i(68630),I=i.n(h),T=i(62834),P=d.DropdownDirection,b=d.DropdownPosition,C=function(e){(0,s.Z)(i,e);var t=(0,l.Z)(i);function i(){var e;(0,r.Z)(this,i);for(var n=arguments.length,u=new Array(n),s=0;s<n;s++)u[s]=arguments[s];return(e=t.call.apply(t,[this].concat(u))).state={isExpanded:!1,options:null,selected:null},e.selectField=c().createRef(),e.onSelect=function(t,i){var n=e.state.options,r=e.props,u=r.id,s=r.name,l=r.onSelect,a=r.variant,c=n,v=c.findIndex((function(e){return e.title===i}));c[v].selected=a===d.SelectVariant.single||!c[v].selected,a===d.SelectVariant.single&&c.forEach((function(e,t){v!==t&&(c[t].selected=!1)}));var f=a===d.SelectVariant.single?i:c.filter((function(e){return!0===e.selected})).map((function(e){return e.title}));e.setState({options:c,selected:f},(function(){var t=p()(c),i={id:u,name:s||u,value:t[v].value,selected:a===d.SelectVariant.single&&t[v]||p()(f),selectedIndex:v,type:"select-".concat(a===d.SelectVariant.single?"one":"multiple"),options:t};a===d.SelectVariant.checkbox&&(i.checked=t[v].selected);var n=(0,o.Z)((0,o.Z)({},i),{},{target:(0,o.Z)({},i),currentTarget:(0,o.Z)({},i),persist:T.B.noop});l((0,o.Z)({},n),v,t),a===d.SelectVariant.single&&e.setState({isExpanded:!1})}))},e.onToggle=function(t){e.setState({isExpanded:t})},e}return(0,u.Z)(i,[{key:"componentDidMount",value:function(){null===this.state.options&&this.formatOptions()}},{key:"componentDidUpdate",value:function(e){var t=this.props,i=t.options,n=t.selectedOptions;y()(e.options,i)&&y()(e.selectedOptions,n)||this.formatOptions()}},{key:"formatOptions",value:function(){var e,t,i=this.selectField.current,r=void 0===i?{}:i,u=this.props,s=u.options,l=u.selectedOptions,a=u.variant,c=Object.entries(this.props).filter((function(e){var t=(0,n.Z)(e,1)[0];return/^data-/i.test(t)})),v=I()(s)?Object.entries(s).map((function(e){var t=(0,n.Z)(e,2),i=t[0],r=t[1];return(0,o.Z)((0,o.Z)({},r),{},{title:i,value:r})})):p()(s),f=l&&"string"==typeof l||"number"==typeof l?[l]:l;v.forEach((function(e,t){var i,n=e;("string"==typeof n&&(n={title:e,value:e},v[t]=n),n.text=n.text||n.title,n.textContent=n.textContent||n.title,n.label=n.label||n.title,f)&&(I()(n.value)?(i=S()(f,n.value)>-1)||(i=!!f.find((function(e){return Object.values(n.value).includes(e)}))):i=f.includes(n.value),i||(i=f.includes(n.title)),v[t].selected=i)})),t=a===d.SelectVariant.single?(v.find((function(e){return!0===e.selected}))||{}).title:v.filter((function(e){return!0===e.selected})).map((function(e){return e.title})),null!=r&&null!==(e=r.parentRef)&&void 0!==e&&e.current&&c.forEach((function(e){var t,i=(0,n.Z)(e,2),o=i[0],u=i[1];return null==r||null===(t=r.parentRef)||void 0===t?void 0:t.current.setAttribute(o,u)})),this.setState({options:v,selected:t})}},{key:"render",value:function(){var e=this.state,t=e.options,i=e.selected,n=e.isExpanded,o=this.props,r=o.ariaLabel,u=o.className,s=o.direction,l=o.isDisabled,a=o.isToggleText,v=o.maxHeight,p=o.placeholder,f=o.position,y=o.toggleIcon,g=o.variant,S={direction:s,maxHeight:v};return t&&t.length&&!l||(S.isDisabled=!0),c().createElement("div",{className:"curiosity-select"},c().createElement(d.Select,Object.assign({menuAppendTo:"parent",className:"curiosity-select-pf".concat(a?"":"__no-toggle-text"," ").concat(f===d.DropdownPosition.right?"curiosity-select-pf__position-right":""," ").concat(u),variant:g,"aria-label":r,onToggle:this.onToggle,onSelect:this.onSelect,selections:i,isOpen:n,toggleIcon:y,placeholderText:p,ref:this.selectField},S),t&&t.map((function(e){return c().createElement(d.SelectOption,{key:window.btoa("".concat(e.title,"-").concat(e.value)),id:window.btoa("".concat(e.title,"-").concat(e.value)),value:e.title,"data-value":I()(e.value)&&JSON.stringify([e.value])||e.value,"data-title":e.title})}))||[]))}}]),i}(c().Component);C.defaultProps={ariaLabel:"Select option",className:"",direction:P.down,id:T.B.generateId(),isDisabled:!1,isToggleText:!0,maxHeight:null,name:null,onSelect:T.B.noop,options:[],placeholder:"Select option",position:b.left,selectedOptions:null,toggleIcon:null,variant:d.SelectVariant.single}},51858:(e,t,i)=>{i.r(t),i.d(t,{default:()=>F,context:()=>F,ProductViewContext:()=>y,DEFAULT_CONTEXT:()=>f,useProductContext:()=>C,useProductQuery:()=>h,useProductQueryFactory:()=>S,useProductGraphTallyQuery:()=>I,useProductInventoryGuestsQuery:()=>T,useProductInventoryHostsQuery:()=>P,useProductInventorySubscriptionsQuery:()=>b,useProduct:()=>x,useProductGraphConfig:()=>E,useProductInventoryGuestsConfig:()=>m,useProductInventoryHostsConfig:()=>_,useProductInventorySubscriptionsConfig:()=>O,useProductToolbarConfig:()=>Z});var n=i(45987),o=i(4942),r=i(1413),u=i(96985),s=i.n(u),l=i(12723),a=i(1798),c=i(30446),d=i(46262),v=i(62834),p=["initialGraphFilters","initialInventoryFilters","initialSubscriptionsInventoryFilters","productContextFilterUom"],f=[{},v.B.noop],y=s().createContext(f),g=function(){return(0,u.useContext)(y)},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.overrideId,n=t.useProductViewContext,o=void 0===n?g:n,u=o(),s=u[e],l=u.productId,c=u.viewId,d=a.Cr.reactRedux.useSelector((function(t){var n,o=t.view;return null==o||null===(n=o[e])||void 0===n?void 0:n[i]}),void 0),v=a.Cr.reactRedux.useSelector((function(t){var i,n=t.view;return null==n||null===(i=n[e])||void 0===i?void 0:i[l]}),void 0),p=a.Cr.reactRedux.useSelector((function(t){var i,n=t.view;return null==n||null===(i=n[e])||void 0===i?void 0:i[c]}),void 0);return(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},s),d),v),p)},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryType,i=void 0===t?"query":t,n=e.options;return S(i,n)},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryType,i=void 0===t?"graphTallyQuery":t,n=e.schemaCheck,o=void 0===n?c.VX.RHSM_API_QUERY_SET_REPORT_CAPACITY_TYPES:n,u=e.options;return l.VS.setApiQuery((0,r.Z)((0,r.Z)({},h()),S(i,u)),o)},T=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.defaultLimit,n=void 0===i?100:i,u=t.defaultOffset,s=void 0===u?0:u,a=t.queryType,v=void 0===a?"inventoryGuestsQuery":a,p=t.schemaCheck,f=void 0===p?c.VX.RHSM_API_QUERY_SET_INVENTORY_GUESTS_TYPES:p,y=t.options;return l.VS.setApiQuery((0,r.Z)((0,r.Z)((e={},(0,o.Z)(e,d.O6.LIMIT,n),(0,o.Z)(e,d.O6.OFFSET,s),e),h()),S(v,y)),f)},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryType,i=void 0===t?"inventoryHostsQuery":t,n=e.schemaCheck,o=void 0===n?c.VX.RHSM_API_QUERY_SET_INVENTORY_TYPES:n,u=e.options;return l.VS.setApiQuery((0,r.Z)((0,r.Z)({},h()),S(i,u)),o)},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryType,i=void 0===t?"inventorySubscriptionsQuery":t,n=e.schemaCheck,o=void 0===n?c.VX.RHSM_API_QUERY_SET_INVENTORY_TYPES:n,u=e.options;return l.VS.setApiQuery((0,r.Z)((0,r.Z)({},h()),S(i,u)),o)},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProductQuery,i=void 0===t?h:t,o=e.useProductViewContext,s=void 0===o?g:o,l=i(),a=l[c.VN.UOM],d=s(),v=d.initialGraphFilters,f=void 0===v?[]:v,y=d.initialInventoryFilters,S=void 0===y?[]:y,I=d.initialSubscriptionsInventoryFilters,T=void 0===I?[]:I,P=d.productContextFilterUom,b=(0,n.Z)(d,p),C=(0,u.useCallback)((function(){if(!0===P){var e=function(e){var t=e.id;return!e.isOptional||new RegExp(a,"i").test(t)};return(0,r.Z)((0,r.Z)({},b),{},{initialGraphFilters:f.filter(e),initialInventoryFilters:S.filter(e),initialSubscriptionsInventoryFilters:T.filter(e)})}return(0,r.Z)((0,r.Z)({},b),{},{initialGraphFilters:f,initialInventoryFilters:S,initialSubscriptionsInventoryFilters:T})}),[b,f,S,T,P,a]);return C()},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProductViewContext,i=void 0===t?g:t,n=i(),o=n.productGroup,r=n.productId,u=n.productLabel,s=n.viewId;return{productGroup:o,productId:r,productLabel:u,viewId:s}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProductContext,i=void 0===t?C:t,n=i(),o=n.initialGraphFilters,r=n.initialGraphSettings,u=void 0===r?{}:r;return{filters:o,settings:u}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProductContext,i=void 0===t?C:t,n=i(),o=n.inventoryGuestsQuery,r=void 0===o?{}:o,u=n.initialGuestsFilters,s=n.initialGuestsSettings,l=void 0===s?{}:s;return{filters:u,initialQuery:r,settings:l}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProductContext,i=void 0===t?C:t,n=i(),o=n.initialInventoryFilters,r=n.initialInventorySettings,u=void 0===r?{}:r;return{filters:o,settings:u}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProductContext,i=void 0===t?C:t,n=i(),o=n.initialSubscriptionsInventoryFilters,r=n.initialSubscriptionsInventorySettings,u=void 0===r?{}:r;return{filters:o,settings:u}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProductContext,i=void 0===t?C:t,n=i(),o=n.initialToolbarFilters,r=n.initialToolbarSettings,u=void 0===r?{}:r;return{filters:o,settings:u}},F={ProductViewContext:y,DEFAULT_CONTEXT:f,useProductContext:C,useQuery:h,useQueryFactory:S,useGraphTallyQuery:I,useInventoryGuestsQuery:T,useInventoryHostsQuery:P,useInventorySubscriptionsQuery:b,useProduct:x,useGraphConfig:E,useInventoryGuestsConfig:m,useInventoryHostsConfig:_,useInventorySubscriptionsConfig:O,useToolbarConfig:Z}},74097:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f,ToolbarFieldUom:()=>f,toolbarFieldOptions:()=>v,useOnSelect:()=>p});var n=i(1413),o=i(4942),r=i(96985),u=i.n(r),s=i(20169),l=i(51858),a=i(49844),c=i(30446),d=i(83109),v=Object.values(c.lu).map((function(e){return{title:(0,d.translate)("curiosity-toolbar.uom",{context:e}),value:e,selected:!1}})),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useDispatch,i=void 0===t?s.Cr.reactRedux.useDispatch:t,n=e.useProduct,r=void 0===n?l.useProduct:n,u=r(),a=u.viewId,d=i();return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,i=void 0===t?null:t;return d([{type:s.JD.query.SET_QUERY_RESET_INVENTORY_LIST,viewId:a},(0,o.Z)({type:s.JD.query.SET_QUERY_RHSM_TYPES[c.VN.UOM],viewId:a},c.VN.UOM,i)])}},f=function(e){var t=e.isFilter,i=e.options,o=e.position,r=e.t,s=e.useOnSelect,l=(0,e.useProductQuery)()[c.VN.UOM],d=s(),v=i.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{selected:e.value===l})}));return u().createElement(a.Select,{"aria-label":r("curiosity-toolbar.placeholder".concat(t?"_filter":""),{context:"uom"}),onSelect:d,options:v,selectedOptions:l,placeholder:r("curiosity-toolbar.placeholder".concat(t?"_filter":""),{context:"uom"}),position:o,"data-test":"toolbarFieldUom"})};f.defaultProps={isFilter:!1,options:v,position:a.SelectPosition.left,t:d.translate,useOnSelect:p,useProductQuery:l.useProductQuery}}}]);
//# sourceMappingURL=../sourcemaps/4097.2be1385b1673e5162942d24ae8e3ea54.js.map