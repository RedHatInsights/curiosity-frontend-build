"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[8341,1339,8139,353],{28341:function(t,e,r){r.r(e),r.d(e,{ConnectedGraphCard:function(){return y},GraphCard:function(){return f},default:function(){return y}});var a=r(1413),n=r(92950),i=r.n(n),o=r(73666),u=r(15451),l=r(61072),c=r(51858),s=r(76006),d=r(30446),h=r(1797),p=r(91339),m=r(89270),f=function(t){var e=t.cardTitle,r=t.children,n=t.error,l=t.getGraphReportsCapacity,c=t.graphData,s=t.meta,f=t.isDisabled,v=t.pending,y=t.useProduct,g=t.useProductGraphConfig,k=t.useProductGraphTallyQuery,C=y().productId,T=g().settings,b=k();if((0,u.Z)((function(){var t=b[d.VN.START_DATE],e=b[d.VN.END_DATE],r=b[d.VN.GRANULARITY];!f&&r&&t&&e&&C&&l(C,b)}),[l,f,C,b]),f)return null;var E=null;return"function"==typeof(null==T?void 0:T.actionDisplay)&&(E=T.actionDisplay({data:(0,a.Z)({},c),meta:(0,a.Z)({},s)})),i().createElement(o.Card,{className:"curiosity-usage-graph"},i().createElement(p.MinHeight,{key:"headerMinHeight"},i().createElement(o.CardHeader,null,i().createElement(o.CardTitle,null,i().createElement(o.Title,{headingLevel:"h2",size:"lg"},e)),i().createElement(o.CardActions,{className:n?"blur":""},i().createElement(i().Fragment,{key:"actionDisplay"},E),r))),i().createElement(p.MinHeight,{key:"bodyMinHeight"},i().createElement(o.CardBody,null,i().createElement("div",{className:(n?"blur":v&&"fadein")||""},v&&i().createElement(h.Loader,{variant:"graph"}),!v&&i().createElement(m.GraphCardChart,{graphData:c})))))};f.defaultProps={cardTitle:null,children:null,error:!1,getGraphReportsCapacity:s.BM.noop,graphData:{},isDisabled:s.BM.UI_DISABLED_GRAPH,meta:{},pending:!1,useProduct:c.useProduct,useProductGraphConfig:c.useProductGraphConfig,useProductGraphTallyQuery:c.useProductGraphTallyQuery};var v=l.R1.graphCard.makeGraphCard(),y=(0,l.$j)(v,(function(t){return{getGraphReportsCapacity:function(e,r){return t(l.Ak.rhsm.getGraphReportsCapacity(e,r))}}}))(f)},89270:function(t,e,r){r.r(e),r.d(e,{GraphCardChart:function(){return h},default:function(){return h}});var a=r(92950),n=r.n(a),i=r(48651),o=r(51858),u=r(78139),l=r(60930),c=r(64418),s=r(44024),d=r(30446),h=function(t){var e,r,a=t.graphData,o=t.useProductGraphConfig,h=t.useProductGraphTallyQuery,p=o().filters,m=h(),f=m[d.VN.GRANULARITY],v={xAxisLabelIncrement:u.graphCardHelpers.getChartXAxisLabelIncrement(f),xAxisTickFormat:function(t){var e=t.item,r=t.previousItem,a=t.tick;return u.graphCardHelpers.xAxisTickFormat({tick:a,date:e.date,previousDate:r.date,granularity:f})},yAxisTickFormat:u.graphCardHelpers.yAxisTickFormat};return n().createElement(l.Chart,Object.assign({key:"chart_".concat(JSON.stringify(m))},v,{dataSets:(e=a,r=function(t){var r={data:e[t],id:t,strokeWidth:2,isStacked:!/^threshold/.test(t),isThreshold:/^threshold/.test(t)};return/^threshold/.test(t)&&(r.stroke=i.chart_color_green_300.value,r.strokeDasharray="4,3",r.strokeWidth=3),r},null!=p&&p.length?p.map((function(t){return Object.assign(r(t.id),t)})):Object.keys(e).map((function(t){return r(t)}))),chartLegend:function(t){var e=t.chart,r=t.datum;return n().createElement(c.default,{chart:e,datum:r})},chartTooltip:function(t){var e=t.datum;return n().createElement(s.default,{datum:e})}}))};h.defaultProps={graphData:{},useProductGraphConfig:o.useProductGraphConfig,useProductGraphTallyQuery:o.useProductGraphTallyQuery}},64418:function(t,e,r){r.r(e),r.d(e,{GraphCardChartLegend:function(){return h},default:function(){return h}});var a=r(92950),n=r.n(a),i=r(73666),o=r(89048),u=r(51858),l=r(61072),c=r(76006),s=r(83109),d=r(1138),h=function(t){var e=t.chart,r=t.datum,a=t.t,u=t.useDispatch,c=t.useSelectors,s=(0,t.useProduct)(),h=s.productLabel,p=s.viewId,m=u(),f=c(r.dataSets.map((function(t){var e=t.id;return function(t){var r;return null===(r=t.graph.legend)||void 0===r?void 0:r["".concat(p,"-").concat(e)]}})));(0,o.Z)((function(){r.dataSets.forEach((function(t,r){var a=t.id;((null==f?void 0:f[r])||e.isToggled(a))&&e.hide(a)}))}));var v=function(t){var r=e.toggle(t);m({type:l.JD.graph.SET_GRAPH_LEGEND,id:"".concat(p,"-").concat(t),value:r})};return n().createElement(n().Fragment,null,r.dataSets.map((function(t,r){var o=t.id,u=t.isThreshold,l=t.stroke,c=t.data,s=!(void 0===c?[]:c).find((function(t){var e=t.y,r=t.hasData;return e>=0&&!0===r||e>=0&&!0===u}))||!1,p=a(["curiosity-graph.label_".concat(u?"threshold":o),"curiosity-graph.label_no"],{product:h,context:h}),m=a("curiosity-graph.legendTooltip".concat(u?"_threshold":"","_").concat(o),{product:h,context:h},[n().createElement("span",{style:{whiteSpace:"nowrap"}})]),y=(null==f?void 0:f[r])||e.isToggled(o),g=n().createElement(i.Button,{onClick:function(){return v(o)},onKeyPress:function(){return v(o)},className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(o),variant:"link",component:"a",isDisabled:s,icon:(s||y)&&n().createElement(d.ChartIcon,{symbol:"eyeSlash"})||n().createElement(d.ChartIcon,{symbol:u?"dash":"square",style:{visibility:s||y?"hidden":"visible"},fill:l})},p);return m?n().createElement(i.Tooltip,{key:"curiosity-tooltip-".concat(o),content:n().createElement("p",null,m),position:i.TooltipPosition.top,enableFlip:!0,distance:5},g):g})))};h.defaultProps={chart:{hide:c.BM.noop,toggle:c.BM.noop,isToggled:c.BM.noop},datum:{dataSets:[]},t:s.translate,useDispatch:l.Cr.reactRedux.useDispatch,useSelectors:l.Cr.reactRedux.useSelectors,useProduct:u.useProduct}},44024:function(t,e,r){r.r(e),r.d(e,{GraphCardChartTooltip:function(){return d},default:function(){return d}});var a=r(92950),n=r.n(a),i=r(51858),o=r(78139),u=r(83109),l=r(1138),c=r(46262),s=r(76006),d=function(t){var e=t.datum,r=t.t,a=t.useProduct,i=t.useProductGraphTallyQuery,u=a().productLabel,d=i()[c.O6.GRANULARITY],h=null,p=[],m=(e||{}).itemsByKey,f=void 0===m?{}:m;return Object.keys(f).reverse().forEach((function(t,e){var a,i,c,s;0===e&&(h=(0,o.getTooltipDate)({date:null===(s=f[t])||void 0===s?void 0:s.data.date,granularity:d}));var m={color:null===(a=f[t])||void 0===a?void 0:a.color};if("threshold"===(null===(i=f[t])||void 0===i?void 0:i.chartType)){var v,y,g,k=null!==(v=null===(y=f[t])||void 0===y?void 0:y.data.y)&&void 0!==v?v:r("curiosity-graph.label_noData");null!==(g=f[t])&&void 0!==g&&g.data.hasInfinite&&(k=m.color?n().createElement(l.ChartIcon,{symbol:"infinity",fill:"#ffffff",title:r("curiosity-graph.label_threshold",{context:"infinite"})}):r("curiosity-graph.label_threshold",{context:"infinite"})),m.label=r("curiosity-graph.label_threshold"),m.value=k}else{var C,T,b=!1===(null===(C=f[t])||void 0===C?void 0:C.data.hasData)&&r("curiosity-graph.label_noData")||(null===(T=f[t])||void 0===T?void 0:T.data.y)||0;m.label=r("curiosity-graph.label",{context:t,product:u}),m.value=b}m.chartType=null===(c=f[t])||void 0===c?void 0:c.chartType,p.push(m)})),n().createElement("div",{className:"curiosity-usage-graph__tooltip"},n().createElement("table",{summary:r("curiosity-graph.tooltipSummary")},p.length&&h&&n().createElement("thead",null,n().createElement("tr",null,n().createElement("th",{colSpan:2},h)))||null,p.length&&n().createElement("tbody",null,p.map((function(t){var e,r,a="number"==typeof t.value&&!Number.isInteger(t.value)&&(null===(e=s.BM.numberDisplay(t.value))||void 0===e||null===(r=e.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!0}))||void 0===r?void 0:r.toUpperCase())||t.value;return n().createElement("tr",{key:"tooltip-".concat(t.label)},n().createElement("th",null,"threshold"===t.chartType&&n().createElement(l.ChartIcon,{size:"sm",symbol:"dash",fill:t.color||"transparent"}),"threshold"!==t.chartType&&n().createElement(l.ChartIcon,{size:"sm",fill:t.color||"transparent"})," ",t.label),n().createElement("td",null,a))})))||null),!p.length&&r("curiosity-graph.label_noData",{context:"error"})||null)};d.defaultProps={datum:{},t:u.translate,useProduct:i.useProduct,useProductGraphTallyQuery:i.useProductGraphTallyQuery}},78139:function(t,e,r){r.r(e),r.d(e,{default:function(){return y},generateChartSettings:function(){return d},generateExtendedChartSettings:function(){return v},getChartXAxisLabelIncrement:function(){return h},getTooltipDate:function(){return p},graphCardHelpers:function(){return y},xAxisTickFormat:function(){return m},yAxisTickFormat:function(){return f}});var a=r(1413),n=r(45987),i=r(30381),o=r.n(i),u=r(48651),l=r(30446),c=r(76006),s=["id","isStandalone","isThreshold"],d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[],r=[];return t.forEach((function(t){var i=t.id,o=t.isStandalone,l=void 0!==o&&o,c=t.isThreshold,d=void 0!==c&&c,h=(0,n.Z)(t,s);if(i){var p={id:i,isStacked:!d,isStandalone:l,isThreshold:d,strokeWidth:2};d&&(p.stroke=u.chart_color_green_300.value,p.strokeDasharray="4,3",p.strokeWidth=3),l?e.push((0,a.Z)((0,a.Z)({},p),h)):r.push((0,a.Z)((0,a.Z)({},p),h))}})),{standaloneFilters:e,groupedFilters:r}},h=function(t){switch(t){case l.U9.DAILY:return 5;case l.U9.WEEKLY:case l.U9.MONTHLY:return 2;case l.U9.QUARTERLY:default:return 1}},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.date,r=t.granularity,a=o().utc(e);switch(r){case l.U9.QUARTERLY:return"".concat(a.format(c.i3.timestampQuarterFormats.yearShort)," - ").concat(a.add(1,"quarter").format(c.i3.timestampQuarterFormats.yearShort));case l.U9.MONTHLY:return a.format(c.i3.timestampMonthFormats.yearLong);case l.U9.WEEKLY:return"".concat(a.format(c.i3.timestampDayFormats.short)," - ").concat(a.add(1,"week").format(c.i3.timestampDayFormats.yearShort));case l.U9.DAILY:default:return a.format(c.i3.timestampDayFormats.long)}},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.callback,r=t.date,a=t.granularity,n=t.tick,i=t.previousDate;if(r&&a){if(e)return e({callback:e,date:r,granularity:a,tick:n,previousDate:i});var u,s=o().utc(r),d=0!==n&&Number.parseInt(s.year(),10)!==Number.parseInt(o().utc(i).year(),10);switch(a){case l.U9.QUARTERLY:u=(u=d?s.format(c.i3.timestampQuarterFormats.yearShort):s.format(c.i3.timestampQuarterFormats.short)).replace(/\s/,"\n");break;case l.U9.MONTHLY:u=(u=d?s.format(c.i3.timestampMonthFormats.yearShort):s.format(c.i3.timestampMonthFormats.short)).replace(/\s/,"\n");break;case l.U9.WEEKLY:case l.U9.DAILY:default:u=(u=d?s.format(c.i3.timestampDayFormats.yearShort):s.format(c.i3.timestampDayFormats.short)).replace(/\s(\d{4})$/,"\n$1")}return u}},f=function(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.callback,n=r.tick;return a?a({tick:n}):null===(t=c.BM.numberDisplay(n))||void 0===t||null===(e=t.format({average:!0,mantissa:1,trimMantissa:!0,lowPrecision:!1}))||void 0===e?void 0:e.toUpperCase()},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.settings,r=t.granularity;return(0,a.Z)((0,a.Z)({},e),{},{xAxisLabelIncrement:h(r),xAxisTickFormat:function(t){var a=t.item,n=t.previousItem,i=t.tick;return m({callback:null==e?void 0:e.xAxisTickFormat,tick:i,date:a.date,previousDate:n.date,granularity:r})},yAxisTickFormat:function(t){var r=t.tick;return f({callback:null==e?void 0:e.yAxisTickFormat,tick:r})}})},y={generateChartSettings:d,generateExtendedChartSettings:v,getChartXAxisLabelIncrement:h,getTooltipDate:p,xAxisTickFormat:m,yAxisTickFormat:f}},91339:function(t,e,r){r.r(e),r.d(e,{MinHeight:function(){return d},default:function(){return d}});var a=r(15671),n=r(43144),i=r(97326),o=r(60136),u=r(54062),l=r(92950),c=r.n(l),s=r(76006),d=function(t){(0,o.Z)(r,t);var e=(0,u.Z)(r);function r(){var t;(0,a.Z)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(t=e.call.apply(e,[this].concat(o))).containerRef=c().createRef(),t.innerContainerRef=c().createRef(),t.updatedContainerWidth=0,t.resizeObserver=s.BM.noop,t.onResizeContainer=function(){var e,r,a=(0,i.Z)(t).updatedContainerWidth,n=t.props.updateOnResize,o=(null===(e=t.containerRef)||void 0===e||null===(r=e.current)||void 0===r?void 0:r.clientWidth)||0;n&&o!==a&&(t.updatedContainerWidth=o,t.setMinHeight(!0))},t}return(0,n.Z)(r,[{key:"componentDidMount",value:function(){var t=this,e=this.props.updateOnResize;window.setTimeout((function(){t.setMinHeight()})),e&&this.setResizeObserver()}},{key:"componentDidUpdate",value:function(){var t=this;this.props.updateOnContent&&window.setTimeout((function(){t.setMinHeight()}))}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setMinHeight",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.props.minHeight,a=this.containerRef.current,n=void 0===a?{}:a,i=this.innerContainerRef.current,o=void 0===i?{}:i;null!=n&&n.style&&(r>(t=e?(null==o?void 0:o.clientHeight)||0:(null==n?void 0:n.clientHeight)||0)&&(t=r),n.style.minHeight="".concat(t,"px"))}},{key:"setResizeObserver",value:function(){var t=this;window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",t.onResizeContainer)}}},{key:"render",value:function(){var t=this.props.children;return c().createElement("div",{className:"curiosity-minheight",ref:this.containerRef},c().createElement("div",{ref:this.innerContainerRef},t))}}]),r}(c().Component);d.defaultProps={updateOnContent:!1,updateOnResize:!0,minHeight:0}}}]);
//# sourceMappingURL=../sourcemaps/8341.bb7561112bdb6f4ae3ed0a37bca9bb1f.js.map