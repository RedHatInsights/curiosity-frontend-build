(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[5176,8139,1339],{64418:function(t,e,r){"use strict";r.r(e),r.d(e,{GraphCardChartLegend:function(){return h},default:function(){return h}});var n=r(92950),a=r.n(n),i=r(21242),o=r(89048),u=r(51858),c=r(61072),s=r(76006),l=r(83109),d=r(1138),h=function(t){var e=t.chart,r=t.datum,n=t.t,u=t.useDispatch,s=t.useSelectors,l=(0,t.useProduct)(),h=l.productLabel,p=l.viewId,f=u(),m=s(r.dataSets.map((function(t){var e=t.id;return function(t){var r;return null===(r=t.graph.legend)||void 0===r?void 0:r["".concat(p,"-").concat(e)]}})));(0,o.Z)((function(){r.dataSets.forEach((function(t,r){var n=t.id;((null==m?void 0:m[r])||e.isToggled(n))&&e.hide(n)}))}));var v=function(t){var r=e.toggle(t);f({type:c.JD.graph.SET_GRAPH_LEGEND,id:"".concat(p,"-").concat(t),value:r})};return a().createElement(a().Fragment,null,r.dataSets.map((function(t,r){var o=t.id,u=t.isThreshold,c=t.stroke,s=t.data,l=!(void 0===s?[]:s).find((function(t){var e=t.y,r=t.hasData;return e>=0&&!0===r||e>=0&&!0===u}))||!1,p=n(["curiosity-graph.label_".concat(u?"threshold":o),"curiosity-graph.label_no"],{product:h,context:h}),f=n("curiosity-graph.legendTooltip".concat(u?"_threshold":"","_").concat(o),{product:h,context:h},[a().createElement("span",{style:{whiteSpace:"nowrap"}})]),y=(null==m?void 0:m[r])||e.isToggled(o),g=a().createElement(i.Button,{onClick:function(){return v(o)},onKeyPress:function(){return v(o)},className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(o),variant:"link",component:"a",isDisabled:l,icon:(l||y)&&a().createElement(d.ChartIcon,{symbol:"eyeSlash"})||a().createElement(d.ChartIcon,{symbol:u?"dash":"square",style:{visibility:l||y?"hidden":"visible"},fill:c})},p);return f?a().createElement(i.Tooltip,{key:"curiosity-tooltip-".concat(o),content:a().createElement("p",null,f),position:i.TooltipPosition.top,enableFlip:!0,distance:5},g):g})))};h.defaultProps={chart:{hide:s.BM.noop,toggle:s.BM.noop,isToggled:s.BM.noop},datum:{dataSets:[]},t:l.translate,useDispatch:c.Cr.reactRedux.useDispatch,useSelectors:c.Cr.reactRedux.useSelectors,useProduct:u.useProduct}},44024:function(t,e,r){"use strict";r.r(e),r.d(e,{GraphCardChartTooltip:function(){return h},default:function(){return h}});var n=r(92950),a=r.n(n),i=r(51858),o=r(78139),u=r(83109),c=r(60930),s=r(1138),l=r(46262),d=r(76006),h=function(t){var e=t.datum,r=t.t,n=t.useProduct,i=t.useProductGraphTallyQuery,u=n(),h=u.productId,p=u.productLabel,f=i()[l.O6.GRANULARITY],m=null,v=[],y=(e||{}).itemsByKey,g=void 0===y?{}:y;return Object.keys(g).reverse().forEach((function(t,e){var n,i,u,l;0===e&&(m=(0,o.getTooltipDate)({date:null===(l=g[t])||void 0===l?void 0:l.data.date,granularity:f}));var d={color:null===(n=g[t])||void 0===n?void 0:n.color};if((null===(i=g[t])||void 0===i?void 0:i.chartType)===c.ChartTypeVariant.threshold){var y,b,k,T=null!==(y=null===(b=g[t])||void 0===b?void 0:b.data.y)&&void 0!==y?y:r("curiosity-graph.label_noData");null!==(k=g[t])&&void 0!==k&&k.data.hasInfinite&&(T=d.color?a().createElement(s.ChartIcon,{symbol:"infinity",fill:"#ffffff",title:r("curiosity-graph.label_threshold",{context:"infinite"})}):r("curiosity-graph.label_threshold",{context:"infinite"})),d.label=r("curiosity-graph.label_threshold"),d.value=T}else{var E,C,D=!1===(null===(E=g[t])||void 0===E?void 0:E.data.hasData)&&r("curiosity-graph.label_noData")||(null===(C=g[t])||void 0===C?void 0:C.data.y)||0;d.label=r("curiosity-graph.label_".concat(t),{context:h,product:p}),d.value=D}d.chartType=null===(u=g[t])||void 0===u?void 0:u.chartType,v.push(d)})),a().createElement("div",{className:"curiosity-usage-graph__tooltip"},a().createElement("table",{summary:r("curiosity-graph.tooltipSummary")},v.length&&m&&a().createElement("thead",null,a().createElement("tr",null,a().createElement("th",{colSpan:2},m)))||null,v.length&&a().createElement("tbody",null,v.map((function(t){var e,r,n="number"==typeof t.value&&!Number.isInteger(t.value)&&(null===(e=d.BM.numberDisplay(t.value))||void 0===e||null===(r=e.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!0}))||void 0===r?void 0:r.toUpperCase())||t.value;return a().createElement("tr",{key:"tooltip-".concat(t.label)},a().createElement("th",null,t.chartType===c.ChartTypeVariant.threshold&&a().createElement(s.ChartIcon,{size:"sm",symbol:"dash",fill:t.color||"transparent"}),t.chartType!==c.ChartTypeVariant.threshold&&a().createElement(s.ChartIcon,{size:"sm",fill:t.color||"transparent"})," ",t.label),a().createElement("td",null,n))})))||null),!v.length&&r("curiosity-graph.label_noData",{context:"error"})||null)};h.defaultProps={datum:{},t:u.translate,useProduct:i.useProduct,useProductGraphTallyQuery:i.useProductGraphTallyQuery}},78139:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return g},generateChartSettings:function(){return h},generateExtendedChartSettings:function(){return y},getChartXAxisLabelIncrement:function(){return p},getTooltipDate:function(){return f},graphCardHelpers:function(){return g},xAxisTickFormat:function(){return m},yAxisTickFormat:function(){return v}});var n=r(1413),a=r(45987),i=r(30381),o=r.n(i),u=r(18604),c=r(60930),s=r(30446),l=r(76006),d=["id","isStandalone"],h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],i=[];t.forEach((function(t){var o=t.id,s=t.isStandalone,l=void 0!==s&&s,h=(0,a.Z)(t,d);if(o){var p=(null==h?void 0:h.chartType)===c.ChartTypeVariant.threshold,f={id:o,isStacked:!p,isStandalone:l,isThreshold:p,isCapacity:p,strokeWidth:2};p&&(f.stroke=u.chart_color_green_300.value,f.strokeDasharray="4,3",f.strokeWidth=3),l?r.push({settings:(0,n.Z)((0,n.Z)({padding:{bottom:75,left:75,right:45,top:45}},e),{},{isStandalone:!0,metric:(0,n.Z)((0,n.Z)({},f),h),metrics:[(0,n.Z)((0,n.Z)({},f),h)]})}):i.push((0,n.Z)((0,n.Z)({},f),h))}}));var o=i.length&&{settings:(0,n.Z)((0,n.Z)({},e),{},{isStandalone:!1,metric:void 0,metrics:i})}||void 0;return{standaloneFiltersSettings:r,groupedFiltersSettings:o}},p=function(t){switch(t){case s.U9.DAILY:return 5;case s.U9.WEEKLY:case s.U9.MONTHLY:return 2;case s.U9.QUARTERLY:default:return 1}},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.date,r=t.granularity,n=o().utc(e);switch(r){case s.U9.QUARTERLY:return"".concat(n.format(l.i3.timestampQuarterFormats.yearShort)," - ").concat(n.add(1,"quarter").format(l.i3.timestampQuarterFormats.yearShort));case s.U9.MONTHLY:return n.format(l.i3.timestampMonthFormats.yearLong);case s.U9.WEEKLY:return"".concat(n.format(l.i3.timestampDayFormats.short)," - ").concat(n.add(1,"week").format(l.i3.timestampDayFormats.yearShort));case s.U9.DAILY:default:return n.format(l.i3.timestampDayFormats.long)}},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.callback,r=t.date,n=t.granularity,a=t.tick,i=t.previousDate;if(r&&n){if(e)return e({callback:e,date:r,granularity:n,tick:a,previousDate:i});var u,c=o().utc(r),d=0!==a&&Number.parseInt(c.year(),10)!==Number.parseInt(o().utc(i).year(),10);switch(n){case s.U9.QUARTERLY:u=(u=d?c.format(l.i3.timestampQuarterFormats.yearShort):c.format(l.i3.timestampQuarterFormats.short)).replace(/\s/,"\n");break;case s.U9.MONTHLY:u=(u=d?c.format(l.i3.timestampMonthFormats.yearShort):c.format(l.i3.timestampMonthFormats.short)).replace(/\s/,"\n");break;case s.U9.WEEKLY:case s.U9.DAILY:default:u=(u=d?c.format(l.i3.timestampDayFormats.yearShort):c.format(l.i3.timestampDayFormats.short)).replace(/\s(\d{4})$/,"\n$1")}return u}},v=function(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.callback,a=r.tick;return n?n({tick:a}):null===(t=l.BM.numberDisplay(a))||void 0===t||null===(e=t.format({average:!0,mantissa:1,trimMantissa:!0,lowPrecision:!1}))||void 0===e?void 0:e.toUpperCase()},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.settings,r=t.granularity;return(0,n.Z)((0,n.Z)({},e),{},{xAxisLabelIncrement:p(r),xAxisTickFormat:function(t){var n=t.item,a=t.previousItem,i=t.tick;return m({callback:null==e?void 0:e.xAxisTickFormat,tick:i,date:n.date,previousDate:a.date,granularity:r})},yAxisTickFormat:function(t){var r=t.tick;return v({callback:null==e?void 0:e.yAxisTickFormat,tick:r})}})},g={generateChartSettings:h,generateExtendedChartSettings:y,getChartXAxisLabelIncrement:p,getTooltipDate:f,xAxisTickFormat:m,yAxisTickFormat:v}},91339:function(t,e,r){"use strict";r.r(e),r.d(e,{MinHeight:function(){return d},default:function(){return d}});var n=r(15671),a=r(43144),i=r(97326),o=r(60136),u=r(54062),c=r(92950),s=r.n(c),l=r(76006),d=function(t){(0,o.Z)(r,t);var e=(0,u.Z)(r);function r(){var t;(0,n.Z)(this,r);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(t=e.call.apply(e,[this].concat(o))).containerRef=s().createRef(),t.innerContainerRef=s().createRef(),t.updatedContainerWidth=0,t.resizeObserver=l.BM.noop,t.onResizeContainer=function(){var e,r,n=(0,i.Z)(t).updatedContainerWidth,a=t.props.updateOnResize,o=(null===(e=t.containerRef)||void 0===e||null===(r=e.current)||void 0===r?void 0:r.clientWidth)||0;a&&o!==n&&(t.updatedContainerWidth=o,t.setMinHeight(!0))},t}return(0,a.Z)(r,[{key:"componentDidMount",value:function(){var t=this,e=this.props.updateOnResize;window.setTimeout((function(){t.setMinHeight()})),e&&this.setResizeObserver()}},{key:"componentDidUpdate",value:function(){var t=this;this.props.updateOnContent&&window.setTimeout((function(){t.setMinHeight()}))}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setMinHeight",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.props.minHeight,n=this.containerRef.current,a=void 0===n?{}:n,i=this.innerContainerRef.current,o=void 0===i?{}:i;null!=a&&a.style&&(r>(t=e?(null==o?void 0:o.clientHeight)||0:(null==a?void 0:a.clientHeight)||0)&&(t=r),a.style.minHeight="".concat(t,"px"))}},{key:"setResizeObserver",value:function(){var t=this;window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",t.onResizeContainer)}}},{key:"render",value:function(){var t=this.props.children;return s().createElement("div",{className:"curiosity-minheight",ref:this.containerRef},s().createElement("div",{ref:this.innerContainerRef},t))}}]),r}(s().Component);d.defaultProps={updateOnContent:!1,updateOnResize:!0,minHeight:0}},99376:function(t,e){var r=Object.keys;e.D=function(t,e){if(t===e)return!0;if(!(t instanceof Object&&e instanceof Object))return!1;for(var n=r(t),a=n.length,i=0;i<a;i++)if(!(n[i]in e))return!1;for(i=0;i<a;i++)if(t[n[i]]!==e[n[i]])return!1;return a===r(e).length}},15451:function(t,e,r){"use strict";r.d(e,{Z:function(){return o}});var n=r(99376),a=r(92950),i=function(t,e){return t.every((function(t,r){return(0,n.D)(t,e[r])}))},o=function(t,e){!function(t,e,r){var n=(0,a.useRef)(void 0);n.current&&r(e,n.current)||(n.current=e),(0,a.useEffect)(t,n.current)}(t,e,i)}}}]);
//# sourceMappingURL=../sourcemaps/5176.js.map