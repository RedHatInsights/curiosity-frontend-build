"use strict";(self.webpackChunksubscriptions=self.webpackChunksubscriptions||[]).push([[4418,5394],{64418:function(e,t,r){r.r(t),r.d(t,{GraphCardChartLegend:function(){return C},default:function(){return C}});var n=r(87462),s=r(28416),o=r.n(s),a=r(45697),i=r.n(a),u=r(39930),c=r(89048),l=r(51858),d=r(25394),p=r(87284),h=r(76006),g=r(83109),f=r(1138);const C=e=>{let{chart:t,datum:r,t:s,useDispatch:a,useGraphCardContext:i,useSelectors:l,useProduct:d}=e;const{settings:h={}}=i(),{productLabel:g,viewId:C}=d(),{isDisabledLegendClick:m}=h,y=a(),[v,...G]=l([e=>{var t;let{graph:r}=e;return null===(t=r.legend)||void 0===t?void 0:t["".concat(C,"-inverted")]},...r.dataSets.map((e=>{let{id:t}=e;return e=>{var r;let{graph:n}=e;return null===(r=n.legend)||void 0===r?void 0:r["".concat(C,"-").concat(t)]}}))]);(0,c.Z)((()=>{r.dataSets.forEach(((e,r)=>{let{id:n,isToolbarFilter:s}=e;v&&s?new RegExp(v).test(n)||t.hide(n):((null==G?void 0:G[r])||t.isToggled(n))&&t.hide(n)}))}));const S=e=>{const r=t.toggle(e);y({type:p.JD.graph.SET_GRAPH_LEGEND,id:"".concat(C,"-").concat(e),value:r})};return o().createElement(o().Fragment,null,r.dataSets.map(((e,r)=>{let{id:a,isThreshold:i,stroke:c,data:l=[]}=e;const d=!l.find((e=>{let{y:t,hasData:r}=e;return t>=0&&!0===r||t>=0&&!0===i}))||!1,p=s(["curiosity-graph.label","curiosity-graph.label_no"],{product:g,context:a}),h=s("curiosity-graph.legendTooltip",{product:g,context:a},[o().createElement("span",{style:{whiteSpace:"nowrap"}})]),C=(null==G?void 0:G[r])||t.isToggled(a),y={};m||(y.onClick=()=>S(a),y.onKeyPress=()=>S(a));const v=o().createElement(u.Button,(0,n.Z)({},y,{className:"curiosity-graph__legend-item curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(a),variant:"link",component:"a",isDisabled:null!=m?m:d,icon:(d||C)&&o().createElement(f.ChartIcon,{symbol:"eyeSlash"})||o().createElement(f.ChartIcon,{symbol:i?"dash":"square",style:{visibility:d||C?"hidden":"visible"},fill:c})}),p);return h?o().createElement(u.Tooltip,{key:"curiosity-tooltip-".concat(a),content:o().createElement("p",null,h),position:u.TooltipPosition.top,enableFlip:!0},o().createElement("span",{className:"pf-c-button pf-m-link curiosity-graph__legend-item-wrapper curiosity-usage-graph__legend-item-wrapper"},v)):v})))};C.propTypes={chart:i().shape({hide:i().func,toggle:i().func,isToggled:i().func}),datum:i().shape({dataSets:i().arrayOf(i().shape({data:i().array,id:i().string.isRequired,isThreshold:i().bool,stroke:i().string.isRequired}))}),t:i().func,useDispatch:i().func,useGraphCardContext:i().func,useProduct:i().func,useSelectors:i().func},C.defaultProps={chart:{hide:h.helpers.noop,toggle:h.helpers.noop,isToggled:h.helpers.noop},datum:{dataSets:[]},t:g.translate,useDispatch:p.Cr.reactRedux.useDispatch,useGraphCardContext:d.useGraphCardContext,useProduct:l.useProduct,useSelectors:p.Cr.reactRedux.useSelectors}},25394:function(e,t,r){r.r(t),r.d(t,{DEFAULT_CONTEXT:function(){return h},GraphCardContext:function(){return g},context:function(){return G},default:function(){return G},useGetMetrics:function(){return y},useGraphCardActions:function(){return v},useGraphCardContext:function(){return f},useMetricsSelector:function(){return m},useParseFiltersSettings:function(){return C}});var n=r(87462),s=r(28416),o=r.n(s),a=r(15451),i=r(39930),u=r(87284),c=r(51858),l=r(70136),d=r(62834),p=r(78139);const h=[{settings:{metrics:[]}},d.B.noop],g=o().createContext(h),f=()=>(0,s.useContext)(g),C=function(){let{useProduct:e=c.useProduct,useProductGraphConfig:t=c.useProductGraphConfig}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{productId:r}=e(),{filters:n=[],settings:o={}}=t();return(0,s.useMemo)((()=>p.graphCardHelpers.generateChartSettings({filters:n,settings:o,productId:r})),[n,o,r])},m=function(){let{useGraphCardContext:e=f,useSelectorsResponse:t=u.Cr.reactRedux.useSelectorsResponse}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{settings:r={}}=e(),{metrics:n=[]}=r,{error:s,fulfilled:o,pending:a,data:i=[],...c}=t(n.map((e=>{let{id:t,isCapacity:r}=e;return e=>{var n,s;let{graph:o}=e;return r?null===(n=o.capacity)||void 0===n?void 0:n[t]:null===(s=o.tally)||void 0===s?void 0:s[t]}}))),l={},d=null==i?void 0:i.map(((e,t)=>{const r={...n[t],...e};return l[n[t].id]=r,r}));return{...c,data:l,dataSets:d,error:s,fulfilled:o,pending:a}},y=function(){let{getGraphMetrics:e=u.Ak.rhsm.getGraphMetrics,useDispatch:t=u.Cr.reactRedux.useDispatch,useGraphCardContext:r=f,useMetricsSelector:n=m,useProduct:s=c.useProduct,useProductGraphTallyQuery:o=c.useProductGraphTallyQuery}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{productId:i}=s(),l=o(),d=t(),p=n(),{settings:h={}}=r(),{metrics:g=[]}=h;return(0,a.Z)((()=>{const t=g.map((e=>{let{metric:t,isCapacity:r,query:n}=e;return{id:i,metric:t,isCapacity:r,query:n}}));e(t,l)(d)}),[g,i,l]),p},v=function(){let{categoryOptions:e=l.toolbarFieldOptions,useMetricsSelector:t=m,useGraphCardContext:r=f}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{pending:a,dataSets:u}=t(),{settings:c={}}=r(),{actions:p}=c;return(0,s.useMemo)((()=>null==p?void 0:p.map((t=>{let{id:r,content:s,...c}=t;const l=e.find((e=>{let{value:t}=e;return r===t})),{component:p}=l||{};return p&&o().createElement(i.ToolbarItem,{key:"option-".concat(r)},o().createElement(p,(0,n.Z)({isFilter:!1},c)))||s&&!a&&u.length&&o().createElement(i.ToolbarItem,{key:r||d.B.generateId()},"function"==typeof s?s({data:u}):s)||null}))),[p,e,u,a])},G={GraphCardContext:g,DEFAULT_CONTEXT:h,useGetMetrics:y,useGraphCardActions:v,useGraphCardContext:f,useMetricsSelector:m,useParseFiltersSettings:C}}}]);
//# sourceMappingURL=../sourcemaps/4418.ac1aeae0f34e7ff425f5d713ada5f477.js.map