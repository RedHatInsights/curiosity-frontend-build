(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[3768,9844,1394,1339,5876,7297],{49844:function(e,t,n){"use strict";n.r(t),n.d(t,{Select:function(){return D},SelectDirection:function(){return T},SelectPosition:function(){return C},default:function(){return D}});var i=n(29439),r=n(1413),a=n(15671),l=n(43144),o=n(60136),c=n(54062),s=n(92950),u=n.n(s),d=n(54653),p=n(50361),f=n.n(p),h=n(18446),v=n.n(h),m=n(30998),g=n.n(m),y=n(68630),S=n.n(y),E=n(62834),T=d.DropdownDirection,C=d.DropdownPosition,D=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={isExpanded:!1,options:null,selected:null},e.selectField=u().createRef(),e.onSelect=function(t,n){var i=e.state.options,a=e.props,l=a.id,o=a.name,c=a.onSelect,s=a.variant,u=i,p=u.findIndex((function(e){return e.title===n}));u[p].selected=s===d.SelectVariant.single||!u[p].selected,s===d.SelectVariant.single&&u.forEach((function(e,t){p!==t&&(u[t].selected=!1)}));var h=s===d.SelectVariant.single?n:u.filter((function(e){return!0===e.selected})).map((function(e){return e.title}));e.setState({options:u,selected:h},(function(){var t=f()(u),n={id:l,name:o||l,value:t[p].value,selected:s===d.SelectVariant.single&&t[p]||f()(h),selectedIndex:p,type:"select-".concat(s===d.SelectVariant.single?"one":"multiple"),options:t};s===d.SelectVariant.checkbox&&(n.checked=t[p].selected);var i=(0,r.Z)((0,r.Z)({},n),{},{target:(0,r.Z)({},n),currentTarget:(0,r.Z)({},n),persist:E.B.noop});c((0,r.Z)({},i),p,t),s===d.SelectVariant.single&&e.setState({isExpanded:!1})}))},e.onToggle=function(t){e.setState({isExpanded:t})},e}return(0,l.Z)(n,[{key:"componentDidMount",value:function(){null===this.state.options&&this.formatOptions()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.options,i=t.selectedOptions;v()(e.options,n)&&v()(e.selectedOptions,i)||this.formatOptions()}},{key:"formatOptions",value:function(){var e,t,n=this.selectField.current,a=void 0===n?{}:n,l=this.props,o=l.options,c=l.selectedOptions,s=l.variant,u=Object.entries(this.props).filter((function(e){var t=(0,i.Z)(e,1)[0];return/^data-/i.test(t)})),p=S()(o)?Object.entries(o).map((function(e){var t=(0,i.Z)(e,2),n=t[0],a=t[1];return(0,r.Z)((0,r.Z)({},a),{},{title:n,value:a})})):f()(o),h=c&&"string"==typeof c||"number"==typeof c?[c]:c;p.forEach((function(e,t){var n,i=e;("string"==typeof i&&(i={title:e,value:e},p[t]=i),i.text=i.text||i.title,i.textContent=i.textContent||i.title,i.label=i.label||i.title,h)&&(S()(i.value)?(n=g()(h,i.value)>-1)||(n=!!h.find((function(e){return Object.values(i.value).includes(e)}))):n=h.includes(i.value),n||(n=h.includes(i.title)),p[t].selected=n)})),t=s===d.SelectVariant.single?(p.find((function(e){return!0===e.selected}))||{}).title:p.filter((function(e){return!0===e.selected})).map((function(e){return e.title})),null!=a&&null!==(e=a.parentRef)&&void 0!==e&&e.current&&u.forEach((function(e){var t,n=(0,i.Z)(e,2),r=n[0],l=n[1];return null==a||null===(t=a.parentRef)||void 0===t?void 0:t.current.setAttribute(r,l)})),this.setState({options:p,selected:t})}},{key:"render",value:function(){var e=this.state,t=e.options,n=e.selected,i=e.isExpanded,r=this.props,a=r.ariaLabel,l=r.className,o=r.direction,c=r.isDisabled,s=r.isFlipEnabled,p=r.isToggleText,f=r.maxHeight,h=r.placeholder,v=r.position,m=r.toggleIcon,g=r.variant,y={direction:o,isFlipEnabled:s,maxHeight:f};return t&&t.length&&!c||(y.isDisabled=!0),u().createElement("div",{className:"curiosity-select"},u().createElement(d.Select,Object.assign({menuAppendTo:"parent",className:"curiosity-select-pf".concat(p?"":"__no-toggle-text"," ").concat(v===d.DropdownPosition.right?"curiosity-select-pf__position-right":""," ").concat(l),variant:g,"aria-label":a,onToggle:this.onToggle,onSelect:this.onSelect,selections:n,isOpen:i,toggleIcon:m,placeholderText:h,ref:this.selectField},y),t&&t.map((function(e){return u().createElement(d.SelectOption,{key:window.btoa("".concat(e.title,"-").concat(e.value)),id:window.btoa("".concat(e.title,"-").concat(e.value)),value:e.title,"data-value":S()(e.value)&&JSON.stringify([e.value])||e.value,"data-title":e.title})}))||[]))}}]),n}(u().Component);D.defaultProps={ariaLabel:"Select option",className:"",direction:T.down,id:E.B.generateId(),isDisabled:!1,isFlipEnabled:!1,isToggleText:!0,maxHeight:null,name:null,onSelect:E.B.noop,options:[],placeholder:"Select option",position:C.left,selectedOptions:null,toggleIcon:null,variant:d.SelectVariant.single}},10608:function(e,t,n){"use strict";n.r(t),n.d(t,{GraphCard:function(){return s},default:function(){return s}});var i=n(92950),r=n.n(i),a=n(76006),l=n(29407),o=n(91799),c=n(25394),s=function(e){var t=e.isDisabled,n=(0,e.useParseFiltersSettings)(),i=n.groupedFiltersSettings,a=n.standaloneFiltersSettings;return t?null:r().createElement(r().Fragment,null,i&&r().createElement(c.GraphCardContext.Provider,{value:i},r().createElement(o.GraphCardChart,null))||null,null==a?void 0:a.map((function(e){var t,n;return r().createElement(c.GraphCardContext.Provider,{key:"graphCard_".concat(null==e||null===(t=e.settings)||void 0===t||null===(n=t.metric)||void 0===n?void 0:n.id),value:e},r().createElement(l.GraphCardMetricTotals,null,r().createElement(o.GraphCardChart,null)))})))};s.defaultProps={isDisabled:a.BM.UI_DISABLED_GRAPH,useParseFiltersSettings:c.useParseFiltersSettings}},29407:function(e,t,n){"use strict";n.r(t),n.d(t,{GraphCardMetricTotals:function(){return y},default:function(){return y}});var i=n(92950),r=n.n(i),a=n(54653),l=n(30381),o=n.n(l),c=n(68929),s=n.n(c),u=n(51858),d=n(25394),p=n(91339),f=n(1797),h=n(76006),v=n(65876),m=n(46262),g=n(83109),y=function(e){var t,n,i,l,c=e.children,u=e.t,d=e.useMetricsSelector,g=(0,e.useProductGraphTallyQuery)()[m.O6.START_DATE],y=d(),S=y.pending,E=y.error,T=y.fulfilled,C=y.dataSets,D=(void 0===C?[]:C)[0]||{},b=D.data,O=void 0===b?[]:b,R=D.id,M=D.metric,_=D.meta,x=void 0===_?{}:_,F=O[O.length-1]||{},P=F.date,k=F.hasData,Z=F.y,w=O.find((function(e){return!0===e.isCurrentDate}))||{},H=w.date,I=w.hasData,A=w.y,N=x.totalMonthlyDate,z=x.totalMonthlyHasData,G=x.totalMonthlyValue,U=v.toolbarFieldOptions.find((function(e){return e.title===g||e.value.startDate.toISOString()===g}))||{},B=U.title,L=U.isCurrent,V=L?H:P,Y=L?I:k,Q=L?A:Z;return r().createElement(a.Flex,{"data-test":"graphMetricTotals-".concat(s()(M)),className:"curiosity-usage-graph__totals"},r().createElement(a.Flex,{flex:{default:"flex_1"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},r().createElement(a.FlexItem,{className:"curiosity-usage-graph__totals-column"},r().createElement(a.Card,{"data-test":"graphDailyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(E?"blur":"")},r().createElement(a.CardTitle,null,u("curiosity-graph.cardHeadingMetric",{context:["dailyTotal",R],month:B})),r().createElement(p.MinHeight,{key:"currentBody"},r().createElement(a.CardBody,null,r().createElement("div",null,S&&r().createElement(f.Loader,{variant:"skeleton",skeletonProps:{size:f.SkeletonSize.lg}}),T&&u("curiosity-graph.cardBodyMetric",{context:["total",Y&&R],total:null===(t=h.BM.numberDisplay(Q))||void 0===t||null===(n=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===n?void 0:n.toUpperCase()},[r().createElement("strong",{title:Q,"aria-label":Q})])))),r().createElement(p.MinHeight,{key:"currentFooter"},r().createElement(a.CardFooter,null,r().createElement("div",{className:Y?"":"hidden"},T&&V&&u("curiosity-graph.cardFooterMetric",{date:o().utc(V).format(h.i3.timestampUTCTimeFormats.yearTimeShort)}))))),r().createElement(a.Card,{"data-test":"graphMonthlyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(E?"blur":"")},r().createElement(a.CardTitle,null,u("curiosity-graph.cardHeadingMetric",{context:["monthlyTotal",R],month:B})),r().createElement(p.MinHeight,{key:"totalMonthlyBody"},r().createElement(a.CardBody,null,r().createElement("div",null,S&&r().createElement(f.Loader,{variant:"skeleton",skeletonProps:{size:f.SkeletonSize.lg}}),T&&u("curiosity-graph.cardBodyMetric",{context:["total",z&&R],total:null===(i=h.BM.numberDisplay(G))||void 0===i||null===(l=i.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===l?void 0:l.toUpperCase()},[r().createElement("strong",{title:G,"aria-label":G})])))),r().createElement(p.MinHeight,{key:"totalMonthlyFooter"},r().createElement(a.CardFooter,null,r().createElement("div",{className:z?"":"hidden"},T&&N&&u("curiosity-graph.cardFooterMetric",{date:o().utc(N).format(h.i3.timestampUTCTimeFormats.yearTimeShort)}))))))),r().createElement(a.Flex,{flex:{default:"flex_3"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},r().createElement(a.FlexItem,{className:"curiosity-usage-graph__totals-graph-column"},c)))};y.defaultProps={children:null,t:g.translate,useMetricsSelector:d.useMetricsSelector,useProductGraphTallyQuery:u.useProductGraphTallyQuery}},91339:function(e,t,n){"use strict";n.r(t),n.d(t,{MinHeight:function(){return d},default:function(){return d}});var i=n(15671),r=n(43144),a=n(97326),l=n(60136),o=n(54062),c=n(92950),s=n.n(c),u=n(76006),d=function(e){(0,l.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).containerRef=s().createRef(),e.innerContainerRef=s().createRef(),e.updatedContainerWidth=0,e.resizeObserver=u.BM.noop,e.onResizeContainer=function(){var t,n,i=(0,a.Z)(e).updatedContainerWidth,r=e.props.updateOnResize,l=(null===(t=e.containerRef)||void 0===t||null===(n=t.current)||void 0===n?void 0:n.clientWidth)||0;r&&l!==i&&(e.updatedContainerWidth=l,e.setMinHeight(!0))},e}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.updateOnResize;window.setTimeout((function(){e.setMinHeight()})),t&&this.setResizeObserver()}},{key:"componentDidUpdate",value:function(){var e=this;this.props.updateOnContent&&window.setTimeout((function(){e.setMinHeight()}))}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setMinHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.props.minHeight,i=this.containerRef.current,r=void 0===i?{}:i,a=this.innerContainerRef.current,l=void 0===a?{}:a;null!=r&&r.style&&(n>(e=t?(null==l?void 0:l.clientHeight)||0:(null==r?void 0:r.clientHeight)||0)&&(e=n),r.style.minHeight="".concat(e,"px"))}},{key:"setResizeObserver",value:function(){var e=this;window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",e.onResizeContainer)}}},{key:"render",value:function(){var e=this.props.children;return s().createElement("div",{className:"curiosity-minheight",ref:this.containerRef},s().createElement("div",{ref:this.innerContainerRef},e))}}]),n}(s().Component);d.defaultProps={updateOnContent:!1,updateOnResize:!0,minHeight:0}},65876:function(e,t,n){"use strict";n.r(t),n.d(t,{ToolbarFieldRangedMonthly:function(){return v},default:function(){return v},toolbarFieldOptions:function(){return f},useOnSelect:function(){return h}});var i=n(4942),r=n(1413),a=n(92950),l=n.n(a),o=n(82410),c=n(51858),s=n(49844),u=n(46262),d=n(76006),p=n(83109),f=d.i3.getRangedMonthDateTime().listDateTimeRanges.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{selected:!1})})),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useDispatch,n=void 0===t?o.Cr.reactRedux.useDispatch:t,r=e.useProduct,a=void 0===r?c.useProduct:r,l=a(),s=l.viewId,d=n();return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,n=t.startDate,r=t.endDate;d([{type:o.JD.query.SET_QUERY_CLEAR_INVENTORY_LIST,viewId:s},(0,i.Z)({type:o.JD.query.SET_QUERY_RHSM_TYPES[u.O6.GRANULARITY],viewId:s},u.O6.GRANULARITY,u.U9.DAILY),(0,i.Z)({type:o.JD.query.SET_QUERY_RHSM_TYPES[u.O6.START_DATE],viewId:s},u.O6.START_DATE,null==n?void 0:n.toISOString()),(0,i.Z)({type:o.JD.query.SET_QUERY_RHSM_TYPES[u.O6.END_DATE],viewId:s},u.O6.END_DATE,null==r?void 0:r.toISOString())])}},v=function(e){var t=e.isFilter,n=e.options,i=e.position,a=e.t,o=e.useOnSelect,c=(0,e.useProductGraphTallyQuery)()[u.O6.START_DATE],d=o(),p=n.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{selected:e.title===c||e.value.startDate.toISOString()===c})}));return l().createElement(s.Select,{"aria-label":a("curiosity-toolbar.placeholder".concat(t?"_filter":""),{context:"rangedMonthly"}),onSelect:d,options:p,placeholder:a("curiosity-toolbar.placeholder".concat(t?"_filter":""),{context:"rangedMonthly"}),position:i,maxHeight:250,"data-test":"toolbarFieldRangeGranularity"})};v.defaultProps={isFilter:!1,options:f,position:s.SelectPosition.left,t:p.translate,useOnSelect:h,useProductGraphTallyQuery:c.useProductGraphTallyQuery}},99376:function(e,t){var n=Object.keys;t.D=function(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;for(var i=n(e),r=i.length,a=0;a<r;a++)if(!(i[a]in t))return!1;for(a=0;a<r;a++)if(e[i[a]]!==t[i[a]])return!1;return r===n(t).length}},37124:function(e,t,n){"use strict";var i=n(92950);t.Z=function(e,t,n){var r=(0,i.useRef)(void 0);r.current&&n(t,r.current)||(r.current=t),(0,i.useEffect)(e,r.current)}},17297:function(e,t,n){"use strict";var i=n(99376),r=n(37124),a=function(e,t){return e.every((function(e,n){return(0,i.D)(e,t[n])}))};t.Z=function(e,t){(0,r.Z)(e,t,a)}}}]);
//# sourceMappingURL=../sourcemaps/3768.8700d3929eebb23a348466a504958390.js.map