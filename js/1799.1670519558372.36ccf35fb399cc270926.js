"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[1799,4418,4024],{91799:function(e,t,r){r.r(t),r.d(t,{GraphCardChart:function(){return y},default:function(){return y}});var a=r(92950),n=r.n(a),i=r(54653),o=r(51858),l=r(25394),u=r(78139),c=r(60930),s=r(64418),d=r(44024),p=r(99171),h=r(46262),v=r(91339),f=r(1797),m=r(83109),y=function(e){var t=e.t,r=e.useGetMetrics,a=e.useGraphCardContext,o=e.useProduct,l=e.useProductGraphTallyQuery,m=o().productId,y=a().settings,g=void 0===y?{}:y,C=g.actionDisplay,E=g.isStandalone,T=g.metric,b=l()[h.O6.GRANULARITY],G=r(),x=G.pending,P=G.error,S=G.dataSets,D=void 0===S?[]:S,M=null;return"function"==typeof C&&(M=C({data:D})),n().createElement(i.Card,{className:"curiosity-usage-graph"},n().createElement(v.MinHeight,{key:"headerMinHeight"},n().createElement(i.CardHeader,null,n().createElement(i.CardTitle,null,n().createElement(i.Title,{headingLevel:"h2",size:"lg"},t("curiosity-graph.cardHeading",{context:E&&(null==T?void 0:T.id)||m}),n().createElement(p.GraphCardChartTitleTooltip,null))),M&&n().createElement(i.CardActions,{className:P?"blur":""},M))),n().createElement(v.MinHeight,{key:"bodyMinHeight"},n().createElement(i.CardBody,null,n().createElement("div",{className:(P?"blur":x&&"fadein")||""},x&&n().createElement(f.Loader,{variant:"graph"}),!x&&n().createElement(c.Chart,Object.assign({},u.graphCardHelpers.generateExtendedChartSettings({settings:g,granularity:b}),{dataSets:D,chartLegend:function(e){var t=e.chart,r=e.datum;return n().createElement(s.GraphCardChartLegend,{chart:t,datum:r})},chartTooltip:function(e){var t=e.datum;return n().createElement(d.GraphCardChartTooltip,{datum:t})}}))))))};y.defaultProps={t:m.translate,useGetMetrics:l.useGetMetrics,useGraphCardContext:l.useGraphCardContext,useProduct:o.useProduct,useProductGraphTallyQuery:o.useProductGraphTallyQuery}},64418:function(e,t,r){r.r(t),r.d(t,{GraphCardChartLegend:function(){return v},default:function(){return v}});var a=r(93433),n=r(84506),i=r(92950),o=r.n(i),l=r(54653),u=r(89048),c=r(51858),s=r(82410),d=r(76006),p=r(83109),h=r(1138),v=function(e){var t=e.chart,r=e.datum,i=e.t,c=e.useDispatch,d=e.useProductGraphConfig,p=e.useSelectors,v=(0,e.useProduct)(),f=v.productLabel,m=v.viewId,y=d().settings,g=(void 0===y?{}:y).isDisabledLegendClick,C=c(),E=p([function(e){var t;return null===(t=e.graph.legend)||void 0===t?void 0:t["".concat(m,"-inverted")]}].concat((0,a.Z)(r.dataSets.map((function(e){var t=e.id;return function(e){var r;return null===(r=e.graph.legend)||void 0===r?void 0:r["".concat(m,"-").concat(t)]}}))))),T=(0,n.Z)(E),b=T[0],G=T.slice(1);(0,u.Z)((function(){r.dataSets.forEach((function(e,r){var a=e.id,n=e.isToolbarFilter;b&&n?new RegExp(b).test(a)||t.hide(a):((null==G?void 0:G[r])||t.isToggled(a))&&t.hide(a)}))}));var x=function(e){var r=t.toggle(e);C({type:s.JD.graph.SET_GRAPH_LEGEND,id:"".concat(m,"-").concat(e),value:r})};return o().createElement(o().Fragment,null,r.dataSets.map((function(e,r){var a=e.id,n=e.isThreshold,u=e.stroke,c=e.data,s=!(void 0===c?[]:c).find((function(e){var t=e.y,r=e.hasData;return t>=0&&!0===r||t>=0&&!0===n}))||!1,d=i(["curiosity-graph.label","curiosity-graph.label_no"],{product:f,context:a}),p=i("curiosity-graph.legendTooltip",{product:f,context:a},[o().createElement("span",{style:{whiteSpace:"nowrap"}})]),v=(null==G?void 0:G[r])||t.isToggled(a),m={};g||(m.onClick=function(){return x(a)},m.onKeyPress=function(){return x(a)});var y=o().createElement(l.Button,Object.assign({},m,{className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(a),variant:"link",component:"a",isDisabled:null!=g?g:s,icon:(s||v)&&o().createElement(h.ChartIcon,{symbol:"eyeSlash"})||o().createElement(h.ChartIcon,{symbol:n?"dash":"square",style:{visibility:s||v?"hidden":"visible"},fill:u})}),d);return p?o().createElement(l.Tooltip,{key:"curiosity-tooltip-".concat(a),content:o().createElement("p",null,p),position:l.TooltipPosition.top,enableFlip:!0,distance:5},o().createElement("span",{className:"pf-c-button pf-m-link"},y)):y})))};v.defaultProps={chart:{hide:d.BM.noop,toggle:d.BM.noop,isToggled:d.BM.noop},datum:{dataSets:[]},t:p.translate,useDispatch:s.Cr.reactRedux.useDispatch,useProduct:c.useProduct,useProductGraphConfig:c.useProductGraphConfig,useSelectors:s.Cr.reactRedux.useSelectors}},99171:function(e,t,r){r.r(t),r.d(t,{GraphCardChartTitleTooltip:function(){return s},default:function(){return s}});var a=r(92950),n=r.n(a),i=r(54653),o=r(1915),l=r(51858),u=r(25394),c=r(83109),s=function(e){var t=e.t,r=e.useGraphCardContext,a=(0,e.useProduct)().productId,l=r().settings,u=void 0===l?{}:l,c=u.isCardTitleDescription,s=u.isStandalone,d=u.metric;return c||null!=d&&d.isCardTitleDescription?n().createElement(i.Tooltip,{content:n().createElement("p",null,t("curiosity-graph.cardHeadingDescription",{context:s&&(null==d?void 0:d.id)||a})),position:i.TooltipPosition.top,enableFlip:!1,distance:5,entryDelay:100,exitDelay:0},n().createElement("span",{className:"curiosity-icon__question"},n().createElement(o.OutlinedQuestionCircleIcon,null))):null};s.defaultProps={t:c.translate,useProduct:l.useProduct,useGraphCardContext:u.useGraphCardContext}},44024:function(e,t,r){r.r(t),r.d(t,{GraphCardChartTooltip:function(){return p},default:function(){return p}});var a=r(92950),n=r.n(a),i=r(51858),o=r(78139),l=r(83109),u=r(60930),c=r(1138),s=r(46262),d=r(76006),p=function(e){var t=e.datum,r=e.t,a=e.useProduct,i=e.useProductGraphTallyQuery,l=a().productLabel,p=i()[s.O6.GRANULARITY],h=null,v=[],f=(t||{}).itemsByKey,m=void 0===f?{}:f;return Object.keys(m).reverse().forEach((function(e,t){var a,i,s,d;0===t&&(h=(0,o.getTooltipDate)({date:null===(d=m[e])||void 0===d?void 0:d.data.date,granularity:p}));var f={color:null===(a=m[e])||void 0===a?void 0:a.color};if((null===(i=m[e])||void 0===i?void 0:i.chartType)===u.ChartTypeVariant.threshold){var y,g,C,E,T=null!==(y=null===(g=m[e])||void 0===g?void 0:g.data.y)&&void 0!==y?y:r("curiosity-graph.label",{context:"noData"});(null!==(C=m[e])&&void 0!==C&&C.data.hasInfinite||null!==(E=m[e])&&void 0!==E&&E.data.hasInfiniteQuantity)&&(T=r("curiosity-graph.label",{context:["threshold","infinite"]},[f.color&&n().createElement(c.ChartIcon,{symbol:"infinity",fill:"#ffffff",title:r("curiosity-graph.label",{context:["threshold","infinite"]})})])),f.label=r("curiosity-graph.label",{context:["threshold"]}),f.value=T}else{var b,G,x=!1===(null===(b=m[e])||void 0===b?void 0:b.data.hasData)&&r("curiosity-graph.label",{context:"noData"})||(null===(G=m[e])||void 0===G?void 0:G.data.y)||0;f.label=r("curiosity-graph.label",{context:e,product:l}),f.value=x}f.chartType=null===(s=m[e])||void 0===s?void 0:s.chartType,v.push(f)})),n().createElement("div",{className:"curiosity-usage-graph__tooltip"},n().createElement("table",{summary:r("curiosity-graph.tooltipSummary")},v.length&&h&&n().createElement("thead",null,n().createElement("tr",null,n().createElement("th",{colSpan:2},h)))||null,v.length&&n().createElement("tbody",null,v.map((function(e){var t,r,a="number"==typeof e.value&&!Number.isInteger(e.value)&&(null===(t=d.BM.numberDisplay(e.value))||void 0===t||null===(r=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!0}))||void 0===r?void 0:r.toUpperCase())||e.value;return n().createElement("tr",{key:"tooltip-".concat(e.label)},n().createElement("th",null,e.chartType===u.ChartTypeVariant.threshold&&n().createElement(c.ChartIcon,{size:"sm",symbol:"dash",fill:e.color||"transparent"}),e.chartType!==u.ChartTypeVariant.threshold&&n().createElement(c.ChartIcon,{size:"sm",fill:e.color||"transparent"})," ",e.label),n().createElement("td",null,a))})))||null),!v.length&&r("curiosity-graph.label",{context:["noData","error"]})||null)};p.defaultProps={datum:{},t:l.translate,useProduct:i.useProduct,useProductGraphTallyQuery:i.useProductGraphTallyQuery}},25394:function(e,t,r){r.r(t),r.d(t,{DEFAULT_CONTEXT:function(){return h},GraphCardContext:function(){return v},context:function(){return g},default:function(){return g},useGetMetrics:function(){return y},useGraphCardContext:function(){return f},useMetricsSelector:function(){return m}});var a=r(1413),n=r(45987),i=r(92950),o=r.n(i),l=r(17297),u=r(82410),c=r(51858),s=r(62834),d=["error","fulfilled","pending","data"],p=["pending"],h=[{settings:{isStandalone:!1,metrics:[],metric:void 0}},s.B.noop],v=o().createContext(h),f=function(){return(0,i.useContext)(v)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGraphCardContext,r=void 0===t?f:t,i=e.useSelectorsResponse,o=void 0===i?u.Cr.reactRedux.useSelectorsAllSettledResponse:i,l=r(),c=l.settings,s=void 0===c?{}:c,p=s.metrics,h=void 0===p?[]:p,v=o(h.map((function(e){var t=e.id,r=e.isCapacity;return function(e){var a,n,i=e.graph;return r?null===(a=i.capacity)||void 0===a?void 0:a[t]:null===(n=i.tally)||void 0===n?void 0:n[t]}}))),m=v.error,y=v.fulfilled,g=v.pending,C=v.data,E=void 0===C?[]:C,T=(0,n.Z)(v,d),b={},G=null==E?void 0:E.map((function(e,t){var r=(0,a.Z)((0,a.Z)({},h[t]),e);return b[h[t].id]=r,r}));return(0,a.Z)((0,a.Z)({},T),{},{data:b,dataSets:G,error:m,fulfilled:y,pending:g})},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getGraphMetrics,r=void 0===t?u.Ak.rhsm.getGraphMetrics:t,i=e.useDispatch,o=void 0===i?u.Cr.reactRedux.useDispatch:i,s=e.useGraphCardContext,d=void 0===s?f:s,h=e.useMetricsSelector,v=void 0===h?m:h,y=e.useProduct,g=void 0===y?c.useProduct:y,C=e.useProductGraphTallyQuery,E=void 0===C?c.useProductGraphTallyQuery:C,T=g(),b=T.productId,G=E(),x=o(),P=d(),S=P.settings,D=void 0===S?{}:S,M=D.metrics,k=void 0===M?[]:M,I=v(),L=I.pending,N=(0,n.Z)(I,p);return(0,l.Z)((function(){if(!L){var e=k.map((function(e){var t=e.metric,r=e.isCapacity,a=e.query;return{id:b,metric:t,isCapacity:r,query:a}}));r(e,G)(x)}}),[k,b,G]),(0,a.Z)((0,a.Z)({},N),{},{pending:L})},g={GraphCardContext:v,DEFAULT_CONTEXT:h,useGetMetrics:y,useGraphCardContext:f,useMetricsSelector:m}}}]);
//# sourceMappingURL=../sourcemaps/1799.a5dad4eeb15c6f67b1427e32a077eb95.js.map