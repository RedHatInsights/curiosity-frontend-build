"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[4418,5394],{64418:function(e,t,n){n.r(t),n.d(t,{GraphCardChartLegend:function(){return f},default:function(){return f}});var r=n(93433),i=n(84506),o=n(92950),a=n.n(o),u=n(54653),s=n(89048),c=n(51858),d=n(25394),l=n(82410),p=n(76006),v=n(83109),g=n(1138),f=function(e){var t=e.chart,n=e.datum,o=e.t,c=e.useDispatch,d=e.useGraphCardContext,p=e.useSelectors,v=e.useProduct,f=d().settings,h=void 0===f?{}:f,C=v(),m=C.productLabel,y=C.viewId,S=h.isDisabledLegendClick,G=c(),b=p([function(e){var t;return null===(t=e.graph.legend)||void 0===t?void 0:t["".concat(y,"-inverted")]}].concat((0,r.Z)(n.dataSets.map((function(e){var t=e.id;return function(e){var n;return null===(n=e.graph.legend)||void 0===n?void 0:n["".concat(y,"-").concat(t)]}}))))),x=(0,i.Z)(b),E=x[0],T=x.slice(1);(0,s.Z)((function(){n.dataSets.forEach((function(e,n){var r=e.id,i=e.isToolbarFilter;E&&i?new RegExp(E).test(r)||t.hide(r):((null==T?void 0:T[n])||t.isToggled(r))&&t.hide(r)}))}));var P=function(e){var n=t.toggle(e);G({type:l.JD.graph.SET_GRAPH_LEGEND,id:"".concat(y,"-").concat(e),value:n})};return a().createElement(a().Fragment,null,n.dataSets.map((function(e,n){var r=e.id,i=e.isThreshold,s=e.stroke,c=e.data,d=!(void 0===c?[]:c).find((function(e){var t=e.y,n=e.hasData;return t>=0&&!0===n||t>=0&&!0===i}))||!1,l=o(["curiosity-graph.label","curiosity-graph.label_no"],{product:m,context:r}),p=o("curiosity-graph.legendTooltip",{product:m,context:r},[a().createElement("span",{style:{whiteSpace:"nowrap"}})]),v=(null==T?void 0:T[n])||t.isToggled(r),f={};S||(f.onClick=function(){return P(r)},f.onKeyPress=function(){return P(r)});var h=a().createElement(u.Button,Object.assign({},f,{className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(r),variant:"link",component:"a",isDisabled:null!=S?S:d,icon:(d||v)&&a().createElement(g.ChartIcon,{symbol:"eyeSlash"})||a().createElement(g.ChartIcon,{symbol:i?"dash":"square",style:{visibility:d||v?"hidden":"visible"},fill:s})}),l);return p?a().createElement(u.Tooltip,{key:"curiosity-tooltip-".concat(r),content:a().createElement("p",null,p),position:u.TooltipPosition.top,enableFlip:!0,distance:5},a().createElement("span",{className:"pf-c-button pf-m-link curiosity-usage-graph__legend-item-wrapper"},h)):h})))};f.defaultProps={chart:{hide:p.BM.noop,toggle:p.BM.noop,isToggled:p.BM.noop},datum:{dataSets:[]},t:v.translate,useDispatch:l.Cr.reactRedux.useDispatch,useGraphCardContext:d.useGraphCardContext,useProduct:c.useProduct,useSelectors:l.Cr.reactRedux.useSelectors}},25394:function(e,t,n){n.r(t),n.d(t,{DEFAULT_CONTEXT:function(){return h},GraphCardContext:function(){return C},context:function(){return x},default:function(){return x},useGetMetrics:function(){return G},useGraphCardActions:function(){return b},useGraphCardContext:function(){return m},useMetricsSelector:function(){return S},useParseFiltersSettings:function(){return y}});var r=n(1413),i=n(45987),o=n(92950),a=n.n(o),u=n(17297),s=n(54653),c=n(82410),d=n(51858),l=n(70136),p=n(62834),v=n(78139),g=["error","fulfilled","pending","data"],f=["id","content"],h=[{settings:{isStandalone:!1,metrics:[],metric:void 0}},p.B.noop],C=a().createContext(h),m=function(){return(0,o.useContext)(C)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProduct,n=void 0===t?d.useProduct:t,r=e.useProductGraphConfig,i=void 0===r?d.useProductGraphConfig:r,a=n(),u=a.productId,s=i(),c=s.filters,l=void 0===c?[]:c,p=s.settings,g=void 0===p?{}:p,f=(0,o.useMemo)((function(){return v.graphCardHelpers.generateChartSettings({filters:l,settings:g,productId:u})}),[l,g,u]),h=f.groupedFiltersSettings,C=f.standaloneFiltersSettings,m=void 0===C?[]:C;return{groupedFiltersSettings:h,standaloneFiltersSettings:m}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGraphCardContext,n=void 0===t?m:t,o=e.useSelectorsResponse,a=void 0===o?c.Cr.reactRedux.useSelectorsResponse:o,u=n(),s=u.settings,d=void 0===s?{}:s,l=d.metrics,p=void 0===l?[]:l,v=a(p.map((function(e){var t=e.id,n=e.isCapacity;return function(e){var r,i,o=e.graph;return n?null===(r=o.capacity)||void 0===r?void 0:r[t]:null===(i=o.tally)||void 0===i?void 0:i[t]}}))),f=v.error,h=v.fulfilled,C=v.pending,y=v.data,S=void 0===y?[]:y,G=(0,i.Z)(v,g),b={},x=null==S?void 0:S.map((function(e,t){var n=(0,r.Z)((0,r.Z)({},p[t]),e);return b[p[t].id]=n,n}));return(0,r.Z)((0,r.Z)({},G),{},{data:b,dataSets:x,error:f,fulfilled:h,pending:C})},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getGraphMetrics,n=void 0===t?c.Ak.rhsm.getGraphMetrics:t,r=e.useDispatch,i=void 0===r?c.Cr.reactRedux.useDispatch:r,o=e.useGraphCardContext,a=void 0===o?m:o,s=e.useMetricsSelector,l=void 0===s?S:s,p=e.useProduct,v=void 0===p?d.useProduct:p,g=e.useProductGraphTallyQuery,f=void 0===g?d.useProductGraphTallyQuery:g,h=v(),C=h.productId,y=f(),G=i(),b=l(),x=a(),E=x.settings,T=void 0===E?{}:E,P=T.metrics,k=void 0===P?[]:P;return(0,u.Z)((function(){var e=k.map((function(e){var t=e.metric,n=e.isCapacity,r=e.query;return{id:C,metric:t,isCapacity:n,query:r}}));n(e,y)(G)}),[k,C,y]),b},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.categoryOptions,n=void 0===t?l.toolbarFieldOptions:t,r=e.useMetricsSelector,u=void 0===r?S:r,c=e.useGraphCardContext,d=void 0===c?m:c,v=u(),g=v.pending,h=v.dataSets,C=d(),y=C.settings,G=void 0===y?{}:y,b=G.actions;return(0,o.useMemo)((function(){return null==b?void 0:b.map((function(e){var t=e.id,r=e.content,o=(0,i.Z)(e,f),u=(n.find((function(e){var n=e.value;return t===n}))||{}).component;return u&&a().createElement(s.ToolbarItem,{key:"option-".concat(t)},a().createElement(u,Object.assign({isFilter:!1},o)))||r&&!g&&h.length&&a().createElement(s.ToolbarItem,{key:t||p.B.generateId()},"function"==typeof r?r({data:h}):r)||null}))}),[b,n,h,g])},x={GraphCardContext:C,DEFAULT_CONTEXT:h,useGetMetrics:G,useGraphCardActions:b,useGraphCardContext:m,useMetricsSelector:S,useParseFiltersSettings:y}}}]);
//# sourceMappingURL=../sourcemaps/4418.11267f065628f5aad0422f8fe16f0c6a.js.map