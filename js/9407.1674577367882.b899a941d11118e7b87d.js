"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[9407,1339,5394,353],{25394:function(e,t,r){r.r(t),r.d(t,{DEFAULT_CONTEXT:function(){return m},GraphCardContext:function(){return g},context:function(){return T},default:function(){return T},useGetMetrics:function(){return E},useGraphCardActions:function(){return S},useGraphCardContext:function(){return y},useMetricsSelector:function(){return M},useParseFiltersSettings:function(){return C}});var n=r(1413),i=r(45987),a=r(92950),o=r.n(a),l=r(17297),s=r(54653),u=r(82410),c=r(51858),d=r(70136),h=r(62834),p=r(78139),f=["error","fulfilled","pending","data"],v=["id","content"],m=[{settings:{isStandalone:!1,metrics:[],metric:void 0}},h.B.noop],g=o().createContext(m),y=function(){return(0,a.useContext)(g)},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProduct,r=void 0===t?c.useProduct:t,n=e.useProductGraphConfig,i=void 0===n?c.useProductGraphConfig:n,o=r(),l=o.productId,s=i(),u=s.filters,d=void 0===u?[]:u,h=s.settings,f=void 0===h?{}:h,v=(0,a.useMemo)((function(){return p.graphCardHelpers.generateChartSettings({filters:d,settings:f,productId:l})}),[d,f,l]),m=v.groupedFiltersSettings,g=v.standaloneFiltersSettings,y=void 0===g?[]:g;return{groupedFiltersSettings:m,standaloneFiltersSettings:y}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGraphCardContext,r=void 0===t?y:t,a=e.useSelectorsResponse,o=void 0===a?u.Cr.reactRedux.useSelectorsResponse:a,l=r(),s=l.settings,c=void 0===s?{}:s,d=c.metrics,h=void 0===d?[]:d,p=o(h.map((function(e){var t=e.id,r=e.isCapacity;return function(e){var n,i,a=e.graph;return r?null===(n=a.capacity)||void 0===n?void 0:n[t]:null===(i=a.tally)||void 0===i?void 0:i[t]}}))),v=p.error,m=p.fulfilled,g=p.pending,C=p.data,M=void 0===C?[]:C,E=(0,i.Z)(p,f),S={},T=null==M?void 0:M.map((function(e,t){var r=(0,n.Z)((0,n.Z)({},h[t]),e);return S[h[t].id]=r,r}));return(0,n.Z)((0,n.Z)({},E),{},{data:S,dataSets:T,error:v,fulfilled:m,pending:g})},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getGraphMetrics,r=void 0===t?u.Ak.rhsm.getGraphMetrics:t,n=e.useDispatch,i=void 0===n?u.Cr.reactRedux.useDispatch:n,a=e.useGraphCardContext,o=void 0===a?y:a,s=e.useMetricsSelector,d=void 0===s?M:s,h=e.useProduct,p=void 0===h?c.useProduct:h,f=e.useProductGraphTallyQuery,v=void 0===f?c.useProductGraphTallyQuery:f,m=p(),g=m.productId,C=v(),E=i(),S=d(),T=o(),x=T.settings,F=void 0===x?{}:x,k=F.metrics,R=void 0===k?[]:k;return(0,l.Z)((function(){var e=R.map((function(e){var t=e.metric,r=e.isCapacity,n=e.query;return{id:g,metric:t,isCapacity:r,query:n}}));r(e,C)(E)}),[R,g,C]),S},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.categoryOptions,r=void 0===t?d.toolbarFieldOptions:t,n=e.useMetricsSelector,l=void 0===n?M:n,u=e.useGraphCardContext,c=void 0===u?y:u,p=l(),f=p.pending,m=p.dataSets,g=c(),C=g.settings,E=void 0===C?{}:C,S=E.actions;return(0,a.useMemo)((function(){return null==S?void 0:S.map((function(e){var t=e.id,n=e.content,a=(0,i.Z)(e,v),l=(r.find((function(e){var r=e.value;return t===r}))||{}).component;return l&&o().createElement(s.ToolbarItem,{key:"option-".concat(t)},o().createElement(l,Object.assign({isFilter:!1},a)))||n&&!f&&m.length&&o().createElement(s.ToolbarItem,{key:t||h.B.generateId()},"function"==typeof n?n({data:m}):n)||null}))}),[S,r,m,f])},T={GraphCardContext:g,DEFAULT_CONTEXT:m,useGetMetrics:E,useGraphCardActions:S,useGraphCardContext:y,useMetricsSelector:M,useParseFiltersSettings:C}},29407:function(e,t,r){r.r(t),r.d(t,{GraphCardMetricTotals:function(){return y},default:function(){return y}});var n=r(92950),i=r.n(n),a=r(54653),o=r(30381),l=r.n(o),s=r(68929),u=r.n(s),c=r(51858),d=r(25394),h=r(91339),p=r(1797),f=r(76006),v=r(65876),m=r(46262),g=r(83109),y=function(e){var t,r,n,o,s=e.children,c=e.t,d=e.useMetricsSelector,g=(0,e.useProductGraphTallyQuery)()[m.O6.START_DATE],y=d(),C=y.pending,M=y.error,E=y.fulfilled,S=y.dataSets,T=(void 0===S?[]:S)[0]||{},x=T.data,F=void 0===x?[]:x,k=T.id,R=T.metric,G=T.meta,P=void 0===G?{}:G,b=F[F.length-1]||{},H=b.date,O=b.hasData,z=b.y,_=F.find((function(e){return!0===e.isCurrentDate}))||{},D=_.date,w=_.hasData,Z=_.y,B=P.totalMonthlyDate,N=P.totalMonthlyHasData,I=P.totalMonthlyValue,A=v.toolbarFieldOptions.find((function(e){return e.title===g||e.value.startDate.toISOString()===g}))||{},U=A.title,L=A.isCurrent,Q=L?D:H,W=L?w:O,q=L?Z:z;return i().createElement(a.Flex,{"data-test":"graphMetricTotals-".concat(u()(R)),className:"curiosity-usage-graph__totals"},i().createElement(a.Flex,{flex:{default:"flex_1"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},i().createElement(a.FlexItem,{className:"curiosity-usage-graph__totals-column"},i().createElement(a.Card,{"data-test":"graphDailyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(M?"blur":"")},i().createElement(a.CardTitle,null,c("curiosity-graph.cardHeadingMetric",{context:["dailyTotal",k],month:U})),i().createElement(h.MinHeight,{key:"currentBody"},i().createElement(a.CardBody,null,i().createElement("div",null,C&&i().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg}}),E&&c("curiosity-graph.cardBodyMetric",{context:["total",W&&k],total:null===(t=f.BM.numberDisplay(q))||void 0===t||null===(r=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===r?void 0:r.toUpperCase()},[i().createElement("strong",{title:q,"aria-label":q})])))),i().createElement(h.MinHeight,{key:"currentFooter"},i().createElement(a.CardFooter,null,i().createElement("div",{className:W?"":"hidden"},E&&Q&&c("curiosity-graph.cardFooterMetric",{date:l().utc(Q).format(f.i3.timestampUTCTimeFormats.yearTimeShort)}))))),i().createElement(a.Card,{"data-test":"graphMonthlyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(M?"blur":"")},i().createElement(a.CardTitle,null,c("curiosity-graph.cardHeadingMetric",{context:["monthlyTotal",k],month:U})),i().createElement(h.MinHeight,{key:"totalMonthlyBody"},i().createElement(a.CardBody,null,i().createElement("div",null,C&&i().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg}}),E&&c("curiosity-graph.cardBodyMetric",{context:["total",N&&k],total:null===(n=f.BM.numberDisplay(I))||void 0===n||null===(o=n.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===o?void 0:o.toUpperCase()},[i().createElement("strong",{title:I,"aria-label":I})])))),i().createElement(h.MinHeight,{key:"totalMonthlyFooter"},i().createElement(a.CardFooter,null,i().createElement("div",{className:N?"":"hidden"},E&&B&&c("curiosity-graph.cardFooterMetric",{date:l().utc(B).format(f.i3.timestampUTCTimeFormats.yearTimeShort)}))))))),i().createElement(a.Flex,{flex:{default:"flex_3"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},i().createElement(a.FlexItem,{className:"curiosity-usage-graph__totals-graph-column"},s)))};y.defaultProps={children:null,t:g.translate,useMetricsSelector:d.useMetricsSelector,useProductGraphTallyQuery:c.useProductGraphTallyQuery}},91339:function(e,t,r){r.r(t),r.d(t,{MinHeight:function(){return d},default:function(){return d}});var n=r(15671),i=r(43144),a=r(97326),o=r(60136),l=r(54062),s=r(92950),u=r.n(s),c=r(76006),d=function(e){(0,o.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;(0,n.Z)(this,r);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).containerRef=u().createRef(),e.innerContainerRef=u().createRef(),e.updatedContainerWidth=0,e.resizeObserver=c.BM.noop,e.onResizeContainer=function(){var t,r,n=(0,a.Z)(e).updatedContainerWidth,i=e.props.updateOnResize,o=(null===(t=e.containerRef)||void 0===t||null===(r=t.current)||void 0===r?void 0:r.clientWidth)||0;i&&o!==n&&(e.updatedContainerWidth=o,e.setMinHeight(!0))},e}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props.updateOnResize;window.setTimeout((function(){e.setMinHeight()})),t&&this.setResizeObserver()}},{key:"componentDidUpdate",value:function(){var e=this;this.props.updateOnContent&&window.setTimeout((function(){e.setMinHeight()}))}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setMinHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.props.minHeight,n=this.containerRef.current,i=void 0===n?{}:n,a=this.innerContainerRef.current,o=void 0===a?{}:a;null!=i&&i.style&&(r>(e=t?(null==o?void 0:o.clientHeight)||0:(null==i?void 0:i.clientHeight)||0)&&(e=r),i.style.minHeight="".concat(e,"px"))}},{key:"setResizeObserver",value:function(){var e=this;window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",e.onResizeContainer)}}},{key:"render",value:function(){var e=this.props.children;return u().createElement("div",{className:"curiosity-minheight",ref:this.containerRef},u().createElement("div",{ref:this.innerContainerRef},e))}}]),r}(u().Component);d.defaultProps={updateOnContent:!1,updateOnResize:!0,minHeight:0}}}]);
//# sourceMappingURL=../sourcemaps/9407.d6079fb329c4c7a67458da54080a468b.js.map