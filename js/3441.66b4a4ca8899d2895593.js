"use strict";(self.webpackChunksubscriptions=self.webpackChunksubscriptions||[]).push([[3441,2243],{12243:function(e,t,n){n.r(t),n.d(t,{default:function(){return a},inventoryCardHelpers:function(){return a},normalizeInventorySettings:function(){return l},parseInventoryResponse:function(){return c}});var s=n(28416),r=n.n(s),o=n(83109),u=n(46262),i=n(78697);const l=function(){let{filters:e=[],guestFilters:t=[],settings:n={},productId:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=[],u={count:e.length,widths:[]};return e.forEach((e=>{let t,n,i,{metric:l,header:c,cell:a,width:d,...f}=e;t="function"==typeof c&&c?c:c?()=>c:()=>(0,o.translate)(["curiosity-inventory.header","curiosity-inventory.guestsHeader"],{context:[l,s]}),n="function"==typeof a&&a?a:a?()=>a:e=>{let{[l]:t}=e;return t},"number"!=typeof d||Number.isNaN(d)||(i=d),u.widths.push(i),r.push({label:t,metric:l,width:d,...f,header:t,cell:n})})),{isGuestFiltersDisabled:!t||!(null!=t&&t.length),columnCountAndWidths:u,filters:r,settings:n}},c=function(){let{data:e={},filters:t=[],GuestComponent:n,isGuestFiltersDisabled:s=!0,query:o={},session:l={},settings:c={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{data:a=[],meta:d={}}=e,f=d[u._u.COUNT],{[u.O6.OFFSET]:I,[u.O6.LIMIT]:v,[u.O6.SORT]:y,[u.O6.DIRECTION]:p}=o,S=[],g=[],h={};return a.forEach((e=>{const o=[];let u;if(t.forEach((t=>{var n;let{metric:s,label:r,cell:u,...i}=t;const c=u({...e},{...l},{...d}),a=r({columnData:[]},{...l},{...d});o.push({metric:s,...i,dataLabel:a,content:c}),null!==(n=h[s])&&void 0!==n||(h[s]=[]),h[s].push(c)})),"function"==typeof(null==c?void 0:c.guestContent)){const t=c.guestContent({...e},{...l},{...d}),{id:o,numberOfGuests:i}=t||{};!1===s&&o&&i&&n&&(u=()=>r().createElement(n,{key:"guests-".concat(o),id:o,numberOfGuests:i}))}g.push({cells:o,row:e,expandedContent:u})})),t.forEach((e=>{let{metric:t,header:n,...s}=e;const r=n({columnData:h[t]},{...l},{...d}),o={...s};!0===o.isSort&&p&&y===t&&(o.isSortActive=!0,o.sortDirection=p),!0===o.isWrap&&(o.modifier=i.tableHelpers.WrapModifierVariant.wrap),S.push({metric:t,...o,content:r})})),{dataSetColumnHeaders:S,dataSetRows:g,resultsCount:f,resultsOffset:I,resultsPerPage:v}},a={normalizeInventorySettings:l,parseInventoryResponse:c}},2176:function(e,t,n){n.r(t),n.d(t,{context:function(){return P},default:function(){return P},useGetInstancesInventory:function(){return h},useInventoryCardActionsInstances:function(){return m},useOnColumnSortInstances:function(){return E},useOnPageInstances:function(){return O},useParseInstancesFiltersSettings:function(){return S},useSelectorInstances:function(){return g}});var s=n(87462),r=n(28416),o=n.n(r),u=n(15451),i=n(90154),l=n(82410),c=n(98944),a=n(51858),d=n(46262),f=n(76006),I=n(12243),v=n(78697),y=n(70136),p=n(15242);const S=function(){let{isDisabled:e=!1,useProduct:t=a.useProduct,useProductConfig:n=a.useProductInventoryHostsConfig,useProductGuestsConfig:s=a.useProductInventoryGuestsConfig}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{productId:o}=t(),{filters:u=[],settings:i={}}=n(),{filters:l=[]}=s();return(0,r.useMemo)((()=>{if(!e)return I.inventoryCardHelpers.normalizeInventorySettings({filters:u,guestFilters:l,settings:i,productId:o})}),[u,l,e,i,o])},g=function(){let{storeRef:e="instancesInventory",useParseFiltersSettings:t=S,useProduct:n=a.useProduct,useProductInventoryQuery:s=a.useProductInventoryHostsQuery,useSelectorsResponse:r=l.Cr.reactRedux.useSelectorsResponse,useSession:o=c.useSession}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{productId:u}=n(),i=o(),d=s(),{columnCountAndWidths:f,filters:v,isGuestFiltersDisabled:y,settings:g}=t(),h=r((t=>{var n;let{inventory:s}=t;return null==s||null===(n=s[e])||void 0===n?void 0:n[u]})),{pending:m,cancelled:O,data:E,...P}=h,C=m||O||!1;let T;if(null!=h&&h.fulfilled){const e=1===(null==E?void 0:E.length)&&E[0]||E||{};T=I.inventoryCardHelpers.parseInventoryResponse({data:e,filters:v,GuestComponent:p.InventoryGuests,isGuestFiltersDisabled:y,query:d,session:i,settings:g})}return{...P,pending:C,resultsColumnCountAndWidths:f,...T}},h=function(){let{isDisabled:e=!1,getInventory:t=l.Ak.rhsm.getInstancesInventory,useDispatch:n=l.Cr.reactRedux.useDispatch,useProduct:s=a.useProduct,useProductInventoryQuery:r=a.useProductInventoryHostsQuery,useSelector:o=g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{productId:i}=s(),c=r(),d=n(),f=o();return(0,u.Z)((()=>{e||t(i,c)(d)}),[e,i,c]),f},m=function(){let{categoryOptions:e=y.toolbarFieldOptions,useSelector:t=g,useProductConfig:n=a.useProductInventoryHostsConfig}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const u=t(),{pending:l,resultsCount:c}=u,{settings:d={}}=n(),{actions:I}=d;return(0,r.useMemo)((()=>null==I?void 0:I.map((t=>{let{id:n,content:r,...a}=t;const d=e.find((e=>{let{value:t}=e;return n===t})),{component:I}=d||{};return I&&o().createElement(i.ToolbarItem,{key:"option-".concat(n)},o().createElement(I,(0,s.Z)({isFilter:!1},a)))||r&&!l&&c&&o().createElement(i.ToolbarItem,{key:n||f.helpers.generateId()},"function"==typeof r?r({data:u}):r)||null}))),[I,e,u,c,l])},O=function(){let{useDispatch:e=l.Cr.reactRedux.useDispatch,useProduct:t=a.useProduct}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{productId:n}=t(),s=e();return e=>{let{offset:t,perPage:r}=e;s([{type:l.JD.query.SET_QUERY_RHSM_HOSTS_INVENTORY_TYPES[d.O6.OFFSET],viewId:n,[d.O6.OFFSET]:t},{type:l.JD.query.SET_QUERY_RHSM_HOSTS_INVENTORY_TYPES[d.O6.LIMIT],viewId:n,[d.O6.LIMIT]:r}])}},E=function(){let{sortColumns:e=d.xB,useDispatch:t=l.Cr.reactRedux.useDispatch,useProduct:n=a.useProduct}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{productId:s}=n(),r=t();return t=>{let{direction:n,data:o={}}=t;const{metric:u}=o,i=Object.values(e).find((e=>e===u));let c;i?(c=n===v.tableHelpers.SortByDirectionVariant.desc?d.PQ.DESCENDING:d.PQ.ASCENDING,r([{type:l.JD.query.SET_QUERY_RHSM_HOSTS_INVENTORY_TYPES[d.O6.DIRECTION],viewId:s,[d.O6.DIRECTION]:c},{type:l.JD.query.SET_QUERY_RHSM_HOSTS_INVENTORY_TYPES[d.O6.SORT],viewId:s,[d.O6.SORT]:i}])):(f.helpers.DEV_MODE||f.helpers.REVIEW_MODE)&&console.warn("Sorting can only be performed on select fields, confirm field ".concat(u," is allowed."))}},P={useGetInstancesInventory:h,useInventoryCardActionsInstances:m,useOnPageInstances:O,useOnColumnSortInstances:E,useParseInstancesFiltersSettings:S,useSelectorInstances:g}},15242:function(e,t,n){n.r(t),n.d(t,{InventoryGuests:function(){return a},default:function(){return a}});var s=n(28416),r=n.n(s),o=n(45697),u=n.n(o),i=n(1797),l=n(78697),c=n(32293);const a=e=>{let{defaultPerPage:t,id:n,numberOfGuests:s,useGetInventory:o,useOnScroll:u}=e;const{pending:c,dataSetColumnHeaders:a=[],dataSetRows:d=[],resultsColumnCountAndWidths:f={count:1,widths:[]},resultsOffset:I}=o(n),v=u({id:n,numberOfGuests:s});let y=42*(s+1);return y=y<275&&y||275,r().createElement("div",{className:"fadein"},r().createElement("div",{className:"curiosity-table-scroll",style:{height:"".concat(y,"px")}},r().createElement("div",{className:"curiosity-table-scroll-list".concat(y<275?"__no-scroll":""),onScroll:v},c&&r().createElement("div",{className:"curiosity-table-scroll-loader__custom"},r().createElement(i.Loader,{variant:"table",tableProps:{borders:!1,className:"curiosity-guests-list",colCount:f.count,colWidth:f.widths,rowCount:0===I&&s<t&&s||1,variant:l.TableVariant.compact,isHeader:!1}})),(null==d?void 0:d.length)&&r().createElement(l.Table,{isBorders:!1,isHeader:!0,className:"curiosity-guests-list",columnHeaders:a,rows:d})||null)))};a.propTypes={defaultPerPage:u().number,id:u().string.isRequired,numberOfGuests:u().number.isRequired,useGetInventory:u().func,useOnScroll:u().func},a.defaultProps={defaultPerPage:5,useGetInventory:c.useGetGuestsInventory,useOnScroll:c.useOnScroll}},32293:function(e,t,n){n.r(t),n.d(t,{context:function(){return y},default:function(){return y},useGetGuestsInventory:function(){return I},useOnScroll:function(){return v}});var s=n(15451),r=n(77823),o=n(82410),u=n(51858),i=n(46262),l=n(98944),c=n(2176),a=n(12243);const d=function(){let{isDisabled:e=!1,useParseFiltersSettings:t=c.useParseInstancesFiltersSettings,useProductConfig:n=u.useProductInventoryGuestsConfig}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t({isDisabled:e,useProductConfig:n})},f=function(e){let{storeRef:t="instancesGuests",useParseFiltersSettings:n=d,useProductInventoryQuery:s=u.useProductInventoryGuestsQuery,useSelectorsResponse:r=o.Cr.reactRedux.useSelectorsResponse,useSession:i=l.useSession}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=i(),f=s({options:{overrideId:e}}),{columnCountAndWidths:I,filters:v,settings:y}=n(),p=r((n=>{var s;let{inventory:r}=n;return null==r||null===(s=r[t])||void 0===s?void 0:s[e]})),{pending:S,cancelled:g,data:h,...m}=p,O=S||g||!1;let E;if(null!=p&&p.fulfilled){const e=1===(null==h?void 0:h.length)&&h[0]||h||{};E=a.inventoryCardHelpers.parseInventoryResponse({data:e,filters:v,query:f,session:c,settings:y})}return{...m,pending:O,resultsColumnCountAndWidths:I,...E}},I=function(e){let{getInventory:t=o.Ak.rhsm.getInstancesInventoryGuests,useDispatch:n=o.Cr.reactRedux.useDispatch,useProductInventoryQuery:r=u.useProductInventoryGuestsQuery,useSelector:i=f}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l=r({options:{overrideId:e}}),c=n(),a=i(e);return(0,s.Z)((()=>{t(e,l)(c)}),[e,l]),a},v=function(){let{id:e,numberOfGuests:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{useDispatch:n=o.Cr.reactRedux.useDispatch,useSelector:s=f,useProductInventoryQuery:l=u.useProductInventoryGuestsQuery}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=n(),{pending:a}=s(e),{[i.O6.LIMIT]:d,[i.O6.OFFSET]:I}=l({options:{overrideId:e}});return(0,r.Z)((()=>{c([{type:o.JD.query.SET_QUERY_CLEAR_INVENTORY_GUESTS_LIST,viewId:e},{type:o.JD.inventory.CLEAR_INVENTORY_GUESTS,id:e}])})),n=>{const{target:s}=n,r=s.scrollHeight-s.scrollTop===s.clientHeight;t>I+d&&r&&!a&&c([{type:o.JD.query.SET_QUERY_RHSM_GUESTS_INVENTORY_TYPES[i.O6.OFFSET],viewId:e,[i.O6.OFFSET]:I+d},{type:o.JD.query.SET_QUERY_RHSM_GUESTS_INVENTORY_TYPES[i.O6.LIMIT],viewId:e,[i.O6.LIMIT]:d}])}},y={useGetGuestsInventory:I,useOnScroll:v}}}]);
//# sourceMappingURL=../sourcemaps/3441.49f0ce81a5d0a16a3752b38c7929bf20.js.map