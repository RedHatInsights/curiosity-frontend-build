"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[9407,5394],{25394:function(e,t,r){r.r(t),r.d(t,{DEFAULT_CONTEXT:function(){return h},GraphCardContext:function(){return f},context:function(){return M},default:function(){return M},useGetMetrics:function(){return S},useGraphCardActions:function(){return T},useGraphCardContext:function(){return y},useMetricsSelector:function(){return E},useParseFiltersSettings:function(){return C}});var a=r(1413),n=r(45987),i=r(92950),o=r.n(i),l=r(17297),s=r(54653),u=r(82410),c=r(51858),d=r(70136),p=r(62834),m=r(78139),v=["error","fulfilled","pending","data"],g=["id","content"],h=[{settings:{isStandalone:!1,metrics:[],metric:void 0}},p.B.noop],f=o().createContext(h),y=function(){return(0,i.useContext)(f)},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProduct,r=void 0===t?c.useProduct:t,a=e.useProductGraphConfig,n=void 0===a?c.useProductGraphConfig:a,o=r(),l=o.productId,s=n(),u=s.filters,d=void 0===u?[]:u,p=s.settings,v=void 0===p?{}:p,g=(0,i.useMemo)((function(){return m.graphCardHelpers.generateChartSettings({filters:d,settings:v,productId:l})}),[d,v,l]),h=g.groupedFiltersSettings,f=g.standaloneFiltersSettings,y=void 0===f?[]:f;return{groupedFiltersSettings:h,standaloneFiltersSettings:y}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGraphCardContext,r=void 0===t?y:t,i=e.useSelectorsResponse,o=void 0===i?u.Cr.reactRedux.useSelectorsResponse:i,l=r(),s=l.settings,c=void 0===s?{}:s,d=c.metrics,p=void 0===d?[]:d,m=o(p.map((function(e){var t=e.id,r=e.isCapacity;return function(e){var a,n,i=e.graph;return r?null===(a=i.capacity)||void 0===a?void 0:a[t]:null===(n=i.tally)||void 0===n?void 0:n[t]}}))),g=m.error,h=m.fulfilled,f=m.pending,C=m.data,E=void 0===C?[]:C,S=(0,n.Z)(m,v),T={},M=null==E?void 0:E.map((function(e,t){var r=(0,a.Z)((0,a.Z)({},p[t]),e);return T[p[t].id]=r,r}));return(0,a.Z)((0,a.Z)({},S),{},{data:T,dataSets:M,error:g,fulfilled:h,pending:f})},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getGraphMetrics,r=void 0===t?u.Ak.rhsm.getGraphMetrics:t,a=e.useDispatch,n=void 0===a?u.Cr.reactRedux.useDispatch:a,i=e.useGraphCardContext,o=void 0===i?y:i,s=e.useMetricsSelector,d=void 0===s?E:s,p=e.useProduct,m=void 0===p?c.useProduct:p,v=e.useProductGraphTallyQuery,g=void 0===v?c.useProductGraphTallyQuery:v,h=m(),f=h.productId,C=g(),S=n(),T=d(),M=o(),k=M.settings,P=void 0===k?{}:k,G=P.metrics,x=void 0===G?[]:G;return(0,l.Z)((function(){var e=x.map((function(e){var t=e.metric,r=e.isCapacity,a=e.query;return{id:f,metric:t,isCapacity:r,query:a}}));r(e,C)(S)}),[x,f,C]),T},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.categoryOptions,r=void 0===t?d.toolbarFieldOptions:t,a=e.useMetricsSelector,l=void 0===a?E:a,u=e.useGraphCardContext,c=void 0===u?y:u,m=l(),v=m.pending,h=m.dataSets,f=c(),C=f.settings,S=void 0===C?{}:C,T=S.actions;return(0,i.useMemo)((function(){return null==T?void 0:T.map((function(e){var t=e.id,a=e.content,i=(0,n.Z)(e,g),l=(r.find((function(e){var r=e.value;return t===r}))||{}).component;return l&&o().createElement(s.ToolbarItem,{key:"option-".concat(t)},o().createElement(l,Object.assign({isFilter:!1},i)))||a&&!v&&h.length&&o().createElement(s.ToolbarItem,{key:t||p.B.generateId()},"function"==typeof a?a({data:h}):a)||null}))}),[T,r,h,v])},M={GraphCardContext:f,DEFAULT_CONTEXT:h,useGetMetrics:S,useGraphCardActions:T,useGraphCardContext:y,useMetricsSelector:E,useParseFiltersSettings:C}},29407:function(e,t,r){r.r(t),r.d(t,{GraphCardMetricTotals:function(){return f},default:function(){return f}});var a=r(92950),n=r.n(a),i=r(54653),o=r(30381),l=r.n(o),s=r(68929),u=r.n(s),c=r(51858),d=r(25394),p=r(1797),m=r(76006),v=r(65876),g=r(46262),h=r(83109),f=function(e){var t,r,a,o,s=e.children,c=e.t,d=e.useMetricsSelector,h=(0,e.useProductGraphTallyQuery)()[g.O6.START_DATE],f=d(),y=f.pending,C=f.error,E=f.fulfilled,S=f.dataSets,T=(void 0===S?[]:S)[0]||{},M=T.data,k=void 0===M?[]:M,P=T.id,G=T.metric,x=T.meta,F=void 0===x?{}:x,_=k[k.length-1]||{},z=_.date,D=_.hasData,b=_.y,L=k.find((function(e){return!0===e.isCurrentDate}))||{},B=L.date,O=L.hasData,A=L.y,I=F.totalMonthlyDate,N=F.totalMonthlyHasData,Z=F.totalMonthlyValue,H=v.toolbarFieldOptions.find((function(e){return e.title===h||e.value.startDate.toISOString()===h}))||{},U=H.title,Q=H.isCurrent,R=Q?B:z,w=Q?O:D,q=Q?A:b;return n().createElement("div",{"data-test":"graphMetricTotals-".concat(u()(G)),className:"curiosity-usage-graph__totals"},n().createElement("div",null,n().createElement("div",{className:"curiosity-usage-graph__totals-column"},n().createElement(i.Card,{isPlain:!0,"data-test":"graphDailyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(C?"blur":"")},n().createElement(i.CardHeader,null,n().createElement(i.CardTitle,null,n().createElement(i.Title,{headingLevel:"h2",size:"md"},y&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg}}),E&&c("curiosity-graph.cardHeadingMetric",{context:["dailyTotal",P],month:U})))),n().createElement(i.CardBody,null,n().createElement("div",null,y&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg,height:"60px"}}),E&&c("curiosity-graph.cardBodyMetric",{context:["total",w&&P],total:null===(t=m.BM.numberDisplay(q))||void 0===t||null===(r=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===r?void 0:r.toUpperCase()},[n().createElement("strong",{title:q,"aria-label":q})]))),n().createElement(i.CardFooter,null,n().createElement("div",null,y&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg}}),E&&R&&c("curiosity-graph.cardFooterMetric",{date:l().utc(R).format(m.i3.timestampUTCTimeFormats.yearTimeShort)})))),n().createElement(i.Card,{isPlain:!0,"data-test":"graphMonthlyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(C?"blur":"")},n().createElement(i.CardHeader,null,n().createElement(i.CardTitle,null,n().createElement(i.Title,{headingLevel:"h2",size:"md"},y&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg}}),E&&c("curiosity-graph.cardHeadingMetric",{context:["monthlyTotal",P],month:U})))),n().createElement(i.CardBody,null,n().createElement("div",null,y&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg,height:"60px"}}),E&&c("curiosity-graph.cardBodyMetric",{context:["total",N&&P],total:null===(a=m.BM.numberDisplay(Z))||void 0===a||null===(o=a.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===o?void 0:o.toUpperCase()},[n().createElement("strong",{title:Z,"aria-label":Z})]))),n().createElement(i.CardFooter,null,n().createElement("div",null,y&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg}}),E&&I&&c("curiosity-graph.cardFooterMetric",{date:l().utc(I).format(m.i3.timestampUTCTimeFormats.yearTimeShort)})))))),n().createElement("div",null,n().createElement("div",{className:"curiosity-usage-graph__totals-graph-column"},s)))};f.defaultProps={children:null,t:h.translate,useMetricsSelector:d.useMetricsSelector,useProductGraphTallyQuery:c.useProductGraphTallyQuery}}}]);
//# sourceMappingURL=../sourcemaps/9407.1504882dbae060693e24141de70c90e9.js.map