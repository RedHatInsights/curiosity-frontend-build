"use strict";(self.webpackChunksubscriptions=self.webpackChunksubscriptions||[]).push([[1799,4418,939,5394,1339],{91799:function(e,t,r){r.r(t),r.d(t,{GraphCardChart:function(){return b},default:function(){return b}});var a=r(87462),n=r(28416),o=r.n(n),i=r(45697),s=r.n(i),l=r(39930),u=r(51858),c=r(25394),d=r(78139),p=r(30211),h=r(64418),g=r(44024),y=r(99171),m=r(46262),f=r(91339),C=r(1797),v=r(83109);const b=e=>{let{t:t,useGetMetrics:r,useGraphCardActions:n,useGraphCardContext:i,useProductGraphTallyQuery:s}=e;const u=n(),{settings:c={}}=i(),{stringId:v}=c,{[m.O6.GRANULARITY]:b}=s(),{pending:T,error:G,dataSets:E=[]}=r(),x={};return u&&(x.actions={className:"curiosity-card__actions ".concat(G?"blur":""),actions:o().createElement(l.Toolbar,{className:"curiosity-toolbar",collapseListedFiltersBreakpoint:"sm"},o().createElement(l.ToolbarContent,{className:"curiosity-toolbar__content"},o().createElement(l.ToolbarGroup,{align:{default:"alignRight"}},u)))}),o().createElement(l.Card,{isPlain:!0,className:"curiosity-card curiosity-graph-card curiosity-usage-graph"},o().createElement(l.CardHeader,(0,a.Z)({className:"curiosity-card__header"},x),o().createElement(l.CardTitle,{className:"curiosity-card__title"},o().createElement(l.Title,{headingLevel:"h2",size:"lg"},t("curiosity-graph.cardHeading",{context:v}),o().createElement(y.GraphCardChartTitleTooltip,null)))),o().createElement(f.MinHeight,{key:"bodyMinHeight"},o().createElement(l.CardBody,{className:"curiosity-card__body"},o().createElement("div",{className:(G?"blur":T&&"fadein")||""},T&&o().createElement(C.Loader,{variant:"graph"}),!T&&o().createElement(p.Chart,(0,a.Z)({},d.graphCardHelpers.generateExtendedChartSettings({settings:c,granularity:b}),{dataSets:E,chartLegend:e=>{let{chart:t,datum:r}=e;return o().createElement(h.GraphCardChartLegend,{chart:t,datum:r})},chartTooltip:e=>{let{datum:t}=e;return o().createElement(g.GraphCardChartTooltip,{datum:t})}}))))))};b.propTypes={t:s().func,useGetMetrics:s().func,useGraphCardActions:s().func,useGraphCardContext:s().func,useProductGraphTallyQuery:s().func},b.defaultProps={t:v.translate,useGetMetrics:c.useGetMetrics,useGraphCardActions:c.useGraphCardActions,useGraphCardContext:c.useGraphCardContext,useProductGraphTallyQuery:u.useProductGraphTallyQuery}},64418:function(e,t,r){r.r(t),r.d(t,{GraphCardChartLegend:function(){return m},default:function(){return m}});var a=r(87462),n=r(28416),o=r.n(n),i=r(45697),s=r.n(i),l=r(39930),u=r(89048),c=r(51858),d=r(25394),p=r(87284),h=r(76006),g=r(83109),y=r(1138);const m=e=>{let{chart:t,datum:r,t:n,useDispatch:i,useGraphCardContext:s,useSelectors:c,useProduct:d}=e;const{settings:h={}}=s(),{productLabel:g,viewId:m}=d(),{isDisabledLegendClick:f}=h,C=i(),[v,...b]=c([e=>{var t;let{graph:r}=e;return null===(t=r.legend)||void 0===t?void 0:t["".concat(m,"-inverted")]},...r.dataSets.map((e=>{let{id:t}=e;return e=>{var r;let{graph:a}=e;return null===(r=a.legend)||void 0===r?void 0:r["".concat(m,"-").concat(t)]}}))]);(0,u.Z)((()=>{r.dataSets.forEach(((e,r)=>{let{id:a,isToolbarFilter:n}=e;v&&n?new RegExp(v).test(a)||t.hide(a):((null==b?void 0:b[r])||t.isToggled(a))&&t.hide(a)}))}));const T=e=>{const r=t.toggle(e);C({type:p.JD.graph.SET_GRAPH_LEGEND,id:"".concat(m,"-").concat(e),value:r})};return o().createElement(o().Fragment,null,r.dataSets.map(((e,r)=>{let{id:i,isThreshold:s,stroke:u,data:c=[]}=e;const d=!c.find((e=>{let{y:t,hasData:r}=e;return t>=0&&!0===r||t>=0&&!0===s}))||!1,p=n(["curiosity-graph.label","curiosity-graph.label_no"],{product:g,context:i}),h=n("curiosity-graph.legendTooltip",{product:g,context:i},[o().createElement("span",{style:{whiteSpace:"nowrap"}})]),m=(null==b?void 0:b[r])||t.isToggled(i),C={};f||(C.onClick=()=>T(i),C.onKeyPress=()=>T(i));const v=o().createElement(l.Button,(0,a.Z)({},C,{className:"curiosity-graph__legend-item curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(i),variant:"link",component:"a",isDisabled:null!=f?f:d,icon:(d||m)&&o().createElement(y.ChartIcon,{symbol:"eyeSlash"})||o().createElement(y.ChartIcon,{symbol:s?"dash":"square",style:{visibility:d||m?"hidden":"visible"},fill:u})}),p);return h?o().createElement(l.Tooltip,{key:"curiosity-tooltip-".concat(i),content:o().createElement("p",null,h),position:l.TooltipPosition.top,enableFlip:!0},o().createElement("span",{className:"pf-c-button pf-m-link curiosity-graph__legend-item-wrapper curiosity-usage-graph__legend-item-wrapper"},v)):v})))};m.propTypes={chart:s().shape({hide:s().func,toggle:s().func,isToggled:s().func}),datum:s().shape({dataSets:s().arrayOf(s().shape({data:s().array,id:s().string.isRequired,isThreshold:s().bool,stroke:s().string.isRequired}))}),t:s().func,useDispatch:s().func,useGraphCardContext:s().func,useProduct:s().func,useSelectors:s().func},m.defaultProps={chart:{hide:h.helpers.noop,toggle:h.helpers.noop,isToggled:h.helpers.noop},datum:{dataSets:[]},t:g.translate,useDispatch:p.Cr.reactRedux.useDispatch,useGraphCardContext:d.useGraphCardContext,useProduct:c.useProduct,useSelectors:p.Cr.reactRedux.useSelectors}},99171:function(e,t,r){r.r(t),r.d(t,{GraphCardChartTitleTooltip:function(){return d},default:function(){return d}});var a=r(28416),n=r.n(a),o=r(45697),i=r.n(o),s=r(39930),l=r(89709),u=r(25394),c=r(83109);const d=e=>{let{t:t,useGraphCardContext:r}=e;const{settings:a={}}=r(),{isCardTitleDescription:o,stringId:i}=a;return o?n().createElement(s.Tooltip,{content:n().createElement("p",null,t("curiosity-graph.cardHeadingDescription",{context:i})),position:s.TooltipPosition.top,enableFlip:!1,entryDelay:100,exitDelay:0},n().createElement("span",{className:"curiosity-icon__question"},n().createElement(l.OutlinedQuestionCircleIcon,null))):null};d.propTypes={t:i().func,useGraphCardContext:i().func},d.defaultProps={t:c.translate,useGraphCardContext:u.useGraphCardContext}},44024:function(e,t,r){r.r(t),r.d(t,{GraphCardChartTooltip:function(){return g},default:function(){return g}});var a=r(28416),n=r.n(a),o=r(45697),i=r.n(o),s=r(51858),l=r(78139),u=r(83109),c=r(30211),d=r(1138),p=r(46262),h=r(76006);const g=e=>{let{datum:t,t:r,useProduct:a,useProductGraphTallyQuery:o}=e;const{productLabel:i}=a(),{[p.O6.GRANULARITY]:s}=o();let u=null;const g=[],{itemsByKey:y={}}=t||{};return Object.keys(y).reverse().forEach(((e,t)=>{var a,o,p,h;0===t&&(u=(0,l.getTooltipDate)({date:null===(h=y[e])||void 0===h?void 0:h.data.date,granularity:s}));const m={color:null===(a=y[e])||void 0===a?void 0:a.color};if((null===(o=y[e])||void 0===o?void 0:o.chartType)===c.ChartTypeVariant.threshold){var f,C,v,b;let t=null!==(f=null===(C=y[e])||void 0===C?void 0:C.data.y)&&void 0!==f?f:r("curiosity-graph.label",{context:"noData"});(null!==(v=y[e])&&void 0!==v&&v.data.hasInfinite||null!==(b=y[e])&&void 0!==b&&b.data.hasInfiniteQuantity)&&(t=r("curiosity-graph.label",{context:["threshold","infinite"]},[m.color&&n().createElement(d.ChartIcon,{symbol:"infinity",size:"1.1rem",fill:"#ffffff",title:r("curiosity-graph.label",{context:["threshold","infinite"]})})])),m.label=r("curiosity-graph.label",{context:["threshold"]}),m.value=t}else{var T,G;const t=!1===(null===(T=y[e])||void 0===T?void 0:T.data.hasData)&&r("curiosity-graph.label",{context:"noData"})||(null===(G=y[e])||void 0===G?void 0:G.data.y)||0;m.label=r("curiosity-graph.label",{context:e,product:i}),m.value=t}m.chartType=null===(p=y[e])||void 0===p?void 0:p.chartType,g.push(m)})),n().createElement("div",{className:"curiosity-graph__tooltip curiosity-usage-graph__tooltip"},n().createElement("table",{summary:r("curiosity-graph.tooltipSummary")},g.length&&u&&n().createElement("thead",null,n().createElement("tr",null,n().createElement("th",{colSpan:2},u)))||null,g.length&&n().createElement("tbody",null,g.map((e=>{var t;const r="number"==typeof e.value&&!Number.isInteger(e.value)&&(null===(t=h.helpers.numberDisplay(e.value))||void 0===t||null===(t=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!0}))||void 0===t?void 0:t.toUpperCase())||e.value;return n().createElement("tr",{key:"tooltip-".concat(e.label)},n().createElement("th",null,e.chartType===c.ChartTypeVariant.threshold&&n().createElement(d.ChartIcon,{size:"sm",symbol:"dash",fill:e.color||"transparent"}),e.chartType!==c.ChartTypeVariant.threshold&&n().createElement(d.ChartIcon,{size:"sm",fill:e.color||"transparent"})," ",e.label),n().createElement("td",null,r))})))||null),!g.length&&r("curiosity-graph.label",{context:["noData","error"]})||null)};g.propTypes={datum:i().shape({itemsByKey:i().objectOf(i().shape({chartType:i().string,color:i().string,data:i().shape({date:i().oneOfType([i().string,i().instanceOf(Date)]),hasData:i().bool,hasInfinite:i().bool,hasInfiniteQuantity:i().bool,y:i().number})}))}),t:i().func,useProduct:i().func,useProductGraphTallyQuery:i().func},g.defaultProps={datum:{},t:u.translate,useProduct:s.useProduct,useProductGraphTallyQuery:s.useProductGraphTallyQuery}},25394:function(e,t,r){r.r(t),r.d(t,{DEFAULT_CONTEXT:function(){return h},GraphCardContext:function(){return g},context:function(){return b},default:function(){return b},useGetMetrics:function(){return C},useGraphCardActions:function(){return v},useGraphCardContext:function(){return y},useMetricsSelector:function(){return f},useParseFiltersSettings:function(){return m}});var a=r(87462),n=r(28416),o=r.n(n),i=r(15451),s=r(39930),l=r(87284),u=r(51858),c=r(70136),d=r(62834),p=r(78139);const h=[{settings:{metrics:[]}},d.B.noop],g=o().createContext(h),y=()=>(0,n.useContext)(g),m=function(){let{useProduct:e=u.useProduct,useProductGraphConfig:t=u.useProductGraphConfig}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{productId:r}=e(),{filters:a=[],settings:o={}}=t();return(0,n.useMemo)((()=>p.graphCardHelpers.generateChartSettings({filters:a,settings:o,productId:r})),[a,o,r])},f=function(){let{useGraphCardContext:e=y,useSelectorsResponse:t=l.Cr.reactRedux.useSelectorsResponse}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{settings:r={}}=e(),{metrics:a=[]}=r,{error:n,fulfilled:o,pending:i,data:s=[],...u}=t(a.map((e=>{let{id:t,isCapacity:r}=e;return e=>{var a,n;let{graph:o}=e;return r?null===(a=o.capacity)||void 0===a?void 0:a[t]:null===(n=o.tally)||void 0===n?void 0:n[t]}}))),c={},d=null==s?void 0:s.map(((e,t)=>{const r={...a[t],...e};return c[a[t].id]=r,r}));return{...u,data:c,dataSets:d,error:n,fulfilled:o,pending:i}},C=function(){let{getGraphMetrics:e=l.Ak.rhsm.getGraphMetrics,useDispatch:t=l.Cr.reactRedux.useDispatch,useGraphCardContext:r=y,useMetricsSelector:a=f,useProduct:n=u.useProduct,useProductGraphTallyQuery:o=u.useProductGraphTallyQuery}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{productId:s}=n(),c=o(),d=t(),p=a(),{settings:h={}}=r(),{metrics:g=[]}=h;return(0,i.Z)((()=>{const t=g.map((e=>{let{metric:t,isCapacity:r,query:a}=e;return{id:s,metric:t,isCapacity:r,query:a}}));e(t,c)(d)}),[g,s,c]),p},v=function(){let{categoryOptions:e=c.toolbarFieldOptions,useMetricsSelector:t=f,useGraphCardContext:r=y}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{pending:i,dataSets:l}=t(),{settings:u={}}=r(),{actions:p}=u;return(0,n.useMemo)((()=>null==p?void 0:p.map((t=>{let{id:r,content:n,...u}=t;const c=e.find((e=>{let{value:t}=e;return r===t})),{component:p}=c||{};return p&&o().createElement(s.ToolbarItem,{key:"option-".concat(r)},o().createElement(p,(0,a.Z)({isFilter:!1},u)))||n&&!i&&l.length&&o().createElement(s.ToolbarItem,{key:r||d.B.generateId()},"function"==typeof n?n({data:l}):n)||null}))),[p,e,l,i])},b={GraphCardContext:g,DEFAULT_CONTEXT:h,useGetMetrics:C,useGraphCardActions:v,useGraphCardContext:y,useMetricsSelector:f,useParseFiltersSettings:m}},91339:function(e,t,r){r.r(t),r.d(t,{MinHeight:function(){return l},default:function(){return l}});var a=r(28416),n=r.n(a),o=r(45697),i=r.n(o),s=r(70725);const l=e=>{let{children:t,isOnLoad:r,minHeight:o,useResizeObserver:i}=e;const[s,l]=(0,a.useState)({containerWidth:void 0,isLoaded:!1}),u=(0,a.useRef)(null),c=(0,a.useRef)(null),{height:d,width:p}=i(u);return(0,a.useEffect)((()=>{if(!r||r&&!s.isLoaded){const{current:e={}}=u,{current:t={}}=c;if(null!=e&&e.style){let a=(null==t?void 0:t.clientHeight)||0;o>d&&(a=o),e.style.minHeight="".concat(a,"px"),l((()=>({containerWidth:p,isLoaded:r,updatedHeight:a})))}}}),[d,p,u,c,r,o,s.isLoaded]),n().createElement("div",{className:"curiosity-minheight",ref:u},n().createElement("div",{className:"curiosity-minheight__inner",ref:c},t))};l.propTypes={children:i().node.isRequired,minHeight:i().number,isOnLoad:i().bool,useResizeObserver:i().func},l.defaultProps={isOnLoad:!1,minHeight:0,useResizeObserver:s.yU}}}]);
//# sourceMappingURL=../sourcemaps/1799.d3f67477bde10d513a4861ea3ad66294.js.map