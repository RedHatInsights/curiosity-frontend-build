"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[9175,7585,608,7493,9051,2738],{87585:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m,BannerMessages:()=>m});var a=r(15274),n=r(56949),i=r(48418),o=r(92950),l=r.n(o),s=r(21012),c=r(91999),u=r(15451),d=r(95423),p=r(83109),y=r(76006),v=r(30446),h=r(3281),m=function(e){var t,r=e.messages,c=e.useRouteDetail,p=e.useAppMessages,h=(0,o.useState)({}),m=(0,i.Z)(h,2),g=m[0],E=m[1],f=(0,o.useState)([]),I=(0,i.Z)(f,2),T=I[0],b=I[1],D=c()||{},S=D.pathParameter,C=D.productConfig,_=1===(null==C?void 0:C.length)&&(null==C?void 0:C[0]),N=d.IT.parseRhsmQuery((null==C||null===(t=C[0])||void 0===t?void 0:t.query)||{}).query,R=p().appMessages;return(0,u.Z)((function(){if(S&&_){var e,t=y.i3.getRangedDateTime("CURRENT"),r=t.startDate,i=t.endDate,o=(0,n.Z)((0,n.Z)({},N),{},(e={},(0,a.Z)(e,v.VN.GRANULARITY,v.U9.DAILY),(0,a.Z)(e,v.VN.START_DATE,r.toISOString()),(0,a.Z)(e,v.VN.END_DATE,i.toISOString()),e));d.Cr.rhsmActions.useGetMessageReports(S,o)}}),[S,_,N]),(0,u.Z)((function(){var e=[];r.length&&Object.entries(R).forEach((function(t){var a=(0,i.Z)(t,2),o=a[0],l=a[1];if(!0!==g[o]&&!0===l){var s=r.find((function(e){return e.id===o}));s&&e.push((0,n.Z)({key:o},s))}})),b(e.map((function(e){var t=e.key,r=e.message,i=e.title,o=e.variant,c=void 0===o?s.AlertVariant.info:o,u=l().createElement(s.AlertActionCloseButton,{onClose:function(){return E((0,n.Z)((0,n.Z)({},g),{},(0,a.Z)({},t,!0)))}});return l().createElement(s.Alert,{actionClose:u,key:t,title:i,variant:c},r)})))}),[R,g,r]),(null==T?void 0:T.length)?l().createElement("div",{className:"curiosity-banner-messages"},T):null};m.defaultProps={messages:[{id:"cloudigradeMismatch",title:(0,p.translate)("curiosity-banner.dataMismatchTitle"),message:(0,p.translate)("curiosity-banner.dataMismatchMessage",{context:""!==y.BM.UI_LINK_REPORT_ACCURACY_RECOMMENDATIONS&&"cloudigradeMismatch",appName:y.BM.UI_DISPLAY_NAME},[l().createElement(s.Button,{isInline:!0,component:"a",variant:"link",icon:l().createElement(c.ExternalLinkAltIcon,null),iconPosition:"right",target:"_blank",href:y.BM.UI_LINK_REPORT_ACCURACY_RECOMMENDATIONS})])}],useAppMessages:d.Cr.rhsmSelectors.useAppMessages,useRouteDetail:h.Tu}},10608:(e,t,r)=>{r.r(t),r.d(t,{default:()=>_,ConnectedGraphCard:()=>_,GraphCard:()=>S});var a=r(56949),n=r(90237),i=r(65337),o=r(39576),l=r(80239),s=r(92950),c=r.n(s),u=r(21012),d=r(28070),p=r(18446),y=r.n(p),v=r(95423),h=r(76006),m=r(30446),g=r(78139),E=r(44024),f=r(64418),I=r(60930),T=r(1797),b=r(91339),D=r(83109),S=function(e){(0,o.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;(0,n.Z)(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onUpdateGraphData=function(){var t=e.props,r=t.getGraphReportsCapacity,a=t.isDisabled,n=t.productId,i=t.query,o=e.getQueryGranularity(),l=i[m.VN.START_DATE],s=i[m.VN.END_DATE];!a&&o&&l&&s&&n&&r(n,i)},e}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){this.onUpdateGraphData()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.productId,a=t.query;r===e.productId&&y()(a,e.query)||this.onUpdateGraphData()}},{key:"getQueryGranularity",value:function(){var e=this.props.query;return null==e?void 0:e[m.VN.GRANULARITY]}},{key:"renderChart",value:function(){var e,t,r=this.props,a=r.filterGraphData,n=r.graphData,i=r.productLabel,o=r.query,l=r.viewId,s=this.getQueryGranularity(),u={xAxisLabelIncrement:g.graphCardHelpers.getChartXAxisLabelIncrement(s),xAxisTickFormat:function(e){var t=e.item,r=e.previousItem,a=e.tick;return g.graphCardHelpers.xAxisTickFormat({tick:a,date:t.date,previousDate:r.date,granularity:s})},yAxisTickFormat:g.graphCardHelpers.yAxisTickFormat};return c().createElement(I.Chart,Object.assign({key:"chart_".concat(JSON.stringify(o))},u,{dataSets:(e=n,t=function(t){var r={data:e[t],id:t,strokeWidth:2,isStacked:!/^threshold/.test(t),isThreshold:/^threshold/.test(t)};return/^threshold/.test(t)&&(r.stroke=d.chart_color_green_300.value,r.strokeDasharray="4,3",r.strokeWidth=3),r},a.length?a.map((function(e){return Object.assign(t(e.id),e)})):Object.keys(e).map((function(e){return t(e)}))),chartLegend:function(e){var t=e.chart,r=e.datum;return c().createElement(f.default,{chart:t,datum:r,productLabel:i,viewId:l})},chartTooltip:function(e){var t=e.datum;return c().createElement(E.default,{datum:t,granularity:s,productLabel:i})}}))}},{key:"render",value:function(){var e=this.props,t=e.cardTitle,r=e.children,n=e.error,i=e.graphData,o=e.meta,l=e.isDisabled,s=e.pending,d=e.settings;if(l)return null;var p=null;return"function"==typeof(null==d?void 0:d.actionDisplay)&&(p=d.actionDisplay({data:(0,a.Z)({},i),meta:(0,a.Z)({},o)})),c().createElement(u.Card,{className:"curiosity-usage-graph"},c().createElement(b.MinHeight,{key:"headerMinHeight"},c().createElement(u.CardHeader,null,c().createElement(u.CardTitle,null,c().createElement(u.Title,{headingLevel:"h2",size:"lg"},t)),c().createElement(u.CardActions,{className:n?"blur":""},c().createElement(c().Fragment,{key:"actionDisplay"},p),r))),c().createElement(b.MinHeight,{key:"bodyMinHeight"},c().createElement(u.CardBody,null,c().createElement("div",{className:(n?"blur":s&&"fadein")||""},s&&c().createElement(T.Loader,{variant:"graph"}),!s&&this.renderChart()))))}}]),r}(c().Component);S.defaultProps={cardTitle:null,children:null,error:!1,filterGraphData:[],getGraphReportsCapacity:h.BM.noop,graphData:{},meta:{},isDisabled:h.BM.UI_DISABLED_GRAPH,pending:!1,productLabel:"",settings:{},t:D.translate,viewId:"graphCard"};var C=v.R1.graphCard.makeGraphCard(),_=(0,v.$j)(C,(function(e){return{getGraphReportsCapacity:function(t,r){return e(v.Ak.rhsm.getGraphReportsCapacity(t,r))}}}))(S)},47493:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A,ConnectedInventorySubscriptions:()=>A,InventorySubscriptions:()=>N});var a=r(15274),n=r(90237),i=r(65337),o=r(39576),l=r(80239),s=r(92950),c=r.n(s),u=r(18446),d=r.n(u),p=r(86445),y=r(21012),v=r(32875),h=r(68929),m=r.n(h),g=r(76006),E=r(95423),f=r(78697),I=r(1797),T=r(91339),b=r(44822),D=r(68900),S=r(65020),C=r(30446),_=r(83109),N=function(e){(0,o.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;(0,n.Z)(this,r);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).onColumnSort=function(t,r){var n,i=r.direction,o=r.id,l=e.props.productId,s=Object.values(C.Fs).find((function(e){return m()(e)===o}));if(s){switch(i){case p.SortByDirection.desc:n=C.hb.DESCENDING;break;default:n=C.hb.ASCENDING}E.h.dispatch([(0,a.Z)({type:E.JD.query.SET_QUERY_RHSM_SUBSCRIPTIONS_INVENTORY_TYPES[C.VN.DIRECTION],viewId:l},C.VN.DIRECTION,n),(0,a.Z)({type:E.JD.query.SET_QUERY_RHSM_SUBSCRIPTIONS_INVENTORY_TYPES[C.VN.SORT],viewId:l},C.VN.SORT,s)])}else(g.BM.DEV_MODE||g.BM.REVIEW_MODE)&&console.warn("Sorting can only be performed on select fields, confirm field ".concat(o," is allowed."))},e.onPage=function(t){var r=t.offset,n=t.perPage,i=e.props.productId;E.h.dispatch([(0,a.Z)({type:E.JD.query.SET_QUERY_RHSM_SUBSCRIPTIONS_INVENTORY_TYPES[C.VN.OFFSET],viewId:i},C.VN.OFFSET,r),(0,a.Z)({type:E.JD.query.SET_QUERY_RHSM_SUBSCRIPTIONS_INVENTORY_TYPES[C.VN.LIMIT],viewId:i},C.VN.LIMIT,n)])},e.onUpdateInventoryData=function(){var t=e.props,r=t.getSubscriptionsInventory,a=t.isDisabled,n=t.productId,i=t.query;!a&&n&&r(n,i)},e}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){this.onUpdateInventoryData()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.productId,a=t.query;r===e.productId&&d()(a,e.query)||this.onUpdateInventoryData()}},{key:"renderTable",value:function(){var e=this,t=this.props,r=t.filterInventoryData,a=t.listData,n=t.query,i=t.session,o=[],l=a.map((function(t){var a=Object.assign({},t),l=b.inventoryListHelpers.parseRowCellsListData({filters:b.inventoryListHelpers.parseInventoryFilters({filters:r,onSort:e.onColumnSort,query:n}),cellData:a,session:i}),s=l.columnHeaders,c=l.cells;return o=s,{cells:c}}));return c().createElement(f.default,{borders:!0,variant:p.TableVariant.compact,className:"curiosity-inventory-list",columnHeaders:o,rows:l})}},{key:"render",value:function(){var e=this.props,t=e.error,r=e.filterInventoryData,a=e.fulfilled,n=e.isDisabled,i=e.itemCount,o=e.listData,l=e.pending,s=e.perPageDefault,u=e.query,d=e.t;if(n)return c().createElement(y.Card,{className:"curiosity-inventory-card__disabled"},c().createElement(y.CardBody,null,c().createElement(y.Bullseye,null,d("curiosity-inventory.tab",{context:"disabled"}))));var h=u[C.VN.LIMIT]||s,m=u[C.VN.OFFSET],g=S.paginationHelpers.isLastPage(m,h,i),E=!0===a&&i<h&&"bodyMinHeight-".concat(h,"-resize")||!0===a&&g&&"bodyMinHeight-".concat(h,"-resize")||!0===t&&"bodyMinHeight-".concat(h,"-resize")||"bodyMinHeight-".concat(h);return c().createElement(y.Card,{className:"curiosity-inventory-card"},c().createElement(T.MinHeight,{key:"headerMinHeight",updateOnContent:!0},c().createElement(y.CardHeader,{className:t?"hidden":"","aria-hidden":t||!1},c().createElement(y.CardActions,{className:i?"":"transparent","aria-hidden":!i||!1},c().createElement(D.default,{isCompact:!0,isDisabled:l||t,itemCount:i,offset:m,onPage:this.onPage,onPerPage:this.onPage,perPage:h})))),c().createElement(T.MinHeight,{key:E,updateOnContent:!0},c().createElement(y.CardBody,null,c().createElement("div",{className:(t?"blur":l&&"fadein")||""},l&&c().createElement(I.Loader,{variant:"table",tableProps:{className:"curiosity-inventory-list",colCount:(null==r?void 0:r.length)||(null==o?void 0:o[0])&&Object.keys(o[0]).length||1,colWidth:(null==r?void 0:r.length)&&r.map((function(e){return e.cellWidth}))||[],rowCount:(null==o?void 0:o.length)||h,variant:p.TableVariant.compact}}),!l&&this.renderTable()))),c().createElement(T.MinHeight,{key:"footerMinHeight",updateOnContent:!0},c().createElement(y.CardFooter,{className:(t?"hidden":!i&&"transparent")||"","aria-hidden":t||!i||!1},c().createElement(v.Z,{isFooter:!0},c().createElement(D.default,{dropDirection:"up",isDisabled:l||t,itemCount:i,offset:m,onPage:this.onPage,onPerPage:this.onPage,perPage:h})))))}}]),r}(c().Component);N.defaultProps={error:!1,fulfilled:!1,filterInventoryData:[],getSubscriptionsInventory:g.BM.noop,isDisabled:g.BM.UI_DISABLED_TABLE_SUBSCRIPTIONS,itemCount:0,listData:[],pending:!1,perPageDefault:10,session:{},t:_.translate};var R=E.R1.subscriptionsList.makeSubscriptionsList(),A=(0,E.$j)(R,(function(e){return{getSubscriptionsInventory:function(t,r){return e(E.Ak.rhsm.getSubscriptionsInventory(t,r))}}}))(N)},69051:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g,ConnectedInventoryTabs:()=>g,InventoryTabs:()=>m,InventoryTab:()=>h.InventoryTab});var a=r(15274),n=r(90237),i=r(65337),o=r(39576),l=r(80239),s=r(92950),c=r.n(s),u=r(21012),d=r(95423),p=r(70031),y=r(76006),v=r(83109),h=r(80931),m=function(e){(0,o.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;(0,n.Z)(this,r);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).onTab=function(t){var r=t.index,n=e.props.productId;d.h.dispatch({type:d.JD.inventory.SET_INVENTORY_TAB,tabs:(0,a.Z)({},n,r)})},e}return(0,i.Z)(r,[{key:"render",value:function(){var e=this.props,t=e.activeTab,r=e.children,a=e.defaultActiveTab,n=e.isDisabled,i=e.t;if(n)return null;var o=c().Children.toArray(r).map((function(e,t){var r=e.props,a=void 0===r?{}:r;return{active:a.active||!1,content:a.children||e,title:a.title||i("curiosity-inventory.tabSubHeading",{count:t})}}));return c().createElement(c().Fragment,null,c().createElement(u.Title,{headingLevel:"h2",className:"sr-only"},i("curiosity-inventory.tabHeading",{count:o.length})),c().createElement(p.Tabs,{activeTab:t,defaultActiveTab:a,onTab:this.onTab,tabs:o}))}}]),r}(c().Component);m.defaultProps={activeTab:0,defaultActiveTab:0,isDisabled:y.BM.UI_DISABLED_TABLE,t:v.translate};var g=(0,d.$j)((function(e,t){var r,a=e.inventory,n=t.productId;return{activeTab:null===(r=a.tabs)||void 0===r?void 0:r[n]}}))(m)},29175:(e,t,r)=>{r.r(t),r.d(t,{default:()=>T,ProductView:()=>T});var a=r(92950),n=r.n(a),i=r(21012),o=r(31369),l=r(3281),s=r(51858),c=r(52422),u=r(95423),d=r(10608),p=r(92227),y=r(86876),v=r(76006),h=r(87585),m=r(2738),g=r(69051),E=r(47493),f=r(30446),I=r(83109),T=function(e){var t=e.t,r=e.toolbarGraph,a=e.toolbarGraphDescription,l=e.toolbarProduct,I=(0,e.useRouteDetail)(),T=I.productParameter,b=I.productConfig;return n().createElement(c.PageLayout,null,n().createElement(c.PageHeader,{productLabel:T},t("curiosity-view.title",{appName:v.BM.UI_DISPLAY_NAME,context:T})),n().createElement(c.PageMessages,null,n().createElement(h.default,null)),n().createElement(c.PageColumns,null,b.map((function(e){return function(e){var v=e.graphTallyQuery,h=e.inventoryHostsQuery,I=e.inventorySubscriptionsQuery,T=e.query,b=e.initialToolbarFilters,D=e.initialGraphFilters,S=e.initialGraphSettings,C=e.initialGuestsFilters,_=e.initialInventoryFilters,N=e.initialInventorySettings,R=e.initialSubscriptionsInventoryFilters,A=e.productLabel,P=e.productId,M=e.viewId;if(!P||!M)return null;var k=u.IT.parseRhsmQuery(T,{graphTallyQuery:v,inventoryHostsQuery:h,inventorySubscriptionsQuery:I}),L=k.graphTallyQuery,O=k.inventoryHostsQuery,H=k.inventorySubscriptionsQuery,U=k.toolbarQuery,Z=null;a&&(Z=n().createElement(i.Tooltip,{content:n().createElement("p",null,t("curiosity-graph.cardHeadingDescription",{context:P})),position:i.TooltipPosition.top,enableFlip:!1,distance:5,entryDelay:100,exitDelay:0},n().createElement("sup",{className:"curiosity-icon__info"},n().createElement(o.ZP,null))));var V=n().createElement(n().Fragment,null,t("curiosity-graph.cardHeading",{context:P}),Z);return n().createElement(s.ProductViewContext.Provider,{value:e,key:"product_".concat(P)},n().createElement(c.PageToolbar,null,n().isValidElement(l)&&l||!1!==l&&n().createElement(p.ConnectedToolbar,{filterOptions:b,productId:P,query:U,viewId:M})),n().createElement(c.PageSection,null,n().createElement(d.ConnectedGraphCard,{key:"graph_".concat(P),filterGraphData:D,settings:S,query:L,productId:P,viewId:M,cardTitle:V,productLabel:A},n().isValidElement(r)&&r||!1!==r&&n().createElement(m.ToolbarFieldGranularity,{viewId:M,value:L[f.VN.GRANULARITY]}))),n().createElement(c.PageSection,null,n().createElement(g.default,{key:"inventory_".concat(P),productId:P},n().createElement(g.InventoryTab,{key:"inventory_hosts_".concat(P),title:t("curiosity-inventory.tabHosts",{context:["noInstances",P]})},n().createElement(y.ConnectedInventoryList,{key:"inv_".concat(P),filterGuestsData:C,filterInventoryData:_,productId:P,settings:N,query:O,viewId:M})),R&&n().createElement(g.InventoryTab,{key:"inventory_subs_".concat(P),title:t("curiosity-inventory.tabSubscriptions",{context:P})},n().createElement(E.ConnectedInventorySubscriptions,{key:"subs_".concat(P),filterInventoryData:R,productId:P,query:H,viewId:M})))))}(e)}))))};T.defaultProps={t:I.translate,toolbarGraph:null,toolbarGraphDescription:!1,toolbarProduct:null,useRouteDetail:l.Tu}},2738:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y,ToolbarFieldGranularity:()=>y,toolbarFieldOptions:()=>p});var a=r(15274),n=r(56949),i=r(92950),o=r.n(i),l=r(95423),s=r(49844),c=r(30446),u=r(76006),d=r(83109),p=Object.values(c.U9).map((function(e){return{title:(0,d.translate)("curiosity-toolbar.granularity",{context:e}),value:e,selected:!1}})),y=function e(t){var r=t.options,i=t.t,d=t.value,p=t.viewId,y=l.Cr.reactRedux.useSelector((function(e){var t,r;return null===(t=e.view.graphTallyQuery)||void 0===t||null===(r=t[p])||void 0===r?void 0:r[c.VN.GRANULARITY]}),d),v=r.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{selected:e.value===y})}));return o().createElement(s.Select,{"aria-label":i("curiosity-toolbar.placeholder",{context:"granularity"}),onSelect:function(e){var t=u.i3.getRangedDateTime(e.value),r=t.startDate,n=t.endDate;l.h.dispatch([{type:l.JD.query.SET_QUERY_CLEAR_INVENTORY_LIST,viewId:p},(0,a.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[c.VN.GRANULARITY],viewId:p},c.VN.GRANULARITY,e.value),(0,a.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[c.VN.START_DATE],viewId:p},c.VN.START_DATE,r.toISOString()),(0,a.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[c.VN.END_DATE],viewId:p},c.VN.END_DATE,n.toISOString())])},options:v,selectedOptions:y,placeholder:i("curiosity-toolbar.placeholder",{context:"granularity"}),"data-test":e.defaultProps.viewId})};y.defaultProps={options:p,t:d.translate,value:c.U9.DAILY,viewId:"toolbarFieldGranularity"}}}]);
//# sourceMappingURL=../sourcemaps/9175.b895c7cc57e5042f87c4100154331e01.js.map