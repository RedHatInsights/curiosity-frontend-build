(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[3768,1339,7297],{10608:function(e,t,r){"use strict";r.r(t),r.d(t,{GraphCard:function(){return d},default:function(){return d}});var n=r(92950),a=r.n(n),i=r(51858),o=r(76006),l=r(29407),u=r(91799),c=r(25394),s=r(78139),d=function(e){var t=e.isDisabled,r=e.useProduct,n=e.useProductGraphConfig,i=r().productId,o=n(),d=o.filters,h=o.settings,f=s.graphCardHelpers.generateChartSettings({filters:d,settings:h,productId:i}),m=f.groupedFiltersSettings,p=f.standaloneFiltersSettings;return t?null:a().createElement(a().Fragment,null,m&&a().createElement(c.GraphCardContext.Provider,{value:m},a().createElement(u.GraphCardChart,null))||null,null==p?void 0:p.map((function(e){var t,r;return a().createElement(c.GraphCardContext.Provider,{key:"graphCard_".concat(null==e||null===(t=e.settings)||void 0===t||null===(r=t.metric)||void 0===r?void 0:r.id),value:e},a().createElement(l.GraphCardMetricTotals,null,a().createElement(u.GraphCardChart,null)))})))};d.defaultProps={isDisabled:o.BM.UI_DISABLED_GRAPH,useProduct:i.useProduct,useProductGraphConfig:i.useProductGraphConfig}},29407:function(e,t,r){"use strict";r.r(t),r.d(t,{GraphCardMetricTotals:function(){return y},default:function(){return y}});var n=r(92950),a=r.n(n),i=r(54653),o=r(30381),l=r.n(o),u=r(68929),c=r.n(u),s=r(51858),d=r(25394),h=r(91339),f=r(1797),m=r(76006),p=r(65876),v=r(46262),g=r(83109),y=function(e){var t,r,n,o,u=e.children,s=e.t,d=e.useMetricsSelector,g=(0,e.useProductGraphTallyQuery)()[v.O6.START_DATE],y=d(),C=y.pending,E=y.error,M=y.fulfilled,S=y.dataSets,T=(void 0===S?[]:S)[0]||{},k=T.data,R=void 0===k?[]:k,b=T.id,H=T.metric,P=T.meta,D=void 0===P?{}:P,_=R[R.length-1]||{},z=_.date,F=_.hasData,x=_.y,O=R.find((function(e){return!0===e.isCurrentDate}))||{},G=O.date,w=O.hasData,B=O.y,N=D.totalMonthlyDate,Z=D.totalMonthlyHasData,I=D.totalMonthlyValue,U=p.toolbarFieldOptions.find((function(e){return e.title===g||e.value.startDate.toISOString()===g}))||{},A=U.title,L=U.isCurrent,W=L?G:z,j=L?w:F,Q=L?B:x;return a().createElement(i.Flex,{"data-test":"graphMetricTotals-".concat(c()(H)),className:"curiosity-usage-graph__totals"},a().createElement(i.Flex,{flex:{default:"flex_1"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},a().createElement(i.FlexItem,{className:"curiosity-usage-graph__totals-column"},a().createElement(i.Card,{"data-test":"graphDailyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(E?"blur":"")},a().createElement(i.CardTitle,null,s("curiosity-graph.cardHeadingMetric",{context:["dailyTotal",b],month:A})),a().createElement(h.MinHeight,{key:"currentBody"},a().createElement(i.CardBody,null,a().createElement("div",null,C&&a().createElement(f.Loader,{variant:"skeleton",skeletonProps:{size:f.SkeletonSize.lg}}),M&&s("curiosity-graph.cardBodyMetric",{context:["total",j&&b],total:null===(t=m.BM.numberDisplay(Q))||void 0===t||null===(r=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===r?void 0:r.toUpperCase()},[a().createElement("strong",{title:Q,"aria-label":Q})])))),a().createElement(h.MinHeight,{key:"currentFooter"},a().createElement(i.CardFooter,null,a().createElement("div",{className:j?"":"hidden"},M&&W&&s("curiosity-graph.cardFooterMetric",{date:l().utc(W).format(m.i3.timestampUTCTimeFormats.yearTimeShort)}))))),a().createElement(i.Card,{"data-test":"graphMonthlyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(E?"blur":"")},a().createElement(i.CardTitle,null,s("curiosity-graph.cardHeadingMetric",{context:["monthlyTotal",b],month:A})),a().createElement(h.MinHeight,{key:"totalMonthlyBody"},a().createElement(i.CardBody,null,a().createElement("div",null,C&&a().createElement(f.Loader,{variant:"skeleton",skeletonProps:{size:f.SkeletonSize.lg}}),M&&s("curiosity-graph.cardBodyMetric",{context:["total",Z&&b],total:null===(n=m.BM.numberDisplay(I))||void 0===n||null===(o=n.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===o?void 0:o.toUpperCase()},[a().createElement("strong",{title:I,"aria-label":I})])))),a().createElement(h.MinHeight,{key:"totalMonthlyFooter"},a().createElement(i.CardFooter,null,a().createElement("div",{className:Z?"":"hidden"},M&&N&&s("curiosity-graph.cardFooterMetric",{date:l().utc(N).format(m.i3.timestampUTCTimeFormats.yearTimeShort)}))))))),a().createElement(i.Flex,{flex:{default:"flex_3"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},a().createElement(i.FlexItem,{className:"curiosity-usage-graph__totals-graph-column"},u)))};y.defaultProps={children:null,t:g.translate,useMetricsSelector:d.useMetricsSelector,useProductGraphTallyQuery:s.useProductGraphTallyQuery}},91339:function(e,t,r){"use strict";r.r(t),r.d(t,{MinHeight:function(){return d},default:function(){return d}});var n=r(15671),a=r(43144),i=r(97326),o=r(60136),l=r(54062),u=r(92950),c=r.n(u),s=r(76006),d=function(e){(0,o.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;(0,n.Z)(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).containerRef=c().createRef(),e.innerContainerRef=c().createRef(),e.updatedContainerWidth=0,e.resizeObserver=s.BM.noop,e.onResizeContainer=function(){var t,r,n=(0,i.Z)(e).updatedContainerWidth,a=e.props.updateOnResize,o=(null===(t=e.containerRef)||void 0===t||null===(r=t.current)||void 0===r?void 0:r.clientWidth)||0;a&&o!==n&&(e.updatedContainerWidth=o,e.setMinHeight(!0))},e}return(0,a.Z)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props.updateOnResize;window.setTimeout((function(){e.setMinHeight()})),t&&this.setResizeObserver()}},{key:"componentDidUpdate",value:function(){var e=this;this.props.updateOnContent&&window.setTimeout((function(){e.setMinHeight()}))}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setMinHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.props.minHeight,n=this.containerRef.current,a=void 0===n?{}:n,i=this.innerContainerRef.current,o=void 0===i?{}:i;null!=a&&a.style&&(r>(e=t?(null==o?void 0:o.clientHeight)||0:(null==a?void 0:a.clientHeight)||0)&&(e=r),a.style.minHeight="".concat(e,"px"))}},{key:"setResizeObserver",value:function(){var e=this;window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",e.onResizeContainer)}}},{key:"render",value:function(){var e=this.props.children;return c().createElement("div",{className:"curiosity-minheight",ref:this.containerRef},c().createElement("div",{ref:this.innerContainerRef},e))}}]),r}(c().Component);d.defaultProps={updateOnContent:!1,updateOnResize:!0,minHeight:0}},99376:function(e,t){var r=Object.keys;t.D=function(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;for(var n=r(e),a=n.length,i=0;i<a;i++)if(!(n[i]in t))return!1;for(i=0;i<a;i++)if(e[n[i]]!==t[n[i]])return!1;return a===r(t).length}},37124:function(e,t,r){"use strict";var n=r(92950);t.Z=function(e,t,r){var a=(0,n.useRef)(void 0);a.current&&r(t,a.current)||(a.current=t),(0,n.useEffect)(e,a.current)}},17297:function(e,t,r){"use strict";var n=r(99376),a=r(37124),i=function(e,t){return e.every((function(e,r){return(0,n.D)(e,t[r])}))};t.Z=function(e,t){(0,a.Z)(e,t,i)}}}]);
//# sourceMappingURL=../sourcemaps/3768.bfee07d5a55037c2f2e2573550bbcfb7.js.map