"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[4418,5394],{64418:function(e,t,r){r.r(t),r.d(t,{GraphCardChartLegend:function(){return h},default:function(){return h}});var n=r(93433),o=r(84506),i=r(92950),a=r.n(i),u=r(54653),s=r(89048),c=r(51858),d=r(25394),l=r(82410),p=r(76006),v=r(83109),f=r(1138),h=function(e){var t=e.chart,r=e.datum,i=e.t,c=e.useDispatch,d=e.useGraphCardContext,p=e.useSelectors,v=e.useProduct,h=d().settings,g=void 0===h?{}:h,C=v(),m=C.productLabel,y=C.viewId,G=g.isDisabledLegendClick,b=c(),x=p([function(e){var t;return null===(t=e.graph.legend)||void 0===t?void 0:t["".concat(y,"-inverted")]}].concat((0,n.Z)(r.dataSets.map((function(e){var t=e.id;return function(e){var r;return null===(r=e.graph.legend)||void 0===r?void 0:r["".concat(y,"-").concat(t)]}}))))),S=(0,o.Z)(x),E=S[0],T=S.slice(1);(0,s.Z)((function(){r.dataSets.forEach((function(e,r){var n=e.id,o=e.isToolbarFilter;E&&o?new RegExp(E).test(n)||t.hide(n):((null==T?void 0:T[r])||t.isToggled(n))&&t.hide(n)}))}));var P=function(e){var r=t.toggle(e);b({type:l.JD.graph.SET_GRAPH_LEGEND,id:"".concat(y,"-").concat(e),value:r})};return a().createElement(a().Fragment,null,r.dataSets.map((function(e,r){var n=e.id,o=e.isThreshold,s=e.stroke,c=e.data,d=!(void 0===c?[]:c).find((function(e){var t=e.y,r=e.hasData;return t>=0&&!0===r||t>=0&&!0===o}))||!1,l=i(["curiosity-graph.label","curiosity-graph.label_no"],{product:m,context:n}),p=i("curiosity-graph.legendTooltip",{product:m,context:n},[a().createElement("span",{style:{whiteSpace:"nowrap"}})]),v=(null==T?void 0:T[r])||t.isToggled(n),h={};G||(h.onClick=function(){return P(n)},h.onKeyPress=function(){return P(n)});var g=a().createElement(u.Button,Object.assign({},h,{className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(n),variant:"link",component:"a",isDisabled:null!=G?G:d,icon:(d||v)&&a().createElement(f.ChartIcon,{symbol:"eyeSlash"})||a().createElement(f.ChartIcon,{symbol:o?"dash":"square",style:{visibility:d||v?"hidden":"visible"},fill:s})}),l);return p?a().createElement(u.Tooltip,{key:"curiosity-tooltip-".concat(n),content:a().createElement("p",null,p),position:u.TooltipPosition.top,enableFlip:!0,distance:5},a().createElement("span",{className:"pf-c-button pf-m-link curiosity-usage-graph__legend-item-wrapper"},g)):g})))};h.defaultProps={chart:{hide:p.BM.noop,toggle:p.BM.noop,isToggled:p.BM.noop},datum:{dataSets:[]},t:v.translate,useDispatch:l.Cr.reactRedux.useDispatch,useGraphCardContext:d.useGraphCardContext,useProduct:c.useProduct,useSelectors:l.Cr.reactRedux.useSelectors}},25394:function(e,t,r){r.r(t),r.d(t,{DEFAULT_CONTEXT:function(){return g},GraphCardContext:function(){return C},context:function(){return S},default:function(){return S},useGetMetrics:function(){return b},useGraphCardActions:function(){return x},useGraphCardContext:function(){return m},useMetricsSelector:function(){return G},useParseFiltersSettings:function(){return y}});var n=r(1413),o=r(45987),i=r(92950),a=r.n(i),u=r(17297),s=r(54653),c=r(82410),d=r(51858),l=r(70136),p=r(62834),v=r(78139),f=["error","fulfilled","pending","data"],h=["id","content"],g=[{settings:{metrics:[]}},p.B.noop],C=a().createContext(g),m=function(){return(0,i.useContext)(C)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProduct,r=void 0===t?d.useProduct:t,n=e.useProductGraphConfig,o=void 0===n?d.useProductGraphConfig:n,a=r(),u=a.productId,s=o(),c=s.filters,l=void 0===c?[]:c,p=s.settings,f=void 0===p?{}:p;return(0,i.useMemo)((function(){return v.graphCardHelpers.generateChartSettings({filters:l,settings:f,productId:u})}),[l,f,u])},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGraphCardContext,r=void 0===t?m:t,i=e.useSelectorsResponse,a=void 0===i?c.Cr.reactRedux.useSelectorsResponse:i,u=r(),s=u.settings,d=void 0===s?{}:s,l=d.metrics,p=void 0===l?[]:l,v=a(p.map((function(e){var t=e.id,r=e.isCapacity;return function(e){var n,o,i=e.graph;return r?null===(n=i.capacity)||void 0===n?void 0:n[t]:null===(o=i.tally)||void 0===o?void 0:o[t]}}))),h=v.error,g=v.fulfilled,C=v.pending,y=v.data,G=void 0===y?[]:y,b=(0,o.Z)(v,f),x={},S=null==G?void 0:G.map((function(e,t){var r=(0,n.Z)((0,n.Z)({},p[t]),e);return x[p[t].id]=r,r}));return(0,n.Z)((0,n.Z)({},b),{},{data:x,dataSets:S,error:h,fulfilled:g,pending:C})},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getGraphMetrics,r=void 0===t?c.Ak.rhsm.getGraphMetrics:t,n=e.useDispatch,o=void 0===n?c.Cr.reactRedux.useDispatch:n,i=e.useGraphCardContext,a=void 0===i?m:i,s=e.useMetricsSelector,l=void 0===s?G:s,p=e.useProduct,v=void 0===p?d.useProduct:p,f=e.useProductGraphTallyQuery,h=void 0===f?d.useProductGraphTallyQuery:f,g=v(),C=g.productId,y=h(),b=o(),x=l(),S=a(),E=S.settings,T=void 0===E?{}:E,P=T.metrics,k=void 0===P?[]:P;return(0,u.Z)((function(){var e=k.map((function(e){var t=e.metric,r=e.isCapacity,n=e.query;return{id:C,metric:t,isCapacity:r,query:n}}));r(e,y)(b)}),[k,C,y]),x},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.categoryOptions,r=void 0===t?l.toolbarFieldOptions:t,n=e.useMetricsSelector,u=void 0===n?G:n,c=e.useGraphCardContext,d=void 0===c?m:c,v=u(),f=v.pending,g=v.dataSets,C=d(),y=C.settings,b=void 0===y?{}:y,x=b.actions;return(0,i.useMemo)((function(){return null==x?void 0:x.map((function(e){var t=e.id,n=e.content,i=(0,o.Z)(e,h),u=(r.find((function(e){var r=e.value;return t===r}))||{}).component;return u&&a().createElement(s.ToolbarItem,{key:"option-".concat(t)},a().createElement(u,Object.assign({isFilter:!1},i)))||n&&!f&&g.length&&a().createElement(s.ToolbarItem,{key:t||p.B.generateId()},"function"==typeof n?n({data:g}):n)||null}))}),[x,r,g,f])},S={GraphCardContext:C,DEFAULT_CONTEXT:g,useGetMetrics:b,useGraphCardActions:x,useGraphCardContext:m,useMetricsSelector:G,useParseFiltersSettings:y}}}]);
//# sourceMappingURL=../sourcemaps/4418.1d59a55f5a0ad9f2442436c118f46574.js.map