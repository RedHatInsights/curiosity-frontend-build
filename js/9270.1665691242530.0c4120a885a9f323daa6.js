"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[9270,8139],{89270:function(t,e,a){a.r(e),a.d(e,{GraphCardChart:function(){return h},default:function(){return h}});var r=a(92950),n=a.n(r),o=a(77323),i=a(51858),l=a(78139),c=a(60930),u=a(64418),s=a(44024),d=a(30446),h=function(t){var e,a,r=t.graphData,i=t.useProductGraphConfig,h=t.useProductGraphTallyQuery,m=i().filters,p=h(),f=p[d.VN.GRANULARITY],y={xAxisLabelIncrement:l.graphCardHelpers.getChartXAxisLabelIncrement(f),xAxisTickFormat:function(t){var e=t.item,a=t.previousItem,r=t.tick;return l.graphCardHelpers.xAxisTickFormat({tick:r,date:e.date,previousDate:a.date,granularity:f})},yAxisTickFormat:l.graphCardHelpers.yAxisTickFormat};return n().createElement(c.Chart,Object.assign({key:"chart_".concat(JSON.stringify(p))},y,{dataSets:(e=r,a=function(t){var a={data:e[t],id:t,strokeWidth:2,isStacked:!/^threshold/.test(t),isThreshold:/^threshold/.test(t)};return/^threshold/.test(t)&&(a.stroke=o.chart_color_green_300.value,a.strokeDasharray="4,3",a.strokeWidth=3),a},null!=m&&m.length?m.map((function(t){return Object.assign(a(t.id),t)})):Object.keys(e).map((function(t){return a(t)}))),chartLegend:function(t){var e=t.chart,a=t.datum;return n().createElement(u.default,{chart:e,datum:a})},chartTooltip:function(t){var e=t.datum;return n().createElement(s.default,{datum:e})}}))};h.defaultProps={graphData:{},useProductGraphConfig:i.useProductGraphConfig,useProductGraphTallyQuery:i.useProductGraphTallyQuery}},64418:function(t,e,a){a.r(e),a.d(e,{GraphCardChartLegend:function(){return h},default:function(){return h}});var r=a(92950),n=a.n(r),o=a(65834),i=a(89048),l=a(51858),c=a(61072),u=a(76006),s=a(83109),d=a(1138),h=function(t){var e=t.chart,a=t.datum,r=t.t,l=t.useDispatch,u=t.useSelectors,s=(0,t.useProduct)(),h=s.productLabel,m=s.viewId,p=l(),f=u(a.dataSets.map((function(t){var e=t.id;return function(t){var a;return null===(a=t.graph.legend)||void 0===a?void 0:a["".concat(m,"-").concat(e)]}})));(0,i.Z)((function(){a.dataSets.forEach((function(t,a){var r=t.id;((null==f?void 0:f[a])||e.isToggled(r))&&e.hide(r)}))}));var y=function(t){var a=e.toggle(t);p({type:c.JD.graph.SET_GRAPH_LEGEND,id:"".concat(m,"-").concat(t),value:a})};return n().createElement(n().Fragment,null,a.dataSets.map((function(t,a){var i=t.id,l=t.isThreshold,c=t.stroke,u=t.data,s=!(void 0===u?[]:u).find((function(t){var e=t.y,a=t.hasData;return e>=0&&!0===a||e>=0&&!0===l}))||!1,m=r(["curiosity-graph.label_".concat(l?"threshold":i),"curiosity-graph.label_no"],{product:h,context:h}),p=r("curiosity-graph.legendTooltip".concat(l?"_threshold":"","_").concat(i),{product:h,context:h},[n().createElement("span",{style:{whiteSpace:"nowrap"}})]),v=(null==f?void 0:f[a])||e.isToggled(i),g=n().createElement(o.Button,{onClick:function(){return y(i)},onKeyPress:function(){return y(i)},className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(i),variant:"link",component:"a",isDisabled:s,icon:(s||v)&&n().createElement(d.ChartIcon,{symbol:"eyeSlash"})||n().createElement(d.ChartIcon,{symbol:l?"dash":"square",style:{visibility:s||v?"hidden":"visible"},fill:c})},m);return p?n().createElement(o.Tooltip,{key:"curiosity-tooltip-".concat(i),content:n().createElement("p",null,p),position:o.TooltipPosition.top,enableFlip:!0,distance:5},g):g})))};h.defaultProps={chart:{hide:u.BM.noop,toggle:u.BM.noop,isToggled:u.BM.noop},datum:{dataSets:[]},t:s.translate,useDispatch:c.Cr.reactRedux.useDispatch,useSelectors:c.Cr.reactRedux.useSelectors,useProduct:l.useProduct}},44024:function(t,e,a){a.r(e),a.d(e,{GraphCardChartTooltip:function(){return h},default:function(){return h}});var r=a(92950),n=a.n(r),o=a(51858),i=a(78139),l=a(83109),c=a(60930),u=a(1138),s=a(46262),d=a(76006),h=function(t){var e=t.datum,a=t.t,r=t.useProduct,o=t.useProductGraphTallyQuery,l=r(),h=l.productId,m=l.productLabel,p=o()[s.O6.GRANULARITY],f=null,y=[],v=(e||{}).itemsByKey,g=void 0===v?{}:v;return Object.keys(g).reverse().forEach((function(t,e){var r,o,l,s;0===e&&(f=(0,i.getTooltipDate)({date:null===(s=g[t])||void 0===s?void 0:s.data.date,granularity:p}));var d={color:null===(r=g[t])||void 0===r?void 0:r.color};if((null===(o=g[t])||void 0===o?void 0:o.chartType)===c.ChartTypeVariant.threshold){var v,k,b,T=null!==(v=null===(k=g[t])||void 0===k?void 0:k.data.y)&&void 0!==v?v:a("curiosity-graph.label_noData");null!==(b=g[t])&&void 0!==b&&b.data.hasInfinite&&(T=d.color?n().createElement(u.ChartIcon,{symbol:"infinity",fill:"#ffffff",title:a("curiosity-graph.label_threshold",{context:"infinite"})}):a("curiosity-graph.label_threshold",{context:"infinite"})),d.label=a("curiosity-graph.label_threshold"),d.value=T}else{var E,C,x=!1===(null===(E=g[t])||void 0===E?void 0:E.data.hasData)&&a("curiosity-graph.label_noData")||(null===(C=g[t])||void 0===C?void 0:C.data.y)||0;d.label=a("curiosity-graph.label_".concat(t),{context:h,product:m}),d.value=x}d.chartType=null===(l=g[t])||void 0===l?void 0:l.chartType,y.push(d)})),n().createElement("div",{className:"curiosity-usage-graph__tooltip"},n().createElement("table",{summary:a("curiosity-graph.tooltipSummary")},y.length&&f&&n().createElement("thead",null,n().createElement("tr",null,n().createElement("th",{colSpan:2},f)))||null,y.length&&n().createElement("tbody",null,y.map((function(t){var e,a,r="number"==typeof t.value&&!Number.isInteger(t.value)&&(null===(e=d.BM.numberDisplay(t.value))||void 0===e||null===(a=e.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!0}))||void 0===a?void 0:a.toUpperCase())||t.value;return n().createElement("tr",{key:"tooltip-".concat(t.label)},n().createElement("th",null,t.chartType===c.ChartTypeVariant.threshold&&n().createElement(u.ChartIcon,{size:"sm",symbol:"dash",fill:t.color||"transparent"}),t.chartType!==c.ChartTypeVariant.threshold&&n().createElement(u.ChartIcon,{size:"sm",fill:t.color||"transparent"})," ",t.label),n().createElement("td",null,r))})))||null),!y.length&&a("curiosity-graph.label_noData",{context:"error"})||null)};h.defaultProps={datum:{},t:l.translate,useProduct:o.useProduct,useProductGraphTallyQuery:o.useProductGraphTallyQuery}},78139:function(t,e,a){a.r(e),a.d(e,{default:function(){return g},generateChartSettings:function(){return h},generateExtendedChartSettings:function(){return v},getChartXAxisLabelIncrement:function(){return m},getTooltipDate:function(){return p},graphCardHelpers:function(){return g},xAxisTickFormat:function(){return f},yAxisTickFormat:function(){return y}});var r=a(1413),n=a(45987),o=a(30381),i=a.n(o),l=a(77323),c=a(60930),u=a(30446),s=a(76006),d=["id","isStandalone"],h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=[],o=[];t.forEach((function(t){var i=t.id,u=t.isStandalone,s=void 0!==u&&u,h=(0,n.Z)(t,d);if(i){var m=(null==h?void 0:h.chartType)===c.ChartTypeVariant.threshold,p={id:i,isStacked:!m,isStandalone:s,isThreshold:m,isCapacity:m,strokeWidth:2};m&&(p.stroke=l.chart_color_green_300.value,p.strokeDasharray="4,3",p.strokeWidth=3),s?a.push({settings:(0,r.Z)((0,r.Z)({padding:{bottom:75,left:75,right:45,top:45}},e),{},{isStandalone:!0,metric:(0,r.Z)((0,r.Z)({},p),h),metrics:[(0,r.Z)((0,r.Z)({},p),h)]})}):o.push((0,r.Z)((0,r.Z)({},p),h))}}));var i=o.length&&{settings:(0,r.Z)((0,r.Z)({},e),{},{isStandalone:!1,metric:void 0,metrics:o})}||void 0;return{standaloneFiltersSettings:a,groupedFiltersSettings:i}},m=function(t){switch(t){case u.U9.DAILY:return 5;case u.U9.WEEKLY:case u.U9.MONTHLY:return 2;case u.U9.QUARTERLY:default:return 1}},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.date,a=t.granularity,r=i().utc(e);switch(a){case u.U9.QUARTERLY:return"".concat(r.format(s.i3.timestampQuarterFormats.yearShort)," - ").concat(r.add(1,"quarter").format(s.i3.timestampQuarterFormats.yearShort));case u.U9.MONTHLY:return r.format(s.i3.timestampMonthFormats.yearLong);case u.U9.WEEKLY:return"".concat(r.format(s.i3.timestampDayFormats.short)," - ").concat(r.add(1,"week").format(s.i3.timestampDayFormats.yearShort));case u.U9.DAILY:default:return r.format(s.i3.timestampDayFormats.long)}},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.callback,a=t.date,r=t.granularity,n=t.tick,o=t.previousDate;if(a&&r){if(e)return e({callback:e,date:a,granularity:r,tick:n,previousDate:o});var l,c=i().utc(a),d=0!==n&&Number.parseInt(c.year(),10)!==Number.parseInt(i().utc(o).year(),10);switch(r){case u.U9.QUARTERLY:l=(l=d?c.format(s.i3.timestampQuarterFormats.yearShort):c.format(s.i3.timestampQuarterFormats.short)).replace(/\s/,"\n");break;case u.U9.MONTHLY:l=(l=d?c.format(s.i3.timestampMonthFormats.yearShort):c.format(s.i3.timestampMonthFormats.short)).replace(/\s/,"\n");break;case u.U9.WEEKLY:case u.U9.DAILY:default:l=(l=d?c.format(s.i3.timestampDayFormats.yearShort):c.format(s.i3.timestampDayFormats.short)).replace(/\s(\d{4})$/,"\n$1")}return l}},y=function(){var t,e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.callback,n=a.tick;return r?r({tick:n}):null===(t=s.BM.numberDisplay(n))||void 0===t||null===(e=t.format({average:!0,mantissa:1,trimMantissa:!0,lowPrecision:!1}))||void 0===e?void 0:e.toUpperCase()},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.settings,a=t.granularity;return(0,r.Z)((0,r.Z)({},e),{},{xAxisLabelIncrement:m(a),xAxisTickFormat:function(t){var r=t.item,n=t.previousItem,o=t.tick;return f({callback:null==e?void 0:e.xAxisTickFormat,tick:o,date:r.date,previousDate:n.date,granularity:a})},yAxisTickFormat:function(t){var a=t.tick;return y({callback:null==e?void 0:e.yAxisTickFormat,tick:a})}})},g={generateChartSettings:h,generateExtendedChartSettings:v,getChartXAxisLabelIncrement:m,getTooltipDate:p,xAxisTickFormat:f,yAxisTickFormat:y}}}]);
//# sourceMappingURL=../sourcemaps/9270.3c746ae023188d88c90d5a96d472abf3.js.map