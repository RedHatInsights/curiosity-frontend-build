"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[1799,4339,939,4024,5394],{91799:function(e,t,r){r.r(t),r.d(t,{GraphCardChart:function(){return m},default:function(){return m}});var a=r(92950),n=r.n(a),o=r(90154),i=r(51858),l=r(25394),u=r(78139),c=r(60930),s=r(24339),d=r(44024),p=r(99171),h=r(46262),v=r(91339),f=r(1797),g=r(83109),m=function(e){var t=e.t,r=e.useGetMetrics,a=e.useGraphCardActions,i=e.useGraphCardContext,l=e.useProductGraphTallyQuery,g=a(),m=i().settings,y=void 0===m?{}:m,C=y.stringId,E=l()[h.O6.GRANULARITY],T=r(),G=T.pending,b=T.error,x=T.dataSets,P=void 0===x?[]:x;return n().createElement(o.Card,{isPlain:!0,className:"curiosity-usage-graph"},n().createElement(o.CardHeader,null,n().createElement(o.CardTitle,null,n().createElement(o.Title,{headingLevel:"h2",size:"lg"},t("curiosity-graph.cardHeading",{context:C}),n().createElement(p.GraphCardChartTitleTooltip,null))),g&&n().createElement(o.CardActions,{className:b?"blur":""},n().createElement(o.Toolbar,{collapseListedFiltersBreakpoint:"sm"},n().createElement(o.ToolbarContent,null,n().createElement(o.ToolbarGroup,{alignment:{default:"alignRight"}},g))))),n().createElement(v.MinHeight,{key:"bodyMinHeight"},n().createElement(o.CardBody,null,n().createElement("div",{className:(b?"blur":G&&"fadein")||""},G&&n().createElement(f.Loader,{variant:"graph"}),!G&&n().createElement(c.Chart,Object.assign({},u.graphCardHelpers.generateExtendedChartSettings({settings:y,granularity:E}),{dataSets:P,chartLegend:function(e){var t=e.chart,r=e.datum;return n().createElement(s.GraphCardChartLegend,{chart:t,datum:r})},chartTooltip:function(e){var t=e.datum;return n().createElement(d.GraphCardChartTooltip,{datum:t})}}))))))};m.defaultProps={t:g.translate,useGetMetrics:l.useGetMetrics,useGraphCardActions:l.useGraphCardActions,useGraphCardContext:l.useGraphCardContext,useProductGraphTallyQuery:i.useProductGraphTallyQuery}},24339:function(e,t,r){r.r(t),r.d(t,{GraphCardChartLegend:function(){return y},default:function(){return y}});var a=r(93433),n=r(83878),o=r(59199),i=r(40181),l=r(25267),u=r(92950),c=r.n(u),s=r(90154),d=r(89048),p=r(51858),h=r(25394),v=r(82410),f=r(76006),g=r(83109),m=r(1138),y=function(e){var t,r=e.chart,u=e.datum,p=e.t,h=e.useDispatch,f=e.useGraphCardContext,g=e.useSelectors,y=e.useProduct,C=f().settings,E=void 0===C?{}:C,T=y(),G=T.productLabel,b=T.viewId,x=E.isDisabledLegendClick,P=h(),S=(t=g([function(e){var t;return null===(t=e.graph.legend)||void 0===t?void 0:t["".concat(b,"-inverted")]}].concat((0,a.Z)(u.dataSets.map((function(e){var t=e.id;return function(e){var r;return null===(r=e.graph.legend)||void 0===r?void 0:r["".concat(b,"-").concat(t)]}}))))),(0,n.Z)(t)||(0,o.Z)(t)||(0,i.Z)(t)||(0,l.Z)()),D=S[0],I=S.slice(1);(0,d.Z)((function(){u.dataSets.forEach((function(e,t){var a=e.id,n=e.isToolbarFilter;D&&n?new RegExp(D).test(a)||r.hide(a):((null==I?void 0:I[t])||r.isToggled(a))&&r.hide(a)}))}));var M=function(e){var t=r.toggle(e);P({type:v.JD.graph.SET_GRAPH_LEGEND,id:"".concat(b,"-").concat(e),value:t})};return c().createElement(c().Fragment,null,u.dataSets.map((function(e,t){var a=e.id,n=e.isThreshold,o=e.stroke,i=e.data,l=!(void 0===i?[]:i).find((function(e){var t=e.y,r=e.hasData;return t>=0&&!0===r||t>=0&&!0===n}))||!1,u=p(["curiosity-graph.label","curiosity-graph.label_no"],{product:G,context:a}),d=p("curiosity-graph.legendTooltip",{product:G,context:a},[c().createElement("span",{style:{whiteSpace:"nowrap"}})]),h=(null==I?void 0:I[t])||r.isToggled(a),v={};x||(v.onClick=function(){return M(a)},v.onKeyPress=function(){return M(a)});var f=c().createElement(s.Button,Object.assign({},v,{className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(a),variant:"link",component:"a",isDisabled:null!=x?x:l,icon:(l||h)&&c().createElement(m.ChartIcon,{symbol:"eyeSlash"})||c().createElement(m.ChartIcon,{symbol:n?"dash":"square",style:{visibility:l||h?"hidden":"visible"},fill:o})}),u);return d?c().createElement(s.Tooltip,{key:"curiosity-tooltip-".concat(a),content:c().createElement("p",null,d),position:s.TooltipPosition.top,enableFlip:!0,distance:5},c().createElement("span",{className:"pf-c-button pf-m-link curiosity-usage-graph__legend-item-wrapper"},f)):f})))};y.defaultProps={chart:{hide:f.BM.noop,toggle:f.BM.noop,isToggled:f.BM.noop},datum:{dataSets:[]},t:g.translate,useDispatch:v.Cr.reactRedux.useDispatch,useGraphCardContext:h.useGraphCardContext,useProduct:p.useProduct,useSelectors:v.Cr.reactRedux.useSelectors}},99171:function(e,t,r){r.r(t),r.d(t,{GraphCardChartTitleTooltip:function(){return c},default:function(){return c}});var a=r(92950),n=r.n(a),o=r(90154),i=r(15138),l=r(25394),u=r(83109),c=function(e){var t=e.t,r=(0,e.useGraphCardContext)().settings,a=void 0===r?{}:r,l=a.isCardTitleDescription,u=a.stringId;return l?n().createElement(o.Tooltip,{content:n().createElement("p",null,t("curiosity-graph.cardHeadingDescription",{context:u})),position:o.TooltipPosition.top,enableFlip:!1,distance:5,entryDelay:100,exitDelay:0},n().createElement("span",{className:"curiosity-icon__question"},n().createElement(i.OutlinedQuestionCircleIcon,null))):null};c.defaultProps={t:u.translate,useGraphCardContext:l.useGraphCardContext}},44024:function(e,t,r){r.r(t),r.d(t,{GraphCardChartTooltip:function(){return p},default:function(){return p}});var a=r(92950),n=r.n(a),o=r(51858),i=r(78139),l=r(83109),u=r(60930),c=r(1138),s=r(46262),d=r(76006),p=function(e){var t=e.datum,r=e.t,a=e.useProduct,o=e.useProductGraphTallyQuery,l=a().productLabel,p=o()[s.O6.GRANULARITY],h=null,v=[],f=(t||{}).itemsByKey,g=void 0===f?{}:f;return Object.keys(g).reverse().forEach((function(e,t){var a,o,s,d;0===t&&(h=(0,i.getTooltipDate)({date:null===(d=g[e])||void 0===d?void 0:d.data.date,granularity:p}));var f={color:null===(a=g[e])||void 0===a?void 0:a.color};if((null===(o=g[e])||void 0===o?void 0:o.chartType)===u.ChartTypeVariant.threshold){var m,y,C,E,T=null!==(m=null===(y=g[e])||void 0===y?void 0:y.data.y)&&void 0!==m?m:r("curiosity-graph.label",{context:"noData"});(null!==(C=g[e])&&void 0!==C&&C.data.hasInfinite||null!==(E=g[e])&&void 0!==E&&E.data.hasInfiniteQuantity)&&(T=r("curiosity-graph.label",{context:["threshold","infinite"]},[f.color&&n().createElement(c.ChartIcon,{symbol:"infinity",fill:"#ffffff",title:r("curiosity-graph.label",{context:["threshold","infinite"]})})])),f.label=r("curiosity-graph.label",{context:["threshold"]}),f.value=T}else{var G,b,x=!1===(null===(G=g[e])||void 0===G?void 0:G.data.hasData)&&r("curiosity-graph.label",{context:"noData"})||(null===(b=g[e])||void 0===b?void 0:b.data.y)||0;f.label=r("curiosity-graph.label",{context:e,product:l}),f.value=x}f.chartType=null===(s=g[e])||void 0===s?void 0:s.chartType,v.push(f)})),n().createElement("div",{className:"curiosity-usage-graph__tooltip"},n().createElement("table",{summary:r("curiosity-graph.tooltipSummary")},v.length&&h&&n().createElement("thead",null,n().createElement("tr",null,n().createElement("th",{colSpan:2},h)))||null,v.length&&n().createElement("tbody",null,v.map((function(e){var t,r,a="number"==typeof e.value&&!Number.isInteger(e.value)&&(null===(t=d.BM.numberDisplay(e.value))||void 0===t||null===(r=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!0}))||void 0===r?void 0:r.toUpperCase())||e.value;return n().createElement("tr",{key:"tooltip-".concat(e.label)},n().createElement("th",null,e.chartType===u.ChartTypeVariant.threshold&&n().createElement(c.ChartIcon,{size:"sm",symbol:"dash",fill:e.color||"transparent"}),e.chartType!==u.ChartTypeVariant.threshold&&n().createElement(c.ChartIcon,{size:"sm",fill:e.color||"transparent"})," ",e.label),n().createElement("td",null,a))})))||null),!v.length&&r("curiosity-graph.label",{context:["noData","error"]})||null)};p.defaultProps={datum:{},t:l.translate,useProduct:o.useProduct,useProductGraphTallyQuery:o.useProductGraphTallyQuery}},25394:function(e,t,r){r.r(t),r.d(t,{DEFAULT_CONTEXT:function(){return g},GraphCardContext:function(){return m},context:function(){return b},default:function(){return b},useGetMetrics:function(){return T},useGraphCardActions:function(){return G},useGraphCardContext:function(){return y},useMetricsSelector:function(){return E},useParseFiltersSettings:function(){return C}});var a=r(1413),n=r(45987),o=r(92950),i=r.n(o),l=r(17297),u=r(90154),c=r(82410),s=r(51858),d=r(70136),p=r(62834),h=r(78139),v=["error","fulfilled","pending","data"],f=["id","content"],g=[{settings:{metrics:[]}},p.B.noop],m=i().createContext(g),y=function(){return(0,o.useContext)(m)},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProduct,r=void 0===t?s.useProduct:t,a=e.useProductGraphConfig,n=void 0===a?s.useProductGraphConfig:a,i=r(),l=i.productId,u=n(),c=u.filters,d=void 0===c?[]:c,p=u.settings,v=void 0===p?{}:p;return(0,o.useMemo)((function(){return h.graphCardHelpers.generateChartSettings({filters:d,settings:v,productId:l})}),[d,v,l])},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGraphCardContext,r=void 0===t?y:t,o=e.useSelectorsResponse,i=void 0===o?c.Cr.reactRedux.useSelectorsResponse:o,l=r(),u=l.settings,s=void 0===u?{}:u,d=s.metrics,p=void 0===d?[]:d,h=i(p.map((function(e){var t=e.id,r=e.isCapacity;return function(e){var a,n,o=e.graph;return r?null===(a=o.capacity)||void 0===a?void 0:a[t]:null===(n=o.tally)||void 0===n?void 0:n[t]}}))),f=h.error,g=h.fulfilled,m=h.pending,C=h.data,E=void 0===C?[]:C,T=(0,n.Z)(h,v),G={},b=null==E?void 0:E.map((function(e,t){var r=(0,a.Z)((0,a.Z)({},p[t]),e);return G[p[t].id]=r,r}));return(0,a.Z)((0,a.Z)({},T),{},{data:G,dataSets:b,error:f,fulfilled:g,pending:m})},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getGraphMetrics,r=void 0===t?c.Ak.rhsm.getGraphMetrics:t,a=e.useDispatch,n=void 0===a?c.Cr.reactRedux.useDispatch:a,o=e.useGraphCardContext,i=void 0===o?y:o,u=e.useMetricsSelector,d=void 0===u?E:u,p=e.useProduct,h=void 0===p?s.useProduct:p,v=e.useProductGraphTallyQuery,f=void 0===v?s.useProductGraphTallyQuery:v,g=h(),m=g.productId,C=f(),T=n(),G=d(),b=i(),x=b.settings,P=void 0===x?{}:x,S=P.metrics,D=void 0===S?[]:S;return(0,l.Z)((function(){var e=D.map((function(e){var t=e.metric,r=e.isCapacity,a=e.query;return{id:m,metric:t,isCapacity:r,query:a}}));r(e,C)(T)}),[D,m,C]),G},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.categoryOptions,r=void 0===t?d.toolbarFieldOptions:t,a=e.useMetricsSelector,l=void 0===a?E:a,c=e.useGraphCardContext,s=void 0===c?y:c,h=l(),v=h.pending,g=h.dataSets,m=s(),C=m.settings,T=void 0===C?{}:C,G=T.actions;return(0,o.useMemo)((function(){return null==G?void 0:G.map((function(e){var t=e.id,a=e.content,o=(0,n.Z)(e,f),l=(r.find((function(e){var r=e.value;return t===r}))||{}).component;return l&&i().createElement(u.ToolbarItem,{key:"option-".concat(t)},i().createElement(l,Object.assign({isFilter:!1},o)))||a&&!v&&g.length&&i().createElement(u.ToolbarItem,{key:t||p.B.generateId()},"function"==typeof a?a({data:g}):a)||null}))}),[G,r,g,v])},b={GraphCardContext:m,DEFAULT_CONTEXT:g,useGetMetrics:T,useGraphCardActions:G,useGraphCardContext:y,useMetricsSelector:E,useParseFiltersSettings:C}}}]);
//# sourceMappingURL=../sourcemaps/1799.278496d665e4dd2fd16b6f3bbbbba771.js.map