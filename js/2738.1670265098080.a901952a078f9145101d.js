"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[2738,9844,1858,9942],{49844:function(t,e,n){n.r(e),n.d(e,{Select:function(){return P},SelectDirection:function(){return E},SelectPosition:function(){return b},default:function(){return P}});var i=n(29439),r=n(1413),o=n(15671),u=n(43144),l=n(60136),s=n(54062),a=n(92950),c=n.n(a),d=n(54653),v=n(50361),p=n.n(v),f=n(18446),y=n.n(f),g=n(30998),S=n.n(g),h=n(68630),T=n.n(h),I=n(62834),E=d.DropdownDirection,b=d.DropdownPosition,P=function(t){(0,l.Z)(n,t);var e=(0,s.Z)(n);function n(){var t;(0,o.Z)(this,n);for(var i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];return(t=e.call.apply(e,[this].concat(u))).state={isExpanded:!1,options:null,selected:null},t.selectField=c().createRef(),t.onSelect=function(e,n){var i=t.state.options,o=t.props,u=o.id,l=o.name,s=o.onSelect,a=o.variant,c=i,v=c.findIndex((function(t){return t.title===n}));c[v].selected=a===d.SelectVariant.single||!c[v].selected,a===d.SelectVariant.single&&c.forEach((function(t,e){v!==e&&(c[e].selected=!1)}));var f=a===d.SelectVariant.single?n:c.filter((function(t){return!0===t.selected})).map((function(t){return t.title}));t.setState({options:c,selected:f},(function(){var e=p()(c),n={id:u,name:l||u,value:e[v].value,selected:a===d.SelectVariant.single&&e[v]||p()(f),selectedIndex:v,type:"select-".concat(a===d.SelectVariant.single?"one":"multiple"),options:e};a===d.SelectVariant.checkbox&&(n.checked=e[v].selected);var i=(0,r.Z)((0,r.Z)({},n),{},{target:(0,r.Z)({},n),currentTarget:(0,r.Z)({},n),persist:I.B.noop});s((0,r.Z)({},i),v,e),a===d.SelectVariant.single&&t.setState({isExpanded:!1})}))},t.onToggle=function(e){t.setState({isExpanded:e})},t}return(0,u.Z)(n,[{key:"componentDidMount",value:function(){null===this.state.options&&this.formatOptions()}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.options,i=e.selectedOptions;y()(t.options,n)&&y()(t.selectedOptions,i)||this.formatOptions()}},{key:"formatOptions",value:function(){var t,e,n=this.selectField.current,o=void 0===n?{}:n,u=this.props,l=u.options,s=u.selectedOptions,a=u.variant,c=Object.entries(this.props).filter((function(t){var e=(0,i.Z)(t,1)[0];return/^data-/i.test(e)})),v=T()(l)?Object.entries(l).map((function(t){var e=(0,i.Z)(t,2),n=e[0],o=e[1];return(0,r.Z)((0,r.Z)({},o),{},{title:n,value:o})})):p()(l),f=s&&"string"==typeof s||"number"==typeof s?[s]:s;v.forEach((function(t,e){var n,i=t;("string"==typeof i&&(i={title:t,value:t},v[e]=i),i.text=i.text||i.title,i.textContent=i.textContent||i.title,i.label=i.label||i.title,f)&&(T()(i.value)?(n=S()(f,i.value)>-1)||(n=!!f.find((function(t){return Object.values(i.value).includes(t)}))):n=f.includes(i.value),n||(n=f.includes(i.title)),v[e].selected=n)})),e=a===d.SelectVariant.single?(v.find((function(t){return!0===t.selected}))||{}).title:v.filter((function(t){return!0===t.selected})).map((function(t){return t.title})),null!=o&&null!==(t=o.parentRef)&&void 0!==t&&t.current&&c.forEach((function(t){var e,n=(0,i.Z)(t,2),r=n[0],u=n[1];return null==o||null===(e=o.parentRef)||void 0===e?void 0:e.current.setAttribute(r,u)})),this.setState({options:v,selected:e})}},{key:"render",value:function(){var t=this.state,e=t.options,n=t.selected,i=t.isExpanded,r=this.props,o=r.ariaLabel,u=r.className,l=r.direction,s=r.isDisabled,a=r.isFlipEnabled,v=r.isToggleText,p=r.maxHeight,f=r.placeholder,y=r.position,g=r.toggleIcon,S=r.variant,h={direction:l,isFlipEnabled:a,maxHeight:p};return e&&e.length&&!s||(h.isDisabled=!0),c().createElement("div",{className:"curiosity-select"},c().createElement(d.Select,Object.assign({menuAppendTo:"parent",className:"curiosity-select-pf".concat(v?"":"__no-toggle-text"," ").concat(y===d.DropdownPosition.right?"curiosity-select-pf__position-right":""," ").concat(u),variant:S,"aria-label":o,onToggle:this.onToggle,onSelect:this.onSelect,selections:n,isOpen:i,toggleIcon:g,placeholderText:f,ref:this.selectField},h),e&&e.map((function(t){return c().createElement(d.SelectOption,{key:window.btoa("".concat(t.title,"-").concat(t.value)),id:window.btoa("".concat(t.title,"-").concat(t.value)),value:t.title,"data-value":T()(t.value)&&JSON.stringify([t.value])||t.value,"data-title":t.title})}))||[]))}}]),n}(c().Component);P.defaultProps={ariaLabel:"Select option",className:"",direction:E.down,id:I.B.generateId(),isDisabled:!1,isFlipEnabled:!1,isToggleText:!0,maxHeight:null,name:null,onSelect:I.B.noop,options:[],placeholder:"Select option",position:b.left,selectedOptions:null,toggleIcon:null,variant:d.SelectVariant.single}},51858:function(t,e,n){n.r(e),n.d(e,{DEFAULT_CONTEXT:function(){return p},ProductViewContext:function(){return f},context:function(){return F},default:function(){return F},useProduct:function(){return P},useProductContext:function(){return b},useProductGraphConfig:function(){return _},useProductGraphTallyQuery:function(){return h},useProductInventoryGuestsConfig:function(){return C},useProductInventoryGuestsQuery:function(){return T},useProductInventoryHostsConfig:function(){return x},useProductInventoryHostsQuery:function(){return I},useProductInventorySubscriptionsConfig:function(){return O},useProductInventorySubscriptionsQuery:function(){return E},useProductQuery:function(){return S},useProductQueryFactory:function(){return g},useProductToolbarConfig:function(){return m}});var i=n(45987),r=n(4942),o=n(1413),u=n(92950),l=n.n(u),s=n(48253),a=n(2606),c=n(46262),d=n(62834),v=["initialGraphFilters","initialInventoryFilters","initialSubscriptionsInventoryFilters","productContextFilterUom"],p=[{},d.B.noop],f=l().createContext(p),y=function(){return(0,u.useContext)(f)},g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.overrideId,i=e.useProductViewContext,r=void 0===i?y:i,u=r(),l=u[t],s=u.productId,c=u.viewId,d=a.Cr.reactRedux.useSelector((function(e){var i,r=e.view;return null==r||null===(i=r[t])||void 0===i?void 0:i[n]}),void 0),v=a.Cr.reactRedux.useSelector((function(e){var n,i=e.view;return null==i||null===(n=i[t])||void 0===n?void 0:n[s]}),void 0),p=a.Cr.reactRedux.useSelector((function(e){var n,i=e.view;return null==i||null===(n=i[t])||void 0===n?void 0:n[c]}),void 0);return(0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},l),d),v),p)},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.queryType,n=void 0===e?"query":e,i=t.options;return g(n,i)},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.queryType,n=void 0===e?"graphTallyQuery":e,i=t.schemaCheck,r=void 0===i?c.pM.RHSM_API_QUERY_SET_TALLY_CAPACITY_TYPES:i,u=t.options;return s.V.setApiQuery((0,o.Z)((0,o.Z)({},S()),g(n,u)),r)},T=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.defaultLimit,i=void 0===n?100:n,u=e.defaultOffset,l=void 0===u?0:u,a=e.queryType,d=void 0===a?"inventoryGuestsQuery":a,v=e.schemaCheck,p=void 0===v?c.pM.RHSM_API_QUERY_SET_INVENTORY_TYPES:v,f=e.options;return s.V.setApiQuery((0,o.Z)((0,o.Z)((t={},(0,r.Z)(t,c.O6.LIMIT,i),(0,r.Z)(t,c.O6.OFFSET,l),t),S()),g(d,f)),p)},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.queryType,n=void 0===e?"inventoryHostsQuery":e,i=t.schemaCheck,r=void 0===i?c.pM.RHSM_API_QUERY_SET_INVENTORY_TYPES:i,u=t.options;return s.V.setApiQuery((0,o.Z)((0,o.Z)({},S()),g(n,u)),r)},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.queryType,n=void 0===e?"inventorySubscriptionsQuery":e,i=t.schemaCheck,r=void 0===i?c.pM.RHSM_API_QUERY_SET_INVENTORY_TYPES:i,u=t.options;return s.V.setApiQuery((0,o.Z)((0,o.Z)({},S()),g(n,u)),r)},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductQuery,n=void 0===e?S:e,r=t.useProductViewContext,l=void 0===r?y:r,s=n(),a=s[c.O6.UOM],d=l(),p=d.initialGraphFilters,f=void 0===p?[]:p,g=d.initialInventoryFilters,h=void 0===g?[]:g,T=d.initialSubscriptionsInventoryFilters,I=void 0===T?[]:T,E=d.productContextFilterUom,b=(0,i.Z)(d,v),P=(0,u.useCallback)((function(){if(!0===E){var t=function(t){var e=t.id,n=t.metric;return!t.isOptional||new RegExp(a,"i").test(n)||new RegExp(a,"i").test(e)};return(0,o.Z)((0,o.Z)({},b),{},{initialGraphFilters:f.filter(t),initialInventoryFilters:h.filter(t),initialSubscriptionsInventoryFilters:I.filter(t)})}return(0,o.Z)((0,o.Z)({},b),{},{initialGraphFilters:f,initialInventoryFilters:h,initialSubscriptionsInventoryFilters:I})}),[b,f,h,I,E,a]);return P()},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductViewContext,n=void 0===e?y:e,i=n(),r=i.productGroup,o=i.productId,u=i.productLabel,l=i.viewId;return{productGroup:r,productId:o,productLabel:u,viewId:l}},_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductContext,n=void 0===e?b:e,i=n(),r=i.initialGraphFilters,o=i.initialGraphSettings,u=void 0===o?{}:o;return{filters:r,settings:u}},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductContext,n=void 0===e?b:e,i=n(),r=i.inventoryGuestsQuery,o=void 0===r?{}:r,u=i.initialGuestsFilters,l=i.initialGuestsSettings,s=void 0===l?{}:l;return{filters:u,initialQuery:o,settings:s}},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductContext,n=void 0===e?b:e,i=n(),r=i.initialInventoryFilters,o=i.initialInventorySettings,u=void 0===o?{}:o;return{filters:r,settings:u}},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductContext,n=void 0===e?b:e,i=n(),r=i.initialSubscriptionsInventoryFilters,o=i.initialSubscriptionsInventorySettings,u=void 0===o?{}:o;return{filters:r,settings:u}},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useProductContext,n=void 0===e?b:e,i=n(),r=i.initialToolbarFilters,o=i.initialToolbarSettings,u=void 0===o?{}:o,l=i.initialSecondaryToolbarFilters;return{filters:r,secondaryFilters:l,settings:u}},F={ProductViewContext:f,DEFAULT_CONTEXT:p,useProductContext:b,useQuery:S,useQueryFactory:g,useGraphTallyQuery:h,useInventoryGuestsQuery:T,useInventoryHostsQuery:I,useInventorySubscriptionsQuery:E,useProduct:P,useGraphConfig:_,useInventoryGuestsConfig:C,useInventoryHostsConfig:x,useInventorySubscriptionsConfig:O,useToolbarConfig:m}},2738:function(t,e,n){n.r(e),n.d(e,{ToolbarFieldGranularity:function(){return y},default:function(){return y},toolbarFieldOptions:function(){return p},useOnSelect:function(){return f}});var i=n(1413),r=n(4942),o=n(92950),u=n.n(o),l=n(87284),s=n(51858),a=n(49844),c=n(46262),d=n(76006),v=n(83109),p=Object.values(c.U9).map((function(t){return{title:(0,v.translate)("curiosity-toolbar.granularity",{context:t}),value:t,selected:!1}})),f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.useDispatch,n=void 0===e?l.Cr.reactRedux.useDispatch:e,i=t.useProduct,o=void 0===i?s.useProduct:i,u=o(),a=u.viewId,v=n();return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.value,n=void 0===e?null:e,i=d.i3.getRangedDateTime(n),o=i.startDate,u=i.endDate;v([{type:l.JD.query.SET_QUERY_CLEAR_INVENTORY_LIST,viewId:a},(0,r.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[c.O6.GRANULARITY],viewId:a},c.O6.GRANULARITY,n),(0,r.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[c.O6.START_DATE],viewId:a},c.O6.START_DATE,o.toISOString()),(0,r.Z)({type:l.JD.query.SET_QUERY_RHSM_TYPES[c.O6.END_DATE],viewId:a},c.O6.END_DATE,u.toISOString())])}},y=function(t){var e=t.isFilter,n=t.options,r=t.position,o=t.t,l=t.useOnSelect,s=(0,t.useProductGraphTallyQuery)()[c.O6.GRANULARITY],d=l(),v=n.map((function(t){return(0,i.Z)((0,i.Z)({},t),{},{selected:t.value===s})}));return u().createElement(a.Select,{"aria-label":o("curiosity-toolbar.placeholder".concat(e?"_filter":""),{context:"granularity"}),onSelect:d,options:v,selectedOptions:s,placeholder:o("curiosity-toolbar.placeholder".concat(e?"_filter":""),{context:"granularity"}),position:r,"data-test":"toolbarFieldGranularity"})};y.defaultProps={isFilter:!1,options:p,position:a.SelectPosition.left,t:v.translate,useOnSelect:f,useProductGraphTallyQuery:s.useProductGraphTallyQuery}}}]);
//# sourceMappingURL=../sourcemaps/2738.8dca3d1d0612f4001dca6ed02beb82d2.js.map