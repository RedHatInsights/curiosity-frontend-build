"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[9407,5394],{25394:function(e,t,r){r.r(t),r.d(t,{DEFAULT_CONTEXT:function(){return g},GraphCardContext:function(){return m},context:function(){return G},default:function(){return G},useGetMetrics:function(){return E},useGraphCardActions:function(){return M},useGraphCardContext:function(){return y},useMetricsSelector:function(){return S},useParseFiltersSettings:function(){return C}});var n=r(1413),a=r(45987),i=r(92950),o=r.n(i),u=r(17297),l=r(90154),s=r(82410),c=r(51858),d=r(70136),p=r(62834),v=r(78139),f=["error","fulfilled","pending","data"],h=["id","content"],g=[{settings:{metrics:[]}},p.B.noop],m=o().createContext(g),y=function(){return(0,i.useContext)(m)},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProduct,r=void 0===t?c.useProduct:t,n=e.useProductGraphConfig,a=void 0===n?c.useProductGraphConfig:n,o=r().productId,u=a(),l=u.filters,s=void 0===l?[]:l,d=u.settings,p=void 0===d?{}:d;return(0,i.useMemo)((function(){return v.graphCardHelpers.generateChartSettings({filters:s,settings:p,productId:o})}),[s,p,o])},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGraphCardContext,r=void 0===t?y:t,i=e.useSelectorsResponse,o=void 0===i?s.Cr.reactRedux.useSelectorsResponse:i,u=r().settings,l=(void 0===u?{}:u).metrics,c=void 0===l?[]:l,d=o(c.map((function(e){var t=e.id,r=e.isCapacity;return function(e){var n,a,i=e.graph;return r?null===(n=i.capacity)||void 0===n?void 0:n[t]:null===(a=i.tally)||void 0===a?void 0:a[t]}}))),p=d.error,v=d.fulfilled,h=d.pending,g=d.data,m=void 0===g?[]:g,C=(0,a.Z)(d,f),S={},E=null==m?void 0:m.map((function(e,t){var r=(0,n.Z)((0,n.Z)({},c[t]),e);return S[c[t].id]=r,r}));return(0,n.Z)((0,n.Z)({},C),{},{data:S,dataSets:E,error:p,fulfilled:v,pending:h})},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getGraphMetrics,r=void 0===t?s.Ak.rhsm.getGraphMetrics:t,n=e.useDispatch,a=void 0===n?s.Cr.reactRedux.useDispatch:n,i=e.useGraphCardContext,o=void 0===i?y:i,l=e.useMetricsSelector,d=void 0===l?S:l,p=e.useProduct,v=void 0===p?c.useProduct:p,f=e.useProductGraphTallyQuery,h=void 0===f?c.useProductGraphTallyQuery:f,g=v().productId,m=h(),C=a(),E=d(),M=o().settings,G=(void 0===M?{}:M).metrics,T=void 0===G?[]:G;return(0,u.Z)((function(){var e=T.map((function(e){var t=e.metric,r=e.isCapacity,n=e.query;return{id:g,metric:t,isCapacity:r,query:n}}));r(e,m)(C)}),[T,g,m]),E},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.categoryOptions,r=void 0===t?d.toolbarFieldOptions:t,n=e.useMetricsSelector,u=void 0===n?S:n,s=e.useGraphCardContext,c=void 0===s?y:s,v=u(),f=v.pending,g=v.dataSets,m=c().settings,C=(void 0===m?{}:m).actions;return(0,i.useMemo)((function(){return null==C?void 0:C.map((function(e){var t=e.id,n=e.content,i=(0,a.Z)(e,h),u=(r.find((function(e){var r=e.value;return t===r}))||{}).component;return u&&o().createElement(l.ToolbarItem,{key:"option-".concat(t)},o().createElement(u,Object.assign({isFilter:!1},i)))||n&&!f&&g.length&&o().createElement(l.ToolbarItem,{key:t||p.B.generateId()},"function"==typeof n?n({data:g}):n)||null}))}),[C,r,g,f])},G={GraphCardContext:m,DEFAULT_CONTEXT:g,useGetMetrics:E,useGraphCardActions:M,useGraphCardContext:y,useMetricsSelector:S,useParseFiltersSettings:C}},29407:function(e,t,r){r.r(t),r.d(t,{GraphCardMetricTotals:function(){return f},default:function(){return f}});var n=r(92950),a=r.n(n),i=r(90154),o=r(68929),u=r.n(o),l=r(51858),s=r(25394),c=r(1797),d=r(65876),p=r(46262),v=r(76006),f=function(e){var t,r=e.children,n=e.useGraphCardContext,o=e.useMetricsSelector,l=e.useProductGraphTallyQuery,s=n().settings,f=void 0===s?{}:s,h=l()[p.O6.START_DATE],g=o(),m=g.pending,y=g.error,C=g.fulfilled,S=g.dataSets,E=(void 0===S?[]:S)[0]||{},M=E.data,G=void 0===M?[]:M,T=E.id,D=E.metric,P=E.meta,k=void 0===P?{}:P,x=G[G.length-1]||{},_=x.date,I=x.hasData,b=x.y,O=G.find((function(e){return!0===e.isCurrentDate}))||{},F=O.date,N=O.hasData,z=O.y,A=k.totalMonthlyDate,Z=k.totalMonthlyHasData,H=k.totalMonthlyValue,L=d.toolbarFieldOptions.find((function(e){return e.title===h||e.value.startDate.toISOString()===h}))||{},B=L.title,Q=L.isCurrent,R=Q?F:_,V=Q?N:I,j=Q?z:b;if(null!=f&&f.isMetricDisplay&&null!=f&&null!==(t=f.cards)&&void 0!==t&&t.length){var q,w,U,X=v.BM.setImmutableData({chartId:T,dailyDate:R,dailyHasData:V,dailyValue:j,metricId:D,groupMetricId:f.groupMetric,monthlyDate:A,monthlyHasData:Z,monthlyValue:H,selectedValue:B},{isClone:!0});return a().createElement("div",{"data-test":"graphMetricTotals-".concat(null==f||null===(q=f.groupMetric)||void 0===q||null===(w=q.map((function(e){return u()(e)})))||void 0===w?void 0:w.join("-")),"data-test-data":JSON.stringify(X),className:"curiosity-usage-graph__totals"},a().createElement("div",null,a().createElement("div",{className:"curiosity-usage-graph__totals-column"},null==f||null===(U=f.cards)||void 0===U?void 0:U.map((function(e,t){var r=e.key,n=e.header,o=e.body,u=e.footer;return a().createElement(i.Card,{key:r||v.BM.generateHash({metricDisplayPassedData:X,index:t}),isPlain:!0,"data-test":"graphMetricTotalsCard-".concat(t),className:"curiosity-usage-graph__totals-column-card ".concat(y?"blur":"")},a().createElement(i.CardHeader,null,a().createElement(i.CardTitle,null,a().createElement(i.Title,{headingLevel:"h2",size:"md"},m&&a().createElement(c.Loader,{variant:"skeleton",skeletonProps:{size:c.SkeletonSize.lg}}),C&&("function"==typeof n&&n(X)||n)))),a().createElement(i.CardBody,null,a().createElement("div",null,m&&a().createElement(c.Loader,{variant:"skeleton",skeletonProps:{size:c.SkeletonSize.lg,height:"60px"}}),C&&("function"==typeof o&&o(X)||o))),a().createElement(i.CardFooter,null,a().createElement("div",null,m&&a().createElement(c.Loader,{variant:"skeleton",skeletonProps:{size:c.SkeletonSize.lg}}),C&&("function"==typeof u&&u(X)||u))))})))),a().createElement("div",null,a().createElement("div",{className:"curiosity-usage-graph__totals-graph-column"},r)))}return a().createElement("div",{"data-test":"graphStandalone",className:"curiosity-usage-graph__standalone"},r)};f.defaultProps={children:null,useGraphCardContext:s.useGraphCardContext,useMetricsSelector:s.useMetricsSelector,useProductGraphTallyQuery:l.useProductGraphTallyQuery}}}]);
//# sourceMappingURL=../sourcemaps/9407.c8eb509dfd36b573087bfb9e3014ad1e.js.map