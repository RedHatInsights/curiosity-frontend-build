"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[9407,5394],{25394:function(e,t,r){r.r(t),r.d(t,{DEFAULT_CONTEXT:function(){return g},GraphCardContext:function(){return m},context:function(){return G},default:function(){return G},useGetMetrics:function(){return E},useGraphCardActions:function(){return M},useGraphCardContext:function(){return y},useMetricsSelector:function(){return S},useParseFiltersSettings:function(){return C}});var n=r(1413),a=r(45987),i=r(92950),o=r.n(i),u=r(17297),l=r(90154),s=r(82410),c=r(51858),d=r(70136),p=r(62834),v=r(78139),f=["error","fulfilled","pending","data"],h=["id","content"],g=[{settings:{metrics:[]}},p.B.noop],m=o().createContext(g),y=function(){return(0,i.useContext)(m)},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProduct,r=void 0===t?c.useProduct:t,n=e.useProductGraphConfig,a=void 0===n?c.useProductGraphConfig:n,o=r().productId,u=a(),l=u.filters,s=void 0===l?[]:l,d=u.settings,p=void 0===d?{}:d;return(0,i.useMemo)((function(){return v.graphCardHelpers.generateChartSettings({filters:s,settings:p,productId:o})}),[s,p,o])},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGraphCardContext,r=void 0===t?y:t,i=e.useSelectorsResponse,o=void 0===i?s.Cr.reactRedux.useSelectorsResponse:i,u=r().settings,l=(void 0===u?{}:u).metrics,c=void 0===l?[]:l,d=o(c.map((function(e){var t=e.id,r=e.isCapacity;return function(e){var n,a,i=e.graph;return r?null===(n=i.capacity)||void 0===n?void 0:n[t]:null===(a=i.tally)||void 0===a?void 0:a[t]}}))),p=d.error,v=d.fulfilled,h=d.pending,g=d.data,m=void 0===g?[]:g,C=(0,a.Z)(d,f),S={},E=null==m?void 0:m.map((function(e,t){var r=(0,n.Z)((0,n.Z)({},c[t]),e);return S[c[t].id]=r,r}));return(0,n.Z)((0,n.Z)({},C),{},{data:S,dataSets:E,error:p,fulfilled:v,pending:h})},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getGraphMetrics,r=void 0===t?s.Ak.rhsm.getGraphMetrics:t,n=e.useDispatch,a=void 0===n?s.Cr.reactRedux.useDispatch:n,i=e.useGraphCardContext,o=void 0===i?y:i,l=e.useMetricsSelector,d=void 0===l?S:l,p=e.useProduct,v=void 0===p?c.useProduct:p,f=e.useProductGraphTallyQuery,h=void 0===f?c.useProductGraphTallyQuery:f,g=v().productId,m=h(),C=a(),E=d(),M=o().settings,G=(void 0===M?{}:M).metrics,T=void 0===G?[]:G;return(0,u.Z)((function(){var e=T.map((function(e){var t=e.metric,r=e.isCapacity,n=e.query;return{id:g,metric:t,isCapacity:r,query:n}}));r(e,m)(C)}),[T,g,m]),E},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.categoryOptions,r=void 0===t?d.toolbarFieldOptions:t,n=e.useMetricsSelector,u=void 0===n?S:n,s=e.useGraphCardContext,c=void 0===s?y:s,v=u(),f=v.pending,g=v.dataSets,m=c().settings,C=(void 0===m?{}:m).actions;return(0,i.useMemo)((function(){return null==C?void 0:C.map((function(e){var t=e.id,n=e.content,i=(0,a.Z)(e,h),u=(r.find((function(e){var r=e.value;return t===r}))||{}).component;return u&&o().createElement(l.ToolbarItem,{key:"option-".concat(t)},o().createElement(u,Object.assign({isFilter:!1},i)))||n&&!f&&g.length&&o().createElement(l.ToolbarItem,{key:t||p.B.generateId()},"function"==typeof n?n({data:g}):n)||null}))}),[C,r,g,f])},G={GraphCardContext:m,DEFAULT_CONTEXT:g,useGetMetrics:E,useGraphCardActions:M,useGraphCardContext:y,useMetricsSelector:S,useParseFiltersSettings:C}},29407:function(e,t,r){r.r(t),r.d(t,{GraphCardMetricTotals:function(){return h},default:function(){return h}});var n=r(93433),a=r(92950),i=r.n(a),o=r(90154),u=r(68929),l=r.n(u),s=r(51858),c=r(25394),d=r(1797),p=r(65876),v=r(46262),f=r(76006),h=function(e){var t,r=e.children,a=e.useGraphCardContext,u=e.useMetricsSelector,s=e.useProductGraphTallyQuery,c=a().settings,h=void 0===c?{}:c,g=s()[v.O6.START_DATE],m=u(),y=m.pending,C=m.error,S=m.fulfilled,E=m.dataSets,M=(void 0===E?[]:E)[0]||{},G=M.data,T=void 0===G?[]:G,D=M.id,P=M.metric,k=M.meta,x=void 0===k?{}:k,_=T[T.length-1]||{},I=_.date,b=_.hasData,O=_.y,F=T.find((function(e){return!0===e.isCurrentDate}))||{},N=F.date,Z=F.hasData,z=F.y,A=x.totalMonthlyDate,H=x.totalMonthlyHasData,L=x.totalMonthlyValue,B=p.toolbarFieldOptions.find((function(e){return e.title===g||e.value.startDate.toISOString()===g}))||{},Q=B.title,R=B.isCurrent,V=R?N:I,j=R?Z:b,q=R?z:O;if(null!=h&&h.isMetricDisplay&&null!=h&&null!==(t=h.cards)&&void 0!==t&&t.length){var w,U,X,J=f.BM.setImmutableData({chartId:D,dailyDate:V,dailyHasData:j,dailyValue:q,metricId:P,groupMetricId:(0,n.Z)(h.groupMetric),monthlyDate:A,monthlyHasData:H,monthlyValue:L,selectedValue:Q});return i().createElement("div",{"data-test":"graphMetricTotals-".concat(null==h||null===(w=h.groupMetric)||void 0===w||null===(U=w.map((function(e){return l()(e)})))||void 0===U?void 0:U.join("-")),"data-test-data":JSON.stringify(J),className:"curiosity-usage-graph__totals"},i().createElement("div",null,i().createElement("div",{className:"curiosity-usage-graph__totals-column"},null==h||null===(X=h.cards)||void 0===X?void 0:X.map((function(e,t){var r=e.key,n=e.header,a=e.body,u=e.footer;return i().createElement(o.Card,{key:r||f.BM.generateHash({metricDisplayPassedData:J,index:t}),isPlain:!0,"data-test":"graphMetricTotalsCard-".concat(t),className:"curiosity-usage-graph__totals-column-card ".concat(C?"blur":"")},i().createElement(o.CardHeader,null,i().createElement(o.CardTitle,null,i().createElement(o.Title,{headingLevel:"h2",size:"md"},y&&i().createElement(d.Loader,{variant:"skeleton",skeletonProps:{size:d.SkeletonSize.lg}}),S&&("function"==typeof n&&n(J)||n)))),i().createElement(o.CardBody,null,i().createElement("div",null,y&&i().createElement(d.Loader,{variant:"skeleton",skeletonProps:{size:d.SkeletonSize.lg,height:"60px"}}),S&&("function"==typeof a&&a(J)||a))),i().createElement(o.CardFooter,null,i().createElement("div",null,y&&i().createElement(d.Loader,{variant:"skeleton",skeletonProps:{size:d.SkeletonSize.lg}}),S&&("function"==typeof u&&u(J)||u))))})))),i().createElement("div",null,i().createElement("div",{className:"curiosity-usage-graph__totals-graph-column"},r)))}return i().createElement("div",{"data-test":"graphStandalone",className:"curiosity-usage-graph__standalone"},r)};h.defaultProps={children:null,useGraphCardContext:c.useGraphCardContext,useMetricsSelector:c.useMetricsSelector,useProductGraphTallyQuery:s.useProductGraphTallyQuery}}}]);
//# sourceMappingURL=../sourcemaps/9407.b1a4f9efd6c070d1f53194517230c24e.js.map