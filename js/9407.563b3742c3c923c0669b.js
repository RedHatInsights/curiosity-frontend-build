"use strict";(self.webpackChunksubscriptions=self.webpackChunksubscriptions||[]).push([[9407,5394],{25394:function(e,t,r){r.r(t),r.d(t,{DEFAULT_CONTEXT:function(){return h},GraphCardContext:function(){return g},context:function(){return S},default:function(){return S},useGetMetrics:function(){return f},useGraphCardActions:function(){return v},useGraphCardContext:function(){return m},useMetricsSelector:function(){return y},useParseFiltersSettings:function(){return C}});var a=r(87462),n=r(28416),s=r.n(n),l=r(15451),o=r(39930),i=r(87284),u=r(51858),c=r(70136),d=r(62834),p=r(78139);const h=[{settings:{metrics:[]}},d.B.noop],g=s().createContext(h),m=()=>(0,n.useContext)(g),C=function(){let{useProduct:e=u.useProduct,useProductGraphConfig:t=u.useProductGraphConfig}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{productId:r}=e(),{filters:a=[],settings:s={}}=t();return(0,n.useMemo)((()=>p.graphCardHelpers.generateChartSettings({filters:a,settings:s,productId:r})),[a,s,r])},y=function(){let{useGraphCardContext:e=m,useSelectorsResponse:t=i.Cr.reactRedux.useSelectorsResponse}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{settings:r={}}=e(),{metrics:a=[]}=r,{error:n,fulfilled:s,pending:l,data:o=[],...u}=t(a.map((e=>{let{id:t,isCapacity:r}=e;return e=>{var a,n;let{graph:s}=e;return r?null===(a=s.capacity)||void 0===a?void 0:a[t]:null===(n=s.tally)||void 0===n?void 0:n[t]}}))),c={},d=null==o?void 0:o.map(((e,t)=>{const r={...a[t],...e};return c[a[t].id]=r,r}));return{...u,data:c,dataSets:d,error:n,fulfilled:s,pending:l}},f=function(){let{getGraphMetrics:e=i.Ak.rhsm.getGraphMetrics,useDispatch:t=i.Cr.reactRedux.useDispatch,useGraphCardContext:r=m,useMetricsSelector:a=y,useProduct:n=u.useProduct,useProductGraphTallyQuery:s=u.useProductGraphTallyQuery}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{productId:o}=n(),c=s(),d=t(),p=a(),{settings:h={}}=r(),{metrics:g=[]}=h;return(0,l.Z)((()=>{const t=g.map((e=>{let{metric:t,isCapacity:r,query:a}=e;return{id:o,metric:t,isCapacity:r,query:a}}));e(t,c)(d)}),[g,o,c]),p},v=function(){let{categoryOptions:e=c.toolbarFieldOptions,useMetricsSelector:t=y,useGraphCardContext:r=m}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{pending:l,dataSets:i}=t(),{settings:u={}}=r(),{actions:p}=u;return(0,n.useMemo)((()=>null==p?void 0:p.map((t=>{let{id:r,content:n,...u}=t;const c=e.find((e=>{let{value:t}=e;return r===t})),{component:p}=c||{};return p&&s().createElement(o.ToolbarItem,{key:"option-".concat(r)},s().createElement(p,(0,a.Z)({isFilter:!1},u)))||n&&!l&&i.length&&s().createElement(o.ToolbarItem,{key:r||d.B.generateId()},"function"==typeof n?n({data:i}):n)||null}))),[p,e,i,l])},S={GraphCardContext:g,DEFAULT_CONTEXT:h,useGetMetrics:f,useGraphCardActions:v,useGraphCardContext:m,useMetricsSelector:y,useParseFiltersSettings:C}},29407:function(e,t,r){r.r(t),r.d(t,{GraphCardMetricTotals:function(){return y},default:function(){return y}});var a=r(28416),n=r.n(a),s=r(45697),l=r.n(s),o=r(39930),i=r(68929),u=r.n(i),c=r(51858),d=r(25394),p=r(1797),h=r(65876),g=r(46262),m=r(78139),C=r(76006);const y=e=>{var t;let{children:r,useGraphCardContext:a,useMetricsSelector:s,useProductGraphTallyQuery:l}=e;const{settings:i={}}=a(),c=l(),{pending:d,error:y,fulfilled:f,dataSets:v=[]}=s(),{[g.O6.START_DATE]:S}=c,{isCurrent:_}=h.toolbarFieldOptions.find((e=>e.title===S||e.value.startDate.toISOString()===S))||{};if(null!=i&&i.isMetricDisplay&&null!=i&&null!==(t=i.cards)&&void 0!==t&&t.length){var G,T;const e=C.helpers.setImmutableData({dataSets:v.map((e=>{const{id:t,metric:r}=e||{};return{...e,display:{...m.graphCardHelpers.getDailyMonthlyTotals({dataSet:e,isCurrent:_}),...m.graphCardHelpers.getRemainingCapacity({...m.graphCardHelpers.getPrepaidTallyCapacity({data:v}),isCurrent:_}),...m.graphCardHelpers.getRemainingOverage({...m.graphCardHelpers.getPrepaidTallyCapacity({data:v}),isCurrent:_}),chartId:t,metricId:r}}}))},{isClone:!0});return n().createElement("div",{"data-test":"graphMetricTotals-".concat(null==i||null===(G=i.groupMetric)||void 0===G||null===(G=G.map((e=>u()(e))))||void 0===G?void 0:G.join("-")),"data-test-data":JSON.stringify(e),className:"curiosity-graph__totals curiosity-usage-graph__totals"},n().createElement("div",null,n().createElement("div",{className:"curiosity-graph__totals-column curiosity-usage-graph__totals-column"},null==i||null===(T=i.cards)||void 0===T?void 0:T.map(((t,r)=>{let{key:a,header:s,body:l,footer:i}=t;return n().createElement(o.Card,{key:a||C.helpers.generateHash({metricDisplayPassedData:e,index:r}),isPlain:!0,"data-test":"graphMetricTotalsCard-".concat(r),className:"curiosity-graph__totals-column-card curiosity-usage-graph__totals-column-card ".concat(y?"blur":"")},n().createElement(o.CardHeader,{className:"curiosity-graph__totals-column-card-header"},n().createElement(o.CardTitle,null,n().createElement(o.Title,{headingLevel:"h2",size:"md"},d&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg}}),f&&("function"==typeof s&&s(e)||s)))),n().createElement(o.CardBody,{className:"curiosity-graph__totals-column-card-body"},n().createElement("div",null,d&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg,height:"60px"}}),f&&("function"==typeof l&&l(e)||l))),n().createElement(o.CardFooter,{className:"curiosity-graph__totals-column-card-footer"},n().createElement("div",null,d&&n().createElement(p.Loader,{variant:"skeleton",skeletonProps:{size:p.SkeletonSize.lg}}),f&&("function"==typeof i&&i(e)||i))))})))),n().createElement("div",null,n().createElement("div",{className:"curiosity-graph__totals-graph-column curiosity-usage-graph__totals-graph-column"},r)))}return n().createElement("div",{"data-test":"graphStandalone",className:"curiosity-graph__standalone curiosity-usage-graph__standalone"},r)};y.propTypes={children:l().node,useGraphCardContext:l().func,useMetricsSelector:l().func,useProductGraphTallyQuery:l().func},y.defaultProps={children:null,useGraphCardContext:d.useGraphCardContext,useMetricsSelector:d.useMetricsSelector,useProductGraphTallyQuery:c.useProductGraphTallyQuery}}}]);
//# sourceMappingURL=../sourcemaps/9407.03004fead37ef20226f91e5db716a9b8.js.map