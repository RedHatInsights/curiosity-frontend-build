"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[5473,2243],{12243:function(t,e,r){r.r(e),r.d(e,{applyConfigProperty:function(){return m},applyHeaderRowCellFilters:function(){return g},applySortFilters:function(){return D},applyWrappableFilters:function(){return b},default:function(){return C},inventoryCardHelpers:function(){return C},parseInventoryFilters:function(){return Z},parseRowCellsListData:function(){return O}});var n=r(29439),o=r(1413),i=r(93433),a=r(92950),s=r.n(a),l=r(76871),u=r(68929),c=r.n(u),p=r(68630),d=r.n(p),v=r(3969),f=r(83109),y=r(46262),h=r(76006),m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.params,n=void 0===r?[]:r,o=t;if("function"==typeof t&&(o=t.apply(void 0,(0,i.Z)(Array.isArray(n)&&n||[n]))),"string"==typeof o||"number"==typeof o||s().isValidElement(o))return o},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.filters,r=void 0===e?[]:e,n=t.cellData,a=void 0===n?{}:n,u=t.meta,c=void 0===u?{}:u,p=t.productId,y=t.session,g=void 0===y?{}:y,D=[],b=[];return r.forEach((function(t){var e,r,n,u,y=t.isStandalone,Z=t.id,O=t.cell,C=t.cellWidth,S=t.header,E=t.onSort,I=t.showEmptyCell,G=void 0===I||I,T=t.sortId,w=t.sortActive,A=t.sortDirection,P=t.transforms,k={title:(0,f.translate)("curiosity-inventory.header",{context:[Z,p]}),transforms:[]},R={title:""};if(a[Z])k.title=null!==(e=null===(r=a[Z])||void 0===r?void 0:r.title)&&void 0!==e?e:Z,R.title=null!==(n=null===(u=a[Z])||void 0===u?void 0:u.value)&&void 0!==n?n:"";else if(!0===y)k.title="",R.title="";else if((h.BM.DEV_MODE||h.BM.REVIEW_MODE)&&console.warn('Warning: Filter "'.concat(Z,'" not found in "table row" response data.'),a),!1===G)return;if(S){var H=m(S,{params:[(0,o.Z)({},a),(0,o.Z)({},g),(0,o.Z)({},c)]});if(H?k.title=H:d()(S)&&Object.assign(k,(0,o.Z)({},S)),S.tooltip&&k.title){var L=m(S.tooltip,{params:[(0,o.Z)({},a),(0,o.Z)({},g),(0,o.Z)({},c)]});L&&(k.title=s().createElement(v.Tooltip,{content:L},k.title)),delete k.tooltip}}if(Array.isArray(k.transforms)&&(Array.isArray(P)&&(k.transforms=k.transforms.concat((0,i.Z)(P))),"number"==typeof C&&k.transforms.push((0,l.cellWidth)(C))),"function"==typeof E&&(k.onSort=function(t){return E((0,o.Z)({},a),(0,o.Z)((0,o.Z)({},t),{},{id:T||Z}))},k.sortActive=w,k.sortDirection=A),O){var N=m(O,{params:[(0,o.Z)({},a),(0,o.Z)({},g),(0,o.Z)({},c)]});if(N?R.title=N:d()(O)&&Object.assign(R,(0,o.Z)({},O)),O.tooltip&&R.title){var F=m(O.tooltip,{params:[(0,o.Z)({},a),(0,o.Z)({},g),(0,o.Z)({},c)]});F&&(R.title=s().createElement(v.Tooltip,{content:F},R.title)),delete R.tooltip}}D.push(k),b.push(R)})),{headerCells:D,bodyCells:b}},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.filter,r=void 0===e?{}:e,n=t.onSort,i=t.query,a=void 0===i?{}:i,s=r.id,u=r.sortId,p=u||s,d=(0,o.Z)({},r),v=d.onSort||n;return!d.onSort&&n&&(d.onSort=n),v&&"boolean"!=typeof d.sortActive&&null!=a&&a[y.O6.SORT]&&((null==a?void 0:a[y.O6.SORT])===p||c()(null==a?void 0:a[y.O6.SORT])===p)&&(d.sortActive=!0),v&&!d.sortDirection&&null!=a&&a[y.O6.DIRECTION]&&((null==a?void 0:a[y.O6.DIRECTION])===y.PQ.DESCENDING?d.sortDirection=l.SortByDirection.desc:d.sortDirection=l.SortByDirection.asc),!v||d.sortActive||null!=a&&a[y.O6.SORT]||!0!==d.isSortDefault||(d.sortActive=!0,d.sortDefaultInitialDirection&&(d.sortDirection=d.sortDefaultInitialDirection)),d},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.filter,r=void 0===e?{}:e,n=(0,o.Z)({},r);return Array.isArray(n.transforms)?n.transforms.push(l.wrappable):n.transforms=[l.wrappable],n},Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.filters,r=void 0===e?[]:e,n=t.onSort,a=t.query,s=void 0===a?{}:a;return(0,i.Z)(r).map((function(t){var e=(0,o.Z)({},t);return e.isSortable&&Object.assign(e,D({filter:e,onSort:n,query:s})),e.isWrappable&&Object.assign(e,b({filter:e})),e}))},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.filters,r=void 0===e?[]:e,a=t.cellData,s=void 0===a?{}:a,l=t.meta,u=void 0===l?{}:l,c=t.productId,p=t.session,d=void 0===p?{}:p,v=[],y=[],h={};if(Object.entries(s).forEach((function(t){var e=(0,n.Z)(t,2),r=e[0],o=e[1],i=void 0===o?"":o;h[r]={title:(0,f.translate)("curiosity-inventory.header",{context:[r,c]}),value:i},v.push(h[r].title),y.push(i||"...")})),null!=r&&r.length&&Object.keys(h).length){v.length=0,y.length=0;var m=g({filters:r,cellData:h,meta:u,productId:c,session:d}),D=m.headerCells,b=void 0===D?[]:D,Z=m.bodyCells,O=void 0===Z?[]:Z;v.push.apply(v,(0,i.Z)(b)),y.push.apply(y,(0,i.Z)(O))}return{columnHeaders:v,cells:y,data:(0,o.Z)({},h)}},C={applyConfigProperty:m,applyHeaderRowCellFilters:g,applySortFilters:D,applyWrappableFilters:b,parseInventoryFilters:Z,parseRowCellsListData:O}},95473:function(t,e,r){r.r(e),r.d(e,{ConnectedGuestsList:function(){return Z},GuestsList:function(){return D},default:function(){return Z}});var n=r(93433),o=r(4942),i=r(1413),a=r(15671),s=r(43144),l=r(60136),u=r(54062),c=r(92950),p=r.n(c),d=r(76871),v=r(76006),f=r(61072),y=r(1797),h=r(12243),m=r(30446),g=r(78697),D=function(t){(0,l.Z)(r,t);var e=(0,u.Z)(r);function r(){var t;(0,a.Z)(this,r);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return(t=e.call.apply(e,[this].concat(l))).state={currentPage:0,limit:100,previousData:[]},t.onUpdateGuestsData=function(){var e=t.state,r=e.currentPage,n=e.limit,a=t.props,s=a.getHostsInventoryGuests,l=a.query,u=a.id;if(u){var c,p=(0,i.Z)((0,i.Z)({},l),{},(c={},(0,o.Z)(c,m.VN.LIMIT,n),(0,o.Z)(c,m.VN.OFFSET,r*n||0),c));s(u,f.IT.parseRhsmQuery(p).inventoryGuestsQuery)}},t.onScroll=function(e){var r=e.target,o=t.state,i=o.currentPage,a=o.limit,s=o.previousData,l=t.props,u=l.numberOfGuests,c=l.pending,p=l.listData,d=r.scrollHeight-r.scrollTop===r.clientHeight;if(u>(i+1)*a&&d&&!c){var v=i+1,f=[].concat((0,n.Z)(s),(0,n.Z)(p||[]));t.setState({previousData:f,currentPage:v})}},t}return(0,s.Z)(r,[{key:"componentDidMount",value:function(){this.onUpdateGuestsData()}},{key:"componentDidUpdate",value:function(t,e){this.state.currentPage!==e.currentPage&&this.onUpdateGuestsData()}},{key:"renderLoader",value:function(){var t=this.state.currentPage,e=this.props,r=e.filterGuestsData,n=e.listData,o=e.pending;if(t>0&&o){var i=p().createElement(y.Loader,{variant:"table",tableProps:{borders:!1,colCount:(null==r?void 0:r.length)||(null==n?void 0:n[0])&&Object.keys(n[0]).length||1,colWidth:(null==r?void 0:r.length)&&r.map((function(t){return t.cellWidth}))||[],rowCount:0,variant:d.TableVariant.compact}});return p().createElement("div",{className:"curiosity-table-scroll-loader__custom"},i)}return null}},{key:"renderTable",value:function(){var t=this.state.previousData,e=this.props,r=e.filterGuestsData,o=e.listData,i=e.numberOfGuests,a=e.session,s=[],l=[].concat((0,n.Z)(t),(0,n.Z)(o||[])).map((function(t){var e=Object.assign({},t),n=h.inventoryCardHelpers.parseRowCellsListData({filters:r,cellData:e,session:a}),o=n.columnHeaders,i=n.cells;return s=o,{cells:i}})),u=42*(i+1);return u=u<275&&u||275,p().createElement("div",{className:"curiosity-table-scroll",style:{height:"".concat(u,"px")}},p().createElement("div",{className:"curiosity-table-scroll-list".concat(u<275?"__no-scroll":""),onScroll:this.onScroll},this.renderLoader(),l.length&&p().createElement(g.Table,{borders:!1,variant:d.TableVariant.compact,className:"curiosity-guests-list",columnHeaders:s,rows:l})||null))}},{key:"render",value:function(){var t=this.state.currentPage,e=this.props,r=e.error,n=e.filterGuestsData,o=e.listData,i=e.numberOfGuests,a=e.pending,s=e.perPageDefault;return p().createElement("div",{className:"fadein ".concat(r?"blur":"")},a&&0===t&&p().createElement(y.Loader,{variant:"table",tableProps:{borders:!1,className:"curiosity-guests-list",colCount:(null==n?void 0:n.length)||(null==o?void 0:o[0])&&Object.keys(o[0]).length||1,colWidth:(null==n?void 0:n.length)&&n.map((function(t){return t.cellWidth}))||[],rowCount:i<s?i:s,variant:d.TableVariant.compact}}),(!a&&0===t||t>0)&&this.renderTable())}}]),r}(p().Component);D.defaultProps={error:!1,filterGuestsData:[],getHostsInventoryGuests:v.BM.noop,listData:[],pending:!1,perPageDefault:5,query:{},session:{}};var b=f.R1.guestsList.makeGuestsList(),Z=(0,f.$j)(b,(function(t){return{getHostsInventoryGuests:function(e,r){return t(f.Ak.rhsm.getHostsInventoryGuests(e,r))}}}))(D)}}]);
//# sourceMappingURL=../sourcemaps/5473.js.map