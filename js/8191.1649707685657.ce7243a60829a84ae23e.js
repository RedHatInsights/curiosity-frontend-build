"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[8191],{88191:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M,ConnectedInventoryList:()=>M,InventoryList:()=>_});var r=n(1413),a=n(4942),s=n(15671),i=n(43144),o=n(60136),l=n(54062),u=n(96985),c=n.n(u),d=n(18446),p=n.n(d),v=n(67304),y=n(75857),f=n(65550),m=n(68929),h=n.n(m),g=n(76006),D=n(20169),E=n(78697),b=n(1797),I=n(91339),T=n(95473),N=n(12243),C=n(68900),S=n(89517),H=n(65020),P=n(30446),O=n(83109),_=function(e){(0,o.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onColumnSort=function(t,n){var r,s=n.direction,i=n.id,o=e.props.productId,l=Object.values(P.Nf).find((function(e){return h()(e)===i}));l?(r=s===v.SortByDirection.desc?P.hb.DESCENDING:P.hb.ASCENDING,D.h.dispatch([(0,a.Z)({type:D.JD.query.SET_QUERY_RHSM_HOSTS_INVENTORY_TYPES[P.VN.DIRECTION],viewId:o},P.VN.DIRECTION,r),(0,a.Z)({type:D.JD.query.SET_QUERY_RHSM_HOSTS_INVENTORY_TYPES[P.VN.SORT],viewId:o},P.VN.SORT,l)])):(g.BM.DEV_MODE||g.BM.REVIEW_MODE)&&console.warn("Sorting can only be performed on select fields, confirm field ".concat(i," is allowed."))},e.onPage=function(t){var n=t.offset,r=t.perPage,s=e.props.productId;D.h.dispatch([(0,a.Z)({type:D.JD.query.SET_QUERY_RHSM_HOSTS_INVENTORY_TYPES[P.VN.OFFSET],viewId:s},P.VN.OFFSET,n),(0,a.Z)({type:D.JD.query.SET_QUERY_RHSM_HOSTS_INVENTORY_TYPES[P.VN.LIMIT],viewId:s},P.VN.LIMIT,r)])},e.onUpdateInventoryData=function(){var t=e.props,n=t.getHostsInventory,r=t.isDisabled,a=t.productId,s=t.query;!r&&a&&n(a,s)},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.onUpdateInventoryData()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.productId,r=t.query;n===e.productId&&p()(r,e.query)||this.onUpdateInventoryData()}},{key:"renderTable",value:function(){var e=this,t=this.props,n=t.filterGuestsData,a=t.filterInventoryData,s=t.listData,i=t.productId,o=t.query,l=t.session,u=t.settings,d=[],p=s.map((function(t){var s=Object.assign({},t),p=N.inventoryCardHelpers.parseRowCellsListData({filters:N.inventoryCardHelpers.parseInventoryFilters({filters:a,onSort:e.onColumnSort,query:o}),cellData:s,session:l}),v=p.columnHeaders,y=p.cells;d=v;var f=null==s?void 0:s.subscriptionManagerId,m=(null==s?void 0:s.numberOfGuests)>0&&f;return"function"==typeof(null==u?void 0:u.hasGuests)&&(m=u.hasGuests((0,r.Z)({},s),(0,r.Z)({},l))),{cells:y,expandedContent:m&&c().createElement(T.default,{key:"".concat(i,"_").concat(f),filterGuestsData:n,numberOfGuests:null==s?void 0:s.numberOfGuests,id:f,query:o})||void 0}}));return c().createElement(E.default,{borders:!0,variant:v.TableVariant.compact,className:"curiosity-inventory-list",columnHeaders:d,rows:p})}},{key:"render",value:function(){var e=this.props,t=e.error,n=e.filterInventoryData,r=e.fulfilled,a=e.isDisabled,s=e.itemCount,i=e.listData,o=e.pending,l=e.perPageDefault,u=e.query,d=e.t,p=e.viewId;if(a)return c().createElement(y.Card,{className:"curiosity-inventory-card__disabled"},c().createElement(y.CardBody,null,c().createElement(y.Bullseye,null,d("curiosity-inventory.tab",{context:"disabled"}))));var m=u[P.VN.LIMIT]||l,h=u[P.VN.OFFSET],g=H.paginationHelpers.isLastPage(h,m,s),D=!0===r&&s<m&&"bodyMinHeight-".concat(m,"-resize")||!0===r&&g&&"bodyMinHeight-".concat(m,"-resize")||!0===t&&"bodyMinHeight-".concat(m,"-resize")||"bodyMinHeight-".concat(m);return c().createElement(y.Card,{className:"curiosity-inventory-card"},c().createElement(I.MinHeight,{key:"headerMinHeight",updateOnContent:!0},c().createElement(y.CardHeader,{className:t?"hidden":"","aria-hidden":t||!1},c().createElement(y.CardHeaderMain,null,c().createElement(S.ToolbarFieldDisplayName,{viewId:p})),c().createElement(y.CardActions,{className:s?"":"transparent","aria-hidden":!s||!1},c().createElement(C.default,{isCompact:!0,isDisabled:o||t,itemCount:s,offset:h,onPage:this.onPage,onPerPage:this.onPage,perPage:m})))),c().createElement(I.MinHeight,{key:D,updateOnContent:!0},c().createElement(y.CardBody,null,c().createElement("div",{className:(t?"blur":o&&"fadein")||""},o&&c().createElement(b.Loader,{variant:"table",tableProps:{className:"curiosity-inventory-list",colCount:(null==n?void 0:n.length)||(null==i?void 0:i[0])&&Object.keys(i[0]).length||1,colWidth:(null==n?void 0:n.length)&&n.map((function(e){return e.cellWidth}))||[],rowCount:(null==i?void 0:i.length)||m,variant:v.TableVariant.compact}}),!o&&this.renderTable()))),c().createElement(I.MinHeight,{key:"footerMinHeight",updateOnContent:!0},c().createElement(y.CardFooter,{className:(t?"hidden":!s&&"transparent")||"","aria-hidden":t||!s||!1},c().createElement(f.Z,{isFooter:!0},c().createElement(C.default,{dropDirection:"up",isDisabled:o||t,itemCount:s,offset:h,onPage:this.onPage,onPerPage:this.onPage,perPage:m})))))}}]),n}(c().Component);_.defaultProps={error:!1,fulfilled:!1,filterGuestsData:[],filterInventoryData:[],getHostsInventory:g.BM.noop,isDisabled:g.BM.UI_DISABLED_TABLE_HOSTS,itemCount:0,listData:[],pending:!1,perPageDefault:10,session:{},settings:{},t:O.translate,viewId:"inventoryList"};var G=D.R1.inventoryList.makeInventoryList(),M=(0,D.$j)(G,(function(e){return{getHostsInventory:function(t,n){return e(D.Ak.rhsm.getHostsInventory(t,n))}}}))(_)},95473:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b,ConnectedGuestsList:()=>b,GuestsList:()=>D});var r=n(42982),a=n(4942),s=n(1413),i=n(15671),o=n(43144),l=n(60136),u=n(54062),c=n(96985),d=n.n(c),p=n(67304),v=n(76006),y=n(20169),f=n(1797),m=n(12243),h=n(30446),g=n(78697),D=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).state={currentPage:0,limit:100,previousData:[]},e.onUpdateGuestsData=function(){var t=e.state,n=t.currentPage,r=t.limit,i=e.props,o=i.getHostsInventoryGuests,l=i.query,u=i.id;if(u){var c,d=(0,s.Z)((0,s.Z)({},l),{},(c={},(0,a.Z)(c,h.VN.LIMIT,r),(0,a.Z)(c,h.VN.OFFSET,n*r||0),c));o(u,y.IT.parseRhsmQuery(d).inventoryGuestsQuery)}},e.onScroll=function(t){var n=t.target,a=e.state,s=a.currentPage,i=a.limit,o=a.previousData,l=e.props,u=l.numberOfGuests,c=l.pending,d=l.listData,p=n.scrollHeight-n.scrollTop===n.clientHeight;if(u>(s+1)*i&&p&&!c){var v=s+1,y=[].concat((0,r.Z)(o),(0,r.Z)(d||[]));e.setState({previousData:y,currentPage:v})}},e}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.onUpdateGuestsData()}},{key:"componentDidUpdate",value:function(e,t){this.state.currentPage!==t.currentPage&&this.onUpdateGuestsData()}},{key:"renderLoader",value:function(){var e=this.state.currentPage,t=this.props,n=t.filterGuestsData,r=t.listData,a=t.pending;if(e>0&&a){var s=d().createElement(f.Loader,{variant:"table",tableProps:{borders:!1,colCount:(null==n?void 0:n.length)||(null==r?void 0:r[0])&&Object.keys(r[0]).length||1,colWidth:(null==n?void 0:n.length)&&n.map((function(e){return e.cellWidth}))||[],rowCount:0,variant:p.TableVariant.compact}});return d().createElement("div",{className:"curiosity-table-scroll-loader__custom"},s)}return null}},{key:"renderTable",value:function(){var e=this.state.previousData,t=this.props,n=t.filterGuestsData,a=t.listData,s=t.numberOfGuests,i=t.session,o=[],l=[].concat((0,r.Z)(e),(0,r.Z)(a||[])).map((function(e){var t=Object.assign({},e),r=m.inventoryCardHelpers.parseRowCellsListData({filters:n,cellData:t,session:i}),a=r.columnHeaders,s=r.cells;return o=a,{cells:s}})),u=42*(s+1);return u=u<275&&u||275,d().createElement("div",{className:"curiosity-table-scroll",style:{height:"".concat(u,"px")}},d().createElement("div",{className:"curiosity-table-scroll-list".concat(u<275?"__no-scroll":""),onScroll:this.onScroll},this.renderLoader(),l.length&&d().createElement(g.Table,{borders:!1,variant:p.TableVariant.compact,className:"curiosity-guests-list",columnHeaders:o,rows:l})||null))}},{key:"render",value:function(){var e=this.state.currentPage,t=this.props,n=t.error,r=t.filterGuestsData,a=t.listData,s=t.numberOfGuests,i=t.pending,o=t.perPageDefault;return d().createElement("div",{className:"fadein ".concat(n?"blur":"")},i&&0===e&&d().createElement(f.Loader,{variant:"table",tableProps:{borders:!1,className:"curiosity-guests-list",colCount:(null==r?void 0:r.length)||(null==a?void 0:a[0])&&Object.keys(a[0]).length||1,colWidth:(null==r?void 0:r.length)&&r.map((function(e){return e.cellWidth}))||[],rowCount:s<o?s:o,variant:p.TableVariant.compact}}),(!i&&0===e||e>0)&&this.renderTable())}}]),n}(d().Component);D.defaultProps={error:!1,filterGuestsData:[],getHostsInventoryGuests:v.BM.noop,listData:[],pending:!1,perPageDefault:5,query:{},session:{}};var E=y.R1.guestsList.makeGuestsList(),b=(0,y.$j)(E,(function(e){return{getHostsInventoryGuests:function(t,n){return e(y.Ak.rhsm.getHostsInventoryGuests(t,n))}}}))(D)}}]);
//# sourceMappingURL=../sourcemaps/8191.864b190f84bc7f82916af6fa6b955069.js.map