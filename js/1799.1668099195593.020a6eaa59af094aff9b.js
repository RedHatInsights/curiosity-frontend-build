"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[1799],{91799:function(e,t,r){r.r(t),r.d(t,{GraphCardChart:function(){return g},default:function(){return g}});var a=r(1413),n=r(92950),o=r.n(n),i=r(21242),l=r(51858),u=r(25394),c=r(78139),d=r(60930),s=r(64418),p=r(44024),h=r(99171),v=r(46262),y=r(91339),f=r(1797),m=r(83109),g=function(e){var t=e.t,r=e.useGetMetrics,n=e.useGraphCardContext,l=e.useProduct,u=e.useProductGraphTallyQuery,m=l().productId,g=n().settings,C=void 0===g?{}:g,E=C.actionDisplay,T=C.isStandalone,b=C.metric,G=u()[v.O6.GRANULARITY],x=r(),P=x.pending,S=x.error,D=x.data,M=void 0===D?{}:D,I=x.dataSets,k=void 0===I?[]:I,_=null;return"function"==typeof E&&(_=E({data:(0,a.Z)({},M)})),o().createElement(i.Card,{className:"curiosity-usage-graph"},o().createElement(y.MinHeight,{key:"headerMinHeight"},o().createElement(i.CardHeader,null,o().createElement(i.CardTitle,null,o().createElement(i.Title,{headingLevel:"h2",size:"lg"},t("curiosity-graph.cardHeading",{context:T&&(null==b?void 0:b.id)||m}),o().createElement(h.GraphCardChartTitleTooltip,null))),_&&o().createElement(i.CardActions,{className:S?"blur":""},_))),o().createElement(y.MinHeight,{key:"bodyMinHeight"},o().createElement(i.CardBody,null,o().createElement("div",{className:(S?"blur":P&&"fadein")||""},P&&o().createElement(f.Loader,{variant:"graph"}),!P&&o().createElement(d.Chart,Object.assign({},c.graphCardHelpers.generateExtendedChartSettings({settings:C,granularity:G}),{dataSets:k,chartLegend:function(e){var t=e.chart,r=e.datum;return o().createElement(s.GraphCardChartLegend,{chart:t,datum:r})},chartTooltip:function(e){var t=e.datum;return o().createElement(p.GraphCardChartTooltip,{datum:t})}}))))))};g.defaultProps={t:m.translate,useGetMetrics:u.useGetMetrics,useGraphCardContext:u.useGraphCardContext,useProduct:l.useProduct,useProductGraphTallyQuery:l.useProductGraphTallyQuery}},64418:function(e,t,r){r.r(t),r.d(t,{GraphCardChartLegend:function(){return p},default:function(){return p}});var a=r(92950),n=r.n(a),o=r(21242),i=r(89048),l=r(51858),u=r(61072),c=r(76006),d=r(83109),s=r(1138),p=function(e){var t=e.chart,r=e.datum,a=e.t,l=e.useDispatch,c=e.useSelectors,d=(0,e.useProduct)(),p=d.productLabel,h=d.viewId,v=l(),y=c(r.dataSets.map((function(e){var t=e.id;return function(e){var r;return null===(r=e.graph.legend)||void 0===r?void 0:r["".concat(h,"-").concat(t)]}})));(0,i.Z)((function(){r.dataSets.forEach((function(e,r){var a=e.id;((null==y?void 0:y[r])||t.isToggled(a))&&t.hide(a)}))}));var f=function(e){var r=t.toggle(e);v({type:u.JD.graph.SET_GRAPH_LEGEND,id:"".concat(h,"-").concat(e),value:r})};return n().createElement(n().Fragment,null,r.dataSets.map((function(e,r){var i=e.id,l=e.isThreshold,u=e.stroke,c=e.data,d=!(void 0===c?[]:c).find((function(e){var t=e.y,r=e.hasData;return t>=0&&!0===r||t>=0&&!0===l}))||!1,h=a(["curiosity-graph.label","curiosity-graph.label_no"],{product:p,context:l?"threshold":i}),v=a("curiosity-graph.legendTooltip",{product:p,context:[l&&"threshold",i]},[n().createElement("span",{style:{whiteSpace:"nowrap"}})]),m=(null==y?void 0:y[r])||t.isToggled(i),g=n().createElement(o.Button,{onClick:function(){return f(i)},onKeyPress:function(){return f(i)},className:"curiosity-usage-graph__legend-item",tabIndex:0,key:"curiosity-button-".concat(i),variant:"link",component:"a",isDisabled:d,icon:(d||m)&&n().createElement(s.ChartIcon,{symbol:"eyeSlash"})||n().createElement(s.ChartIcon,{symbol:l?"dash":"square",style:{visibility:d||m?"hidden":"visible"},fill:u})},h);return v?n().createElement(o.Tooltip,{key:"curiosity-tooltip-".concat(i),content:n().createElement("p",null,v),position:o.TooltipPosition.top,enableFlip:!0,distance:5},g):g})))};p.defaultProps={chart:{hide:c.BM.noop,toggle:c.BM.noop,isToggled:c.BM.noop},datum:{dataSets:[]},t:d.translate,useDispatch:u.Cr.reactRedux.useDispatch,useSelectors:u.Cr.reactRedux.useSelectors,useProduct:l.useProduct}},99171:function(e,t,r){r.r(t),r.d(t,{GraphCardChartTitleTooltip:function(){return d},default:function(){return d}});var a=r(92950),n=r.n(a),o=r(21242),i=r(43551),l=r(51858),u=r(25394),c=r(83109),d=function(e){var t=e.t,r=e.useGraphCardContext,a=(0,e.useProduct)().productId,l=r().settings,u=void 0===l?{}:l,c=u.isCardTitleDescription,d=u.isStandalone,s=u.metric;return c||null!=s&&s.isCardTitleDescription?n().createElement(o.Tooltip,{content:n().createElement("p",null,t("curiosity-graph.cardHeadingDescription",{context:d&&(null==s?void 0:s.id)||a})),position:o.TooltipPosition.top,enableFlip:!1,distance:5,entryDelay:100,exitDelay:0},n().createElement("span",{className:"curiosity-icon__question"},n().createElement(i.OutlinedQuestionCircleIcon,null))):null};d.defaultProps={t:c.translate,useProduct:l.useProduct,useGraphCardContext:u.useGraphCardContext}},44024:function(e,t,r){r.r(t),r.d(t,{GraphCardChartTooltip:function(){return p},default:function(){return p}});var a=r(92950),n=r.n(a),o=r(51858),i=r(78139),l=r(83109),u=r(60930),c=r(1138),d=r(46262),s=r(76006),p=function(e){var t=e.datum,r=e.t,a=e.useProduct,o=e.useProductGraphTallyQuery,l=a().productLabel,p=o()[d.O6.GRANULARITY],h=null,v=[],y=(t||{}).itemsByKey,f=void 0===y?{}:y;return Object.keys(f).reverse().forEach((function(e,t){var a,o,d,s;0===t&&(h=(0,i.getTooltipDate)({date:null===(s=f[e])||void 0===s?void 0:s.data.date,granularity:p}));var y={color:null===(a=f[e])||void 0===a?void 0:a.color};if((null===(o=f[e])||void 0===o?void 0:o.chartType)===u.ChartTypeVariant.threshold){var m,g,C,E,T=null!==(m=null===(g=f[e])||void 0===g?void 0:g.data.y)&&void 0!==m?m:r("curiosity-graph.label",{context:"noData"});(null!==(C=f[e])&&void 0!==C&&C.data.hasInfinite||null!==(E=f[e])&&void 0!==E&&E.data.hasInfiniteQuantity)&&(T=r("curiosity-graph.label",{context:["threshold","infinite"]},[y.color&&n().createElement(c.ChartIcon,{symbol:"infinity",fill:"#ffffff",title:r("curiosity-graph.label",{context:["threshold","infinite"]})})])),y.label=r("curiosity-graph.label",{context:["threshold"]}),y.value=T}else{var b,G,x=!1===(null===(b=f[e])||void 0===b?void 0:b.data.hasData)&&r("curiosity-graph.label",{context:"noData"})||(null===(G=f[e])||void 0===G?void 0:G.data.y)||0;y.label=r("curiosity-graph.label",{context:e,product:l}),y.value=x}y.chartType=null===(d=f[e])||void 0===d?void 0:d.chartType,v.push(y)})),n().createElement("div",{className:"curiosity-usage-graph__tooltip"},n().createElement("table",{summary:r("curiosity-graph.tooltipSummary")},v.length&&h&&n().createElement("thead",null,n().createElement("tr",null,n().createElement("th",{colSpan:2},h)))||null,v.length&&n().createElement("tbody",null,v.map((function(e){var t,r,a="number"==typeof e.value&&!Number.isInteger(e.value)&&(null===(t=s.BM.numberDisplay(e.value))||void 0===t||null===(r=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!0}))||void 0===r?void 0:r.toUpperCase())||e.value;return n().createElement("tr",{key:"tooltip-".concat(e.label)},n().createElement("th",null,e.chartType===u.ChartTypeVariant.threshold&&n().createElement(c.ChartIcon,{size:"sm",symbol:"dash",fill:e.color||"transparent"}),e.chartType!==u.ChartTypeVariant.threshold&&n().createElement(c.ChartIcon,{size:"sm",fill:e.color||"transparent"})," ",e.label),n().createElement("td",null,a))})))||null),!v.length&&r("curiosity-graph.label",{context:["noData","error"]})||null)};p.defaultProps={datum:{},t:l.translate,useProduct:o.useProduct,useProductGraphTallyQuery:o.useProductGraphTallyQuery}},25394:function(e,t,r){r.r(t),r.d(t,{DEFAULT_CONTEXT:function(){return p},GraphCardContext:function(){return h},context:function(){return m},default:function(){return m},useGetMetrics:function(){return f},useGraphCardContext:function(){return v},useMetricsSelector:function(){return y}});var a=r(1413),n=r(45987),o=r(92950),i=r.n(o),l=r(15451),u=r(61072),c=r(51858),d=r(62834),s=["error","fulfilled","pending","data"],p=[{settings:{isStandalone:!1,metrics:[],metric:void 0}},d.B.noop],h=i().createContext(p),v=function(){return(0,o.useContext)(h)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGraphCardContext,r=void 0===t?v:t,o=e.useSelectorsResponse,i=void 0===o?u.Cr.reactRedux.useSelectorsAllSettledResponse:o,l=r(),c=l.settings,d=void 0===c?{}:c,p=d.metrics,h=void 0===p?[]:p,y=i(h.map((function(e){var t=e.id,r=e.isCapacity;return function(e){var a,n,o=e.graph;return r?null===(a=o.capacity)||void 0===a?void 0:a[t]:null===(n=o.tally)||void 0===n?void 0:n[t]}}))),f=y.error,m=y.fulfilled,g=y.pending,C=y.data,E=void 0===C?[]:C,T=(0,n.Z)(y,s),b={},G=null==E?void 0:E.map((function(e,t){var r=(0,a.Z)((0,a.Z)({},h[t]),e);return b[h[t].id]=r,r}));return(0,a.Z)((0,a.Z)({},T),{},{data:b,dataSets:G,error:f,fulfilled:m,pending:g})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getGraphMetrics,r=void 0===t?u.Ak.rhsm.getGraphMetrics:t,a=e.useDispatch,n=void 0===a?u.Cr.reactRedux.useDispatch:a,o=e.useGraphCardContext,i=void 0===o?v:o,d=e.useMetricsSelector,s=void 0===d?y:d,p=e.useProduct,h=void 0===p?c.useProduct:p,f=e.useProductGraphTallyQuery,m=void 0===f?c.useProductGraphTallyQuery:f,g=h(),C=g.productId,E=m(),T=n(),b=i(),G=b.settings,x=void 0===G?{}:G,P=x.metrics,S=void 0===P?[]:P,D=s();return(0,l.Z)((function(){var e=S.map((function(e){var t=e.metric,r=e.isCapacity,a=e.query;return{id:C,metric:t,isCapacity:r,query:a}}));r(e,E)(T)}),[T,r,S,C,E]),D},m={GraphCardContext:h,DEFAULT_CONTEXT:p,useGetMetrics:f,useGraphCardContext:v,useMetricsSelector:y}}}]);
//# sourceMappingURL=../sourcemaps/1799.js.map