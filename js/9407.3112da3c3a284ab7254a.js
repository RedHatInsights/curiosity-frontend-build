"use strict";(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[9407,5394],{25394:function(e,t,r){r.r(t),r.d(t,{DEFAULT_CONTEXT:function(){return g},GraphCardContext:function(){return m},context:function(){return G},default:function(){return G},useGetMetrics:function(){return S},useGraphCardActions:function(){return E},useGraphCardContext:function(){return y},useMetricsSelector:function(){return M},useParseFiltersSettings:function(){return C}});var n=r(1413),a=r(45987),i=r(92950),o=r.n(i),u=r(17297),l=r(90154),s=r(82410),c=r(51858),d=r(70136),p=r(62834),v=r(78139),f=["error","fulfilled","pending","data"],h=["id","content"],g=[{settings:{metrics:[]}},p.B.noop],m=o().createContext(g),y=function(){return(0,i.useContext)(m)},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useProduct,r=void 0===t?c.useProduct:t,n=e.useProductGraphConfig,a=void 0===n?c.useProductGraphConfig:n,o=r(),u=o.productId,l=a(),s=l.filters,d=void 0===s?[]:s,p=l.settings,f=void 0===p?{}:p;return(0,i.useMemo)((function(){return v.graphCardHelpers.generateChartSettings({filters:d,settings:f,productId:u})}),[d,f,u])},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGraphCardContext,r=void 0===t?y:t,i=e.useSelectorsResponse,o=void 0===i?s.Cr.reactRedux.useSelectorsResponse:i,u=r(),l=u.settings,c=void 0===l?{}:l,d=c.metrics,p=void 0===d?[]:d,v=o(p.map((function(e){var t=e.id,r=e.isCapacity;return function(e){var n,a,i=e.graph;return r?null===(n=i.capacity)||void 0===n?void 0:n[t]:null===(a=i.tally)||void 0===a?void 0:a[t]}}))),h=v.error,g=v.fulfilled,m=v.pending,C=v.data,M=void 0===C?[]:C,S=(0,a.Z)(v,f),E={},G=null==M?void 0:M.map((function(e,t){var r=(0,n.Z)((0,n.Z)({},p[t]),e);return E[p[t].id]=r,r}));return(0,n.Z)((0,n.Z)({},S),{},{data:E,dataSets:G,error:h,fulfilled:g,pending:m})},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getGraphMetrics,r=void 0===t?s.Ak.rhsm.getGraphMetrics:t,n=e.useDispatch,a=void 0===n?s.Cr.reactRedux.useDispatch:n,i=e.useGraphCardContext,o=void 0===i?y:i,l=e.useMetricsSelector,d=void 0===l?M:l,p=e.useProduct,v=void 0===p?c.useProduct:p,f=e.useProductGraphTallyQuery,h=void 0===f?c.useProductGraphTallyQuery:f,g=v(),m=g.productId,C=h(),S=a(),E=d(),G=o(),T=G.settings,D=void 0===T?{}:T,P=D.metrics,k=void 0===P?[]:P;return(0,u.Z)((function(){var e=k.map((function(e){var t=e.metric,r=e.isCapacity,n=e.query;return{id:m,metric:t,isCapacity:r,query:n}}));r(e,C)(S)}),[k,m,C]),E},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.categoryOptions,r=void 0===t?d.toolbarFieldOptions:t,n=e.useMetricsSelector,u=void 0===n?M:n,s=e.useGraphCardContext,c=void 0===s?y:s,v=u(),f=v.pending,g=v.dataSets,m=c(),C=m.settings,S=void 0===C?{}:C,E=S.actions;return(0,i.useMemo)((function(){return null==E?void 0:E.map((function(e){var t=e.id,n=e.content,i=(0,a.Z)(e,h),u=(r.find((function(e){var r=e.value;return t===r}))||{}).component;return u&&o().createElement(l.ToolbarItem,{key:"option-".concat(t)},o().createElement(u,Object.assign({isFilter:!1},i)))||n&&!f&&g.length&&o().createElement(l.ToolbarItem,{key:t||p.B.generateId()},"function"==typeof n?n({data:g}):n)||null}))}),[E,r,g,f])},G={GraphCardContext:m,DEFAULT_CONTEXT:g,useGetMetrics:S,useGraphCardActions:E,useGraphCardContext:y,useMetricsSelector:M,useParseFiltersSettings:C}},29407:function(e,t,r){r.r(t),r.d(t,{GraphCardMetricTotals:function(){return h},default:function(){return h}});var n=r(93433),a=r(92950),i=r.n(a),o=r(90154),u=r(68929),l=r.n(u),s=r(51858),c=r(25394),d=r(1797),p=r(65876),v=r(46262),f=r(76006),h=function(e){var t,r=e.children,a=e.useGraphCardContext,u=e.useMetricsSelector,s=e.useProductGraphTallyQuery,c=a().settings,h=void 0===c?{}:c,g=s()[v.O6.START_DATE],m=u(),y=m.pending,C=m.error,M=m.fulfilled,S=m.dataSets,E=(void 0===S?[]:S)[0]||{},G=E.data,T=void 0===G?[]:G,D=E.id,P=E.metric,k=E.meta,x=void 0===k?{}:k,_=T[T.length-1]||{},I=_.date,b=_.hasData,O=_.y,F=T.find((function(e){return!0===e.isCurrentDate}))||{},Z=F.date,z=F.hasData,A=F.y,N=x.totalMonthlyDate,H=x.totalMonthlyHasData,L=x.totalMonthlyValue,B=p.toolbarFieldOptions.find((function(e){return e.title===g||e.value.startDate.toISOString()===g}))||{},Q=B.title,R=B.isCurrent,V=R?Z:I,j=R?z:b,q=R?A:O;if(null!=h&&h.isMetricDisplay&&null!=h&&null!==(t=h.cards)&&void 0!==t&&t.length){var w,U,X,J=f.BM.setImmutableData({chartId:D,dailyDate:V,dailyHasData:j,dailyValue:q,metricId:P,groupMetricId:(0,n.Z)(h.groupMetric),monthlyDate:N,monthlyHasData:H,monthlyValue:L,selectedValue:Q});return i().createElement("div",{"data-test":"graphMetricTotals-".concat(null==h||null===(w=h.groupMetric)||void 0===w||null===(U=w.map((function(e){return l()(e)})))||void 0===U?void 0:U.join("-")),"data-test-data":JSON.stringify(J),className:"curiosity-usage-graph__totals"},i().createElement("div",null,i().createElement("div",{className:"curiosity-usage-graph__totals-column"},null==h||null===(X=h.cards)||void 0===X?void 0:X.map((function(e,t){var r=e.key,n=e.header,a=e.body,u=e.footer;return i().createElement(o.Card,{key:r||f.BM.generateHash({metricDisplayPassedData:J,index:t}),isPlain:!0,"data-test":"graphMetricTotalsCard-".concat(t),className:"curiosity-usage-graph__totals-column-card ".concat(C?"blur":"")},i().createElement(o.CardHeader,null,i().createElement(o.CardTitle,null,i().createElement(o.Title,{headingLevel:"h2",size:"md"},y&&i().createElement(d.Loader,{variant:"skeleton",skeletonProps:{size:d.SkeletonSize.lg}}),M&&("function"==typeof n&&n(J)||n)))),i().createElement(o.CardBody,null,i().createElement("div",null,y&&i().createElement(d.Loader,{variant:"skeleton",skeletonProps:{size:d.SkeletonSize.lg,height:"60px"}}),M&&("function"==typeof a&&a(J)||a))),i().createElement(o.CardFooter,null,i().createElement("div",null,y&&i().createElement(d.Loader,{variant:"skeleton",skeletonProps:{size:d.SkeletonSize.lg}}),M&&("function"==typeof u&&u(J)||u))))})))),i().createElement("div",null,i().createElement("div",{className:"curiosity-usage-graph__totals-graph-column"},r)))}return r};h.defaultProps={children:null,useGraphCardContext:c.useGraphCardContext,useMetricsSelector:c.useMetricsSelector,useProductGraphTallyQuery:s.useProductGraphTallyQuery}}}]);
//# sourceMappingURL=../sourcemaps/9407.32718c45cf97d0af46fab25abd4850fa.js.map