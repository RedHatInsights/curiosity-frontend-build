(self.webpackChunkcuriosity_frontend=self.webpackChunkcuriosity_frontend||[]).push([[6873,1339,998],{25394:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v,context:()=>v,GraphCardContext:()=>s,DEFAULT_CONTEXT:()=>u,useGetGraphTally:()=>d,useGraphCardContext:()=>c,useMetricsSelector:()=>f});var n=r(1413),a=r(92950),i=r.n(a),o=r(186),l=r(51858),u=[{settings:{isStandalone:!1,metrics:[],metric:void 0}},r(62834).B.noop],s=i().createContext(u),c=function(){return(0,a.useContext)(s)},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useDispatch,r=void 0===t?o.Cr.reactRedux.useDispatch:t,n=e.useProductGraphTallyQuery,a=void 0===n?l.useProductGraphTallyQuery:n,i=a(),u=r();return function(e){return o.Ak.rhsm.getGraphTally(e,i)(u)}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.useGraphCardContext,r=void 0===t?c:t,a=e.useSelectors,i=void 0===a?o.Cr.reactRedux.useSelectors:a,u=e.useProduct,s=void 0===u?l.useProduct:u,d=s(),f=d.productId,v=r(),p=v.settings,h=void 0===p?{}:p,m=h.metrics,g=void 0===m?[]:m,y={},x=i(g.map((function(e){var t=e.id;return function(e){var r;return null===(r=e.graph.tally)||void 0===r?void 0:r["".concat(f,"_").concat(t)]}})),[]),C=!1,M=!1,E=0,T=x.map((function(e,t){var r,a,i=e||{},o=i.pending,l=i.fulfilled,u=i.error,s=i.cancelled;!(!o&&!s)&&(C=!0),l&&(M=!0),u&&(E+=1);var c=(0,n.Z)((0,n.Z)({},g[t]),{},{data:(null==e||null===(r=e.data)||void 0===r?void 0:r.data)||[],meta:(null==e||null===(a=e.data)||void 0===a?void 0:a.meta)||{}});return y[g[t].id]=c,c})),S={data:y,dataSets:T,error:!1,fulfilled:!1,pending:!1};return E===T.length?S.error=!0:C?S.pending=!0:M&&(S.fulfilled=!0),S},v={GraphCardContext:s,DEFAULT_CONTEXT:u,useGetGraphTally:d,useGraphCardContext:c,useMetricsSelector:f}},29407:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y,GraphCardMetricTotals:()=>y});var n=r(92950),a=r.n(n),i=r(45103),o=r(30381),l=r.n(o),u=r(68929),s=r.n(u),c=r(51858),d=r(25394),f=r(91339),v=r(1797),p=r(76006),h=r(65876),m=r(46262),g=r(83109),y=function(e){var t,r,n,o,u=e.children,c=e.t,d=e.useMetricsSelector,g=(0,e.useProductGraphTallyQuery)()[m.O6.START_DATE],y=d(),x=y.pending,C=y.error,M=y.fulfilled,E=y.dataSets,T=(void 0===E?[]:E)[0]||{},S=T.data,k=void 0===S?[]:S,_=T.id,b=T.meta,O=void 0===b?{}:b,R=k[k.length-1]||{},z=R.date,H=R.hasData,D=R.y,F=k.find((function(e){return!0===e.isCurrentDate}))||{},G=F.date,w=F.hasData,N=F.y,P=O.totalMonthlyDate,B=O.totalMonthlyHasData,U=O.totalMonthlyValue,A=h.toolbarFieldOptions.find((function(e){return e.title===g||e.value.startDate.toISOString()===g}))||{},Z=A.title,I=A.isCurrent,L=I?G:z,Q=I?w:H,W=I?N:D;return a().createElement(i.Flex,{"data-test":"graphMetricTotals-".concat(s()(_)),className:"curiosity-usage-graph__totals"},a().createElement(i.Flex,{flex:{default:"flex_1"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},a().createElement(i.FlexItem,{className:"curiosity-usage-graph__totals-column"},a().createElement(i.Card,{"data-test":"graphDailyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(C?"blur":"")},a().createElement(i.CardTitle,null,c("curiosity-graph.cardHeadingMetric_dailyTotal",{context:_,month:Z})),a().createElement(f.MinHeight,{key:"currentBody"},a().createElement(i.CardBody,null,a().createElement("div",null,x&&a().createElement(v.Loader,{variant:"skeleton",skeletonProps:{size:v.SkeletonSize.lg}}),M&&c("curiosity-graph.cardBodyMetric_total",{context:Q&&_||"",total:null===(t=p.BM.numberDisplay(W))||void 0===t||null===(r=t.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===r?void 0:r.toUpperCase()},[a().createElement("strong",{title:W,"aria-label":W})])))),a().createElement(f.MinHeight,{key:"currentFooter"},a().createElement(i.CardFooter,null,a().createElement("div",{className:Q?"":"hidden"},M&&L&&c("curiosity-graph.cardFooterMetric",{date:l().utc(L).format(p.i3.timestampUTCTimeFormats.yearTimeShort)}))))),a().createElement(i.Card,{"data-test":"graphMonthlyTotalCard",className:"curiosity-usage-graph__totals-column-card ".concat(C?"blur":"")},a().createElement(i.CardTitle,null,c("curiosity-graph.cardHeadingMetric_monthlyTotal",{context:_,month:Z})),a().createElement(f.MinHeight,{key:"totalMonthlyBody"},a().createElement(i.CardBody,null,a().createElement("div",null,x&&a().createElement(v.Loader,{variant:"skeleton",skeletonProps:{size:v.SkeletonSize.lg}}),M&&c("curiosity-graph.cardBodyMetric_total",{context:B&&_||"",total:null===(n=p.BM.numberDisplay(U))||void 0===n||null===(o=n.format({average:!0,mantissa:5,trimMantissa:!0,lowPrecision:!1}))||void 0===o?void 0:o.toUpperCase()},[a().createElement("strong",{title:U,"aria-label":U})])))),a().createElement(f.MinHeight,{key:"totalMonthlyFooter"},a().createElement(i.CardFooter,null,a().createElement("div",{className:B?"":"hidden"},M&&P&&c("curiosity-graph.cardFooterMetric",{date:l().utc(P).format(p.i3.timestampUTCTimeFormats.yearTimeShort)}))))))),a().createElement(i.Flex,{flex:{default:"flex_3"},direction:{default:"column"},alignSelf:{default:"alignSelfStretch"}},a().createElement(i.FlexItem,{className:"curiosity-usage-graph__totals-graph-column"},u)))};y.defaultProps={children:null,t:g.translate,useMetricsSelector:d.useMetricsSelector,useProductGraphTallyQuery:c.useProductGraphTallyQuery}},91339:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,MinHeight:()=>d});var n=r(15671),a=r(43144),i=r(97326),o=r(60136),l=r(54062),u=r(92950),s=r.n(u),c=r(76006),d=function(e){(0,o.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;(0,n.Z)(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).containerRef=s().createRef(),e.innerContainerRef=s().createRef(),e.updatedContainerWidth=0,e.resizeObserver=c.BM.noop,e.onResizeContainer=function(){var t,r,n=(0,i.Z)(e).updatedContainerWidth,a=e.props.updateOnResize,o=(null===(t=e.containerRef)||void 0===t||null===(r=t.current)||void 0===r?void 0:r.clientWidth)||0;a&&o!==n&&(e.updatedContainerWidth=o,e.setMinHeight(!0))},e}return(0,a.Z)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props.updateOnResize;window.setTimeout((function(){e.setMinHeight()})),t&&this.setResizeObserver()}},{key:"componentDidUpdate",value:function(){var e=this;this.props.updateOnContent&&window.setTimeout((function(){e.setMinHeight()}))}},{key:"componentWillUnmount",value:function(){this.resizeObserver()}},{key:"setMinHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.props.minHeight,n=this.containerRef.current,a=void 0===n?{}:n,i=this.innerContainerRef.current,o=void 0===i?{}:i;null!=a&&a.style&&(r>(e=t?(null==o?void 0:o.clientHeight)||0:(null==a?void 0:a.clientHeight)||0)&&(e=r),a.style.minHeight="".concat(e,"px"))}},{key:"setResizeObserver",value:function(){var e=this;window.addEventListener("resize",this.onResizeContainer),this.resizeObserver=function(){return window.removeEventListener("resize",e.onResizeContainer)}}},{key:"render",value:function(){var e=this.props.children;return s().createElement("div",{className:"curiosity-minheight",ref:this.containerRef},s().createElement("div",{ref:this.innerContainerRef},e))}}]),r}(s().Component);d.defaultProps={updateOnContent:!1,updateOnResize:!0,minHeight:0}},41848:e=>{e.exports=function(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}},13:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},2958:(e,t,r)=>{var n=r(46384),a=r(90939);e.exports=function(e,t,r,i){var o=r.length,l=o,u=!i;if(null==e)return!l;for(e=Object(e);o--;){var s=r[o];if(u&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<l;){var c=(s=r[o])[0],d=e[c],f=s[1];if(u&&s[2]){if(void 0===d&&!(c in e))return!1}else{var v=new n;if(i)var p=i(d,f,c,e,t,v);if(!(void 0===p?a(f,d,3,i,v):p))return!1}}return!0}},67206:(e,t,r)=>{var n=r(91573),a=r(16432),i=r(6557),o=r(1469),l=r(39601);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?o(e)?a(e[0],e[1]):n(e):l(e)}},91573:(e,t,r)=>{var n=r(2958),a=r(1499),i=r(42634);e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},16432:(e,t,r)=>{var n=r(90939),a=r(27361),i=r(79095),o=r(15403),l=r(89162),u=r(42634),s=r(40327);e.exports=function(e,t){return o(e)&&l(t)?u(s(e),t):function(r){var o=a(r,e);return void 0===o&&o===t?i(r,e):n(t,o,3)}}},40371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},79152:(e,t,r)=>{var n=r(97786);e.exports=function(e){return function(t){return n(t,e)}}},27561:(e,t,r)=>{var n=r(67990),a=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(a,""):e}},1499:(e,t,r)=>{var n=r(89162),a=r(3674);e.exports=function(e){for(var t=a(e),r=t.length;r--;){var i=t[r],o=e[i];t[r]=[i,o,n(o)]}return t}},222:(e,t,r)=>{var n=r(71811),a=r(35694),i=r(1469),o=r(65776),l=r(41780),u=r(40327);e.exports=function(e,t,r){for(var s=-1,c=(t=n(t,e)).length,d=!1;++s<c;){var f=u(t[s]);if(!(d=null!=e&&r(e,f)))break;e=e[f]}return d||++s!=c?d:!!(c=null==e?0:e.length)&&l(c)&&o(f,c)&&(i(e)||a(e))}},89162:(e,t,r)=>{var n=r(13218);e.exports=function(e){return e==e&&!n(e)}},42634:e=>{e.exports=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}},67990:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},30998:(e,t,r)=>{var n=r(41848),a=r(67206),i=r(40554),o=Math.max;e.exports=function(e,t,r){var l=null==e?0:e.length;if(!l)return-1;var u=null==r?0:i(r);return u<0&&(u=o(l+u,0)),n(e,a(t,3),u)}},79095:(e,t,r)=>{var n=r(13),a=r(222);e.exports=function(e,t){return null!=e&&a(e,t,n)}},6557:e=>{e.exports=function(e){return e}},39601:(e,t,r)=>{var n=r(40371),a=r(79152),i=r(15403),o=r(40327);e.exports=function(e){return i(e)?n(o(e)):a(e)}},18601:(e,t,r)=>{var n=r(14841);e.exports=function(e){return e?Infinity===(e=n(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},40554:(e,t,r)=>{var n=r(18601);e.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},14841:(e,t,r)=>{var n=r(27561),a=r(13218),i=r(33448),o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=l.test(e);return r||u.test(e)?s(e.slice(2),r?2:8):o.test(e)?NaN:+e}}}]);
//# sourceMappingURL=../sourcemaps/6873.bf9e44a0fafe6c04b7a3e39aeee81936.js.map